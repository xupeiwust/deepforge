{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/vscode-languageserver-protocol/lib/main.js","webpack:///./node_modules/monaco-languageclient/lib/vscode-compatibility.js","webpack:///./node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/messages.js","webpack:///./node_modules/vscode-jsonrpc/lib/is.js","webpack:///./node_modules/vscode-jsonrpc/lib/events.js","webpack:///./node_modules/monaco-languageclient/lib/services.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/vscode-languageclient/lib/client.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/monaco-languageclient/lib/disposable.js","webpack:///./node_modules/vscode-languageclient/lib/utils/is.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/os-browserify/browser.js","webpack:///./node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/utils/is.js","webpack:///./node_modules/monaco-languageclient/lib/index.js","webpack:///./node_modules/vscode-languageclient/lib/protocolCompletionItem.js","webpack:///./node_modules/vscode-languageclient/lib/protocolCodeLens.js","webpack:///./node_modules/vscode-languageclient/lib/protocolDocumentLink.js","webpack:///./node_modules/vscode-languageclient/lib/utils/uuid.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-commands.js","webpack:///./node_modules/monaco-languageclient/lib/console-window.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-languages.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-workspace.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-converter.js","webpack:///./src/visualizers/widgets/MonacoEditor/monaco-languageclientbrowser/src/monaco-languageclient.js","webpack:///./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.progress.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js","webpack:///./node_modules/monaco-languageclient/lib/connection.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-language-client.js","webpack:///./node_modules/monaco-languageclient/lib/vscode-api.js","webpack:///./node_modules/vscode-uri/lib/esm/index.js","webpack:///./node_modules/vscode-languageclient/lib/codeConverter.js","webpack:///./node_modules/vscode-languageclient/lib/protocolConverter.js","webpack:///./node_modules/vscode-languageclient/lib/utils/async.js","webpack:///./node_modules/vscode-languageclient/lib/progressPart.js","webpack:///./node_modules/vscode-languageclient/lib/typeDefinition.js","webpack:///./node_modules/vscode-languageclient/lib/configuration.js","webpack:///./node_modules/vscode-languageclient/lib/implementation.js","webpack:///./node_modules/vscode-languageclient/lib/colorProvider.js","webpack:///./node_modules/vscode-languageclient/lib/workspaceFolders.js","webpack:///./node_modules/vscode-languageclient/lib/foldingRange.js","webpack:///./node_modules/vscode-languageclient/lib/declaration.js","webpack:///./node_modules/glob-to-regexp/index.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-diagnostic-collection.js","webpack:///./node_modules/monaco-languageclient/lib/monaco-services.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__export","vscode_jsonrpc_1","ErrorCodes","ResponseError","CancellationToken","CancellationTokenSource","Disposable","Event","Emitter","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","RequestType","RequestType0","NotificationType","NotificationType0","MessageReader","MessageWriter","ConnectionStrategy","StreamMessageReader","StreamMessageWriter","IPCMessageReader","IPCMessageWriter","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","ProgressType","callHierarchy","st","Proposed","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","method","type","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","createProtocolConnection","reader","writer","logger","strategy","createMessageConnection","vscode_api_1","services_1","createVSCodeApi","Services","Is","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","SocketMessageReader","messageWriter_1","SocketMessageWriter","events_1","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","ConnectionErrors","ConnectionState","NullLogger","freeze","error","warn","info","log","fromString","string","Off","toLowerCase","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","code","message","super","this","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","timer","tracer","starRequestHandler","undefined","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","Map","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","queue","isRequestMessage","set","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","shift","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","data","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","length","push","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","onProgress","_type","has","dispose","sendProgress","onUnhandledProgress","event","sendRequest","throwIfNotListening","is","last","slice","map","Promise","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","onUnhandledNotification","onDispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","console","verbose","candidate","input","output","read","end","isMessageWriter","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","Array","isArray","Number","stringArray","every","elem","_disposable","None","CallbackList","context","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","args","ret","callbacks","contexts","apply","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","vscode_languageserver_protocol_1","global","symbol","services","install","isDocumentSelector","selector","DocumentFilter","SignatureHelpTriggerKind","VsCodeDiagnosticSeverity","DocumentIdentifier","arg","ConfigurationTarget","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","arguments","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","CR","Buffer","from","LF","MessageBuffer","encoding","index","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","Math","ceil","current","split","header","indexOf","substr","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","append","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","parse","firePartialMessage","waitingTime","eventEmitter","socket","AbstractMessageWriter","count","writable","errorCount","join","sending","doWriteMessage","send","destroy","handleError","g","Function","vscode_1","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","Restart","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","languages","match","registerOptions","documentSelector","_listener","values","notificationSent","_data","clear","document","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_registrations","registration","registerLanguageProvider","provider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","options","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","Deprecated","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","position","asCompletionParams","asCompletionResult","logFailedRequest","provideCompletionItem","resolveCompletionItem","resolveProvider","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","range","_provideCodeActions","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","path","obj","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","commands","registerCommand","MessageTransports","OnReady","_resolve","_reject","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","showNotification","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","createConnection","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","clientInfo","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","folders","folder","scheme","cleanUp","shutdown","exit","cleanUpChannel","channel","diagnostics","_a","_b","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","request","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","fillClientCapabilities","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","RequestCancelled","ContentModified","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","encodingOrOffset","TypeError","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","isEncoding","actual","isBuffer","checked","val","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","x","y","list","pos","swap16","swap32","swap64","equals","max","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","replace","stringtrim","base64clean","src","dst","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","MessageReadError","AbstractMessageType","_numberOfParams","_","DisposableCollection","pop","thenable","typedArray","check","resolved","self","Timeout","clearFn","_clearFn","scope","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","random","addEventListener","attachEvent","task","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","isCancellationRequested","Cancelled","shortcutEvent","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","touch","next","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","platform","tmpdir","pipeName","connectResolve","connected","server","createServer","onConnected","normalizeArray","allowAboveRoot","up","unshift","filter","xs","f","resolvedPath","resolvedAbsolute","charAt","normalize","isAbsolute","trailingSlash","paths","relative","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","matchedSlash","basename","extname","startDot","startPart","preDotState","endianness","hostname","location","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","navigator","appVersion","networkInterfaces","getNetworkInterfaces","arch","tmpDir","EOL","homedir","port","objectLiteral","ProtocolCompletionItem","CompletionItem","label","default","ProtocolCodeLens","CodeLens","ProtocolDocumentLink","DocumentLink","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","_chars","v4","empty","_UUIDPattern","isUUID","test","MonacoCommands","editor","_commandService","addCommand","_accessor","ConsoleWindow","channels","Log","existing","line","__awaiter","_arguments","P","generator","fulfilled","step","rejected","globToRegExp","monaco_diagnostic_collection_1","disposable_1","MonacoModelIdentifier","testGlob","pattern","extended","globstar","fromDocument","monaco","languageId","fromModel","model","getModeId","MonacoLanguages","p2m","m2p","matchModel","MonacoDiagnosticCollection","createCompletionProvider","providers","language","matchLanguage","wordUntil","getWordUntilPosition","defaultRange","lineNumber","startColumn","endColumn","protocolItem","resolvedItem","resolvedCompletionItem","createHoverProvider","hover","createSignatureHelpProvider","signatureHelpTriggerCharacters","signatureHelpRetriggerCharacters","signatureHelp","asSignatureHelpContext","asSignatureHelpResult","createDefinitionProvider","referenceProvider","createReferenceProvider","createDocumentHighlightProvider","createDocumentSymbolProvider","createCodeActionProvider","registerCodeActionProvider","asCodeActionParams","asCodeActionList","createCodeLensProvider","asCodeLensList","protocolCodeLens","resolvedCodeLens","documentFormattingEditProvider","createDocumentFormattingEditProvider","asDocumentFormattingParams","documentRangeFormattingEditProvider","createDocumentRangeFormattingEditProvider","asDocumentRangeFormattingParams","onTypeFormattingEditProvider","createOnTypeFormattingEditProvider","autoFormatTriggerCharacters","asDocumentOnTypeFormattingParams","createRenameProvider","asRenameParams","linkProvider","createDocumentLinkProvider","registerLinkProvider","provideLinks","resolveLink","url","documentLink","resolvedLink","implementationProvider","createImplementationProvider","registerImplementationProvider","provideImplementation","typeDefinitionProvider","createTypeDefinitionProvider","registerTypeDefinitionProvider","provideTypeDefinition","documentColorProvider","createDocumentColorProvider","registerColorProvider","provideDocumentColors","asColorInformations","provideColorPresentations","color","asColorPresentations","foldingRangeProvider","createFoldingRangeProvider","registerFoldingRangeProvider","provideFoldingRanges","asFoldingRanges","Set","matchLanguageByFilter","MonacoWorkspace","_rootUri","documents","onDidOpenTextDocumentEmitter","onDidCloseTextDocumentEmitter","onDidChangeTextDocumentEmitter","getModels","addModel","onDidCreateModel","onWillDisposeModel","removeModel","setModel","onDidChangeContent","rangeLength","text","TextDocument","getVersionId","getValue","models","reduce","acc","currentEdit","textEdit","getModel","editsByResource","operations","lift","pushEditOperations","resourceEdit","identifier","major","minor","forceMoveMarkers","ls","MonacoToProtocolConverter","column","character","insert","startLineNumber","endLineNumber","asCompletionContext","triggerKind","asCompletionTriggerKind","triggerCharacter","asSignatureHelpTriggerKind","isRetrigger","activeSignatureHelp","signatures","signatureInfo","asSignatureInformation","activeParameter","activeSignature","documentation","asMarkupContent","parameters","paramInfo","asParameterInformation","markupContent","ContentChange","TriggerCharacter","Invoke","CompletionTriggerKind","TriggerForIncompleteCompletions","Invoked","detail","asDocumentation","filterText","fillPrimaryInsertText","asCompletionItemKind","originalItemKind","sortText","additionalTextEdits","commitCharacters","deprecated","original","Customcolor","format","InsertTextFormat","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","insertText","insertTextFormat","fromEdit","newText","items","asTextEdit","includeDeclaration","MarkerSeverity","DiagnosticSeverity","Information","Hint","severity","asDiagnosticSeverity","Diagnostic","markers","asDiagnostic","CodeActionContext","only","tabSize","insertSpaces","ProtocolToMonacoConverter","modelVersionId","CreateFile","newUri","RenameFile","oldUri","DeleteFile","asResourceEdits","lenses","CodeAction","children","asDocumentSymbol","asSymbolKind","tags","selectionRange","information","asSymbolInformation","asLocation","containerName","asDocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","LocationLink","asLocationLink","targetUri","targetSelectionRange","originSelectionRange","asSignatureInformations","asParameterInformations","contents","asHoverContent","content","asMarkdownString","MarkupContent","diagnostic","asSeverity","asRelatedInformations","asRelatedInformation","incomplete","suggestions","isIncomplete","asCompletionInsertText","isSnippet","itemKind","preselect","documentLinks","links","Position","asColorInformation","asColorPresentation","asFoldingRange","startLine","endLine","asFoldingRangeKind","FoldingRangeKind","Comment","Imports","Region","Location","ColorInformation","ColorPresentation","FoldingRange","DiagnosticRelatedInformation","TextEdit","WorkspaceEdit","one","two","three","four","defined","targetRange","red","green","blue","alpha","startCharacter","endCharacter","_i","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlight","SymbolTag","SymbolInformation","FormattingOptions","SelectionRange","TextEditChangeImpl","all","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","fromPlainText","plainText","SourceFixAll","commandOrEdit","isPreferred","parent","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","diff","lastModifiedOffset","startOffset","endOffset","substring","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","low","high","mid","lineOffset","nextLineOffset","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","protocol_selectionRange_1","SelectionRangeRequest","protocol_progress_1","DocumentSelector","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","Abort","Transactional","Undo","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","resultType","resultId","main_1","client_1","typeDefinition_1","configuration_1","implementation_1","colorProvider_1","workspaceFolders_1","foldingRange_1","declaration_1","MonacoLanguageClient","connectionProvider","doCreateConnection","Proxy","prop","bypassConversion","reason","endsWith","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","foldingRangeFeature","FoldingRangeFeature","DeclarationFeature","vscode","vscode_uri_1","ServicesModule","servicesProvider","unsupported","URI","contains","intersects","fs","workspaceFile","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","configuration","configurations","defaultValue","onDidChangeWorkspaceFolders","getWorkspaceFolder","asRelativePath","updateWorkspaceFolders","findFiles","saveAll","openTextDocument","registerTextDocumentContentProvider","registerTaskProvider","registerFileSystemProvider","ApiDiagnosticCollection","collection","arg0","arg1","diag","registerCallHierarchyProvider","registerDeclarationProvider","provideDeclaration","firstItem","registerSelectionRangeProvider","provideSelectionRanges","positions","getLanguages","setTextDocumentLanguage","getDiagnostics","setLanguageConfiguration","onDidChangeDiagnostics","showMessage","hide","withProgress","report","showTextDocument","createTextEditorDecorationType","showQuickPick","showWorkspaceFolderPick","showOpenDialog","showSaveDialog","showInputBox","createWebviewPanel","setStatusBarMessage","withScmProgress","createStatusBarItem","createTerminal","registerTreeDataProvider","createTreeView","registerWebviewPanelSerializer","onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","onDidChangeTextEditorSelection","onDidChangeTextEditorVisibleRanges","onDidChangeTextEditorOptions","onDidChangeTextEditorViewColumn","onDidChangeActiveTerminal","onDidOpenTerminal","onDidCloseTerminal","onDidChangeWindowState","createQuickPick","createInputBox","registerUriHandler","registerTextEditorCommand","getCommands","callOnDispose","extendStatics","isWindows","__extends","__","constructor","userAgent","_schemePattern","_singleSlashStart","_doubleSlashStart","_slash","_regexp","schemeOrData","authority","fragment","_strict","_schemeFix","_referenceResolution","_validateUri","isUri","thing","with","uriToFsPath","_URI","exec","percentDecode","idx","components","skipEncoding","_asFormatted","revive","_formatted","external","_fsPath","_sep","_pathSepMarker","_super","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","encodeURIComponent","escaped","encodeURIComponentMinimal","keepDriveLetterCasing","encoder","userinfo","_rEncodedAsHex","decodeURIComponentGraceful","decodeURIComponent","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","asWorkerPosition","inserting","replacing","isInsertReplace","asDiagnosticTag","tag","converted","asDiagnosticTags","asCompletionItemTag","asSymbolTag","isTextDocument","isTextDocumentChangeEvent","includeContent","asPositions","SnippetString","asCompletionItemTags","asSymbolTags","tooltip","CodeBlock","asDiagnosticRelatedInformation","MarkdownString","asLocationResult","child","kindMapping","asCodeActionKind","asColor","ci","cp","presentation","asSelectionRange","asRanges","appendCodeblock","appendMarkdown","appendText","SignatureHelp","asDeclarationResult","asCommands","foldingRanges","colorInformation","colorPresentations","asSelectionRanges","selectionRanges","defaultDelay","completionPromise","onSuccess","delay","cancelTimeout","_reported","begin","cancellable","ProgressLocation","Notification","Window","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","delta","increment","typeDefinitionSupport","getRegistration","scopeUri","implementationSupport","colorProvider","requestParams","access","arrayDiff","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","removed","added","doSendEvent","addedFolders","removedFolders","didChangeWorkspaceFolders","sendInitialEvent","rangeLimit","lineFoldingOnly","declarationSupport","declarationProvider","glob","opts","reStr","inGroup","flags","prevChar","starCount","nextChar","RegExp","toDispose","modelDiagnostics","MonacoModelDiagnostics","owner","_markers","doUpdateModelMarkers","updateModelMarkers","setModelMarkers","monaco_converter_1","monaco_commands_1","monaco_languages_1","monaco_workspace_1","console_window_1","MonacoServices"],"mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,SACb,GAAqB,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,OACP,CACJ,IAAIK,EAAIL,IACR,IAAI,IAAIM,KAAKD,GAAuB,iBAAZJ,QAAuBA,QAAUF,GAAMO,GAAKD,EAAEC,IAPxE,CASGC,QAAQ,WACX,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUT,QAGnC,IAAIC,EAASM,EAAiBE,GAAY,CACzCJ,EAAGI,EACHC,GAAG,EACHV,QAAS,IAUV,OANAW,EAAQF,GAAUG,KAAKX,EAAOD,QAASC,EAAQA,EAAOD,QAASQ,GAG/DP,EAAOS,GAAI,EAGJT,EAAOD,QA0Df,OArDAQ,EAAoBK,EAAIF,EAGxBH,EAAoBM,EAAIP,EAGxBC,EAAoBO,EAAI,SAASf,EAASgB,EAAMC,GAC3CT,EAAoBU,EAAElB,EAASgB,IAClCG,OAAOC,eAAepB,EAASgB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhET,EAAoBe,EAAI,SAASvB,GACX,oBAAXwB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAepB,EAASwB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBO,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAASjC,GAChC,IAAIgB,EAAShB,GAAUA,EAAO4B,WAC7B,WAAwB,OAAO5B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAO,EAAoBO,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRT,EAAoBU,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG5B,EAAoB+B,EAAI,GAIjB/B,EAAoBA,EAAoBgC,EAAI,I,+BC7ErD,SAASC,EAAS5B,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GACjC1C,EAAQ2C,WAAaD,EAAiBC,WACtC3C,EAAQ4C,cAAgBF,EAAiBE,cACzC5C,EAAQ6C,kBAAoBH,EAAiBG,kBAC7C7C,EAAQ8C,wBAA0BJ,EAAiBI,wBACnD9C,EAAQ+C,WAAaL,EAAiBK,WACtC/C,EAAQgD,MAAQN,EAAiBM,MACjChD,EAAQiD,QAAUP,EAAiBO,QACnCjD,EAAQkD,MAAQR,EAAiBQ,MACjClD,EAAQmD,YAAcT,EAAiBS,YACvCnD,EAAQoD,qBAAuBV,EAAiBU,qBAChDpD,EAAQqD,qBAAuBX,EAAiBW,qBAChDrD,EAAQsD,YAAcZ,EAAiBY,YACvCtD,EAAQuD,aAAeb,EAAiBa,aACxCvD,EAAQwD,iBAAmBd,EAAiBc,iBAC5CxD,EAAQyD,kBAAoBf,EAAiBe,kBAC7CzD,EAAQ0D,cAAgBhB,EAAiBgB,cACzC1D,EAAQ2D,cAAgBjB,EAAiBiB,cACzC3D,EAAQ4D,mBAAqBlB,EAAiBkB,mBAC9C5D,EAAQ6D,oBAAsBnB,EAAiBmB,oBAC/C7D,EAAQ8D,oBAAsBpB,EAAiBoB,oBAC/C9D,EAAQ+D,iBAAmBrB,EAAiBqB,iBAC5C/D,EAAQgE,iBAAmBtB,EAAiBsB,iBAC5ChE,EAAQiE,0BAA4BvB,EAAiBuB,0BACrDjE,EAAQkE,0BAA4BxB,EAAiBwB,0BACrDlE,EAAQmE,uBAAyBzB,EAAiByB,uBAClDnE,EAAQoE,4BAA8B1B,EAAiB0B,4BACvDpE,EAAQqE,4BAA8B3B,EAAiB2B,4BACvDrE,EAAQsE,aAAe5B,EAAiB4B,aACxC7B,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjB,MAAM8B,EAAgB,EAAQ,IACxBC,EAAK,EAAQ,KAEnB,SAAWC,GACP,IAAIC,EAKAC,EAKAC,EAQAC,EAKAC,EAKAC,GA3BJ,SAAWL,GACPA,EAA4BM,OAAST,EAAcG,4BAA4BM,OAC/EN,EAA4BO,KAAOV,EAAcG,4BAA4BO,KAFjF,CAGGP,EAA8BD,EAASC,8BAAgCD,EAASC,4BAA8B,KAEjH,SAAWC,GACPA,EAAkCK,OAAST,EAAcI,kCAAkCK,OAC3FL,EAAkCM,KAAOV,EAAcI,kCAAkCM,KAF7F,CAGGN,EAAoCF,EAASE,oCAAsCF,EAASE,kCAAoC,KAEnI,SAAWC,GACPA,EAAkCI,OAAST,EAAcK,kCAAkCI,OAC3FJ,EAAkCK,KAAOV,EAAcK,kCAAkCK,KAF7F,CAGGL,EAAoCH,EAASG,oCAAsCH,EAASG,kCAAoC,KACnIH,EAASS,mBAAqBV,EAAGU,mBACjCT,EAASU,uBAAyBX,EAAGW,uBACrCV,EAASW,eAAiBZ,EAAGY,eAE7B,SAAWP,GACPA,EAAsBG,OAASR,EAAGK,sBAAsBG,OACxDH,EAAsBI,KAAOT,EAAGK,sBAAsBI,KAF1D,CAGGJ,EAAwBJ,EAASI,wBAA0BJ,EAASI,sBAAwB,KAE/F,SAAWC,GACPA,EAA2BE,OAASR,EAAGM,2BAA2BE,OAClEF,EAA2BG,KAAOT,EAAGM,2BAA2BG,KAFpE,CAGGH,EAA6BL,EAASK,6BAA+BL,EAASK,2BAA6B,KAE9G,SAAWC,GACPA,EAA2BC,OAASR,EAAGO,2BAA2BC,OAClED,EAA2BE,KAAOT,EAAGO,2BAA2BE,KAFpE,CAGGF,EAA6BN,EAASM,6BAA+BN,EAASM,2BAA6B,KAjClH,CAkCc/E,EAAQyE,WAAazE,EAAQyE,SAAW,KAItDzE,EAAQqF,yBAHR,SAAkCC,EAAQC,EAAQC,EAAQC,GACtD,OAAO/C,EAAiBgD,wBAAwBJ,EAAQC,EAAQC,EAAQC,K,6BC1E5E,MAAME,EAAe,EAAQ,IACvBC,EAAa,EAAQ,GAC3B3F,EAAOD,QAAU2F,EAAaE,gBAAgBD,EAAWE,SAASxE,M,8BCPlE,YAMA,SAASmB,EAAS5B,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqE,EAAK,EAAQ,GACbC,EAAa,EAAQ,IAC3BhG,EAAQsD,YAAc0C,EAAW1C,YACjCtD,EAAQuD,aAAeyC,EAAWzC,aAClCvD,EAAQiG,aAAeD,EAAWC,aAClCjG,EAAQkG,aAAeF,EAAWE,aAClClG,EAAQmG,aAAeH,EAAWG,aAClCnG,EAAQoG,aAAeJ,EAAWI,aAClCpG,EAAQqG,aAAeL,EAAWK,aAClCrG,EAAQsG,aAAeN,EAAWM,aAClCtG,EAAQuG,aAAeP,EAAWO,aAClCvG,EAAQwG,aAAeR,EAAWQ,aAClCxG,EAAQyG,aAAeT,EAAWS,aAClCzG,EAAQ4C,cAAgBoD,EAAWpD,cACnC5C,EAAQ2C,WAAaqD,EAAWrD,WAChC3C,EAAQwD,iBAAmBwC,EAAWxC,iBACtCxD,EAAQyD,kBAAoBuC,EAAWvC,kBACvCzD,EAAQ0G,kBAAoBV,EAAWU,kBACvC1G,EAAQ2G,kBAAoBX,EAAWW,kBACvC3G,EAAQ4G,kBAAoBZ,EAAWY,kBACvC5G,EAAQ6G,kBAAoBb,EAAWa,kBACvC7G,EAAQ8G,kBAAoBd,EAAWc,kBACvC9G,EAAQ+G,kBAAoBf,EAAWe,kBACvC/G,EAAQgH,kBAAoBhB,EAAWgB,kBACvChH,EAAQiH,kBAAoBjB,EAAWiB,kBACvCjH,EAAQkH,kBAAoBlB,EAAWkB,kBACvC,MAAMC,EAAkB,EAAQ,GAChCnH,EAAQ0D,cAAgByD,EAAgBzD,cACxC1D,EAAQ6D,oBAAsBsD,EAAgBtD,oBAC9C7D,EAAQ+D,iBAAmBoD,EAAgBpD,iBAC3C/D,EAAQoH,oBAAsBD,EAAgBC,oBAC9C,MAAMC,EAAkB,EAAQ,GAChCrH,EAAQ2D,cAAgB0D,EAAgB1D,cACxC3D,EAAQ8D,oBAAsBuD,EAAgBvD,oBAC9C9D,EAAQgE,iBAAmBqD,EAAgBrD,iBAC3ChE,EAAQsH,oBAAsBD,EAAgBC,oBAC9C,MAAMC,EAAW,EAAQ,GACzBvH,EAAQ+C,WAAawE,EAASxE,WAC9B/C,EAAQgD,MAAQuE,EAASvE,MACzBhD,EAAQiD,QAAUsE,EAAStE,QAC3B,MAAMuE,EAAiB,EAAQ,IAC/BxH,EAAQ8C,wBAA0B0E,EAAe1E,wBACjD9C,EAAQ6C,kBAAoB2E,EAAe3E,kBAC3C,MAAM4E,EAAc,EAAQ,IAG5B,IAAIC,EAIAC,EAeAzE,EAsCAC,EAiBAC,EAIAC,EAIAuE,EA+BAC,EAnHJpF,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KAEjB,SAAWiF,GACPA,EAAmBzC,KAAO,IAAIe,EAAWxC,iBAAiB,mBAD9D,CAEGkE,IAAuBA,EAAqB,KAE/C,SAAWC,GACPA,EAAqB1C,KAAO,IAAIe,EAAWxC,iBAAiB,cADhE,CAEGmE,IAAyBA,EAAuB,KAKnD3H,EAAQsE,aAJR,MACI,iBAIJtE,EAAQ8H,WAAa3G,OAAO4G,OAAO,CAC/BC,MAAO,OACPC,KAAM,OACNC,KAAM,OACNC,IAAK,SAGT,SAAWjF,GACPA,EAAMA,EAAW,IAAI,GAAK,MAC1BA,EAAMA,EAAgB,SAAI,GAAK,WAC/BA,EAAMA,EAAe,QAAI,GAAK,UAHlC,CAIGA,EAAQlD,EAAQkD,QAAUlD,EAAQkD,MAAQ,KAC7C,SAAWA,GAiBPA,EAAMkF,WAhBN,SAAoB1G,GAChB,IAAKqE,EAAGsC,OAAO3G,GACX,OAAOwB,EAAMoF,IAGjB,OADA5G,EAAQA,EAAM6G,eAEV,IAAK,MACD,OAAOrF,EAAMoF,IACjB,IAAK,WACD,OAAOpF,EAAMsF,SACjB,IAAK,UACD,OAAOtF,EAAMuF,QACjB,QACI,OAAOvF,EAAMoF,MAgBzBpF,EAAMwF,SAZN,SAAkBhH,GACd,OAAQA,GACJ,KAAKwB,EAAMoF,IACP,MAAO,MACX,KAAKpF,EAAMsF,SACP,MAAO,WACX,KAAKtF,EAAMuF,QACP,MAAO,UACX,QACI,MAAO,QA3BvB,CA+BGvF,EAAQlD,EAAQkD,QAAUlD,EAAQkD,MAAQ,KAE7C,SAAWC,GACPA,EAAkB,KAAI,OACtBA,EAAkB,KAAI,OAF1B,CAGiBnD,EAAQmD,cAAgBnD,EAAQmD,YAAc,KAC/D,SAAWA,GAUPA,EAAYiF,WATZ,SAAoB1G,GAEhB,MAAc,UADdA,EAAQA,EAAM6G,eAEHpF,EAAYwF,KAGZxF,EAAYyF,MAP/B,CAWGzF,EAAcnD,EAAQmD,cAAgBnD,EAAQmD,YAAc,KAE/D,SAAWC,GACPA,EAAqB6B,KAAO,IAAIe,EAAWxC,iBAAiB,0BADhE,CAEGJ,EAAuBpD,EAAQoD,uBAAyBpD,EAAQoD,qBAAuB,KAE1F,SAAWC,GACPA,EAAqB4B,KAAO,IAAIe,EAAWxC,iBAAiB,0BADhE,CAEGH,EAAuBrD,EAAQqD,uBAAyBrD,EAAQqD,qBAAuB,KAE1F,SAAWuE,GAIPA,EAAiBA,EAAyB,OAAI,GAAK,SAInDA,EAAiBA,EAA2B,SAAI,GAAK,WAIrDA,EAAiBA,EAAmC,iBAAI,GAAK,mBAZjE,CAaGA,EAAmB5H,EAAQ4H,mBAAqB5H,EAAQ4H,iBAAmB,KAC9E,MAAMiB,UAAwBC,MAC1B,YAAYC,EAAMC,GACdC,MAAMD,GACNE,KAAKH,KAAOA,EACZ5H,OAAOgI,eAAeD,KAAML,EAAgBxG,YAmBpD,SAAS+G,EAAyBC,EAAeC,EAAe9D,EAAQC,GACpE,IAAI8D,EAAiB,EACjBC,EAA4B,EAC5BC,EAA+B,EAEnC,IAKIC,EAMAC,EAXAC,OAAqBC,EACrBC,EAAkB3I,OAAOY,OAAO,MAChCgI,OAA0BF,EAC1BG,EAAuB7I,OAAOY,OAAO,MACrCkI,EAAmB,IAAIC,IAEvBC,EAAe,IAAI1C,EAAY2C,UAC/BC,EAAmBlJ,OAAOY,OAAO,MACjCuI,EAAgBnJ,OAAOY,OAAO,MAC9BwI,EAAQrH,EAAMoF,IACdkC,EAAcrH,EAAYyF,KAE1B6B,EAAQ5C,EAAgB6C,IACxBC,EAAe,IAAIpD,EAAStE,QAC5B2H,EAAe,IAAIrD,EAAStE,QAC5B4H,EAA+B,IAAItD,EAAStE,QAC5C6H,EAA2B,IAAIvD,EAAStE,QACxC8H,EAAiB,IAAIxD,EAAStE,QAClC,SAAS+H,EAAsBC,GAC3B,MAAO,OAASA,EAAGvC,WAavB,SAASwC,EAAkBC,EAAOnC,GAXlC,IAAgCiC,EAYxBjF,EAAWoF,iBAAiBpC,GAC5BmC,EAAME,IAAIL,EAAsBhC,EAAQiC,IAAKjC,GAExChD,EAAWsF,kBAAkBtC,GAClCmC,EAAME,IAfC,QADiBJ,EAgBSjC,EAAQiC,IAdlC,kBAAoBxB,GAA8Bf,WAGlD,OAASuC,EAAGvC,WAW2BM,GAG9CmC,EAAME,IAVH,UAAY7B,GAA2Bd,WAUFM,GAGhD,SAASuC,EAAmBC,IAG5B,SAASC,IACL,OAAOhB,IAAU5C,EAAgB6D,UAErC,SAASC,IACL,OAAOlB,IAAU5C,EAAgB+D,OAErC,SAASC,IACL,OAAOpB,IAAU5C,EAAgBiE,SAErC,SAASC,IACDtB,IAAU5C,EAAgB6C,KAAOD,IAAU5C,EAAgB6D,YAC3DjB,EAAQ5C,EAAgB+D,OACxBhB,EAAaoB,UAAKnC,IAc1B,SAASoC,IACDvC,GAA+B,IAAtBS,EAAa+B,OAG1BxC,EAAQyC,EAAa,KACjBzC,OAAQG,EAIhB,WACI,GAA0B,IAAtBM,EAAa+B,KACb,OAEJ,IAAIlD,EAAUmB,EAAaiC,QAC3B,IACQpG,EAAWoF,iBAAiBpC,GAyCxC,SAAuBqD,GACnB,GAAIR,IAGA,OAEJ,SAASS,EAAMC,EAAevH,EAAQwH,GAClC,IAAIxD,EAAU,CACVyD,QAzII,MA0IJxB,GAAIoB,EAAepB,IAEnBsB,aAAyBvG,EAAWpD,cACpCoG,EAAQhB,MAAQuE,EAAcG,SAG9B1D,EAAQ2D,YAA2B,IAAlBJ,EAA2B,KAAOA,EAEvDK,EAAqB5D,EAAShE,EAAQwH,GACtClD,EAAcuD,MAAM7D,GAExB,SAAS8D,EAAW9E,EAAOhD,EAAQwH,GAC/B,IAAIxD,EAAU,CACVyD,QAvJI,MAwJJxB,GAAIoB,EAAepB,GACnBjD,MAAOA,EAAM0E,UAEjBE,EAAqB5D,EAAShE,EAAQwH,GACtClD,EAAcuD,MAAM7D,IAiQ5B,SAA8BA,GAC1B,GAAIuB,IAAUrH,EAAMoF,MAAQqB,EACxB,OAEJ,GAAIa,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EACPU,IAAUrH,EAAMuF,SAAWO,EAAQgE,SACnCD,EAAO,WAAWpE,KAAKsE,UAAUjE,EAAQgE,OAAQ,KAAM,UAE3DrD,EAAOxB,IAAI,qBAAqBa,EAAQhE,aAAagE,EAAQiC,QAAS8B,QAGtEG,EAAc,kBAAmBlE,GA7PrCmE,CAAqBd,GACrB,IACIpH,EACAmI,EAFAC,EAAUvD,EAAgBuC,EAAerH,QAGzCqI,IACApI,EAAOoI,EAAQpI,KACfmI,EAAiBC,EAAQC,SAE7B,IAAId,EAAYe,KAAKC,MACrB,GAAIJ,GAAkBxD,EAAoB,CACtC,IAAI6D,EAAqB,IAAIjG,EAAe1E,wBACxC4K,EAAWC,OAAOtB,EAAepB,IACrCX,EAAcoD,GAAYD,EAC1B,IACI,IAAIG,EAEAA,OAD0B,IAA1BvB,EAAeW,aAA+B,IAAT/H,GAA2C,IAAxBA,EAAK4I,eAC7CT,EACVA,EAAeK,EAAmBK,OAClClE,EAAmByC,EAAerH,OAAQyI,EAAmBK,OAE9D/H,EAAGgI,MAAM1B,EAAeW,eAAqB,IAAT/H,GAAmBA,EAAK4I,eAAiB,GAClET,EACVA,KAAkBf,EAAeW,OAAQS,EAAmBK,OAC5DlE,EAAmByC,EAAerH,UAAWqH,EAAeW,OAAQS,EAAmBK,OAG7EV,EACVA,EAAef,EAAeW,OAAQS,EAAmBK,OACzDlE,EAAmByC,EAAerH,OAAQqH,EAAeW,OAAQS,EAAmBK,OAE9F,IAAIE,EAAUJ,EACTA,EAIII,EAAQC,KACbD,EAAQC,KAAM1B,WACHjC,EAAcoD,GACrBpB,EAAMC,EAAeF,EAAerH,OAAQwH,IAC7CxE,WACQsC,EAAcoD,GACjB1F,aAAiBhC,EAAWpD,cAC5BkK,EAAW9E,EAAOqE,EAAerH,OAAQwH,GAEpCxE,GAASjC,EAAGsC,OAAOL,EAAMgB,SAC9B8D,EAAW,IAAI9G,EAAWpD,cAAcoD,EAAWrD,WAAWuL,cAAe,WAAW7B,EAAerH,+BAA+BgD,EAAMgB,WAAYqD,EAAerH,OAAQwH,GAG/KM,EAAW,IAAI9G,EAAWpD,cAAcoD,EAAWrD,WAAWuL,cAAe,WAAW7B,EAAerH,6DAA8DqH,EAAerH,OAAQwH,aAK7LlC,EAAcoD,GACrBpB,EAAMsB,EAAevB,EAAerH,OAAQwH,YAtBrClC,EAAcoD,GA9CjC,SAAsBf,EAAQ3H,EAAQwH,QAGnB,IAAXG,IACAA,EAAS,MAEb,IAAI3D,EAAU,CACVyD,QArKI,MAsKJxB,GAAIoB,EAAepB,GACnB0B,OAAQA,GAEZC,EAAqB5D,EAAShE,EAAQwH,GACtClD,EAAcuD,MAAM7D,GAmCZmF,CAAaP,EAAevB,EAAerH,OAAQwH,IAwB3D,MAAOxE,UACIsC,EAAcoD,GACjB1F,aAAiBhC,EAAWpD,cAC5B0J,EAAMtE,EAAOqE,EAAerH,OAAQwH,GAE/BxE,GAASjC,EAAGsC,OAAOL,EAAMgB,SAC9B8D,EAAW,IAAI9G,EAAWpD,cAAcoD,EAAWrD,WAAWuL,cAAe,WAAW7B,EAAerH,+BAA+BgD,EAAMgB,WAAYqD,EAAerH,OAAQwH,GAG/KM,EAAW,IAAI9G,EAAWpD,cAAcoD,EAAWrD,WAAWuL,cAAe,WAAW7B,EAAerH,6DAA8DqH,EAAerH,OAAQwH,SAKpMM,EAAW,IAAI9G,EAAWpD,cAAcoD,EAAWrD,WAAWyL,eAAgB,oBAAoB/B,EAAerH,QAAWqH,EAAerH,OAAQwH,GA1J/I6B,CAAcrF,GAEThD,EAAWsI,sBAAsBtF,GAqMlD,SAA4BA,GACxB,GAAI6C,IAEA,OAEJ,IACI0C,EADAtJ,OAAO4E,EAEX,GAAIb,EAAQhE,SAAW0C,EAAmBzC,KAAKD,OAC3CuJ,EAAuBvB,IACnB,IAAI/B,EAAK+B,EAAO/B,GACZuD,EAASlE,EAAcqD,OAAO1C,IAC9BuD,GACAA,EAAOC,cAId,CACD,IAAIpB,EAAUrD,EAAqBhB,EAAQhE,QACvCqI,IACAkB,EAAsBlB,EAAQC,QAC9BrI,EAAOoI,EAAQpI,MAGvB,GAAIsJ,GAAuBxE,EACvB,KAoHR,SAAmCf,GAC/B,GAAIuB,IAAUrH,EAAMoF,MAAQqB,GAAUX,EAAQhE,SAAW3B,EAAqB4B,KAAKD,OAC/E,OAEJ,GAAIwF,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EACPU,IAAUrH,EAAMuF,UAEZsE,EADA/D,EAAQgE,OACD,WAAWrE,KAAKsE,UAAUjE,EAAQgE,OAAQ,KAAM,SAGhD,+BAGfrD,EAAOxB,IAAI,0BAA0Ba,EAAQhE,WAAY+H,QAGzDG,EAAc,uBAAwBlE,GApIlC0F,CAA0B1F,QACH,IAAnBA,EAAQgE,aAA+B,IAAT/H,GAA2C,IAAxBA,EAAK4I,eACtDU,EAAsBA,IAAwBxE,EAAwBf,EAAQhE,QAEzEe,EAAGgI,MAAM/E,EAAQgE,eAAqB,IAAT/H,GAAmBA,EAAK4I,eAAiB,GAC3EU,EAAsBA,KAAuBvF,EAAQgE,QAAUjD,EAAwBf,EAAQhE,UAAWgE,EAAQgE,QAGlHuB,EAAsBA,EAAoBvF,EAAQgE,QAAUjD,EAAwBf,EAAQhE,OAAQgE,EAAQgE,QAGpH,MAAOhF,GACCA,EAAMgB,QACNxD,EAAOwC,MAAM,yBAAyBgB,EAAQhE,gCAAgCgD,EAAMgB,WAGpFxD,EAAOwC,MAAM,yBAAyBgB,EAAQhE,qCAKtD6F,EAA6BmB,KAAKhD,GAlP9B2F,CAAmB3F,GAEdhD,EAAWsF,kBAAkBtC,GAwJ9C,SAAwB4F,GACpB,GAAI/C,IAEA,OAEJ,GAA2B,OAAvB+C,EAAgB3D,GACZ2D,EAAgB5G,MAChBxC,EAAOwC,MAAM,qDAAqDW,KAAKsE,UAAU2B,EAAgB5G,WAAO6B,EAAW,IAGnHrE,EAAOwC,MAAM,oFAGhB,CACD,IAAIhG,EAAM2L,OAAOiB,EAAgB3D,IAC7B4D,EAAkBxE,EAAiBrI,GAEvC,GAyLR,SAA+BgH,EAAS6F,GACpC,GAAItE,IAAUrH,EAAMoF,MAAQqB,EACxB,OAEJ,GAAIa,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EAcX,GAbIU,IAAUrH,EAAMuF,UACZO,EAAQhB,OAASgB,EAAQhB,MAAM+E,KAC/BA,EAAO,eAAepE,KAAKsE,UAAUjE,EAAQhB,MAAM+E,KAAM,KAAM,SAG3D/D,EAAQ2D,OACRI,EAAO,WAAWpE,KAAKsE,UAAUjE,EAAQ2D,OAAQ,KAAM,cAEhC,IAAlB3D,EAAQhB,QACb+E,EAAO,4BAIf8B,EAAiB,CACjB,IAAI7G,EAAQgB,EAAQhB,MAAQ,oBAAoBgB,EAAQhB,MAAMgB,YAAYA,EAAQhB,MAAMe,SAAW,GACnGY,EAAOxB,IAAI,sBAAsB0G,EAAgB7J,aAAagE,EAAQiC,WAAWsC,KAAKC,MAAQqB,EAAgBC,gBAAgB9G,IAAS+E,QAGvIpD,EAAOxB,IAAI,qBAAqBa,EAAQiC,sCAAuC8B,QAInFG,EAAc,mBAAoBlE,GAtNlC+F,CAAsBH,EAAiBC,GACnCA,EAAiB,QACVxE,EAAiBrI,GACxB,IACI,GAAI4M,EAAgB5G,MAAO,CACvB,IAAIA,EAAQ4G,EAAgB5G,MAC5B6G,EAAgBG,OAAO,IAAIhJ,EAAWpD,cAAcoF,EAAMe,KAAMf,EAAMgB,QAAShB,EAAM+E,WAEpF,SAA+B,IAA3B6B,EAAgBjC,OAIrB,MAAM,IAAI7D,MAAM,wBAHhB+F,EAAgBI,QAAQL,EAAgBjC,SAMhD,MAAO3E,GACCA,EAAMgB,QACNxD,EAAOwC,MAAM,qBAAqB6G,EAAgB7J,gCAAgCgD,EAAMgB,WAGxFxD,EAAOwC,MAAM,qBAAqB6G,EAAgB7J,mCA3L1DkK,CAAelG,GAkP3B,SAA8BA,GAC1B,IAAKA,EAED,YADAxD,EAAOwC,MAAM,2BAGjBxC,EAAOwC,MAAM,6EAA6EW,KAAKsE,UAAUjE,EAAS,KAAM,IAExH,IAAI4F,EAAkB5F,EACtB,GAAIjD,EAAGsC,OAAOuG,EAAgB3D,KAAOlF,EAAGoJ,OAAOP,EAAgB3D,IAAK,CAChE,IAAIjJ,EAAM2L,OAAOiB,EAAgB3D,IAC7BmE,EAAkB/E,EAAiBrI,GACnCoN,GACAA,EAAgBJ,OAAO,IAAIlG,MAAM,uEA3PjCuG,CAAqBrG,GAG7B,QACIiD,KAvBAqD,MAVRjG,EAAckG,QAAQxD,GACtB1C,EAAcmG,SAPd,SAA0BxH,GACtB2C,EAAaqB,KAAK,CAAChE,OAAO6B,OAAWA,OAOzCP,EAAciG,QAAQxD,GACtBzC,EAAckG,SANd,SAA2BzC,GACvBpC,EAAaqB,KAAKe,MAsCtB,IAAI0C,EAAYzG,IACZ,IAGI,GAAIhD,EAAWsI,sBAAsBtF,IAAYA,EAAQhE,SAAW0C,EAAmBzC,KAAKD,OAAQ,CAChG,IAAIhD,EAAMgJ,EAAsBhC,EAAQgE,OAAO/B,IAC3CyE,EAAWvF,EAAa7I,IAAIU,GAChC,GAAIgE,EAAWoF,iBAAiBsE,GAAW,CACvC,IAAIC,EAAWlK,GAAYA,EAAS8F,mBAAqB9F,EAAS8F,mBAAmBmE,EAAUnE,QAAsBA,EACrH,GAAIoE,SAAgC,IAAnBA,EAAS3H,YAAwC,IAApB2H,EAAShD,QAKnD,OAJAxC,EAAayF,OAAO5N,GACpB2N,EAAS1E,GAAKyE,EAASzE,GACvB2B,EAAqB+C,EAAU3G,EAAQhE,OAAQuI,KAAKC,YACpDlE,EAAcuD,MAAM8C,IAKhCzE,EAAkBf,EAAcnB,GAEpC,QACIiD,MAsQR,SAASW,EAAqB5D,EAAShE,EAAQwH,GAC3C,GAAIjC,IAAUrH,EAAMoF,KAAQqB,EAG5B,GAAIa,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EACPU,IAAUrH,EAAMuF,UACZO,EAAQhB,OAASgB,EAAQhB,MAAM+E,KAC/BA,EAAO,eAAepE,KAAKsE,UAAUjE,EAAQhB,MAAM+E,KAAM,KAAM,SAG3D/D,EAAQ2D,OACRI,EAAO,WAAWpE,KAAKsE,UAAUjE,EAAQ2D,OAAQ,KAAM,cAEhC,IAAlB3D,EAAQhB,QACb+E,EAAO,4BAInBpD,EAAOxB,IAAI,qBAAqBnD,QAAagE,EAAQiC,iCAAiCsC,KAAKC,MAAQhB,MAAeO,QAGlHG,EAAc,gBAAiBlE,GAqEvC,SAASkE,EAAcjI,EAAM+D,GACzB,IAAKW,GAAUY,IAAUrH,EAAMoF,IAC3B,OAEJ,MAAMuH,EAAa,CACfC,cAAc,EACd7K,OACA+D,UACA+G,UAAWxC,KAAKC,OAEpB7D,EAAOxB,IAAI0H,GAEf,SAASG,IACL,GAAIrE,IACA,MAAM,IAAI9C,EAAgBjB,EAAiBgE,OAAQ,yBAEvD,GAAIC,IACA,MAAM,IAAIhD,EAAgBjB,EAAiBkE,SAAU,2BAa7D,SAASmE,EAAgBC,GACrB,YAAc,IAAVA,EACO,KAGAA,EAGf,SAASC,EAAqBlL,EAAM+H,GAChC,IAAIL,EACAkB,EAAiB5I,EAAK4I,eAC1B,OAAQA,GACJ,KAAK,EACDlB,EAAS,KACT,MACJ,KAAK,EACDA,EAASsD,EAAgBjD,EAAO,IAChC,MACJ,QACIL,EAAS,GACT,IAAK,IAAItM,EAAI,EAAGA,EAAI2M,EAAOoD,QAAU/P,EAAIwN,EAAgBxN,IACrDsM,EAAO0D,KAAKJ,EAAgBjD,EAAO3M,KAEvC,GAAI2M,EAAOoD,OAASvC,EAChB,IAAK,IAAIxN,EAAI2M,EAAOoD,OAAQ/P,EAAIwN,EAAgBxN,IAC5CsM,EAAO0D,KAAK,MAK5B,OAAO1D,EAEX,IAAI2D,GAAa,CACbC,iBAAkB,CAACtL,KAAS+H,KAExB,IAAIhI,EACAwL,EACJ,GAHAR,IAGIjK,EAAGsC,OAAOpD,GAEV,OADAD,EAASC,EACD+H,EAAOoD,QACX,KAAK,EACDI,EAAgB,KAChB,MACJ,KAAK,EACDA,EAAgBxD,EAAO,GACvB,MACJ,QACIwD,EAAgBxD,OAKxBhI,EAASC,EAAKD,OACdwL,EAAgBL,EAAqBlL,EAAM+H,GAE/C,IAAIyD,EAAsB,CACtBhE,QArjBI,MAsjBJzH,OAAQA,EACRgI,OAAQwD,IAvMpB,SAAkCxH,GAC9B,GAAIuB,IAAUrH,EAAMoF,KAAQqB,EAG5B,GAAIa,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EACPU,IAAUrH,EAAMuF,UAEZsE,EADA/D,EAAQgE,OACD,WAAWrE,KAAKsE,UAAUjE,EAAQgE,OAAQ,KAAM,SAGhD,+BAGfrD,EAAOxB,IAAI,yBAAyBa,EAAQhE,WAAY+H,QAGxDG,EAAc,oBAAqBlE,GAwLnC0H,CAAyBD,GACzBnH,EAAcuD,MAAM4D,IAExBE,eAAgB,CAAC1L,EAAMqI,KACnB0C,IACIjK,EAAG6K,KAAK3L,GACR8E,EAA0B9E,EAErBqI,IACDvH,EAAGsC,OAAOpD,GACV+E,EAAqB/E,GAAQ,CAAEA,UAAM4E,EAAWyD,WAGhDtD,EAAqB/E,EAAKD,QAAU,CAAEC,OAAMqI,aAIxDuD,WAAY,CAACC,EAAOhD,EAAOR,KACvB,GAAIrD,EAAiB8G,IAAIjD,GACrB,MAAM,IAAIhF,MAAM,8BAA8BgF,wBAGlD,OADA7D,EAAiBoB,IAAIyC,EAAOR,GACrB,CACH0D,QAAS,KACL/G,EAAiB2F,OAAO9B,MAIpCmD,aAAc,CAACH,EAAOhD,EAAOpM,KACzB4O,GAAWC,iBAAiB5I,EAAqB1C,KAAM,CAAE6I,QAAOpM,WAEpEwP,oBAAqBpG,EAAyBqG,MAC9CC,YAAa,CAACnM,KAAS+H,KAGnB,IAAIhI,EACAwL,EAHJR,IAlGR,WACI,IAAKvE,IACD,MAAM,IAAI3C,MAAM,wBAiGhBuI,GAGA,IAAIvD,OAAQjE,EACZ,GAAI9D,EAAGsC,OAAOpD,GAEV,OADAD,EAASC,EACD+H,EAAOoD,QACX,KAAK,EACDI,EAAgB,KAChB,MACJ,KAAK,EAEGhJ,EAAe3E,kBAAkByO,GAAGtE,EAAO,KAC3CwD,EAAgB,KAChB1C,EAAQd,EAAO,IAGfwD,EAAgBP,EAAgBjD,EAAO,IAE3C,MACJ,QACI,MAAMuE,EAAOvE,EAAOoD,OAAS,EACzB5I,EAAe3E,kBAAkByO,GAAGtE,EAAOuE,KAC3CzD,EAAQd,EAAOuE,GAEXf,EADkB,IAAlBxD,EAAOoD,OACSH,EAAgBjD,EAAO,IAGvBA,EAAOwE,MAAM,EAAGD,GAAME,IAAI/P,GAASuO,EAAgBvO,KAIvE8O,EAAgBxD,EAAOyE,IAAI/P,GAASuO,EAAgBvO,QAK/D,CACDsD,EAASC,EAAKD,OACdwL,EAAgBL,EAAqBlL,EAAM+H,GAC3C,IAAIa,EAAiB5I,EAAK4I,eAC1BC,EAAQtG,EAAe3E,kBAAkByO,GAAGtE,EAAOa,IAAmBb,EAAOa,QAAkBhE,EAEnG,IAAIoB,EAAK1B,IACLoD,EAAS,IAAI+E,QAAQ,CAACzC,EAASD,KAC/B,IAAI3C,EAAiB,CACjBI,QAzoBA,MA0oBAxB,GAAIA,EACJjG,OAAQA,EACRgI,OAAQwD,GAER3B,EAAkB,CAAE7J,OAAQA,EAAQ8J,WAAYvB,KAAKC,MAAOyB,UAASD,WA7SrF,SAA6BhG,GACzB,GAAIuB,IAAUrH,EAAMoF,KAAQqB,EAG5B,GAAIa,IAAgBrH,EAAYyF,KAAM,CAClC,IAAImE,OAAOlD,EACPU,IAAUrH,EAAMuF,SAAWO,EAAQgE,SACnCD,EAAO,WAAWpE,KAAKsE,UAAUjE,EAAQgE,OAAQ,KAAM,UAE3DrD,EAAOxB,IAAI,oBAAoBa,EAAQhE,aAAagE,EAAQiC,QAAS8B,QAGrEG,EAAc,eAAgBlE,GAkS1B2I,CAAoBtF,GACpB,IACI/C,EAAcuD,MAAMR,GAExB,MAAOuF,GAEH/C,EAAgBG,OAAO,IAAIhJ,EAAWpD,cAAcoD,EAAWrD,WAAWkP,kBAAmBD,EAAE5I,QAAU4I,EAAE5I,QAAU,mBACrH6F,EAAkB,KAElBA,IACAxE,EAAiBsD,OAAO1C,IAAO4D,KAQvC,OALIf,GACAA,EAAMgE,wBAAwB,KAC1BxB,GAAWC,iBAAiB7I,EAAmBzC,KAAM,CAAEgG,SAGxD0B,GAEXoF,UAAW,CAAC9M,EAAMqI,KACd0C,IACIjK,EAAG6K,KAAK3L,GACR2E,EAAqB3E,EAEhBqI,IACDvH,EAAGsC,OAAOpD,GACV6E,EAAgB7E,GAAQ,CAAEA,UAAM4E,EAAWyD,WAG3CxD,EAAgB7E,EAAKD,QAAU,CAAEC,OAAMqI,aAInD/C,MAAO,CAACyH,EAAQC,EAASC,KACrB,IAAIC,GAAoB,EACpBC,EAAejP,EAAYyF,UACQ,IAAnCsJ,IACInM,EAAGsM,QAAQH,GACXC,EAAoBD,GAGpBC,EAAoBD,EAA+B3B,mBAAoB,EACvE6B,EAAeF,EAA+B1H,aAAerH,EAAYyF,OAGjF2B,EAAQyH,EACRxH,EAAc4H,EAEVzI,EADAY,IAAUrH,EAAMoF,SACPuB,EAGAoI,GAETE,GAAsBxG,KAAeE,KACrCyE,GAAWC,iBAAiBnN,EAAqB6B,KAAM,CAAEvD,MAAOwB,EAAMwF,SAASsJ,MAGvFxC,QAAS7E,EAAawG,MACtB5B,QAAS3E,EAAauG,MACtBmB,wBAAyBzH,EAA6BsG,MACtDoB,UAAWxH,EAAeoG,MAC1BH,QAAS,KACL,GAAInF,IACA,OAEJpB,EAAQ5C,EAAgBiE,SACxBf,EAAeiB,UAAKnC,GACpB,IAAI7B,EAAQ,IAAIc,MAAM,4BACtB3H,OAAOqR,KAAKnI,GAAkBoI,QAASzQ,IACnCqI,EAAiBrI,GAAKgN,OAAOhH,KAEjCqC,EAAmBlJ,OAAOY,OAAO,MACjCuI,EAAgBnJ,OAAOY,OAAO,MAC9BoI,EAAe,IAAI1C,EAAY2C,UAE3BrE,EAAG6K,KAAKtH,EAAc0H,UACtB1H,EAAc0H,UAEdjL,EAAG6K,KAAKvH,EAAc2H,UACtB3H,EAAc2H,WAGtB0B,OAAQ,KACJ1C,IAhPR,WACI,GAAIvE,IACA,MAAM,IAAI5C,EAAgBjB,EAAiB+K,iBAAkB,mCA+O7DC,GACAnI,EAAQ5C,EAAgB6D,UACxBrC,EAAcqJ,OAAOjD,IAEzBoD,QAAS,KAELC,QAAQ3K,IAAI,aAkBpB,OAfAmI,GAAWK,eAAetN,EAAqB4B,KAAO+H,IAC9CzC,IAAUrH,EAAMoF,KAAQqB,GAG5BA,EAAOxB,IAAI6E,EAAOhE,QAASuB,IAAUrH,EAAMuF,QAAUuE,EAAO+F,aAAUlJ,KAE1EyG,GAAWK,eAAehJ,EAAqB1C,KAAO+H,IAClD,MAAMM,EAAUrD,EAAiB3I,IAAI0L,EAAOc,OACxCR,EACAA,EAAQN,EAAOtL,OAGfoJ,EAAyBkB,KAAKgB,KAG/BsD,GAhxBXtQ,EAAQ6I,gBAAkBA,EAE1B,SAAWjF,GAKPA,EAAmB0N,GAJnB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,EAAG6K,KAAKoC,EAAUzH,qBAH9C,CAMwBvL,EAAQ4D,qBAAuB5D,EAAQ4D,mBAAqB,KAEpF,SAAWiE,GACPA,EAAgBA,EAAqB,IAAI,GAAK,MAC9CA,EAAgBA,EAA2B,UAAI,GAAK,YACpDA,EAAgBA,EAAwB,OAAI,GAAK,SACjDA,EAAgBA,EAA0B,SAAI,GAAK,WAJvD,CAKGA,IAAoBA,EAAkB,KAixBzC7H,EAAQ0F,wBARR,SAAiCuN,EAAOC,EAAQ1N,EAAQC,GANxD,IAAyB/D,EAYrB,OALK8D,IACDA,EAASxF,EAAQ8H,YAIdsB,OAXiB,KADH1H,EAUQuR,GAThBP,aAAoC,IAAfhR,EAAMyR,KASFF,EAAQ,IAAI9L,EAAgBtD,oBAAoBoP,GAP1F,SAAyBvR,GACrB,YAAuB,IAAhBA,EAAMmL,YAAkC,IAAdnL,EAAM0R,IAO1BC,CAAgBH,GAAUA,EAAS,IAAI7L,EAAgBvD,oBAAoBoP,GACxC1N,EAAQC,M,4DCz7B5DtE,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GACjC,MAAM4Q,UAA6B5Q,EAAiBa,aAChD,YAAYyB,GACRiE,MAAMjE,IAGdhF,EAAQsT,qBAAuBA,EAC/B,MAAMC,UAA4B7Q,EAAiBY,YAC/C,YAAY0B,GACRiE,MAAMjE,IAGdhF,EAAQuT,oBAAsBA,EAC9B,MAAMC,UAAiC9Q,EAAiBc,iBACpD,YAAYwB,GACRiE,MAAMjE,IAGdhF,EAAQwT,yBAA2BA,EACnC,MAAMC,UAAkC/Q,EAAiBe,kBACrD,YAAYuB,GACRiE,MAAMjE,IAGdhF,EAAQyT,0BAA4BA,G,6BCpBpC,SAASpL,EAAO3G,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBiM,OAezD,SAASI,EAAMrM,GACX,OAAOgS,MAAMC,QAAQjS,GAtBzBP,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAItD1B,EAAQqS,QAHR,SAAiB3Q,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7B1B,EAAQqI,OAASA,EAIjBrI,EAAQmP,OAHR,SAAgBzN,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkS,QAMzD5T,EAAQgI,MAHR,SAAetG,GACX,OAAOA,aAAiBoH,OAM5B9I,EAAQ4Q,KAHR,SAAclP,GACV,MAAwB,mBAAVA,GAMlB1B,EAAQ+N,MAAQA,EAIhB/N,EAAQ6T,YAHR,SAAqBnS,GACjB,OAAOqM,EAAMrM,IAAUA,EAAMoS,MAAMC,GAAQ1L,EAAO0L,M,6BC1BtD5S,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAEtD,SAAWqB,GAMPA,EAAWhB,OALX,SAAgB6O,GACZ,MAAO,CACHI,QAASJ,IAHrB,CAOgB5Q,EAAQ+C,aAAe/C,EAAQ+C,WAAa,KAE5D,SAAWC,GACP,MAAMgR,EAAc,CAAE,aACtBhR,EAAMiR,KAAO,WAAc,OAAOD,GAFtC,CAGWhU,EAAQgD,QAAUhD,EAAQgD,MAAQ,KAC7C,MAAMkR,EACF,IAAIzE,EAAU0E,EAAU,KAAMC,GACrBlL,KAAKmL,aACNnL,KAAKmL,WAAa,GAClBnL,KAAKoL,UAAY,IAErBpL,KAAKmL,WAAWhE,KAAKZ,GACrBvG,KAAKoL,UAAUjE,KAAK8D,GAChBT,MAAMC,QAAQS,IACdA,EAAO/D,KAAK,CAAEW,QAAS,IAAM9H,KAAKqL,OAAO9E,EAAU0E,KAG3D,OAAO1E,EAAU0E,EAAU,MACvB,GAAKjL,KAAKmL,WAAV,CAIA,IADA,IAAIG,GAAoC,EAC/BnU,EAAI,EAAGoU,EAAMvL,KAAKmL,WAAWjE,OAAQ/P,EAAIoU,EAAKpU,IACnD,GAAI6I,KAAKmL,WAAWhU,KAAOoP,EAAU,CACjC,GAAIvG,KAAKoL,UAAUjU,KAAO8T,EAItB,OAFAjL,KAAKmL,WAAWK,OAAOrU,EAAG,QAC1B6I,KAAKoL,UAAUI,OAAOrU,EAAG,GAIzBmU,GAAoC,EAIhD,GAAIA,EACA,MAAM,IAAI1L,MAAM,sFAGxB,UAAU6L,GACN,IAAKzL,KAAKmL,WACN,MAAO,GAGX,IADA,IAAIO,EAAM,GAAIC,EAAY3L,KAAKmL,WAAW7C,MAAM,GAAIsD,EAAW5L,KAAKoL,UAAU9C,MAAM,GAC3EnR,EAAI,EAAGoU,EAAMI,EAAUzE,OAAQ/P,EAAIoU,EAAKpU,IAC7C,IACIuU,EAAIvE,KAAKwE,EAAUxU,GAAG0U,MAAMD,EAASzU,GAAIsU,IAE7C,MAAO/C,GAEHkB,QAAQ9K,MAAM4J,GAGtB,OAAOgD,EAEX,UACI,OAAQ1L,KAAKmL,YAAyC,IAA3BnL,KAAKmL,WAAWjE,OAE/C,UACIlH,KAAKmL,gBAAaxK,EAClBX,KAAKoL,eAAYzK,GAGzB,MAAM5G,EACF,YAAY+R,GACR9L,KAAK8L,SAAWA,EAMpB,YA0BI,OAzBK9L,KAAK+L,SACN/L,KAAK+L,OAAS,CAACC,EAAUC,EAAUC,KAQ/B,IAAIzI,EAaJ,OApBKzD,KAAKmL,aACNnL,KAAKmL,WAAa,IAAIH,GAEtBhL,KAAK8L,UAAY9L,KAAK8L,SAASK,oBAAsBnM,KAAKmL,WAAWiB,WACrEpM,KAAK8L,SAASK,mBAAmBnM,MAErCA,KAAKmL,WAAWkB,IAAIL,EAAUC,GAE9BxI,EAAS,CACLqE,QAAS,KACL9H,KAAKmL,WAAWE,OAAOW,EAAUC,GACjCxI,EAAOqE,QAAU/N,EAAQuS,MACrBtM,KAAK8L,UAAY9L,KAAK8L,SAASS,sBAAwBvM,KAAKmL,WAAWiB,WACvEpM,KAAK8L,SAASS,qBAAqBvM,QAI3CwK,MAAMC,QAAQyB,IACdA,EAAY/E,KAAK1D,GAEdA,IAGRzD,KAAK+L,OAMhB,KAAK9D,GACGjI,KAAKmL,YACLnL,KAAKmL,WAAWqB,OAAO9U,KAAKsI,KAAKmL,WAAYlD,GAGrD,UACQjI,KAAKmL,aACLnL,KAAKmL,WAAWrD,UAChB9H,KAAKmL,gBAAaxK,IAI9B7J,EAAQiD,QAAUA,EAClBA,EAAQuS,MAAQ,c,6BC3HhBrU,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMiU,EAAmC,EAAQ,GAC3CjT,EAAmB,EAAQ,GACjC1C,EAAQ+C,WAAaL,EAAiBK,WACtC/C,EAAQ6C,kBAAoBH,EAAiBG,kBAC7C7C,EAAQgD,MAAQN,EAAiBM,MACjChD,EAAQiD,QAAUP,EAAiBO,QATnC,SAAkBpC,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IASpEE,CAAS,EAAQ,IAEjB,SAAWqD,GACP,MAAM8P,EAAStV,OACTuV,EAASrU,OAAO,YACtBsE,EAASxE,IAAM,KACX,MAAMwU,EAAWF,EAAOC,GACxB,IAAKC,EACD,MAAM,IAAIhN,MAAM,mDAEpB,OAAOgN,GASXhQ,EAASiQ,QAPT,SAAiBD,GAKb,OAJIF,EAAOC,IACP/C,QAAQ9K,MAAM,IAAIc,MAAM,iDAE5B8M,EAAOC,GAAUC,EACVpT,EAAiBK,WAAWhB,OAAO,IAAM6T,EAAOC,QAAUhM,IAfzE,CAkBc7J,EAAQ8F,WAAa9F,EAAQ8F,SAAW,KAOtD9F,EAAQgW,mBANR,SAA4BC,GACxB,SAAKA,IAAavC,MAAMC,QAAQsC,KAGzBA,EAASnC,MAAMpS,GAA0B,iBAAVA,GAAsBiU,EAAiCO,eAAe5E,GAAG5P,KAInH,SAAWyU,GACPA,EAAyBA,EAAiC,OAAI,GAAK,SACnEA,EAAyBA,EAA2C,iBAAI,GAAK,mBAC7EA,EAAyBA,EAAwC,cAAI,GAAK,gBAH9E,CAI8BnW,EAAQmW,2BAA6BnW,EAAQmW,yBAA2B,KAGtG,SAAWC,GACPA,EAAyBA,EAAgC,MAAI,GAAK,QAClEA,EAAyBA,EAAkC,QAAI,GAAK,UACpEA,EAAyBA,EAAsC,YAAI,GAAK,cACxEA,EAAyBA,EAA+B,KAAI,GAAK,OAJrE,CAK8BpW,EAAQoW,2BAA6BpW,EAAQoW,yBAA2B,KAEtG,SAAWC,GAIPA,EAAmB/E,GAHnB,SAAYgF,GACR,QAASA,GAAQ,QAASA,GAAS,eAAgBA,GAF3D,CAKwBtW,EAAQqW,qBAAuBrW,EAAQqW,mBAAqB,KAEpF,SAAWE,GACPA,EAAoBA,EAA4B,OAAI,GAAK,SACzDA,EAAoBA,EAA+B,UAAI,GAAK,YAC5DA,EAAoBA,EAAqC,gBAAI,GAAK,kBAHtE,CAIyBvW,EAAQuW,sBAAwBvW,EAAQuW,oBAAsB,M,cCpEvF,IAOIC,EACAC,EARAC,EAAUzW,EAAOD,QAAU,GAU/B,SAAS2W,IACL,MAAM,IAAI7N,MAAM,mCAEpB,SAAS8N,IACL,MAAM,IAAI9N,MAAM,qCAsBpB,SAAS+N,EAAWC,GAChB,GAAIN,IAAqBO,WAErB,OAAOA,WAAWD,EAAK,GAG3B,IAAKN,IAAqBG,IAAqBH,IAAqBO,WAEhE,OADAP,EAAmBO,WACZA,WAAWD,EAAK,GAE3B,IAEI,OAAON,EAAiBM,EAAK,GAC/B,MAAMlF,GACJ,IAEI,OAAO4E,EAAiB5V,KAAK,KAAMkW,EAAK,GAC1C,MAAMlF,GAEJ,OAAO4E,EAAiB5V,KAAKsI,KAAM4N,EAAK,MAvCnD,WACG,IAEQN,EADsB,mBAAfO,WACYA,WAEAJ,EAEzB,MAAO/E,GACL4E,EAAmBG,EAEvB,IAEQF,EADwB,mBAAjBO,aACcA,aAEAJ,EAE3B,MAAOhF,GACL6E,EAAqBG,GAjB7B,GAwEA,IAEIK,EAFA9L,EAAQ,GACR+L,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaD,IAGlBC,GAAW,EACPD,EAAa7G,OACbjF,EAAQ8L,EAAaI,OAAOlM,GAE5BgM,GAAc,EAEdhM,EAAMiF,QACNkH,KAIR,SAASA,IACL,IAAIJ,EAAJ,CAGA,IAAIK,EAAUV,EAAWO,GACzBF,GAAW,EAGX,IADA,IAAIzC,EAAMtJ,EAAMiF,OACVqE,GAAK,CAGP,IAFAwC,EAAe9L,EACfA,EAAQ,KACCgM,EAAa1C,GACdwC,GACAA,EAAaE,GAAYK,MAGjCL,GAAc,EACd1C,EAAMtJ,EAAMiF,OAEhB6G,EAAe,KACfC,GAAW,EAnEf,SAAyBO,GACrB,GAAIhB,IAAuBO,aAEvB,OAAOA,aAAaS,GAGxB,IAAKhB,IAAuBG,IAAwBH,IAAuBO,aAEvE,OADAP,EAAqBO,aACdA,aAAaS,GAExB,IAEWhB,EAAmBgB,GAC5B,MAAO7F,GACL,IAEI,OAAO6E,EAAmB7V,KAAK,KAAM6W,GACvC,MAAO7F,GAGL,OAAO6E,EAAmB7V,KAAKsI,KAAMuO,KAgD7CC,CAAgBH,IAiBpB,SAASI,EAAKb,EAAK/I,GACf7E,KAAK4N,IAAMA,EACX5N,KAAK6E,MAAQA,EAYjB,SAAS6J,KA5BTlB,EAAQmB,SAAW,SAAUf,GACzB,IAAInC,EAAO,IAAIjB,MAAMoE,UAAU1H,OAAS,GACxC,GAAI0H,UAAU1H,OAAS,EACnB,IAAK,IAAI/P,EAAI,EAAGA,EAAIyX,UAAU1H,OAAQ/P,IAClCsU,EAAKtU,EAAI,GAAKyX,UAAUzX,GAGhC8K,EAAMkF,KAAK,IAAIsH,EAAKb,EAAKnC,IACJ,IAAjBxJ,EAAMiF,QAAiB8G,GACvBL,EAAWS,IASnBK,EAAKtV,UAAUmV,IAAM,WACjBtO,KAAK4N,IAAI/B,MAAM,KAAM7L,KAAK6E,QAE9B2I,EAAQqB,MAAQ,UAChBrB,EAAQsB,SAAU,EAClBtB,EAAQuB,IAAM,GACdvB,EAAQwB,KAAO,GACfxB,EAAQyB,QAAU,GAClBzB,EAAQ0B,SAAW,GAInB1B,EAAQ2B,GAAKT,EACblB,EAAQ4B,YAAcV,EACtBlB,EAAQ6B,KAAOX,EACflB,EAAQ8B,IAAMZ,EACdlB,EAAQ+B,eAAiBb,EACzBlB,EAAQgC,mBAAqBd,EAC7BlB,EAAQiC,KAAOf,EACflB,EAAQkC,gBAAkBhB,EAC1BlB,EAAQmC,oBAAsBjB,EAE9BlB,EAAQoC,UAAY,SAAU9X,GAAQ,MAAO,IAE7C0V,EAAQqC,QAAU,SAAU/X,GACxB,MAAM,IAAI8H,MAAM,qCAGpB4N,EAAQsC,IAAM,WAAc,MAAO,KACnCtC,EAAQuC,MAAQ,SAAUC,GACtB,MAAM,IAAIpQ,MAAM,mCAEpB4N,EAAQyC,MAAQ,WAAa,OAAO,I,8BCvLpC,YAKAhY,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM6F,EAAW,EAAQ,GACnBxB,EAAK,EAAQ,GACnB,IACIqT,EAAKC,EAAOC,KAAK,KAAM,SAAS,GAChCC,EAAKF,EAAOC,KAAK,KAAM,SAAS,GAEpC,MAAME,EACF,YAAYC,EAAW,QACnBvQ,KAAKuQ,SAAWA,EAChBvQ,KAAKwQ,MAAQ,EACbxQ,KAAKyQ,OAASN,EAAOO,YARX,MAUd,OAAOC,GACH,IAAIC,EAAWD,EACf,GAAuB,iBAAZ,EAAsB,CAC7B,IAAIE,EAAMF,EACNG,EAAYX,EAAOY,WAAWF,EAAK7Q,KAAKuQ,WAC5CK,EAAWT,EAAOO,YAAYI,IACrBnN,MAAMkN,EAAK,EAAGC,EAAW9Q,KAAKuQ,UAE3C,GAAIvQ,KAAKyQ,OAAOvJ,OAASlH,KAAKwQ,OAASI,EAAS1J,OAC5C0J,EAASI,KAAKhR,KAAKyQ,OAAQzQ,KAAKwQ,MAAO,EAAGI,EAAS1J,YAElD,CACD,IAAI+J,EAtBE,MAsBSC,KAAKC,MAAMnR,KAAKwQ,MAAQI,EAAS1J,QAtB1C,MAsBmE,GACtD,IAAflH,KAAKwQ,OACLxQ,KAAKyQ,OAASN,EAAOO,YAAYO,GACjCL,EAASI,KAAKhR,KAAKyQ,OAAQ,EAAG,EAAGG,EAAS1J,SAG1ClH,KAAKyQ,OAASN,EAAOhC,OAAO,CAACnO,KAAKyQ,OAAOnI,MAAM,EAAGtI,KAAKwQ,OAAQI,GAAWK,GAGlFjR,KAAKwQ,OAASI,EAAS1J,OAE3B,iBACI,IAAIzD,OAAS9C,EACTyQ,EAAU,EACd,KAAOA,EAAU,EAAIpR,KAAKwQ,QAAUxQ,KAAKyQ,OAAOW,KAAalB,GAAMlQ,KAAKyQ,OAAOW,EAAU,KAAOf,GAAMrQ,KAAKyQ,OAAOW,EAAU,KAAOlB,GAAMlQ,KAAKyQ,OAAOW,EAAU,KAAOf,IAClKe,IAGJ,GAAIA,EAAU,GAAKpR,KAAKwQ,MACpB,OAAO/M,EAEXA,EAASxL,OAAOY,OAAO,MACTmH,KAAKyQ,OAAOjR,SAAS,QAAS,EAAG4R,GAASC,MAzCrD,QA0CK9H,QAAS+H,IACb,IAAId,EAAQc,EAAOC,QAAQ,KAC3B,IAAe,IAAXf,EACA,MAAM,IAAI5Q,MAAM,sDAEpB,IAAI9G,EAAMwY,EAAOE,OAAO,EAAGhB,GACvBhY,EAAQ8Y,EAAOE,OAAOhB,EAAQ,GAAGiB,OACrChO,EAAO3K,GAAON,IAElB,IAAIkZ,EAAYN,EAAU,EAG1B,OAFApR,KAAKyQ,OAASzQ,KAAKyQ,OAAOnI,MAAMoJ,GAChC1R,KAAKwQ,MAAQxQ,KAAKwQ,MAAQkB,EACnBjO,EAEX,eAAeyD,GACX,GAAIlH,KAAKwQ,MAAQtJ,EACb,OAAO,KAEX,IAAIzD,EAASzD,KAAKyQ,OAAOjR,SAASQ,KAAKuQ,SAAU,EAAGrJ,GAChDwK,EAAYxK,EAGhB,OAFAlH,KAAKyQ,OAAOO,KAAKhR,KAAKyQ,OAAQ,EAAGiB,GACjC1R,KAAKwQ,MAAQxQ,KAAKwQ,MAAQkB,EACnBjO,EAEX,oBACI,OAAOzD,KAAKwQ,QAIpB,SAAWhW,GAMPA,EAAc4N,GALd,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,EAAG6K,KAAKoC,EAAUN,SAAW3M,EAAG6K,KAAKoC,EAAUhC,UAC/DjL,EAAG6K,KAAKoC,EAAUxD,UAAYzJ,EAAG6K,KAAKoC,EAAUzD,UAAYxJ,EAAG6K,KAAKoC,EAAU6H,mBAJ1F,CAOmB7a,EAAQ0D,gBAAkB1D,EAAQ0D,cAAgB,KACrE,MAAMoX,EACF,cACI5R,KAAKyB,aAAe,IAAIpD,EAAStE,QACjCiG,KAAK0B,aAAe,IAAIrD,EAAStE,QACjCiG,KAAK6R,sBAAwB,IAAIxT,EAAStE,QAE9C,UACIiG,KAAKyB,aAAaqG,UAClB9H,KAAK0B,aAAaoG,UAEtB,cACI,OAAO9H,KAAKyB,aAAawG,MAE7B,UAAUnJ,GACNkB,KAAKyB,aAAaqB,KAAK9C,KAAK8R,QAAQhT,IAExC,cACI,OAAOkB,KAAK0B,aAAauG,MAE7B,YACIjI,KAAK0B,aAAaoB,UAAKnC,GAE3B,uBACI,OAAOX,KAAK6R,sBAAsB5J,MAEtC,mBAAmBjJ,GACfgB,KAAK6R,sBAAsB/O,KAAK9D,GAEpC,QAAQF,GACJ,OAAIA,aAAiBc,MACVd,EAGA,IAAIc,MAAM,mCAAkC/C,EAAGsC,OAAOL,EAAMgB,SAAWhB,EAAMgB,QAAU,aAI1GhJ,EAAQ8a,sBAAwBA,EAChC,MAAMjX,UAA4BiX,EAC9B,YAAYG,EAAUxB,EAAW,QAC7BxQ,QACAC,KAAK+R,SAAWA,EAChB/R,KAAKyQ,OAAS,IAAIH,EAAcC,GAChCvQ,KAAKgS,uBAAyB,IAElC,0BAA0B3D,GACtBrO,KAAKgS,uBAAyB3D,EAElC,4BACI,OAAOrO,KAAKgS,uBAEhB,OAAOzL,GACHvG,KAAKiS,mBAAqB,EAC1BjS,KAAKkS,aAAe,EACpBlS,KAAKmS,yBAAsBxR,EAC3BX,KAAKuG,SAAWA,EAChBvG,KAAK+R,SAAS5C,GAAG,OAAStL,IACtB7D,KAAKoS,OAAOvO,KAEhB7D,KAAK+R,SAAS5C,GAAG,QAAUrQ,GAAUkB,KAAKqS,UAAUvT,IACpDkB,KAAK+R,SAAS5C,GAAG,QAAS,IAAMnP,KAAKsS,aAEzC,OAAOzO,GAEH,IADA7D,KAAKyQ,OAAO8B,OAAO1O,KACN,CACT,IAAgC,IAA5B7D,KAAKiS,kBAA0B,CAC/B,IAAIO,EAAUxS,KAAKyQ,OAAOgC,iBAC1B,IAAKD,EACD,OAEJ,IAAIE,EAAgBF,EAAQ,kBAC5B,IAAKE,EACD,MAAM,IAAI9S,MAAM,kDAEpB,IAAIsH,EAASyL,SAASD,GACtB,GAAIE,MAAM1L,GACN,MAAM,IAAItH,MAAM,0CAEpBI,KAAKiS,kBAAoB/K,EAI7B,IAAI2L,EAAM7S,KAAKyQ,OAAOqC,eAAe9S,KAAKiS,mBAC1C,GAAY,OAARY,EAGA,YADA7S,KAAK+S,yBAGT/S,KAAKgT,2BACLhT,KAAKiS,mBAAqB,EAC1BjS,KAAKkS,eACL,IAAIe,EAAOxT,KAAKyT,MAAML,GACtB7S,KAAKuG,SAAS0M,IAGtB,2BACQjT,KAAKmS,sBACLrE,aAAa9N,KAAKmS,qBAClBnS,KAAKmS,yBAAsBxR,GAGnC,yBACIX,KAAKgT,2BACDhT,KAAKgS,wBAA0B,IAGnChS,KAAKmS,oBAAsBtE,WAAW,CAACjJ,EAAOyJ,KAC1CrO,KAAKmS,yBAAsBxR,EACvBiE,IAAU5E,KAAKkS,eACflS,KAAKmT,mBAAmB,CAAEjB,aAActN,EAAOwO,YAAa/E,IAC5DrO,KAAK+S,2BAEV/S,KAAKgS,uBAAwBhS,KAAKkS,aAAclS,KAAKgS,0BAGhElb,EAAQ6D,oBAAsBA,EAa9B7D,EAAQ+D,iBAZR,cAA+B+W,EAC3B,YAAYpE,GACRzN,QACAC,KAAKwN,QAAUA,EACf,IAAI6F,EAAerT,KAAKwN,QACxB6F,EAAalE,GAAG,QAAUrQ,GAAUkB,KAAKqS,UAAUvT,IACnDuU,EAAalE,GAAG,QAAS,IAAMnP,KAAKsS,aAExC,OAAO/L,GACHvG,KAAKwN,QAAQ2B,GAAG,UAAW5I,KASnCzP,EAAQoH,oBALR,cAAkCvD,EAC9B,YAAY2Y,EAAQ/C,EAAW,SAC3BxQ,MAAMuT,EAAQ/C,O,uDC7NtB,YAKAtY,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM6F,EAAW,EAAQ,GACnBxB,EAAK,EAAQ,IAInB,SAAWpC,GAMPA,EAAc2N,GALd,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,EAAG6K,KAAKoC,EAAUhC,UAAYjL,EAAG6K,KAAKoC,EAAUzD,UAChExJ,EAAG6K,KAAKoC,EAAUxD,UAAYzJ,EAAG6K,KAAKoC,EAAUnG,QAJ5D,CAOmB7M,EAAQ2D,gBAAkB3D,EAAQ2D,cAAgB,KACrE,MAAM8Y,EACF,cACIvT,KAAKyB,aAAe,IAAIpD,EAAStE,QACjCiG,KAAK0B,aAAe,IAAIrD,EAAStE,QAErC,UACIiG,KAAKyB,aAAaqG,UAClB9H,KAAK0B,aAAaoG,UAEtB,cACI,OAAO9H,KAAKyB,aAAawG,MAE7B,UAAUnJ,EAAOgB,EAAS0T,GACtBxT,KAAKyB,aAAaqB,KAAK,CAAC9C,KAAK8R,QAAQhT,GAAQgB,EAAS0T,IAE1D,cACI,OAAOxT,KAAK0B,aAAauG,MAE7B,YACIjI,KAAK0B,aAAaoB,UAAKnC,GAE3B,QAAQ7B,GACJ,OAAIA,aAAiBc,MACVd,EAGA,IAAIc,MAAM,mCAAkC/C,EAAGsC,OAAOL,EAAMgB,SAAWhB,EAAMgB,QAAU,aAI1GhJ,EAAQyc,sBAAwBA,EA8BhCzc,EAAQ8D,oBA7BR,cAAkC2Y,EAC9B,YAAYE,EAAUlD,EAAW,QAC7BxQ,QACAC,KAAKyT,SAAWA,EAChBzT,KAAKuQ,SAAWA,EAChBvQ,KAAK0T,WAAa,EAClB1T,KAAKyT,SAAStE,GAAG,QAAUrQ,GAAUkB,KAAKqS,UAAUvT,IACpDkB,KAAKyT,SAAStE,GAAG,QAAS,IAAMnP,KAAKsS,aAEzC,MAAMO,GACF,IAAII,EAAOxT,KAAKsE,UAAU8O,GAEtBL,EAAU,CAtDF,mBAqDQrC,EAAOY,WAAWkC,EAAMjT,KAAKuQ,UAEhB/Q,WAtD9B,eAyDH,IAEIQ,KAAKyT,SAAS9P,MAAM6O,EAAQmB,KAAK,IAAK,SAEtC3T,KAAKyT,SAAS9P,MAAMsP,EAAMjT,KAAKuQ,UAC/BvQ,KAAK0T,WAAa,EAEtB,MAAO5U,GACHkB,KAAK0T,aACL1T,KAAKqS,UAAUvT,EAAO+T,EAAK7S,KAAK0T,eAkD5C5c,EAAQgE,iBA7CR,cAA+ByY,EAC3B,YAAY/F,GACRzN,QACAC,KAAKwN,QAAUA,EACfxN,KAAK0T,WAAa,EAClB1T,KAAKiC,MAAQ,GACbjC,KAAK4T,SAAU,EACf,IAAIP,EAAerT,KAAKwN,QACxB6F,EAAalE,GAAG,QAAUrQ,GAAUkB,KAAKqS,UAAUvT,IACnDuU,EAAalE,GAAG,QAAS,IAAMnP,KAAKsS,WAExC,MAAMO,GACG7S,KAAK4T,SAAiC,IAAtB5T,KAAKiC,MAAMiF,OAK5BlH,KAAKiC,MAAMkF,KAAK0L,GAHhB7S,KAAK6T,eAAehB,GAM5B,eAAeA,GACX,IACQ7S,KAAKwN,QAAQsG,OACb9T,KAAK4T,SAAU,EACf5T,KAAKwN,QAAQsG,KAAKjB,OAAKlS,OAAWA,EAAY7B,IAC1CkB,KAAK4T,SAAU,EACX9U,GACAkB,KAAK0T,aACL1T,KAAKqS,UAAUvT,EAAO+T,EAAK7S,KAAK0T,aAGhC1T,KAAK0T,WAAa,EAElB1T,KAAKiC,MAAMiF,OAAS,GACpBlH,KAAK6T,eAAe7T,KAAKiC,MAAMiB,YAK/C,MAAOpE,GACHkB,KAAK0T,aACL1T,KAAKqS,UAAUvT,EAAO+T,EAAK7S,KAAK0T,eAwE5C5c,EAAQsH,oBAnER,cAAkCmV,EAC9B,YAAYD,EAAQ/C,EAAW,QAC3BxQ,QACAC,KAAKsT,OAASA,EACdtT,KAAKiC,MAAQ,GACbjC,KAAK4T,SAAU,EACf5T,KAAKuQ,SAAWA,EAChBvQ,KAAK0T,WAAa,EAClB1T,KAAKsT,OAAOnE,GAAG,QAAUrQ,GAAUkB,KAAKqS,UAAUvT,IAClDkB,KAAKsT,OAAOnE,GAAG,QAAS,IAAMnP,KAAKsS,aAEvC,UACIvS,MAAM+H,UACN9H,KAAKsT,OAAOS,UAEhB,MAAMlB,GACG7S,KAAK4T,SAAiC,IAAtB5T,KAAKiC,MAAMiF,OAK5BlH,KAAKiC,MAAMkF,KAAK0L,GAHhB7S,KAAK6T,eAAehB,GAM5B,eAAeA,GACX,IAAII,EAAOxT,KAAKsE,UAAU8O,GAEtBL,EAAU,CAjJF,mBAgJQrC,EAAOY,WAAWkC,EAAMjT,KAAKuQ,UAEhB/Q,WAjJ9B,eAoJH,IAEIQ,KAAK4T,SAAU,EACf5T,KAAKsT,OAAO3P,MAAM6O,EAAQmB,KAAK,IAAK,QAAU7U,IACtCA,GACAkB,KAAKgU,YAAYlV,EAAO+T,GAE5B,IAEI7S,KAAKsT,OAAO3P,MAAMsP,EAAMjT,KAAKuQ,SAAWzR,IACpCkB,KAAK4T,SAAU,EACX9U,EACAkB,KAAKgU,YAAYlV,EAAO+T,GAGxB7S,KAAK0T,WAAa,EAElB1T,KAAKiC,MAAMiF,OAAS,GACpBlH,KAAK6T,eAAe7T,KAAKiC,MAAMiB,WAI3C,MAAOpE,GACHkB,KAAKgU,YAAYlV,EAAO+T,MAIpC,MAAO/T,GACHkB,KAAKgU,YAAYlV,EAAO+T,IAGhC,YAAY/T,EAAO+T,GACf7S,KAAK0T,aACL1T,KAAKqS,UAAUvT,EAAO+T,EAAK7S,KAAK0T,gB,uCC9LxC,IAAIO,EAGJA,EAAI,WACH,OAAOjU,KADJ,GAIJ,IAECiU,EAAIA,GAAK,IAAIC,SAAS,cAAb,GACR,MAAOxL,GAEc,iBAAXtR,SAAqB6c,EAAI7c,QAOrCL,EAAOD,QAAUmd,G,8CCnBjB,YAQAhc,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3C2H,EAAM,EAAQ,IACdC,EAAM,EAAQ,IACdxX,EAAK,EAAQ,IACbyX,EAAU,EAAQ,IAClBC,EAAO,EAAQ,IACfC,EAAiB,EAAQ,KAX/B,SAAkB7c,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IAWpEE,CAAS,EAAQ,IACjB,MAAMkb,EACF,MAAM3U,GACF8J,QAAQ9K,MAAMgB,GAElB,KAAKA,GACD8J,QAAQ7K,KAAKe,GAEjB,KAAKA,GACD8J,QAAQ5K,KAAKc,GAEjB,IAAIA,GACA8J,QAAQ3K,IAAIa,IAmDpB,IAAI4U,EAcAC,EAwCAC,EAOAC,EAMAC,GAlEJ,SAAWJ,GAIPA,EAAYA,EAAsB,SAAI,GAAK,WAI3CA,EAAYA,EAAsB,SAAI,GAAK,WAR/C,CASGA,EAAc5d,EAAQ4d,cAAgB5d,EAAQ4d,YAAc,KAK/D,SAAWC,GAIPA,EAAYA,EAA0B,aAAI,GAAK,eAI/CA,EAAYA,EAAqB,QAAI,GAAK,UAR9C,CASGA,EAAc7d,EAAQ6d,cAAgB7d,EAAQ6d,YAAc,KAC/D,MAAMI,EACF,YAAYjd,GACRkI,KAAKlI,KAAOA,EACZkI,KAAKgV,SAAW,GAEpB,MAAMC,EAAQ3S,EAAUkR,GACpB,OAAIA,GAASA,GAAS,EACXkB,EAAYQ,SAEhBR,EAAYS,SAEvB,SAEI,GADAnV,KAAKgV,SAAS7N,KAAK9C,KAAKC,OACpBtE,KAAKgV,SAAS9N,OAAS,EACvB,OAAOyN,EAAYS,QAInB,OADWpV,KAAKgV,SAAShV,KAAKgV,SAAS9N,OAAS,GAAKlH,KAAKgV,SAAS,IACvD,MACRb,EAAS/c,OAAOie,iBAAiB,OAAOrV,KAAKlI,wFACtC6c,EAAYW,eAGnBtV,KAAKgV,SAAS9R,QACPyR,EAAYS,WAMnC,SAAWR,GACPA,EAAsBA,EAA4B,KAAI,GAAK,OAC3DA,EAAsBA,EAA4B,KAAI,GAAK,OAC3DA,EAAsBA,EAA6B,MAAI,GAAK,QAC5DA,EAAsBA,EAA6B,MAAI,GAAK,QAJhE,CAKGA,EAAwB9d,EAAQ8d,wBAA0B9d,EAAQ8d,sBAAwB,KAE7F,SAAWC,GACPA,EAAMA,EAAe,QAAI,GAAK,UAC9BA,EAAMA,EAAgB,SAAI,GAAK,WAC/BA,EAAMA,EAAe,QAAI,GAAK,UAHlC,CAIGA,EAAQ/d,EAAQ+d,QAAU/d,EAAQ+d,MAAQ,KAE7C,SAAWC,GACPA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAsB,SAAI,GAAK,WAC3CA,EAAYA,EAAyB,YAAI,GAAK,cAC9CA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAsB,SAAI,GAAK,WAC3CA,EAAYA,EAAqB,QAAI,GAAK,UAN9C,CAOGA,IAAgBA,EAAc,KACjC,MAAMS,EAAuB,CACzB9I,EAAiC+I,WAAWC,KAC5ChJ,EAAiC+I,WAAWE,OAC5CjJ,EAAiC+I,WAAWG,UAC5ClJ,EAAiC+I,WAAWI,QAC5CnJ,EAAiC+I,WAAWK,MAC5CpJ,EAAiC+I,WAAWM,OAC5CrJ,EAAiC+I,WAAWO,SAC5CtJ,EAAiC+I,WAAWQ,MAC5CvJ,EAAiC+I,WAAWS,YAC5CxJ,EAAiC+I,WAAWU,KAC5CzJ,EAAiC+I,WAAWW,UAC5C1J,EAAiC+I,WAAWtB,SAC5CzH,EAAiC+I,WAAWY,SAC5C3J,EAAiC+I,WAAWa,SAC5C5J,EAAiC+I,WAAW/Q,OAC5CgI,EAAiC+I,WAAW9K,OAC5C+B,EAAiC+I,WAAWc,QAC5C7J,EAAiC+I,WAAWhL,MAC5CiC,EAAiC+I,WAAWvd,OAC5CwU,EAAiC+I,WAAWe,IAC5C9J,EAAiC+I,WAAWgB,KAC5C/J,EAAiC+I,WAAWiB,WAC5ChK,EAAiC+I,WAAWkB,OAC5CjK,EAAiC+I,WAAW1b,MAC5C2S,EAAiC+I,WAAWmB,SAC5ClK,EAAiC+I,WAAWoB,eAE1CC,EAA+B,CACjCpK,EAAiCqK,mBAAmBpX,KACpD+M,EAAiCqK,mBAAmBhB,OACpDrJ,EAAiCqK,mBAAmB5C,SACpDzH,EAAiCqK,mBAAmBb,YACpDxJ,EAAiCqK,mBAAmBd,MACpDvJ,EAAiCqK,mBAAmBV,SACpD3J,EAAiCqK,mBAAmBjB,MACpDpJ,EAAiCqK,mBAAmBX,UACpD1J,EAAiCqK,mBAAmBpB,OACpDjJ,EAAiCqK,mBAAmBf,SACpDtJ,EAAiCqK,mBAAmBC,KACpDtK,EAAiCqK,mBAAmBE,MACpDvK,EAAiCqK,mBAAmBZ,KACpDzJ,EAAiCqK,mBAAmBG,QACpDxK,EAAiCqK,mBAAmBI,QACpDzK,EAAiCqK,mBAAmBK,MACpD1K,EAAiCqK,mBAAmBrB,KACpDhJ,EAAiCqK,mBAAmBM,UACpD3K,EAAiCqK,mBAAmBO,OACpD5K,EAAiCqK,mBAAmBL,WACpDhK,EAAiCqK,mBAAmBT,SACpD5J,EAAiCqK,mBAAmBJ,OACpDjK,EAAiCqK,mBAAmBhd,MACpD2S,EAAiCqK,mBAAmBH,SACpDlK,EAAiCqK,mBAAmBF,eAExD,SAASU,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,IAAI0e,GACJ,SAAWA,GAKPA,EAAepP,GAJf,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,EAAG6K,KAAKoC,EAAU2N,WAAa5a,EAAG6K,KAAKoC,EAAU4N,aAAe7a,EAAG6K,KAAKoC,EAAUhC,eAAmC,IAAvBgC,EAAU6N,UAHpI,CAMGH,IAAmBA,EAAiB,KACvC,MAAMI,EACF,YAAYC,EAAS9L,EAAQnE,EAAOkQ,EAAaC,EAAeC,GAC5DhY,KAAK6X,QAAUA,EACf7X,KAAK+L,OAASA,EACd/L,KAAK4H,MAAQA,EACb5H,KAAK8X,YAAcA,EACnB9X,KAAK+X,cAAgBA,EACrB/X,KAAKgY,gBAAkBA,EACvBhY,KAAKiY,WAAa,IAAIjX,IAE1B,0BAA0BkX,EAAWC,GACjC,IAAK,MAAMpL,KAAYmL,EACnB,GAAI/D,EAASiE,UAAUC,MAAMtL,EAAUoL,GACnC,OAAO,EAGf,OAAO,EAEX,SAAS7V,EAAUuB,GACVA,EAAKyU,gBAAgBC,mBAGrBvY,KAAKwY,YACNxY,KAAKwY,UAAYxY,KAAK+L,OAAO/L,KAAKuG,SAAUvG,OAEhDA,KAAKiY,WAAW9V,IAAI0B,EAAK9B,GAAI8B,EAAKyU,gBAAgBC,mBAEtD,SAAS1U,GACA7D,KAAKgY,kBAAmBhY,KAAKgY,gBAAgBhY,KAAKiY,WAAWQ,SAAU5U,KACpE7D,KAAK8X,YACL9X,KAAK8X,YAAYjU,EAAOA,GAAS7D,KAAK6X,QAAQxQ,iBAAiBrH,KAAK4H,MAAO5H,KAAK+X,cAAclU,KAG9F7D,KAAK6X,QAAQxQ,iBAAiBrH,KAAK4H,MAAO5H,KAAK+X,cAAclU,IAEjE7D,KAAK0Y,iBAAiB7U,IAG9B,iBAAiB8U,IAEjB,WAAW5W,GACP/B,KAAKiY,WAAWvR,OAAO3E,GACM,IAAzB/B,KAAKiY,WAAWjV,MAAchD,KAAKwY,YACnCxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,GAGzB,UACIX,KAAKiY,WAAWW,QACZ5Y,KAAKwY,YACLxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,GAGzB,YAAYkY,GACR,IAAK,MAAM9L,KAAY/M,KAAKiY,WAAWQ,SACnC,GAAItE,EAASiE,UAAUC,MAAMtL,EAAU8L,GACnC,MAAO,CACH/E,KAAOjQ,IACH7D,KAAKuG,SAAS1C,KAK9B,MAAM,IAAIjE,MAAM,sDAGxB,MAAMkZ,UAAmClB,EACrC,YAAYmB,EAAQC,GAChBjZ,MAAMgZ,EAAQ5E,EAAS8E,UAAUC,sBAAuBzM,EAAiC0M,gCAAgCpd,KAAMgd,EAAOK,cAAcC,WAAWC,QAAUnB,GAAiBY,EAAOQ,uBAAuBC,yBAAyBrB,GAAeP,EAAsB6B,oBACtRzZ,KAAKgZ,iBAAmBA,EAE5B,eACI,OAAOvM,EAAiC0M,gCAAgCpd,KAE5E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBAAmBC,qBAAsB,EAE1F,WAAWD,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,GAA2BA,EAAwBE,WACvE9Z,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiB,CAAEC,iBAAkBA,KAGrG,SAASzY,EAAS+D,GAEd,GADA9D,MAAM0X,SAAS3X,EAAS+D,IACnBA,EAAKyU,gBAAgBC,iBACtB,OAEJ,IAAIA,EAAmB1U,EAAKyU,gBAAgBC,iBAC5CpE,EAAS8E,UAAUe,cAAczQ,QAAS4O,IACtC,IAAI8B,EAAM9B,EAAa8B,IAAIza,WAC3B,IAAIQ,KAAKgZ,iBAAiBnR,IAAIoS,IAG1B9F,EAASiE,UAAUC,MAAME,EAAkBJ,GAAe,CAC1D,IAAIkB,EAAarZ,KAAK6X,QAAQuB,cAAcC,WACxCC,EAAWnB,IACXnY,KAAK6X,QAAQxQ,iBAAiBrH,KAAK4H,MAAO5H,KAAK+X,cAAcI,KAE7DkB,EAAWC,QACXD,EAAWC,QAAQnB,EAAcmB,GAGjCA,EAAQnB,GAEZnY,KAAKgZ,iBAAiB7W,IAAI8X,EAAK9B,MAI3C,iBAAiBA,GACbpY,MAAM2Y,iBAAiBP,GACvBnY,KAAKgZ,iBAAiB7W,IAAIgW,EAAa8B,IAAIza,WAAY2Y,IAG/D,MAAM+B,UAAoCtC,EACtC,YAAYmB,EAAQC,GAChBjZ,MAAMgZ,EAAQ5E,EAAS8E,UAAUkB,uBAAwB1N,EAAiC2N,iCAAiCre,KAAMgd,EAAOK,cAAcC,WAAWgB,SAAWlC,GAAiBY,EAAOQ,uBAAuBe,0BAA0BnC,GAAeP,EAAsB6B,oBAC1RzZ,KAAKgZ,iBAAmBA,EAE5B,eACI,OAAOvM,EAAiC2N,iCAAiCre,KAE7E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBAAmBC,qBAAsB,EAE1F,WAAWD,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,GAA2BA,EAAwBE,WACvE9Z,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiB,CAAEC,iBAAkBA,KAGrG,iBAAiBJ,GACbpY,MAAM2Y,iBAAiBP,GACvBnY,KAAKgZ,iBAAiBtS,OAAOyR,EAAa8B,IAAIza,YAElD,WAAWuC,GACP,IAAIgL,EAAW/M,KAAKiY,WAAW7f,IAAI2J,GAGnChC,MAAM2X,WAAW3V,GACjB,IAAImW,EAAYlY,KAAKiY,WAAWQ,SAChCzY,KAAKgZ,iBAAiBzP,QAAS4O,IAC3B,GAAIhE,EAASiE,UAAUC,MAAMtL,EAAUoL,KAAkBnY,KAAKgY,gBAAgBE,EAAWC,GAAe,CACpG,IAAIkB,EAAarZ,KAAK6X,QAAQuB,cAAcC,WACxCgB,EAAYlC,IACZnY,KAAK6X,QAAQxQ,iBAAiBrH,KAAK4H,MAAO5H,KAAK+X,cAAcI,KAEjEnY,KAAKgZ,iBAAiBtS,OAAOyR,EAAa8B,IAAIza,YAC1C6Z,EAAWgB,SACXhB,EAAWgB,SAASlC,EAAckC,GAGlCA,EAASlC,OAM7B,MAAMoC,EACF,YAAY1C,GACR7X,KAAK6X,QAAUA,EACf7X,KAAKwa,YAAc,IAAIxZ,IACvBhB,KAAKya,kBAAmB,EAE5B,eACI,OAAOhO,EAAiCiO,kCAAkC3e,KAE9E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBAAmBC,qBAAsB,EAE1F,WAAWD,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,QAA8D,IAAnCA,EAAwBe,QAAqBf,EAAwBe,SAAWlO,EAAiCmO,qBAAqB7P,MACrL/K,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBrgB,OAAO4iB,OAAO,GAAI,CAAEtC,iBAAkBA,GAAoB,CAAEuC,SAAUlB,EAAwBe,WAI3H,SAASrY,EAAUuB,GACVA,EAAKyU,gBAAgBC,mBAGrBvY,KAAKwY,YACNxY,KAAKwY,UAAYrE,EAAS8E,UAAU8B,wBAAwB/a,KAAKuG,SAAUvG,OAE/EA,KAAKwa,YAAYrY,IAAI0B,EAAK9B,GAAI,CAC1BwW,iBAAkB1U,EAAKyU,gBAAgBC,iBACvCuC,SAAUjX,EAAKyU,gBAAgBwC,YAGvC,SAAS7S,GAIL,GAAoC,IAAhCA,EAAM+S,eAAe9T,OAGzB,IAAK,MAAM+T,KAAcjb,KAAKwa,YAAY/B,SACtC,GAAItE,EAASiE,UAAUC,MAAM4C,EAAW1C,iBAAkBtQ,EAAM4Q,UAAW,CACvE,IAAIQ,EAAarZ,KAAK6X,QAAQuB,cAAcC,WAC5C,GAAI4B,EAAWH,WAAarO,EAAiCmO,qBAAqBM,YAAa,CAC3F,IAAIpX,EAAS9D,KAAK6X,QAAQ0B,uBAAuB4B,2BAA2BlT,GACxEoR,EAAW+B,UACX/B,EAAW+B,UAAUnT,EAAO,IAAMjI,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCiO,kCAAkC3e,KAAM+H,IAGzI9D,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCiO,kCAAkC3e,KAAM+H,QAG1G,GAAImX,EAAWH,WAAarO,EAAiCmO,qBAAqBS,KAAM,CACzF,IAAID,EAAanT,IACTjI,KAAKsb,gBACDtb,KAAKsb,eAAerB,MAAQhS,EAAM4Q,SAASoB,IAAIza,aAE/CQ,KAAKub,gBACLvb,KAAKsb,eAAerB,IAAMhS,EAAM4Q,SAASoB,IAAIza,YAEjDQ,KAAKsb,eAAeE,QAAQC,QAAQ,KAChCzb,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCiO,kCAAkC3e,KAAMiE,KAAK6X,QAAQ0B,uBAAuB4B,2BAA2BlT,EAAM4Q,eAIhL7Y,KAAKsb,eAAiB,CAClBrB,IAAKhS,EAAM4Q,SAASoB,IAAIza,WACxBgc,QAAS,IAAIlH,EAAQoH,QAAQ,MAEjC1b,KAAKsb,eAAeE,QAAQC,QAAQ,KAChCzb,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCiO,kCAAkC3e,KAAMiE,KAAK6X,QAAQ0B,uBAAuB4B,2BAA2BlT,EAAM4Q,aAC5K,KAGRQ,EAAW+B,UACX/B,EAAW+B,UAAUnT,EAAOmT,GAG5BA,EAAUnT,KAM9B,WAAWlG,GACP/B,KAAKwa,YAAY9T,OAAO3E,GACM,IAA1B/B,KAAKwa,YAAYxX,MAAchD,KAAKwY,YACpCxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,GAGzB,UACIX,KAAKsb,oBAAiB3a,EACtBX,KAAKya,kBAAmB,EACxBza,KAAKwa,YAAY5B,QACb5Y,KAAKwY,YACLxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,GAGzB,gBACI,IAAIX,KAAKya,kBAAqBza,KAAKsb,eAGnC,IACItb,KAAKya,kBAAmB,EACxBza,KAAKsb,eAAeE,QAAQD,gBAEhC,QACIvb,KAAKya,kBAAmB,GAGhC,YAAY5B,GACR,IAAK,MAAMoC,KAAcjb,KAAKwa,YAAY/B,SACtC,GAAItE,EAASiE,UAAUC,MAAM4C,EAAW1C,iBAAkBM,GACtD,MAAO,CACH/E,KAAO7L,IACHjI,KAAKuG,SAAS0B,KAK9B,MAAM,IAAIrI,MAAM,sDAGxB,MAAM+b,UAAwB/D,EAC1B,YAAYmB,GACRhZ,MAAMgZ,EAAQ5E,EAAS8E,UAAU2C,uBAAwBnP,EAAiCoP,iCAAiC9f,KAAMgd,EAAOK,cAAcC,WAAWyC,SAAWC,GAAkBhD,EAAOQ,uBAAuByC,6BAA6BD,GAAgB,CAAC7D,EAAW6D,IAAkBnE,EAAsB6B,mBAAmBvB,EAAW6D,EAAclD,WAE7W,eACI,OAAOpM,EAAiCoP,iCAAiC9f,KAE7E,uBAAuB2d,GACPpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBACnDoC,UAAW,EAErB,WAAWpC,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,GAA2BA,EAAwBkC,UACvE9b,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiB,CAAEC,iBAAkBA,MAKrD,MAAM0D,EACF,YAAYpE,GACR7X,KAAK6X,QAAUA,EACf7X,KAAKiY,WAAa,IAAIjX,IAE1B,eACI,OAAOyL,EAAiCyP,qCAAqCngB,KAEjF,uBAAuB2d,GACPpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBACnDyC,mBAAoB,EAE9B,WAAWzC,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,GAA2BA,EAAwBuC,mBACvEnc,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiB,CAAEC,iBAAkBA,KAIjD,SAASjW,EAAUuB,GACVA,EAAKyU,gBAAgBC,mBAGrBvY,KAAKwY,YACNxY,KAAKwY,UAAYrE,EAAS8E,UAAU2C,uBAAuB5b,KAAKuG,SAAUvG,OAE9EA,KAAKiY,WAAW9V,IAAI0B,EAAK9B,GAAI8B,EAAKyU,gBAAgBC,mBAEtD,SAAStQ,GACL,GAAI2P,EAAsB6B,mBAAmBzZ,KAAKiY,WAAWQ,SAAUxQ,EAAM4Q,UAAW,CACpF,IAAIQ,EAAarZ,KAAK6X,QAAQuB,cAAcC,WACxC8C,EAAqBlU,GACdjI,KAAK6X,QAAQ3P,YAAYuE,EAAiCyP,qCAAqCngB,KAAMiE,KAAK6X,QAAQ0B,uBAAuByC,6BAA6B/T,IAAQlD,KAAMqX,IACvL,IAAIC,EAASrc,KAAK6X,QAAQyE,uBAAuBC,YAAYH,GAC7D,YAAkB,IAAXC,EAAoB,GAAKA,IAGxCpU,EAAMuU,UAAUnD,EAAW8C,kBACrB9C,EAAW8C,kBAAkBlU,EAAOkU,GACpCA,EAAkBlU,KAGhC,WAAWlG,GACP/B,KAAKiY,WAAWvR,OAAO3E,GACM,IAAzB/B,KAAKiY,WAAWjV,MAAchD,KAAKwY,YACnCxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,GAGzB,UACIX,KAAKiY,WAAWW,QACZ5Y,KAAKwY,YACLxY,KAAKwY,UAAU1Q,UACf9H,KAAKwY,eAAY7X,IAI7B,MAAM8b,UAAmC7E,EACrC,YAAYmB,GACRhZ,MAAMgZ,EAAQ5E,EAAS8E,UAAUyD,sBAAuBjQ,EAAiCkQ,gCAAgC5gB,KAAMgd,EAAOK,cAAcC,WAAWuD,QAAUzE,GAAiBY,EAAOQ,uBAAuBsD,yBAAyB1E,EAAcnY,KAAK8c,cAAelF,EAAsB6B,oBAE7S,eACI,OAAOhN,EAAiCkQ,gCAAgC5gB,KAE5E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,gBAAiB,mBAAmBkD,SAAU,EAE9E,WAAWlD,EAAcnB,GACrB,IAAIqB,EAA0BF,EAAaG,yBACvCtB,GAAoBqB,GAA2BA,EAAwBmD,MACvE/c,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBrgB,OAAO4iB,OAAO,GAAI,CAAEtC,iBAAkBA,GAAoB,CAAEyE,cAAepD,EAAwBmD,KAAKC,gBAIrI,SAASlhB,EAAQ+H,GACb7D,KAAK8c,eAAiBjZ,EAAKyU,gBAAgB0E,YAC3Cjd,MAAM0X,SAAS3b,EAAQ+H,IAG/B,MAAMoZ,EACF,YAAYpF,EAASqF,GACjBld,KAAK6X,QAAUA,EACf7X,KAAKkd,iBAAmBA,EACxBld,KAAKmd,UAAY,IAAInc,IAEzB,eACI,OAAOyL,EAAiC2Q,kCAAkCrhB,KAE9E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,aAAc,yBAAyBC,qBAAsB,EAE7F,WAAW0D,EAAeC,IAE1B,SAASC,EAAS1Z,GACd,IAAK2G,MAAMC,QAAQ5G,EAAKyU,gBAAgBkF,UACpC,OAEJ,IAAIC,EAAe,GACnB,IAAK,IAAIC,KAAW7Z,EAAKyU,gBAAgBkF,SAAU,CAC/C,IAAK3gB,EAAGsC,OAAOue,EAAQC,aACnB,SAEJ,IAAIC,GAAc,EAAMC,GAAc,EAAMC,GAAc,OACrC,IAAjBJ,EAAQK,MAAoC,OAAjBL,EAAQK,OACnCH,EAAqF,IAAtEF,EAAQK,KAAOtR,EAAiCuR,UAAUC,QACzEJ,EAAqF,IAAtEH,EAAQK,KAAOtR,EAAiCuR,UAAUE,QACzEJ,EAAqF,IAAtEJ,EAAQK,KAAOtR,EAAiCuR,UAAUG,SAE7E,IAAIC,EAAoBjK,EAAS8E,UAAUoF,wBAAwBX,EAAQC,aAAcC,GAAcC,GAAcC,GACrH9d,KAAKse,cAAcF,EAAmBR,EAAaC,EAAaC,GAChEL,EAAatW,KAAKiX,GAEtBpe,KAAKmd,UAAUhb,IAAI0B,EAAK9B,GAAI0b,GAEhC,YAAY1b,EAAIwc,GACZ,IAAId,EAAe,GACnB,IAAK,IAAIW,KAAqBG,EAC1Bve,KAAKse,cAAcF,GAAmB,GAAM,GAAM,EAAMX,GAE5Dzd,KAAKmd,UAAUhb,IAAIJ,EAAI0b,GAE3B,cAAcW,EAAmBR,EAAaC,EAAaC,EAAalO,GAChEgO,GACAQ,EAAkBI,YAAaC,GAAaze,KAAKkd,iBAAiB,CAC9DjD,IAAKja,KAAK6X,QAAQ0B,uBAAuBmF,MAAMD,GAC/C1iB,KAAM0Q,EAAiCkS,eAAeC,UACtD,KAAMhP,GAEViO,GACAO,EAAkBS,YAAaJ,GAAaze,KAAKkd,iBAAiB,CAC9DjD,IAAKja,KAAK6X,QAAQ0B,uBAAuBmF,MAAMD,GAC/C1iB,KAAM0Q,EAAiCkS,eAAeG,UACtD,KAAMlP,GAEVkO,GACAM,EAAkBW,YAAaN,GAAaze,KAAKkd,iBAAiB,CAC9DjD,IAAKja,KAAK6X,QAAQ0B,uBAAuBmF,MAAMD,GAC/C1iB,KAAM0Q,EAAiCkS,eAAeK,UACtD,KAAMpP,GAGlB,WAAW7N,GACP,IAAI0b,EAAezd,KAAKmd,UAAU/kB,IAAI2J,GACtC,GAAI0b,EACA,IAAK,IAAIwB,KAAcxB,EACnBwB,EAAWnX,UAIvB,UACI9H,KAAKmd,UAAU5T,QAASkU,IACpB,IAAK,IAAIwB,KAAcxB,EACnBwB,EAAWnX,YAGnB9H,KAAKmd,UAAUvE,SAGvB,MAAMsG,EACF,YAAYrH,EAASvV,GACjBtC,KAAK6X,QAAUA,EACf7X,KAAKsC,SAAWA,EAChBtC,KAAKmf,eAAiB,IAAIne,IAE9B,eACI,OAAOhB,KAAKsC,SAEhB,SAASxC,EAAS+D,GACd,GAAI/D,EAAQhE,SAAWkE,KAAK2X,SAAS7b,OACjC,MAAM,IAAI8D,MAAM,+CAA+CE,EAAQhE,8BAA8BkE,KAAK2X,SAAS7b,UAEvH,IAAK+H,EAAKyU,gBAAgBC,iBACtB,OAEJ,IAAI6G,EAAepf,KAAKqf,yBAAyBxb,EAAKyU,iBACtDtY,KAAKmf,eAAehd,IAAI0B,EAAK9B,GAAI,CAAEkd,WAAYG,EAAa,GAAIvb,OAAMyb,SAAUF,EAAa,KAEjG,WAAWrd,GACP,IAAIqd,EAAepf,KAAKmf,eAAe/mB,IAAI2J,QACtBpB,IAAjBye,GACAA,EAAaH,WAAWnX,UAGhC,UACI9H,KAAKmf,eAAe5V,QAAS/Q,IACzBA,EAAMymB,WAAWnX,YAErB9H,KAAKmf,eAAevG,QAExB,gBAAgBL,EAAkBgH,GAC9B,IAAKA,EACD,MAAO,MAAC5e,OAAWA,GAElB,GAAI8L,EAAiC+S,gCAAgCpX,GAAGmX,GAAa,CACtF,MAAMxd,EAAK0K,EAAiCgT,0BAA0BC,MAAMH,GAAcA,EAAWxd,GAAKwS,EAAKwF,eACzGhN,EAAWwS,EAAWhH,kBAAoBA,EAChD,GAAIxL,EACA,MAAO,CAAChL,EAAI9J,OAAO4iB,OAAO,GAAI0E,EAAY,CAAEhH,iBAAkBxL,UAGjE,GAAIlQ,EAAGsM,QAAQoW,KAA8B,IAAfA,GAAuB9S,EAAiCkT,wBAAwBvX,GAAGmX,GAAa,CAC/H,IAAKhH,EACD,MAAO,MAAC5X,OAAWA,GAEvB,IAAIif,EAAW/iB,EAAGsM,QAAQoW,KAA8B,IAAfA,EAAsB,CAAEhH,oBAAqBtgB,OAAO4iB,OAAO,GAAI0E,EAAY,CAAEhH,qBACtH,MAAO,CAAChE,EAAKwF,eAAgB6F,GAEjC,MAAO,MAACjf,OAAWA,GAEvB,uBAAuB4X,EAAkBgH,GACrC,GAAKhH,GAAqBgH,EAG1B,OAAQ1iB,EAAGsM,QAAQoW,KAA8B,IAAfA,EAAsB,CAAEhH,oBAAqBtgB,OAAO4iB,OAAO,GAAI0E,EAAY,CAAEhH,qBAEnH,YAAYJ,GACR,IAAK,MAAMiH,KAAgBpf,KAAKmf,eAAe1G,SAAU,CACrD,IAAI1L,EAAWqS,EAAavb,KAAKyU,gBAAgBC,iBACjD,GAAiB,OAAbxL,GAAqBoH,EAASiE,UAAUC,MAAMtL,EAAUoL,GACxD,OAAOiH,EAAaE,SAG5B,MAAM,IAAI1f,MAAM,kEAAkEuY,EAAa8B,IAAIza,aAG3G1I,EAAQooB,oBAAsBA,EAqC9B,MAAMW,UAA8BX,EAChC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCqT,kBAAkB/jB,MAErE,uBAAuBgkB,GACnB,IAAIC,EAAa1I,EAAOA,EAAOyI,EAAa,gBAAiB,cAC7DC,EAAWrG,qBAAsB,EACjCqG,EAAWC,gBAAiB,EAC5BD,EAAWE,eAAiB,CACxBC,gBAAgB,EAChBC,yBAAyB,EACzBC,oBAAqB,CAAC5T,EAAiC6T,WAAWC,SAAU9T,EAAiC6T,WAAWE,WACxHC,mBAAmB,EACnBC,kBAAkB,EAClBC,WAAY,CAAEC,SAAU,CAACnU,EAAiCoU,kBAAkBC,cAEhFd,EAAWe,mBAAqB,CAAEH,SAAU/J,GAEhD,WAAW6C,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAauH,oBACtErB,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBsH,IAGzB,yBAAyBA,GACrB,MAAMsB,EAAoBtB,EAAQsB,mBAAqB,GACjD5B,EAAW,CACb6B,uBAAwB,CAACtI,EAAUuI,EAAUxc,EAAOqG,KAChD,MAAM8N,EAAS/Y,KAAK6X,QACdwB,EAAarZ,KAAK6X,QAAQuB,cAAcC,WACxC8H,EAAyB,CAACtI,EAAUuI,EAAUnW,EAASrG,IAClDmU,EAAO7Q,YAAYuE,EAAiCqT,kBAAkB/jB,KAAMgd,EAAOQ,uBAAuB8H,mBAAmBxI,EAAUuI,EAAUnW,GAAUrG,GAAOG,KAAKgU,EAAOuD,uBAAuBgF,mBAAqBxiB,IAC7Nia,EAAOwI,iBAAiB9U,EAAiCqT,kBAAkB/jB,KAAM+C,GAC1E0J,QAAQzC,QAAQ,MAG/B,OAAOsT,EAAWmI,sBACZnI,EAAWmI,sBAAsB3I,EAAUuI,EAAUnW,EAASrG,EAAOuc,GACrEA,EAAuBtI,EAAUuI,EAAUnW,EAASrG,IAE9D6c,sBAAuB7B,EAAQ8B,gBACzB,CAACC,EAAM/c,KACL,MAAMmU,EAAS/Y,KAAK6X,QACdwB,EAAarZ,KAAK6X,QAAQuB,cAAcC,WACxCoI,EAAwB,CAACE,EAAM/c,IAC1BmU,EAAO7Q,YAAYuE,EAAiCmV,yBAAyB7lB,KAAMgd,EAAOQ,uBAAuBsI,iBAAiBF,GAAO/c,GAAOG,KAAKgU,EAAOuD,uBAAuBuF,iBAAmB/iB,IACzMia,EAAOwI,iBAAiB9U,EAAiCmV,yBAAyB7lB,KAAM+C,GACjF0J,QAAQzC,QAAQ4b,KAG/B,OAAOtI,EAAWoI,sBACZpI,EAAWoI,sBAAsBE,EAAM/c,EAAO6c,GAC9CA,EAAsBE,EAAM/c,SAEpCjE,GAEV,MAAO,CAACwT,EAASiE,UAAU0J,+BAA+BlC,EAAQrH,iBAAkB+G,KAAa4B,GAAoB5B,IAG7H,MAAMyC,UAAqB7C,EACvB,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCuV,aAAajmB,MAEhE,uBAAuBgkB,GACnB,MAAMkC,EAAmB3K,EAAOA,EAAOyI,EAAa,gBAAiB,SACrEkC,EAAgBtI,qBAAsB,EACtCsI,EAAgBC,cAAgB,CAACzV,EAAiC6T,WAAWC,SAAU9T,EAAiC6T,WAAWE,WAEvI,WAAW9G,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAayI,eACtEvC,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBsH,IAGzB,yBAAyBA,GACrB,MAAMN,EAAW,CACb8C,aAAc,CAACvJ,EAAUuI,EAAUxc,KAC/B,MAAMmU,EAAS/Y,KAAK6X,QACduK,EAAe,CAACvJ,EAAUuI,EAAUxc,IAC/BmU,EAAO7Q,YAAYuE,EAAiCuV,aAAajmB,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBgG,QAAUxjB,IAC9Mia,EAAOwI,iBAAiB9U,EAAiCuV,aAAajmB,KAAM+C,GACrE0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW+I,aACZ/I,EAAW+I,aAAavJ,EAAUuI,EAAUxc,EAAOwd,GACnDA,EAAavJ,EAAUuI,EAAUxc,KAG/C,MAAO,CAACuP,EAASiE,UAAUmK,sBAAsB3C,EAAQrH,iBAAkB+G,GAAWA,IAG9F,MAAMkD,UAA6BtD,EAC/B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCgW,qBAAqB1mB,MAExE,uBAAuBgkB,GACnB,IAAI2C,EAASpL,EAAOA,EAAOyI,EAAa,gBAAiB,iBACzD2C,EAAO/I,qBAAsB,EAC7B+I,EAAOC,qBAAuB,CAAEtC,oBAAqB,CAAC5T,EAAiC6T,WAAWC,SAAU9T,EAAiC6T,WAAWE,YACxJkC,EAAOC,qBAAqBC,qBAAuB,CAAEC,oBAAoB,GACzEH,EAAOzC,gBAAiB,EAE5B,WAAWvG,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAaoJ,uBACtElD,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBsH,IAGzB,yBAAyBA,GACrB,MAAMN,EAAW,CACbyD,qBAAsB,CAAClK,EAAUuI,EAAUxc,EAAOqG,KAC9C,MAAM8N,EAAS/Y,KAAK6X,QACdmL,EAAwB,CAACnK,EAAUuI,EAAUnW,EAASrG,IACjDmU,EAAO7Q,YAAYuE,EAAiCgW,qBAAqB1mB,KAAMgd,EAAOQ,uBAAuB0J,sBAAsBpK,EAAUuI,EAAUnW,GAAUrG,GAAOG,KAAKgU,EAAOuD,uBAAuB4G,gBAAkBpkB,IAChOia,EAAOwI,iBAAiB9U,EAAiCgW,qBAAqB1mB,KAAM+C,GAC7E0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW0J,qBACZ1J,EAAW0J,qBAAqBlK,EAAUuI,EAAUnW,EAASrG,EAAOoe,GACpEA,EAAsBnK,EAAUuI,EAAUnW,EAASrG,KAGjE,IAAIqa,EACJ,QAAoCte,IAAhCif,EAAQuD,oBAAmC,CAC3C,MAAMjC,EAAoBtB,EAAQsB,mBAAqB,GACvDjC,EAAa9K,EAASiE,UAAUgL,8BAA8BxD,EAAQrH,iBAAkB+G,KAAa4B,OAEpG,CACD,MAAMmC,EAAW,CACbnC,kBAAmBtB,EAAQsB,mBAAqB,GAChDiC,oBAAqBvD,EAAQuD,qBAAuB,IAExDlE,EAAa9K,EAASiE,UAAUgL,8BAA8BxD,EAAQrH,iBAAkB+G,EAAU+D,GAEtG,MAAO,CAACpE,EAAYK,IAG5B,MAAMgE,UAA0BpE,EAC5B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC8W,kBAAkBxnB,MAErE,uBAAuBgkB,GACnB,IAAIyD,EAAoBlM,EAAOA,EAAOyI,EAAa,gBAAiB,cACpEyD,EAAkB7J,qBAAsB,EACxC6J,EAAkBC,aAAc,EAEpC,WAAW/J,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAagK,oBACtE9D,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACbqE,kBAAmB,CAAC9K,EAAUuI,EAAUxc,KACpC,MAAMmU,EAAS/Y,KAAK6X,QACd8L,EAAoB,CAAC9K,EAAUuI,EAAUxc,IACpCmU,EAAO7Q,YAAYuE,EAAiC8W,kBAAkBxnB,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBsH,mBAAqB9kB,IAC9Nia,EAAOwI,iBAAiB9U,EAAiC8W,kBAAkBxnB,KAAM+C,GAC1E0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWsK,kBACZtK,EAAWsK,kBAAkB9K,EAAUuI,EAAUxc,EAAO+e,GACxDA,EAAkB9K,EAAUuI,EAAUxc,KAGpD,MAAO,CAACuP,EAASiE,UAAUyL,2BAA2BjE,EAAQrH,iBAAkB+G,GAAWA,IAGnG,MAAMwE,UAA0B5E,EAC5B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCsX,kBAAkBhoB,MAErE,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,cAAcpG,qBAAsB,EAEpF,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAasK,oBACtEpE,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb2E,kBAAmB,CAACpL,EAAUuI,EAAUxB,EAAShb,KAC7C,MAAMmU,EAAS/Y,KAAK6X,QACdqM,EAAsB,CAACrL,EAAUuI,EAAUxB,EAAShb,IAC/CmU,EAAO7Q,YAAYuE,EAAiCsX,kBAAkBhoB,KAAMgd,EAAOQ,uBAAuB4K,kBAAkBtL,EAAUuI,EAAUxB,GAAUhb,GAAOG,KAAKgU,EAAOuD,uBAAuB8H,aAAetlB,IACtNia,EAAOwI,iBAAiB9U,EAAiCsX,kBAAkBhoB,KAAM+C,GAC1E0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW4K,kBACZ5K,EAAW4K,kBAAkBpL,EAAUuI,EAAUxB,EAAShb,EAAOsf,GACjEA,EAAoBrL,EAAUuI,EAAUxB,EAAShb,KAG/D,MAAO,CAACuP,EAASiE,UAAUiM,0BAA0BzE,EAAQrH,iBAAkB+G,GAAWA,IAGlG,MAAMgF,UAAiCpF,EACnC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC8X,yBAAyBxoB,MAE5E,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,qBAAqBpG,qBAAsB,EAE3F,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAa8K,2BACtE5E,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACbmF,0BAA2B,CAAC5L,EAAUuI,EAAUxc,KAC5C,MAAMmU,EAAS/Y,KAAK6X,QACd6M,EAA6B,CAAC7L,EAAUuI,EAAUxc,IAC7CmU,EAAO7Q,YAAYuE,EAAiC8X,yBAAyBxoB,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBqI,qBAAuB7lB,IACvOia,EAAOwI,iBAAiB9U,EAAiC8X,yBAAyBxoB,KAAM+C,GACjF0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWoL,0BACZpL,EAAWoL,0BAA0B5L,EAAUuI,EAAUxc,EAAO8f,GAChEA,EAA2B7L,EAAUuI,EAAUxc,KAG7D,MAAO,CAACuP,EAASiE,UAAUwM,kCAAkChF,EAAQrH,iBAAkB+G,GAAWA,IAG1G,MAAMuF,UAA8B3F,EAChC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCqY,sBAAsB/oB,MAEzE,uBAAuBgkB,GACnB,IAAIgF,EAAqBzN,EAAOA,EAAOyI,EAAa,gBAAiB,kBACrEgF,EAAmBpL,qBAAsB,EACzCoL,EAAmBC,WAAa,CAC5BpE,SAAUrL,GAEdwP,EAAmBE,mCAAoC,EAE3D,WAAWvL,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAawL,wBACtEtF,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb6F,uBAAwB,CAACtM,EAAUjU,KAC/B,MAAMmU,EAAS/Y,KAAK6X,QACduN,EAA0B,CAACvM,EAAUjU,IAChCmU,EAAO7Q,YAAYuE,EAAiCqY,sBAAsB/oB,KAAMgd,EAAOQ,uBAAuB8L,uBAAuBxM,GAAWjU,GAAOG,KAAMlB,IAChK,GAAa,OAATA,EAAJ,CAGA,GAAoB,IAAhBA,EAAKqD,OACL,MAAO,GAEN,CACD,IAAI/C,EAAUN,EAAK,GACnB,OAAI4I,EAAiC6Y,eAAeld,GAAGjE,GAC5C4U,EAAOuD,uBAAuBiJ,kBAAkB1hB,GAGhDkV,EAAOuD,uBAAuBkJ,qBAAqB3hB,MAGlE/E,IACAia,EAAOwI,iBAAiB9U,EAAiCqY,sBAAsB/oB,KAAM+C,GAC9E0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW8L,uBACZ9L,EAAW8L,uBAAuBtM,EAAUjU,EAAOwgB,GACnDA,EAAwBvM,EAAUjU,KAGhD,MAAO,CAACuP,EAASiE,UAAUqN,+BAA+B7F,EAAQrH,iBAAkB+G,GAAWA,IAGvG,MAAMoG,UAxVN,MACI,YAAY7N,EAASvV,GACjBtC,KAAK6X,QAAUA,EACf7X,KAAKsC,SAAWA,EAChBtC,KAAKmf,eAAiB,IAAIne,IAE9B,eACI,OAAOhB,KAAKsC,SAEhB,SAASxC,EAAS+D,GACd,GAAI/D,EAAQhE,SAAWkE,KAAK2X,SAAS7b,OACjC,MAAM,IAAI8D,MAAM,8CAA8CE,EAAQhE,8BAA8BkE,KAAK2X,SAAS7b,UAEtH,MAAMsjB,EAAepf,KAAKqf,yBAAyBxb,EAAKyU,iBACxDtY,KAAKmf,eAAehd,IAAI0B,EAAK9B,GAAI,CAAEkd,WAAYG,EAAa,GAAIE,SAAUF,EAAa,KAE3F,WAAWrd,GACP,IAAIqd,EAAepf,KAAKmf,eAAe/mB,IAAI2J,QACtBpB,IAAjBye,GACAA,EAAaH,WAAWnX,UAGhC,UACI9H,KAAKmf,eAAe5V,QAAS6V,IACzBA,EAAaH,WAAWnX,YAE5B9H,KAAKmf,eAAevG,QAExB,eACI,MAAMnV,EAAS,GACf,IAAK,MAAM2b,KAAgBpf,KAAKmf,eAAe1G,SAC3ChV,EAAO0D,KAAKiY,EAAaE,UAE7B,OAAO7b,IAwTX,YAAYsV,GACRhZ,MAAMgZ,EAAQtM,EAAiCkZ,uBAAuB5pB,MAE1E,uBAAuBgkB,GACnB,IAAIgF,EAAqBzN,EAAOA,EAAOyI,EAAa,aAAc,UAClEgF,EAAmBpL,qBAAsB,EACzCoL,EAAmBC,WAAa,CAC5BpE,SAAUrL,GAGlB,WAAWmE,GACFA,EAAakM,yBAGlB5lB,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,iBAA0D,IAAzCoB,EAAakM,wBAAmC,CAAEC,kBAAkB,GAAUnM,EAAakM,0BAGpH,yBAAyB9Z,GACrB,MAAMwT,EAAW,CACbwG,wBAAyB,CAACC,EAAOnhB,KAC7B,MAAMmU,EAAS/Y,KAAK6X,QACdiO,EAA0B,CAACC,EAAOnhB,IAC7BmU,EAAO7Q,YAAYuE,EAAiCkZ,uBAAuB5pB,KAAM,CAAEgqB,SAASnhB,GAAOG,KAAKgU,EAAOuD,uBAAuBkJ,qBAAuB1mB,IAChKia,EAAOwI,iBAAiB9U,EAAiCkZ,uBAAuB5pB,KAAM+C,GAC/E0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWyM,wBACZzM,EAAWyM,wBAAwBC,EAAOnhB,EAAOkhB,GACjDA,EAAwBC,EAAOnhB,KAG7C,MAAO,CAACuP,EAASiE,UAAU4N,gCAAgC1G,GAAWA,IAG9E,MAAM2G,UAA0B/G,EAC5B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCyZ,kBAAkBnqB,MAErE,uBAAuBgkB,GACnB,MAAMoG,EAAM7O,EAAOA,EAAOyI,EAAa,gBAAiB,cACxDoG,EAAIxM,qBAAsB,EAC1BwM,EAAIC,oBAAqB,EACzBD,EAAIE,yBAA2B,CAC3BC,eAAgB,CACZ1F,SAAU,CACNnU,EAAiC8Z,eAAeC,MAChD/Z,EAAiC8Z,eAAeE,SAChDha,EAAiC8Z,eAAeG,SAChDja,EAAiC8Z,eAAeI,gBAChDla,EAAiC8Z,eAAeK,eAChDna,EAAiC8Z,eAAeM,gBAChDpa,EAAiC8Z,eAAeO,OAChDra,EAAiC8Z,eAAeQ,yBAKhE,WAAWrN,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAasN,oBACtEpH,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb2H,mBAAoB,CAACpO,EAAUqO,EAAOjc,EAASrG,KAC3C,MAAMmU,EAAS/Y,KAAK6X,QACdsP,EAAsB,CAACtO,EAAUqO,EAAOjc,EAASrG,KACnD,MAAMd,EAAS,CACXqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrEqO,MAAOnO,EAAOQ,uBAAuB8N,QAAQH,GAC7Cjc,QAAS8N,EAAOQ,uBAAuB+N,oBAAoBrc,IAE/D,OAAO8N,EAAO7Q,YAAYuE,EAAiCyZ,kBAAkBnqB,KAAM+H,EAAQc,GAAOG,KAAM0T,IACpG,GAAe,OAAXA,EACA,OAEJ,MAAMhV,EAAS,GACf,IAAK,IAAIke,KAAQlJ,EACThM,EAAiC8a,QAAQnf,GAAGuZ,GAC5Cle,EAAO0D,KAAK4R,EAAOuD,uBAAuBkL,UAAU7F,IAGpDle,EAAO0D,KAAK4R,EAAOuD,uBAAuBmL,aAAa9F,IAG/D,OAAOle,GACP3E,IACAia,EAAOwI,iBAAiB9U,EAAiCyZ,kBAAkBnqB,KAAM+C,GAC1E0J,QAAQzC,QAAQ,OAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW4N,mBACZ5N,EAAW4N,mBAAmBpO,EAAUqO,EAAOjc,EAASrG,EAAOuiB,GAC/DA,EAAoBtO,EAAUqO,EAAOjc,EAASrG,KAG5D,MAAO,CAACuP,EAASiE,UAAUsP,4BAA4B9H,EAAQrH,iBAAkB+G,EAAWM,EAAQ+H,gBAC1F,CAAEC,wBAAyB5nB,KAAK6X,QAAQyE,uBAAuBuL,kBAAkBjI,EAAQ+H,uBACzFhnB,GAAa2e,IAG/B,MAAMwI,UAAwB5I,EAC1B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCsb,gBAAgBhsB,MAEnE,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,YAAYpG,qBAAsB,EAElF,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAasO,kBACtEpI,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb2I,kBAAmB,CAACpP,EAAUjU,KAC1B,MAAMmU,EAAS/Y,KAAK6X,QACdoQ,EAAoB,CAACpP,EAAUjU,IAC1BmU,EAAO7Q,YAAYuE,EAAiCsb,gBAAgBhsB,KAAMgd,EAAOQ,uBAAuB2O,iBAAiBrP,GAAWjU,GAAOG,KAAKgU,EAAOuD,uBAAuB6L,aAAerpB,IAChMia,EAAOwI,iBAAiB9U,EAAiCsb,gBAAgBhsB,KAAM+C,GACxE0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW4O,kBACZ5O,EAAW4O,kBAAkBpP,EAAUjU,EAAOqjB,GAC9CA,EAAkBpP,EAAUjU,IAEtCwjB,gBAAkBxI,EAAuB,gBACnC,CAACyI,EAAUzjB,KACT,MAAMmU,EAAS/Y,KAAK6X,QACduQ,EAAkB,CAACC,EAAUzjB,IACxBmU,EAAO7Q,YAAYuE,EAAiC6b,uBAAuBvsB,KAAMgd,EAAOQ,uBAAuBgP,WAAWF,GAAWzjB,GAAOG,KAAKgU,EAAOuD,uBAAuBiM,WAAazpB,IAC/Lia,EAAOwI,iBAAiB9U,EAAiC6b,uBAAuBvsB,KAAM+C,GAC/EupB,IAGThP,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW+O,gBACZ/O,EAAW+O,gBAAgBC,EAAUzjB,EAAOwjB,GAC5CA,EAAgBC,EAAUzjB,SAElCjE,GAEV,MAAO,CAACwT,EAASiE,UAAUoQ,yBAAyB5I,EAAQrH,iBAAkB+G,GAAWA,IAGjG,MAAMmJ,UAAkCvJ,EACpC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCic,0BAA0B3sB,MAE7E,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,cAAcpG,qBAAsB,EAEpF,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAaiP,4BACtE/I,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACbsJ,+BAAgC,CAAC/P,EAAU+G,EAAShb,KAChD,MAAMmU,EAAS/Y,KAAK6X,QACd+Q,EAAiC,CAAC/P,EAAU+G,EAAShb,KACvD,MAAMd,EAAS,CACXqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrE+G,QAAS7G,EAAOQ,uBAAuBsP,oBAAoBjJ,IAE/D,OAAO7G,EAAO7Q,YAAYuE,EAAiCic,0BAA0B3sB,KAAM+H,EAAQc,GAAOG,KAAKgU,EAAOuD,uBAAuBC,YAAczd,IACvJia,EAAOwI,iBAAiB9U,EAAiCic,0BAA0B3sB,KAAM+C,GAClF0J,QAAQzC,QAAQ,OAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWuP,+BACZvP,EAAWuP,+BAA+B/P,EAAU+G,EAAShb,EAAOgkB,GACpEA,EAA+B/P,EAAU+G,EAAShb,KAGhE,MAAO,CAACuP,EAASiE,UAAU0Q,uCAAuClJ,EAAQrH,iBAAkB+G,GAAWA,IAG/G,MAAMyJ,UAAuC7J,EACzC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCuc,+BAA+BjtB,MAElF,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,mBAAmBpG,qBAAsB,EAEzF,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAauP,iCACtErJ,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb4J,oCAAqC,CAACrQ,EAAUqO,EAAOtH,EAAShb,KAC5D,MAAMmU,EAAS/Y,KAAK6X,QACdqR,EAAsC,CAACrQ,EAAUqO,EAAOtH,EAAShb,KACnE,IAAId,EAAS,CACTqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrEqO,MAAOnO,EAAOQ,uBAAuB8N,QAAQH,GAC7CtH,QAAS7G,EAAOQ,uBAAuBsP,oBAAoBjJ,IAE/D,OAAO7G,EAAO7Q,YAAYuE,EAAiCuc,+BAA+BjtB,KAAM+H,EAAQc,GAAOG,KAAKgU,EAAOuD,uBAAuBC,YAAczd,IAC5Jia,EAAOwI,iBAAiB9U,EAAiCuc,+BAA+BjtB,KAAM+C,GACvF0J,QAAQzC,QAAQ,OAG/B,IAAIsT,EAAaN,EAAOK,cAAcC,WACtC,OAAOA,EAAW6P,oCACZ7P,EAAW6P,oCAAoCrQ,EAAUqO,EAAOtH,EAAShb,EAAOskB,GAChFA,EAAoCrQ,EAAUqO,EAAOtH,EAAShb,KAG5E,MAAO,CAACuP,EAASiE,UAAU+Q,4CAA4CvJ,EAAQrH,iBAAkB+G,GAAWA,IAGpH,MAAM8J,UAAwClK,EAC1C,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC4c,gCAAgCttB,MAEnF,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,oBAAoBpG,qBAAsB,EAE1F,WAAWD,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAa4P,kCACtE1J,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACbiK,6BAA8B,CAAC1Q,EAAUuI,EAAUoI,EAAI5J,EAAShb,KAC5D,MAAMmU,EAAS/Y,KAAK6X,QACd0R,EAA+B,CAAC1Q,EAAUuI,EAAUoI,EAAI5J,EAAShb,KACnE,IAAId,EAAS,CACTqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrEuI,SAAUrI,EAAOQ,uBAAuBkQ,WAAWrI,GACnDoI,GAAIA,EACJ5J,QAAS7G,EAAOQ,uBAAuBsP,oBAAoBjJ,IAE/D,OAAO7G,EAAO7Q,YAAYuE,EAAiC4c,gCAAgCttB,KAAM+H,EAAQc,GAAOG,KAAKgU,EAAOuD,uBAAuBC,YAAczd,IAC7Jia,EAAOwI,iBAAiB9U,EAAiC4c,gCAAgCttB,KAAM+C,GACxF0J,QAAQzC,QAAQ,OAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWkQ,6BACZlQ,EAAWkQ,6BAA6B1Q,EAAUuI,EAAUoI,EAAI5J,EAAShb,EAAO2kB,GAChFA,EAA6B1Q,EAAUuI,EAAUoI,EAAI5J,EAAShb,KAGtE8kB,EAAuB9J,EAAQ8J,sBAAwB,GAC7D,MAAO,CAACvV,EAASiE,UAAUuR,qCAAqC/J,EAAQrH,iBAAkB+G,EAAUM,EAAQgK,yBAA0BF,GAAuBpK,IAGrK,MAAMuK,UAAsB3K,EACxB,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCqd,cAAc/tB,MAEjE,uBAAuBgkB,GACnB,IAAIgK,EAASzS,EAAOA,EAAOyI,EAAa,gBAAiB,UACzDgK,EAAOpQ,qBAAsB,EAC7BoQ,EAAOC,gBAAiB,EAE5B,WAAWtQ,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAauQ,gBACtErK,IAGD/iB,EAAGsM,QAAQuQ,EAAauQ,kBACxBrK,EAAQsK,iBAAkB,GAE9BlqB,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,KAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb6K,mBAAoB,CAACtR,EAAUuI,EAAUgJ,EAASxlB,KAC9C,MAAMmU,EAAS/Y,KAAK6X,QACdsS,EAAqB,CAACtR,EAAUuI,EAAUgJ,EAASxlB,KACrD,IAAId,EAAS,CACTqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrEuI,SAAUrI,EAAOQ,uBAAuBkQ,WAAWrI,GACnDgJ,QAASA,GAEb,OAAOrR,EAAO7Q,YAAYuE,EAAiCqd,cAAc/tB,KAAM+H,EAAQc,GAAOG,KAAKgU,EAAOuD,uBAAuB+N,gBAAkBvrB,IAC/Iia,EAAOwI,iBAAiB9U,EAAiCqd,cAAc/tB,KAAM+C,GACtE0J,QAAQ1C,OAAO,IAAIlG,MAAMd,EAAMgB,aAGxCuZ,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW8Q,mBACZ9Q,EAAW8Q,mBAAmBtR,EAAUuI,EAAUgJ,EAASxlB,EAAOulB,GAClEA,EAAmBtR,EAAUuI,EAAUgJ,EAASxlB,IAE1D0lB,cAAe1K,EAAQsK,gBACjB,CAACrR,EAAUuI,EAAUxc,KACnB,MAAMmU,EAAS/Y,KAAK6X,QACdyS,EAAgB,CAACzR,EAAUuI,EAAUxc,KACvC,IAAId,EAAS,CACTqU,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,GACrEuI,SAAUrI,EAAOQ,uBAAuBkQ,WAAWrI,IAEvD,OAAOrI,EAAO7Q,YAAYuE,EAAiC8d,qBAAqBxuB,KAAM+H,EAAQc,GAAOG,KAAMtB,GACnGgJ,EAAiC+d,MAAMpiB,GAAG3E,GACnCsV,EAAOuD,uBAAuB+K,QAAQ5jB,GAExCA,GAAUgJ,EAAiC+d,MAAMpiB,GAAG3E,EAAOyjB,OACzD,CACHA,MAAOnO,EAAOuD,uBAAuB+K,QAAQ5jB,EAAOyjB,OACpDuD,YAAahnB,EAAOgnB,aAIrBjiB,QAAQ1C,OAAO,IAAIlG,MAAM,kCAChCd,IACAia,EAAOwI,iBAAiB9U,EAAiC8d,qBAAqBxuB,KAAM+C,GAC7E0J,QAAQ1C,OAAO,IAAIlG,MAAMd,EAAMgB,aAGxCuZ,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWiR,cACZjR,EAAWiR,cAAczR,EAAUuI,EAAUxc,EAAO0lB,GACpDA,EAAczR,EAAUuI,EAAUxc,SAE1CjE,GAEV,MAAO,CAACwT,EAASiE,UAAUsS,uBAAuB9K,EAAQrH,iBAAkB+G,GAAWA,IAG/F,MAAMqL,UAA4BzL,EAC9B,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCme,oBAAoB7uB,MAEvE,uBAAuBgkB,GACnB,MAAM8K,EAA2BvT,EAAOA,EAAOyI,EAAa,gBAAiB,gBAC7E8K,EAAyBlR,qBAAsB,EAC/CkR,EAAyBC,gBAAiB,EAE9C,WAAWpR,EAAcnB,GACrB,MAAMqH,EAAU5f,KAAKghB,uBAAuBzI,EAAkBmB,EAAaqR,sBACtEnL,GAGL5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIwS,EAAKwF,eAAgBzB,gBAAiBsH,IAE7E,yBAAyBA,GACrB,MAAMN,EAAW,CACb0L,qBAAsB,CAACnS,EAAUjU,KAC7B,MAAMmU,EAAS/Y,KAAK6X,QACdmT,EAAuB,CAACnS,EAAUjU,IAC7BmU,EAAO7Q,YAAYuE,EAAiCme,oBAAoB7uB,KAAMgd,EAAOQ,uBAAuB0R,qBAAqBpS,GAAWjU,GAAOG,KAAKgU,EAAOuD,uBAAuB4O,gBAAkBpsB,IAC3Mia,EAAOwI,iBAAiB9U,EAAiCme,oBAAoB7uB,KAAM+C,GAC5E0J,QAAQzC,QAAQ,MAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW2R,qBACZ3R,EAAW2R,qBAAqBnS,EAAUjU,EAAOomB,GACjDA,EAAqBnS,EAAUjU,IAEzCumB,oBAAqBvL,EAAQ8B,gBACvB,CAAC0J,EAAMxmB,KACL,MAAMmU,EAAS/Y,KAAK6X,QACpB,IAAIsT,EAAsB,CAACC,EAAMxmB,IACtBmU,EAAO7Q,YAAYuE,EAAiC4e,2BAA2BtvB,KAAMgd,EAAOQ,uBAAuB+R,eAAeF,GAAOxmB,GAAOG,KAAKgU,EAAOuD,uBAAuBgP,eAAiBxsB,IACvMia,EAAOwI,iBAAiB9U,EAAiC4e,2BAA2BtvB,KAAM+C,GACnF0J,QAAQzC,QAAQqlB,KAG/B,MAAM/R,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW8R,oBACZ9R,EAAW8R,oBAAoBC,EAAMxmB,EAAOumB,GAC5CA,EAAoBC,EAAMxmB,SAElCjE,GAEV,MAAO,CAACwT,EAASiE,UAAUmT,6BAA6B3L,EAAQrH,iBAAkB+G,GAAWA,IAGrG,MAAMkM,EACF,YAAY3T,GACR7X,KAAK6X,QAAUA,EACf7X,KAAKyrB,WAAa,IAAIzqB,IAE1B,eACI,OAAOyL,EAAiCif,mCAAmC3vB,KAE/E,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,aAAc,0BAA0BC,qBAAsB,EAE9F,aACI,IAAIgS,EAAU3rB,KAAK6X,QAAQuB,cAAcwS,YAAYC,0BACrC,IAAZF,GACA3rB,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiB,CACbqT,QAASA,KAKzB,SAASrpB,EAAUuB,GACf,IAAIob,EAAa9K,EAAS8E,UAAU6S,yBAA0B7jB,IAC1DjI,KAAK8rB,yBAAyBjoB,EAAKyU,gBAAgBqT,QAAS1jB,KAEhEjI,KAAKyrB,WAAWtpB,IAAI0B,EAAK9B,GAAIkd,QACQ,IAAjCpb,EAAKyU,gBAAgBqT,SACrB3rB,KAAK8rB,yBAAyBjoB,EAAKyU,gBAAgBqT,aAAShrB,GAGpE,WAAWoB,GACP,IAAIkd,EAAajf,KAAKyrB,WAAWrzB,IAAI2J,GACjCkd,IACAjf,KAAKyrB,WAAW/kB,OAAO3E,GACvBkd,EAAWnX,WAGnB,UACI,IAAK,IAAImX,KAAcjf,KAAKyrB,WAAWhT,SACnCwG,EAAWnX,UAEf9H,KAAKyrB,WAAW7S,QAEpB,yBAAyBiT,EAAsB5jB,GAC3C,IAAI8jB,EAOJ,GALIA,EADAlvB,EAAGsC,OAAO0sB,GACC,CAACA,GAGDA,OAEE,IAAbE,QAAiC,IAAV9jB,EAAkB,CAEzC,IADe8jB,EAASC,KAAML,GAAY1jB,EAAMgkB,qBAAqBN,IAEjE,OAGR,IAAIO,EAA0BH,SACT,IAAbA,EAIJ/rB,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCif,mCAAmC3vB,KAAM,CAAEowB,SAAUnsB,KAAKosB,2BAA2BL,KAHhJ/rB,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCif,mCAAmC3vB,KAAM,CAAEowB,SAAU,QAKxH9S,EAAarZ,KAAKqsB,gBACtBhT,EACMA,EAAW0S,EAAUG,GACrBA,EAAuBH,GAEjC,2BAA2BziB,GACvB,SAASgjB,EAAW5J,EAAQ6J,GACxB,IAAInb,EAAUsR,EACd,IAAK,IAAIvrB,EAAI,EAAGA,EAAIo1B,EAAKrlB,OAAS,EAAG/P,IAAK,CACtC,IAAIq1B,EAAMpb,EAAQmb,EAAKp1B,IAClBq1B,IACDA,EAAMv0B,OAAOY,OAAO,MACpBuY,EAAQmb,EAAKp1B,IAAMq1B,GAEvBpb,EAAUob,EAEd,OAAOpb,EAEX,IAAIqN,EAAWze,KAAK6X,QAAQuB,cAAcqT,gBACpCzsB,KAAK6X,QAAQuB,cAAcqT,gBAAgBxS,SAC3CtZ,EACF8C,EAASxL,OAAOY,OAAO,MAC3B,IAAK,IAAI1B,EAAI,EAAGA,EAAImS,EAAKpC,OAAQ/P,IAAK,CAClC,IAAI2B,EAAMwQ,EAAKnS,GACXqZ,EAAQ1X,EAAIyY,QAAQ,KACpBmR,EAAS,KAOb,GALIA,EADAlS,GAAS,EACA2D,EAAS8E,UAAUyT,iBAAiB5zB,EAAI0Y,OAAO,EAAGhB,GAAQiO,GAAUrmB,IAAIU,EAAI0Y,OAAOhB,EAAQ,IAG3F2D,EAAS8E,UAAUyT,iBAAiB5zB,EAAK2lB,GAElDiE,EAAQ,CACR,IAAI6J,EAAOjjB,EAAKnS,GAAGka,MAAM,KACzBib,EAAW7oB,EAAQ8oB,GAAMA,EAAKA,EAAKrlB,OAAS,IAAMwb,GAG1D,OAAOjf,EAEX,gBACI,IAAI4V,EAAarZ,KAAK6X,QAAQuB,cAAcC,WAC5C,OAAIA,EAAWJ,WAAaI,EAAWJ,UAAUiT,uBACtC7S,EAAWJ,UAAUiT,4BAG5B,GAIZ,MAAMS,EACF,YAAY9U,GACR7X,KAAK6X,QAAUA,EACf7X,KAAK4sB,UAAY,IAAI5rB,IAEzB,eACI,OAAOyL,EAAiCogB,sBAAsB9wB,KAElE,uBAAuB2d,GACnBpC,EAAOA,EAAOoC,EAAc,aAAc,kBAAkBC,qBAAsB,EAEtF,WAAWD,GACFA,EAAaoT,wBAGlB9sB,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIwS,EAAKwF,eACTzB,gBAAiBrgB,OAAO4iB,OAAO,GAAInB,EAAaoT,0BAGxD,SAASxqB,EAAUuB,GACf,MAAMkV,EAAS/Y,KAAK6X,QACdwB,EAAaN,EAAOK,cAAcC,WAClC0T,EAAiB,CAACC,EAASvhB,KAC7B,IAAI3H,EAAS,CACTkpB,UACApe,UAAWnD,GAEf,OAAOsN,EAAO7Q,YAAYuE,EAAiCogB,sBAAsB9wB,KAAM+H,GAAQiB,UAAKpE,EAAY7B,IAC5Gia,EAAOwI,iBAAiB9U,EAAiCogB,sBAAsB9wB,KAAM+C,MAG7F,GAAI+E,EAAKyU,gBAAgB2U,SAAU,CAC/B,MAAMxP,EAAe,GACrB,IAAK,MAAMuP,KAAWnpB,EAAKyU,gBAAgB2U,SACvCxP,EAAatW,KAAKgN,EAAS8Y,SAASC,gBAAgBF,EAAS,IAAIvhB,IACtD4N,EAAW0T,eACZ1T,EAAW0T,eAAeC,EAASvhB,EAAMshB,GACzCA,EAAeC,EAASvhB,KAGtCzL,KAAK4sB,UAAUzqB,IAAI0B,EAAK9B,GAAI0b,IAGpC,WAAW1b,GACP,IAAI0b,EAAezd,KAAK4sB,UAAUx0B,IAAI2J,GAClC0b,GACAA,EAAalU,QAAQ0V,GAAcA,EAAWnX,WAGtD,UACI9H,KAAK4sB,UAAUrjB,QAAS/Q,IACpBA,EAAM+Q,QAAQ0V,GAAcA,EAAWnX,aAE3C9H,KAAK4sB,UAAUhU,UAIvB,SAAWuU,GAKPA,EAAkB/kB,GAJlB,SAAY5P,GAER,OADgBA,GACIiU,EAAiCjS,cAAc4N,GAAG5P,EAAM4D,SAAWqQ,EAAiChS,cAAc2N,GAAG5P,EAAM6D,SAHvJ,CAMuBvF,EAAQq2B,oBAAsBr2B,EAAQq2B,kBAAoB,KACjF,MAAMC,EACF,YAAYC,EAAUC,GAClBttB,KAAKqtB,SAAWA,EAChBrtB,KAAKstB,QAAUA,EACfttB,KAAKutB,OAAQ,EAEjB,aACI,OAAOvtB,KAAKutB,MAEhB,UACIvtB,KAAKutB,OAAQ,EACbvtB,KAAKqtB,WAET,OAAOvuB,GACHkB,KAAKutB,OAAQ,EACbvtB,KAAKstB,QAAQxuB,IAi0BrBhI,EAAQ02B,mBA9zBR,MACI,YAAYzrB,EAAIjK,EAAMshB,GAClBpZ,KAAKkJ,aAAeuD,EAAiCxS,YAAYyF,KACjEM,KAAKytB,UAAY,GACjBztB,KAAK0tB,gBAAkB,IAAI1sB,IAC3BhB,KAAK2tB,iBAAmB,IAAI3sB,IAC5BhB,KAAK4tB,IAAM7rB,EACX/B,KAAK6tB,MAAQ/1B,EACbshB,EAAgBA,GAAiB,GACjCpZ,KAAK8tB,eAAiB,CAClBvV,iBAAkBa,EAAcb,kBAAoB,GACpDqT,YAAaxS,EAAcwS,aAAe,GAC1CmC,yBAA0B3U,EAAc2U,yBACxCC,kBAAmB5U,EAAc4U,mBAAqBhuB,KAAK6tB,MAC3DI,sBAAuB7U,EAAc6U,uBAAyBrZ,EAAsBhV,MACpFsuB,cAAe9U,EAAc8U,eAAiB,OAC9CC,sBAAuB/U,EAAc+U,sBACrCC,4BAA6BhV,EAAcgV,4BAC3CC,2BAA4BjV,EAAciV,yBAC1CC,aAAclV,EAAckV,cAAgB,IAAIvZ,EAAoB/U,KAAK6tB,OACzExU,WAAYD,EAAcC,YAAc,GACxCkV,cAAenV,EAAcmV,cAC7B9B,gBAAiBrT,EAAcqT,iBAEnCzsB,KAAK8tB,eAAelC,YAAc5rB,KAAK8tB,eAAelC,aAAe,GACrE5rB,KAAKuB,MAAQuT,EAAY0Z,QACzBxuB,KAAKyuB,wBAAqB9tB,EAC1BX,KAAK0uB,yBAAsB/tB,EAC3BX,KAAK2uB,uBAAoBhuB,EACrByY,EAAcwV,eACd5uB,KAAK6uB,eAAiBzV,EAAcwV,cACpC5uB,KAAK8uB,uBAAwB,IAG7B9uB,KAAK6uB,oBAAiBluB,EACtBX,KAAK8uB,uBAAwB,GAEjC9uB,KAAK+uB,oBAAsB3V,EAAc4V,mBACzChvB,KAAKyrB,gBAAa9qB,EAClBX,KAAKivB,gBAAatuB,EAClBX,KAAKkvB,kBAAevuB,EACpBX,KAAKmvB,YAAc,GACnBnvB,KAAKovB,kBAAoB,IAAI9a,EAAQoH,QAAQ,KAC7C1b,KAAKqvB,SAAW,IAAI7mB,QAAQ,CAACzC,EAASD,KAClC9F,KAAKsvB,kBAAoB,IAAIlC,EAAQrnB,EAASD,KAElD9F,KAAKuvB,aAAU5uB,EACfX,KAAKwvB,kBAAoB,IAAI/iB,EAAiC1S,QAC9DiG,KAAKyvB,oBAAsB,IAAIhjB,EAAiC1S,QAChEiG,KAAK+I,QAAU,CACX9J,IAAK,CAACywB,EAAqB7rB,KACnBhH,EAAGsC,OAAOuwB,GACV1vB,KAAK2vB,SAASD,EAAqB7rB,GAGnC7D,KAAK4vB,eAAeF,KAIhC1vB,KAAK6vB,KAAOzb,EAAI0b,gBAAgB1W,EAAcmV,cAAgBnV,EAAcmV,cAAcwB,mBAAgBpvB,GAC1GX,KAAKgwB,KAAO3b,EAAIyb,gBAAgB1W,EAAcmV,cAAgBnV,EAAcmV,cAAc0B,mBAAgBtvB,GAC1GX,KAAKgZ,iBAAmB,IAAIhY,IAC5BhB,KAAKkwB,0BAET,YACI,OAAOlwB,KAAKmwB,OAEhB,UAAU33B,GACN,IAAI43B,EAAWpwB,KAAKqwB,iBACpBrwB,KAAKmwB,OAAS33B,EACd,IAAI83B,EAAWtwB,KAAKqwB,iBAChBC,IAAaF,GACbpwB,KAAKyvB,oBAAoB3sB,KAAK,CAAEstB,WAAUE,aAGlD,iBACI,OAAItwB,KAAKuB,QAAUuT,EAAYyb,QACpB1b,EAAM0b,QAERvwB,KAAKuB,QAAUuT,EAAY0b,SACzB3b,EAAM2b,SAGN3b,EAAM4b,QAGrB,uBACI,OAAOzwB,KAAK2uB,kBAEhB,YAAY5yB,KAAS+H,GACjB,IAAK9D,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpBI,KAAK2wB,oBACL,IACI,OAAO3wB,KAAK0uB,oBAAoBxmB,YAAYnM,KAAS+H,GAEzD,MAAOhF,GAEH,MADAkB,KAAKlB,MAAM,mBAAmBjC,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,iBAAkBgD,GACxEA,GAGd,UAAU/C,EAAMqI,GACZ,IAAKpE,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpB,IACII,KAAK0uB,oBAAoB7lB,UAAU9M,EAAMqI,GAE7C,MAAOtF,GAEH,MADAkB,KAAKlB,MAAM,+BAA+BjC,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,iBAAkBgD,GACpFA,GAGd,iBAAiB/C,EAAM+H,GACnB,IAAK9D,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpBI,KAAK2wB,oBACL,IACI3wB,KAAK0uB,oBAAoBrnB,iBAAiBtL,EAAM+H,GAEpD,MAAOhF,GAEH,MADAkB,KAAKlB,MAAM,wBAAwBjC,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,iBAAkBgD,GAC7EA,GAGd,eAAe/C,EAAMqI,GACjB,IAAKpE,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpB,IACII,KAAK0uB,oBAAoBjnB,eAAe1L,EAAMqI,GAElD,MAAOtF,GAEH,MADAkB,KAAKlB,MAAM,oCAAoCjC,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,iBAAkBgD,GACzFA,GAGd,WAAW/C,EAAM6I,EAAOR,GACpB,IAAKpE,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpB,IACI,OAAOI,KAAK0uB,oBAAoB/mB,WAAW5L,EAAM6I,EAAOR,GAE5D,MAAOtF,GAEH,MADAkB,KAAKlB,MAAM,0CAA0C8F,YAAiB9F,GAChEA,GAGd,aAAa/C,EAAM6I,EAAOpM,GACtB,IAAKwH,KAAK0wB,qBACN,MAAM,IAAI9wB,MAAM,oCAEpBI,KAAK2wB,oBACL,IACI3wB,KAAK0uB,oBAAoB3mB,aAAahM,EAAM6I,EAAOpM,GAEvD,MAAOsG,GAEH,MADAkB,KAAKlB,MAAM,8BAA8B8F,YAAiB9F,GACpDA,GAGd,oBACI,OAAOkB,KAAK8tB,eAEhB,6BACI,OAAO9tB,KAAKgwB,KAEhB,6BACI,OAAOhwB,KAAK6vB,KAEhB,kBACI,OAAO7vB,KAAKwvB,kBAAkBvnB,MAElC,uBACI,OAAOjI,KAAKyvB,oBAAoBxnB,MAEpC,oBAII,OAHKjI,KAAK6uB,iBACN7uB,KAAK6uB,eAAiB1a,EAAS/c,OAAOw5B,oBAAoB5wB,KAAK8tB,eAAeE,kBAAoBhuB,KAAK8tB,eAAeE,kBAAoBhuB,KAAK6tB,QAE5I7tB,KAAK6uB,eAEhB,yBACI,OAAI7uB,KAAK+uB,oBACE/uB,KAAK+uB,oBAET/uB,KAAK4uB,cAEhB,kBACI,OAAO5uB,KAAKkvB,aAEhB,4BACI,OAAO,IAAIna,EAAoB/U,KAAK6tB,OAExC,UAAUr1B,GACNwH,KAAK6wB,OAASr4B,EACdwH,KAAK8wB,UAAU/rB,KAAK,KAChB/E,KAAK+wB,oBAAoBhsB,KAAMqC,IAC3BA,EAAW/F,MAAMrB,KAAK6wB,OAAQ7wB,KAAK+I,QAAS,CACxC1B,kBAAkB,EAClB/F,YAAatB,KAAKkJ,kBAG3B,QAGP,YAAYrF,GACR,GAAIA,aAAgB4I,EAAiC/S,cAAe,CAChE,MAAMs3B,EAAgBntB,EACtB,MAAO,cAAcmtB,EAAclxB,oBAAoBkxB,EAAcnxB,QAAQmxB,EAAcntB,KAAO,KAAOmtB,EAAcntB,KAAKrE,WAAa,KAE7I,OAAIqE,aAAgBjE,MACZ/C,EAAGsC,OAAO0E,EAAKotB,OACRptB,EAAKotB,MAETptB,EAAK/D,QAEZjD,EAAGsC,OAAO0E,GACHA,EAEJA,EAAKrE,WAEhB,KAAKM,EAAS+D,EAAMqtB,GAAmB,GACnClxB,KAAK4uB,cAAcuC,WAAW,aAAa,IAAI9sB,MAAO+sB,yBAA0BtxB,KAC5E+D,GACA7D,KAAK4uB,cAAcuC,WAAWnxB,KAAKqxB,YAAYxtB,IAE/CqtB,GAAoBlxB,KAAK8tB,eAAeG,uBAAyBrZ,EAAsB0c,MACvFtxB,KAAKuxB,0BAGb,KAAKzxB,EAAS+D,EAAMqtB,GAAmB,GACnClxB,KAAK4uB,cAAcuC,WAAW,aAAa,IAAI9sB,MAAO+sB,yBAA0BtxB,KAC5E+D,GACA7D,KAAK4uB,cAAcuC,WAAWnxB,KAAKqxB,YAAYxtB,IAE/CqtB,GAAoBlxB,KAAK8tB,eAAeG,uBAAyBrZ,EAAsB4c,MACvFxxB,KAAKuxB,0BAGb,MAAMzxB,EAAS+D,EAAMqtB,GAAmB,GACpClxB,KAAK4uB,cAAcuC,WAAW,aAAa,IAAI9sB,MAAO+sB,yBAA0BtxB,KAC5E+D,GACA7D,KAAK4uB,cAAcuC,WAAWnxB,KAAKqxB,YAAYxtB,IAE/CqtB,GAAoBlxB,KAAK8tB,eAAeG,uBAAyBrZ,EAAsBhV,OACvFI,KAAKuxB,0BAGb,0BACIpd,EAAS/c,OAAOq6B,uBAAuB,6DAA8D,gBAAgB1sB,KAAK,KACtH/E,KAAK4uB,cAAc8C,MAAK,KAGhC,SAAS5xB,EAAS+D,GACd7D,KAAKgvB,mBAAmBmC,WAAW,aAAa,IAAI9sB,MAAO+sB,yBAA0BtxB,KACjF+D,GACA7D,KAAKgvB,mBAAmBmC,WAAWnxB,KAAKqxB,YAAYxtB,IAG5D,eAAeA,GACPA,EAAK+C,cAAgB/C,EAAK9H,KAC1BiE,KAAKgvB,mBAAmBzc,OAAO,aAAa,IAAIlO,MAAO+sB,0BAGvDpxB,KAAKgvB,mBAAmBzc,OAAO,aAAa,IAAIlO,MAAO+sB,0BAEvDvtB,GACA7D,KAAKgvB,mBAAmBmC,WAAW,GAAG1xB,KAAKsE,UAAUF,IAG7D,aACI,OAAO7D,KAAKuB,QAAUuT,EAAY0Z,SAAWxuB,KAAKuB,QAAUuT,EAAY6c,UAAY3xB,KAAKuB,QAAUuT,EAAY2b,QAEnH,YACI,OAAOzwB,KAAKuB,QAAUuT,EAAY0b,UAAYxwB,KAAKuB,QAAUuT,EAAYyb,QAE7E,UACI,OAAOvwB,KAAKqvB,SAEhB,qBACI,OAAOrvB,KAAKuB,QAAUuT,EAAYyb,WAAavwB,KAAK0uB,oBAExD,QA4EI,OA3EI1uB,KAAKsvB,kBAAkBsC,SACvB5xB,KAAKqvB,SAAW,IAAI7mB,QAAQ,CAACzC,EAASD,KAClC9F,KAAKsvB,kBAAoB,IAAIlC,EAAQrnB,EAASD,MAGtD9F,KAAKyrB,WAAa,GAClBzrB,KAAKivB,WAAa,GAEbjvB,KAAKkvB,eACNlvB,KAAKkvB,aAAelvB,KAAK8tB,eAAeC,yBAClC5Z,EAASiE,UAAUyZ,2BAA2B7xB,KAAK8tB,eAAeC,0BAClE5Z,EAASiE,UAAUyZ,8BAE7B7xB,KAAKuB,MAAQuT,EAAY0b,SACzBxwB,KAAK+wB,oBAAoBhsB,KAAMqC,IAC3BA,EAAW0qB,aAAchyB,IACrB,OAAQA,EAAQ/D,MACZ,KAAK0Q,EAAiCslB,YAAYnyB,MAC9CI,KAAKlB,MAAMgB,EAAQA,aAASa,GAAW,GACvC,MACJ,KAAK8L,EAAiCslB,YAAYC,QAC9ChyB,KAAKjB,KAAKe,EAAQA,aAASa,GAAW,GACtC,MACJ,KAAK8L,EAAiCslB,YAAYT,KAC9CtxB,KAAKhB,KAAKc,EAAQA,aAASa,GAAW,GACtC,MACJ,QACIX,KAAK4uB,cAAcuC,WAAWrxB,EAAQA,YAGlDsH,EAAW6qB,cAAenyB,IACtB,OAAQA,EAAQ/D,MACZ,KAAK0Q,EAAiCslB,YAAYnyB,MAC9CuU,EAAS/c,OAAOie,iBAAiBvV,EAAQA,SACzC,MACJ,KAAK2M,EAAiCslB,YAAYC,QAC9C7d,EAAS/c,OAAO86B,mBAAmBpyB,EAAQA,SAC3C,MACJ,KAAK2M,EAAiCslB,YAAYT,KAC9Cnd,EAAS/c,OAAOq6B,uBAAuB3xB,EAAQA,SAC/C,MACJ,QACIqU,EAAS/c,OAAOq6B,uBAAuB3xB,EAAQA,YAG3DsH,EAAWyB,UAAU4D,EAAiC0lB,mBAAmBp2B,KAAO+H,IAC5E,IAAIsuB,EACJ,OAAQtuB,EAAO/H,MACX,KAAK0Q,EAAiCslB,YAAYnyB,MAC9CwyB,EAAcje,EAAS/c,OAAOie,iBAC9B,MACJ,KAAK5I,EAAiCslB,YAAYC,QAC9CI,EAAcje,EAAS/c,OAAO86B,mBAC9B,MACJ,KAAKzlB,EAAiCslB,YAAYT,KAC9Cc,EAAcje,EAAS/c,OAAOq6B,uBAC9B,MACJ,QACIW,EAAcje,EAAS/c,OAAOq6B,uBAEtC,IAAIY,EAAUvuB,EAAOuuB,SAAW,GAChC,OAAOD,EAAYtuB,EAAOhE,WAAYuyB,KAE1CjrB,EAAWkrB,YAAazuB,IACpB7D,KAAKwvB,kBAAkB1sB,KAAKe,KAEhCuD,EAAWoC,SAEJxJ,KAAKuyB,WAAWnrB,KACxBrC,UAAKpE,EAAY7B,IAChBkB,KAAKuB,MAAQuT,EAAY0d,YACzBxyB,KAAKsvB,kBAAkBxpB,OAAOhH,GAC9BkB,KAAKlB,MAAM,yBAA0BA,GACrCqV,EAAS/c,OAAOie,iBAAiB,yBAAyBrV,KAAK6tB,SAE5D,IAAI1Z,EAASta,WAAW,KACvBmG,KAAKyyB,aACLzyB,KAAK0yB,SAIjB,oBAII,OAHK1yB,KAAKyuB,qBACNzuB,KAAKyuB,mBAAqBzuB,KAAK2yB,oBAE5B3yB,KAAKyuB,mBAEhB,WAAWrnB,GACPpH,KAAK4yB,aAAaxrB,GAAY,GAC9B,IAAIyrB,EAAa7yB,KAAK8tB,eAAeK,sBACjC2E,EAAW9yB,KAAK8tB,eAAerB,gBAC7BzsB,KAAK8tB,eAAerB,gBAAgBxS,IAAI8Y,OACxC/yB,KAAKgzB,qBACPC,EAAa,CACbC,UAAW1lB,EAAQ2lB,IACnBC,WAAY,CACRt7B,KAAM,SACNmX,QAASkF,EAASlF,SAEtB6jB,SAAUA,GAAsB,KAChCO,QAASP,EAAW9yB,KAAK6vB,KAAKnR,MAAMvK,EAASmf,IAAIC,KAAKT,IAAa,KACnEpZ,aAAc1Z,KAAKwzB,4BACnBrF,sBAAuBtxB,EAAG6K,KAAKmrB,GAAcA,IAAeA,EAC5DxxB,MAAOoL,EAAiCzS,MAAMwF,SAASQ,KAAK6wB,QAC5D4C,iBAAkB,MAGtB,GADAzzB,KAAK0zB,qBAAqBT,GACtBjzB,KAAK8tB,eAAeO,yBAA0B,CAC9C,MAAMzpB,EAAQ2P,EAAKwF,eACb4Z,EAAO,IAAInf,EAAeof,aAAaxsB,EAAYxC,GAEzD,OADAquB,EAAWY,cAAgBjvB,EACpB5E,KAAK8zB,aAAa1sB,EAAY6rB,GAAYluB,KAAMtB,IACnDkwB,EAAKI,OACEtwB,GACP3E,IAEA,MADA60B,EAAKpuB,SACCzG,IAIV,OAAOkB,KAAK8zB,aAAa1sB,EAAY6rB,GAG7C,aAAa7rB,EAAY6rB,GACrB,OAAO7rB,EAAWmrB,WAAWU,GAAYluB,KAAMtB,IAC3CzD,KAAK0uB,oBAAsBtnB,EAC3BpH,KAAK2uB,kBAAoBlrB,EACzBzD,KAAKuB,MAAQuT,EAAYyb,QACzB,IAAI3W,OAA0BjZ,EAoC9B,OAnCI9D,EAAGoJ,OAAOxC,EAAOiW,aAAasa,kBAE1Bpa,EADAnW,EAAOiW,aAAasa,mBAAqBvnB,EAAiCmO,qBAAqB7P,KACrE,CACtB+O,WAAW,EACXa,OAAQlO,EAAiCmO,qBAAqB7P,KAC9DgS,UAAMpc,GAIgB,CACtBmZ,WAAW,EACXa,OAAQlX,EAAOiW,aAAasa,iBAC5BjX,KAAM,CACFC,aAAa,SAKqB,IAAzCvZ,EAAOiW,aAAasa,kBAAwE,OAAzCvwB,EAAOiW,aAAasa,mBAC5Epa,EAA0BnW,EAAOiW,aAAasa,kBAElDh0B,KAAKqd,cAAgBplB,OAAO4iB,OAAO,GAAIpX,EAAOiW,aAAc,CAAEG,yBAA0BD,IACxFxS,EAAW6sB,cAAcnwB,GAAU9D,KAAKk0B,kBAAkBpwB,IAC1DsD,EAAWyB,UAAU4D,EAAiC0nB,oBAAoBp4B,KAAM+H,GAAU9D,KAAKo0B,0BAA0BtwB,IAEzHsD,EAAWyB,UAAU,yBAA0B/E,GAAU9D,KAAKo0B,0BAA0BtwB,IACxFsD,EAAWyB,UAAU4D,EAAiC4nB,sBAAsBt4B,KAAM+H,GAAU9D,KAAKs0B,4BAA4BxwB,IAE7HsD,EAAWyB,UAAU,2BAA4B/E,GAAU9D,KAAKs0B,4BAA4BxwB,IAC5FsD,EAAWyB,UAAU4D,EAAiC8nB,0BAA0Bx4B,KAAM+H,GAAU9D,KAAKw0B,yBAAyB1wB,IAC9HsD,EAAWC,iBAAiBoF,EAAiCgoB,wBAAwB14B,KAAM,IAC3FiE,KAAK00B,eAAettB,GACpBpH,KAAK20B,yBAAyBvtB,GAC9BpH,KAAK40B,mBAAmBxtB,GACxBpH,KAAKsvB,kBAAkBvpB,UAChBtC,IACRsB,UAAKpE,EAAY7B,IA6BhB,MA5BIkB,KAAK8tB,eAAeM,4BAChBpuB,KAAK8tB,eAAeM,4BAA4BtvB,GAChDkB,KAAKuyB,WAAWnrB,IAGhBpH,KAAK0yB,OACL1yB,KAAKsvB,kBAAkBxpB,OAAOhH,IAG7BA,aAAiB2N,EAAiC/S,eAAiBoF,EAAM+E,MAAQ/E,EAAM+E,KAAKgxB,MACjG1gB,EAAS/c,OAAOie,iBAAiBvW,EAAMgB,QAAS,CAAE+O,MAAO,QAAS9M,GAAI,UAAWgD,KAAK4c,IAC9EA,GAAoB,UAAZA,EAAK5f,GACb/B,KAAKuyB,WAAWnrB,IAGhBpH,KAAK0yB,OACL1yB,KAAKsvB,kBAAkBxpB,OAAOhH,OAKlCA,GAASA,EAAMgB,SACfqU,EAAS/c,OAAOie,iBAAiBvW,EAAMgB,SAE3CE,KAAKlB,MAAM,gCAAiCA,GAC5CkB,KAAK0yB,OACL1yB,KAAKsvB,kBAAkBxpB,OAAOhH,IAE5BA,IAGd,qBACI,IAAIg2B,EAAU3gB,EAAS8E,UAAUwa,iBACjC,IAAKqB,GAA8B,IAAnBA,EAAQ5tB,OACpB,OAEJ,IAAI6tB,EAASD,EAAQ,GACrB,MAA0B,SAAtBC,EAAO9a,IAAI+a,OACJD,EAAO9a,IAAI8Y,YADtB,EAKJ,OAEI,OADA/yB,KAAK2uB,uBAAoBhuB,EACpBX,KAAKyuB,mBAINzuB,KAAKuB,QAAUuT,EAAY6c,UAAY3xB,KAAKuvB,QACrCvvB,KAAKuvB,SAEhBvvB,KAAKuB,MAAQuT,EAAY6c,SACzB3xB,KAAKi1B,SAAQ,GAENj1B,KAAKuvB,QAAUvvB,KAAK+wB,oBAAoBhsB,KAAKqC,GACzCA,EAAW8tB,WAAWnwB,KAAK,KAC9BqC,EAAW+tB,OACX/tB,EAAWU,UACX9H,KAAKuB,MAAQuT,EAAY2b,QACzBzwB,KAAKo1B,iBACLp1B,KAAKuvB,aAAU5uB,EACfX,KAAKyuB,wBAAqB9tB,EAC1BX,KAAK0uB,yBAAsB/tB,OAjB/BX,KAAKuB,MAAQuT,EAAY2b,QAClBjoB,QAAQzC,WAoBvB,QAAQsvB,GAAU,EAAMC,GAAc,GAC9Bt1B,KAAKyrB,aACLzrB,KAAKyrB,WAAWliB,QAAQyC,GAAYA,EAASlE,WAC7C9H,KAAKyrB,gBAAa9qB,GAElBX,KAAKivB,aACLjvB,KAAKivB,WAAW1lB,QAAQ+V,GAAYA,EAASxX,WAC7C9H,KAAKivB,gBAAatuB,GAElBX,KAAKgZ,kBACLhZ,KAAKgZ,iBAAiBJ,QAE1B,IAAK,IAAIxU,KAAWpE,KAAK2tB,iBAAiBlV,SACtCrU,EAAQ0D,UAERutB,GACAr1B,KAAKo1B,iBAELE,GAAet1B,KAAKkvB,eACpBlvB,KAAKkvB,aAAapnB,UAClB9H,KAAKkvB,kBAAevuB,GAG5B,iBACQX,KAAK6uB,gBAAkB7uB,KAAK8uB,wBAC5B9uB,KAAK6uB,eAAe/mB,UACpB9H,KAAK6uB,oBAAiBluB,GAG9B,gBAAgBsH,GACZ,IAAIstB,EAAIC,EACR,MAAMzc,EAAS/Y,KACf,SAASy1B,EAAqBxtB,GAC1B8Q,EAAOoW,YAAYhoB,KAAKc,GACxB8Q,EAAOqW,kBAAkB3T,QAAQ,KAC7B1C,EAAO+X,UAAU/rB,KAAK,KAClBgU,EAAOgY,oBAAoBhsB,KAAKqC,IACxB2R,EAAO2X,uBACP3X,EAAO4X,oBACPvpB,EAAWsuB,sBAAsB,CAAEC,QAAS5c,EAAOoW,eAEvDpW,EAAOoW,YAAc,MAEzBrwB,IACAia,EAAOja,MAAM,6BAA8BA,OAIvD,MAAM82B,EAA+D,QAAxCL,EAAKv1B,KAAKoZ,cAAcC,kBAA+B,IAAPkc,OAAgB,EAASA,EAAGtc,WACzE,QAA9Buc,EAAKI,SAAwC,IAAPJ,OAAgB,EAASA,EAAGC,sBAAwBG,EAAoBH,qBAAqBxtB,EAAOwtB,GAAwBA,EAAqBxtB,GAE7L,oBACIjI,KAAK2tB,iBAAiBv1B,IAAIqU,EAAiCiO,kCAAkC3e,KAAKD,QAAQyf,gBAE9G,kBAAkBzX,GACd,IAAK9D,KAAKkvB,aACN,OAEJ,IAAIjV,EAAMja,KAAKgwB,KAAKtR,MAAM5a,EAAOmW,KAC7Bqb,EAAct1B,KAAKgwB,KAAK6F,cAAc/xB,EAAOwxB,aAC7Cjc,EAAarZ,KAAKoZ,cAAcC,WAChCA,EAAW6a,kBACX7a,EAAW6a,kBAAkBja,EAAKqb,EAAa,CAACrb,EAAKqb,IAAgBt1B,KAAK81B,eAAe7b,EAAKqb,IAG9Ft1B,KAAK81B,eAAe7b,EAAKqb,GAGjC,eAAerb,EAAKqb,GACXt1B,KAAKkvB,cAGVlvB,KAAKkvB,aAAa/sB,IAAI8X,EAAKqb,GAE/B,mBACI,IAAIhH,EAAe,CAACxvB,EAAOgB,EAAS0T,KAChCxT,KAAK+1B,sBAAsBj3B,EAAOgB,EAAS0T,IAE3C3Q,EAAe,KACf7C,KAAKg2B,0BAET,OAAOh2B,KAAKi2B,wBAAwBj2B,KAAK8tB,eAAeI,eAAiB,QAAQnpB,KAAMmxB,GAztE/F,SAA0BnsB,EAAOC,EAAQskB,EAAczrB,GACnD,IAAIvG,EAAS,IAAImY,EACbrN,EAAaqF,EAAiCtQ,yBAAyB4N,EAAOC,EAAQ1N,GAyC1F,OAxCA8K,EAAWd,QAASzC,IAAWyqB,EAAazqB,EAAK,GAAIA,EAAK,GAAIA,EAAK,MACnEuD,EAAWf,QAAQxD,GACN,CACT2G,OAAQ,IAAMpC,EAAWoC,SACzBtB,YAAa,CAACnM,KAAS+H,IAAWsD,EAAWc,YAAYrL,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,UAAWgI,GAClG+E,UAAW,CAAC9M,EAAMqI,IAAYgD,EAAWyB,UAAUhM,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQsI,GACzFiD,iBAAkB,CAACtL,EAAM+H,IAAWsD,EAAWC,iBAAiBxK,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQgI,GACtG2D,eAAgB,CAAC1L,EAAMqI,IAAYgD,EAAWK,eAAe5K,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQsI,GACnGuD,WAAYP,EAAWO,WACvBI,aAAcX,EAAWW,aACzB1G,MAAO,CAAC7I,EAAOiI,EAAQuI,KACnB,MAAMmtB,EAAsB,CACxB9uB,kBAAkB,EAClB/F,YAAamL,EAAiCxS,YAAYyF,WAEvB,IAAnCsJ,EACA5B,EAAW/F,MAAM7I,EAAOiI,EAAQ01B,IAE3Bt5B,EAAGsM,QAAQH,GAChB5B,EAAW/F,MAAM7I,EAAOiI,EAAQuI,KAMxCupB,WAAazuB,GAAWsD,EAAWc,YAAYuE,EAAiC2pB,kBAAkBr6B,KAAM+H,GACxGoxB,SAAU,IAAM9tB,EAAWc,YAAYuE,EAAiC4pB,gBAAgBt6B,UAAM4E,GAC9Fw0B,KAAM,IAAM/tB,EAAWC,iBAAiBoF,EAAiC6pB,iBAAiBv6B,MAC1F+1B,aAAe1tB,GAAYgD,EAAWK,eAAegF,EAAiC8pB,uBAAuBx6B,KAAMqI,GACnH6tB,cAAgB7tB,GAAYgD,EAAWK,eAAegF,EAAiC+pB,wBAAwBz6B,KAAMqI,GACrHkuB,YAAcluB,GAAYgD,EAAWK,eAAegF,EAAiCgqB,2BAA2B16B,KAAMqI,GACtH8nB,uBAAyBpoB,GAAWsD,EAAWC,iBAAiBoF,EAAiCif,mCAAmC3vB,KAAM+H,GAC1I4xB,sBAAwB5xB,GAAWsD,EAAWC,iBAAiBoF,EAAiC2Q,kCAAkCrhB,KAAM+H,GACxI4yB,oBAAsB5yB,GAAWsD,EAAWC,iBAAiBoF,EAAiC0M,gCAAgCpd,KAAM+H,GACpI6yB,sBAAwB7yB,GAAWsD,EAAWC,iBAAiBoF,EAAiCiO,kCAAkC3e,KAAM+H,GACxI8yB,qBAAuB9yB,GAAWsD,EAAWC,iBAAiBoF,EAAiC2N,iCAAiCre,KAAM+H,GACtI+yB,oBAAsB/yB,GAAWsD,EAAWC,iBAAiBoF,EAAiCkQ,gCAAgC5gB,KAAM+H,GACpImwB,cAAgB7vB,GAAYgD,EAAWK,eAAegF,EAAiCqqB,+BAA+B/6B,KAAMqI,GAC5H0D,QAAS,IAAMV,EAAWU,WAirEf6qB,CAAiBuD,EAAW95B,OAAQ85B,EAAW75B,OAAQiyB,EAAczrB,IAGpF,yBAEI,GAAI7C,KAAKuB,QAAUuT,EAAY6c,UAAY3xB,KAAKuB,QAAUuT,EAAY2b,QAClE,OAEJ,IACQzwB,KAAK0uB,qBACL1uB,KAAK0uB,oBAAoB5mB,UAGjC,MAAOhJ,IAGP,IAAIi4B,EAASpiB,EAAYW,aACzB,IACIyhB,EAAS/2B,KAAK8tB,eAAeQ,aAAa0I,SAE9C,MAAOl4B,IAGPkB,KAAKyuB,wBAAqB9tB,EAC1BX,KAAK0uB,yBAAsB/tB,EACvBo2B,IAAWpiB,EAAYW,cACvBtV,KAAKlB,MAAM,kEACXkB,KAAKuB,MAAQuT,EAAY2b,QACzBzwB,KAAKi1B,SAAQ,GAAO,IAEf8B,IAAWpiB,EAAYS,UAC5BpV,KAAKhB,KAAK,yDACVgB,KAAKi1B,SAAQ,GAAO,GACpBj1B,KAAKuB,MAAQuT,EAAY0Z,QACzBxuB,KAAKi3B,SAGb,sBAAsBn4B,EAAOgB,EAAS0T,GACrBxT,KAAK8tB,eAAeQ,aAAaxvB,MAAMA,EAAOgB,EAAS0T,KACrDkB,EAAYS,WACvBnV,KAAKlB,MAAM,2DACXkB,KAAK0yB,QAGb,yBAAyBtrB,GACrB+M,EAAS8E,UAAU6S,yBAAyB,KACxC9rB,KAAK4yB,aAAaxrB,GAAY,KAGtC,aAAaA,EAAYC,GAAmB,GACxC,IAAIqb,EAASvO,EAAS8E,UAAUyT,iBAAiB1sB,KAAK4tB,KAClDvsB,EAAQoL,EAAiCzS,MAAMoF,IAC/CkC,EAAcmL,EAAiCxS,YAAYyF,KAC/D,GAAIgjB,EAAQ,CACR,MAAMwU,EAAcxU,EAAOtqB,IAAI,eAAgB,OACpB,iBAAhB8+B,EACP71B,EAAQoL,EAAiCzS,MAAMkF,WAAWg4B,IAG1D71B,EAAQoL,EAAiCzS,MAAMkF,WAAWwjB,EAAOtqB,IAAI,yBAA0B,QAC/FkJ,EAAcmL,EAAiCxS,YAAYiF,WAAWwjB,EAAOtqB,IAAI,sBAAuB,UAGhH4H,KAAK6wB,OAASxvB,EACdrB,KAAKkJ,aAAe5H,EACpB8F,EAAW/F,MAAMrB,KAAK6wB,OAAQ7wB,KAAK+I,QAAS,CACxC1B,mBACA/F,YAAatB,KAAKkJ,eAG1B,eAAeiuB,GACX,IAII3Z,EAJA4Z,EAAap3B,KAAK8tB,eAAelC,YAAYwL,WAC5CA,IAKD5Z,EADA3gB,EAAGgI,MAAMuyB,GACEA,EAGA,CAACA,GAEX5Z,GAGLxd,KAAK2tB,iBAAiBv1B,IAAIqU,EAAiC2Q,kCAAkCrhB,KAAKD,QAAQu7B,YAAY9iB,EAAKwF,eAAgByD,IAE/I,iBAAiB8Z,GACb,IAAK,IAAIC,KAAWD,EAChBt3B,KAAKw3B,gBAAgBD,GAG7B,gBAAgBA,GAEZ,GADAv3B,KAAKytB,UAAUtmB,KAAKowB,GAChB/f,EAAepP,GAAGmvB,GAAU,CAC5B,IAAI5f,EAAW4f,EAAQ5f,SACvB,GAAInN,MAAMC,QAAQkN,GACd,IAAK,IAAI7X,KAAW6X,EAChB3X,KAAK0tB,gBAAgBvrB,IAAIrC,EAAQhE,OAAQgE,GACzCE,KAAK2tB,iBAAiBxrB,IAAIrC,EAAQhE,OAAQy7B,QAI9Cv3B,KAAK0tB,gBAAgBvrB,IAAIwV,EAAS7b,OAAQ6b,GAC1C3X,KAAK2tB,iBAAiBxrB,IAAIwV,EAAS7b,OAAQy7B,IAIvD,WAAWE,GACP,OAAOz3B,KAAK2tB,iBAAiBv1B,IAAIq/B,GAErC,0BACIz3B,KAAKw3B,gBAAgB,IAAIhM,EAAqBxrB,OAC9CA,KAAKw3B,gBAAgB,IAAI1e,EAA2B9Y,KAAMA,KAAKgZ,mBAC/DhZ,KAAKw3B,gBAAgB,IAAIjd,EAA6Bva,OACtDA,KAAKw3B,gBAAgB,IAAI7b,EAAgB3b,OACzCA,KAAKw3B,gBAAgB,IAAIvb,EAAyBjc,OAClDA,KAAKw3B,gBAAgB,IAAI/a,EAA2Bzc,OACpDA,KAAKw3B,gBAAgB,IAAItd,EAA4Bla,KAAMA,KAAKgZ,mBAChEhZ,KAAKw3B,gBAAgB,IAAIva,EAAyBjd,KAAOiI,GAAUjI,KAAK03B,gBAAgBzvB,KACxFjI,KAAKw3B,gBAAgB,IAAI3X,EAAsB7f,OAC/CA,KAAKw3B,gBAAgB,IAAIzV,EAAa/hB,OACtCA,KAAKw3B,gBAAgB,IAAIhV,EAAqBxiB,OAC9CA,KAAKw3B,gBAAgB,IAAIlU,EAAkBtjB,OAC3CA,KAAKw3B,gBAAgB,IAAI1T,EAAkB9jB,OAC3CA,KAAKw3B,gBAAgB,IAAIlT,EAAyBtkB,OAClDA,KAAKw3B,gBAAgB,IAAI3S,EAAsB7kB,OAC/CA,KAAKw3B,gBAAgB,IAAI9R,EAAuB1lB,OAChDA,KAAKw3B,gBAAgB,IAAIvR,EAAkBjmB,OAC3CA,KAAKw3B,gBAAgB,IAAI1P,EAAgB9nB,OACzCA,KAAKw3B,gBAAgB,IAAI/O,EAA0BzoB,OACnDA,KAAKw3B,gBAAgB,IAAIzO,EAA+B/oB,OACxDA,KAAKw3B,gBAAgB,IAAIpO,EAAgCppB,OACzDA,KAAKw3B,gBAAgB,IAAI3N,EAAc7pB,OACvCA,KAAKw3B,gBAAgB,IAAI7M,EAAoB3qB,OAC7CA,KAAKw3B,gBAAgB,IAAI7K,EAAsB3sB,OAEnD,qBAAqB8D,GACjB,IAAK,IAAIyzB,KAAWv3B,KAAKytB,UACjB5wB,EAAG6K,KAAK6vB,EAAQ7D,uBAChB6D,EAAQ7D,qBAAqB5vB,GAIzC,4BACI,IAAIL,EAAS,GACb6T,EAAO7T,EAAQ,aAAak0B,WAAY,EACxC,IAAIC,EAAgBtgB,EAAOA,EAAO7T,EAAQ,aAAc,iBACxDm0B,EAAcC,iBAAkB,EAChCD,EAAcE,mBAAqB,CAACrrB,EAAiCsrB,sBAAsB9Z,OAAQxR,EAAiCsrB,sBAAsBC,OAAQvrB,EAAiCsrB,sBAAsB5Z,QACzNyZ,EAAcK,gBAAkBxrB,EAAiCyrB,oBAAoBC,sBACrF,IAAI7C,EAAche,EAAOA,EAAO7T,EAAQ,gBAAiB,sBACzD6xB,EAAY8C,oBAAqB,EACjC9C,EAAY+C,gBAAiB,EAC7B/C,EAAY3U,WAAa,CAAEC,SAAU,CAACnU,EAAiC6rB,cAAcC,YAAa9rB,EAAiC6rB,cAAcxX,aACjJ,IAAK,IAAIyW,KAAWv3B,KAAKytB,UACrB8J,EAAQiB,uBAAuB/0B,GAEnC,OAAOA,EAEX,mBAAmB0zB,GACf,IAAI5e,EAAmBvY,KAAK8tB,eAAevV,iBAC3C,IAAK,IAAIgf,KAAWv3B,KAAKytB,UACrB8J,EAAQhF,WAAWvyB,KAAKqd,cAAe9E,GAG/C,0BAA0BzU,GACtB,OAAO,IAAI0E,QAAQ,CAACzC,EAASD,KACzB,IAAK,IAAIsZ,KAAgBtb,EAAO20B,cAAe,CAC3C,MAAMlB,EAAUv3B,KAAK2tB,iBAAiBv1B,IAAIgnB,EAAatjB,QACvD,IAAKy7B,EAED,YADAzxB,EAAO,IAAIlG,MAAM,iCAAiCwf,EAAatjB,uCAGnE,MAAM8jB,EAAUR,EAAa9G,iBAAmB,GAChDsH,EAAQrH,iBAAmBqH,EAAQrH,kBAAoBvY,KAAK8tB,eAAevV,iBAC3E,MAAM1U,EAAO,CACT9B,GAAIqd,EAAard,GACjBuW,gBAAiBsH,GAErB2X,EAAQ9f,SAASzX,KAAK0tB,gBAAgBt1B,IAAIgnB,EAAatjB,QAAS+H,GAEpEkC,MAGR,4BAA4BjC,GACxB,OAAO,IAAI0E,QAAQ,CAACzC,EAASD,KACzB,IAAK,IAAI4yB,KAAkB50B,EAAO60B,iBAAkB,CAChD,MAAMpB,EAAUv3B,KAAK2tB,iBAAiBv1B,IAAIsgC,EAAe58B,QACzD,IAAKy7B,EAED,YADAzxB,EAAO,IAAIlG,MAAM,iCAAiC84B,EAAe58B,yCAGrEy7B,EAAQ7f,WAAWghB,EAAe32B,IAEtCgE,MAGR,yBAAyBjC,GAGrB,IAAI8zB,EAAgB9zB,EAAO80B,KACvBC,EAAoB,IAAI73B,IAC5BmT,EAAS8E,UAAUe,cAAczQ,QAASsP,GAAaggB,EAAkB12B,IAAI0W,EAASoB,IAAIza,WAAYqZ,IACtG,IAAIigB,GAAkB,EACtB,GAAIlB,EAAcC,gBACd,IAAK,MAAMld,KAAUid,EAAcC,gBAC/B,GAAIprB,EAAiCssB,iBAAiB3wB,GAAGuS,IAAWA,EAAOxC,aAAalJ,SAAW0L,EAAOxC,aAAalJ,SAAW,EAAG,CACjI,IAAIkJ,EAAe0gB,EAAkBzgC,IAAIuiB,EAAOxC,aAAa8B,KAC7D,GAAI9B,GAAgBA,EAAalJ,UAAY0L,EAAOxC,aAAalJ,QAAS,CACtE6pB,GAAkB,EAClB,OAKhB,OAAIA,EACOtwB,QAAQzC,QAAQ,CAAEizB,SAAS,IAE/Bn8B,EAAGo8B,UAAU9kB,EAAS8E,UAAU0e,UAAU33B,KAAKgwB,KAAK3F,gBAAgBvmB,EAAO80B,OAAO7zB,KAAMvM,IAAmB,CAAEwgC,QAASxgC,MAEjI,iBAAiBuD,EAAM+C,GAEfA,aAAiB2N,EAAiC/S,gBAAkBoF,EAAMe,OAAS4M,EAAiChT,WAAWy/B,kBAAoBp6B,EAAMe,OAAS4M,EAAiChT,WAAW0/B,kBAGlNn5B,KAAKlB,MAAM,WAAW/C,EAAKD,iBAAkBgD,O,+CC59ErD;;;;;;;AAUA,IAAIs6B,EAAS,EAAQ,IACjBC,EAAU,EAAQ,IAClB5uB,EAAU,EAAQ,IAmDtB,SAAS6uB,IACP,OAAOnpB,EAAOopB,oBACV,WACA,WAGN,SAASC,EAAcC,EAAMvyB,GAC3B,GAAIoyB,IAAepyB,EACjB,MAAM,IAAIwyB,WAAW,8BAcvB,OAZIvpB,EAAOopB,qBAETE,EAAO,IAAIE,WAAWzyB,IACjB0yB,UAAYzpB,EAAOhX,WAGX,OAATsgC,IACFA,EAAO,IAAItpB,EAAOjJ,IAEpBuyB,EAAKvyB,OAASA,GAGTuyB,EAaT,SAAStpB,EAAQ/C,EAAKysB,EAAkB3yB,GACtC,KAAKiJ,EAAOopB,qBAAyBv5B,gBAAgBmQ,GACnD,OAAO,IAAIA,EAAO/C,EAAKysB,EAAkB3yB,GAI3C,GAAmB,iBAARkG,EAAkB,CAC3B,GAAgC,iBAArBysB,EACT,MAAM,IAAIj6B,MACR,qEAGJ,OAAO8Q,EAAY1Q,KAAMoN,GAE3B,OAAOgD,EAAKpQ,KAAMoN,EAAKysB,EAAkB3yB,GAW3C,SAASkJ,EAAMqpB,EAAMjhC,EAAOqhC,EAAkB3yB,GAC5C,GAAqB,iBAAV1O,EACT,MAAM,IAAIshC,UAAU,yCAGtB,MAA2B,oBAAhBC,aAA+BvhC,aAAiBuhC,YA6H7D,SAA0BN,EAAM50B,EAAOm1B,EAAY9yB,GAGjD,GAFArC,EAAMkM,WAEFipB,EAAa,GAAKn1B,EAAMkM,WAAaipB,EACvC,MAAM,IAAIN,WAAW,6BAGvB,GAAI70B,EAAMkM,WAAaipB,GAAc9yB,GAAU,GAC7C,MAAM,IAAIwyB,WAAW,6BAIrB70B,OADiBlE,IAAfq5B,QAAuCr5B,IAAXuG,EACtB,IAAIyyB,WAAW90B,QACHlE,IAAXuG,EACD,IAAIyyB,WAAW90B,EAAOm1B,GAEtB,IAAIL,WAAW90B,EAAOm1B,EAAY9yB,GAGxCiJ,EAAOopB,qBAETE,EAAO50B,GACF+0B,UAAYzpB,EAAOhX,UAGxBsgC,EAAOQ,EAAcR,EAAM50B,GAE7B,OAAO40B,EAvJES,CAAgBT,EAAMjhC,EAAOqhC,EAAkB3yB,GAGnC,iBAAV1O,EAwFb,SAAqBihC,EAAMt6B,EAAQoR,GACT,iBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAKJ,EAAOgqB,WAAW5pB,GACrB,MAAM,IAAIupB,UAAU,8CAGtB,IAAI5yB,EAAwC,EAA/B6J,EAAW5R,EAAQoR,GAG5B6pB,GAFJX,EAAOD,EAAaC,EAAMvyB,IAERvD,MAAMxE,EAAQoR,GAE5B6pB,IAAWlzB,IAIbuyB,EAAOA,EAAKnxB,MAAM,EAAG8xB,IAGvB,OAAOX,EA5GEv6B,CAAWu6B,EAAMjhC,EAAOqhC,GAsJnC,SAAqBJ,EAAMjN,GACzB,GAAIrc,EAAOkqB,SAAS7N,GAAM,CACxB,IAAIjhB,EAA4B,EAAtB+uB,EAAQ9N,EAAItlB,QAGtB,OAAoB,KAFpBuyB,EAAOD,EAAaC,EAAMluB,IAEjBrE,QAITslB,EAAIxb,KAAKyoB,EAAM,EAAG,EAAGluB,GAHZkuB,EAOX,GAAIjN,EAAK,CACP,GAA4B,oBAAhBuN,aACRvN,EAAI/b,kBAAkBspB,aAAgB,WAAYvN,EACpD,MAA0B,iBAAfA,EAAItlB,SA+8CLqzB,EA/8CkC/N,EAAItlB,SAg9CrCqzB,EA/8CFf,EAAaC,EAAM,GAErBQ,EAAcR,EAAMjN,GAG7B,GAAiB,WAAbA,EAAIzwB,MAAqB0O,EAAQ+hB,EAAI3oB,MACvC,OAAOo2B,EAAcR,EAAMjN,EAAI3oB,MAw8CrC,IAAgB02B,EAp8Cd,MAAM,IAAIT,UAAU,sFA9KbU,CAAWf,EAAMjhC,GA4B1B,SAASiiC,EAAYz3B,GACnB,GAAoB,iBAATA,EACT,MAAM,IAAI82B,UAAU,oCACf,GAAI92B,EAAO,EAChB,MAAM,IAAI02B,WAAW,wCA4BzB,SAAShpB,EAAa+oB,EAAMz2B,GAG1B,GAFAy3B,EAAWz3B,GACXy2B,EAAOD,EAAaC,EAAMz2B,EAAO,EAAI,EAAoB,EAAhBs3B,EAAQt3B,KAC5CmN,EAAOopB,oBACV,IAAK,IAAIpiC,EAAI,EAAGA,EAAI6L,IAAQ7L,EAC1BsiC,EAAKtiC,GAAK,EAGd,OAAOsiC,EAwCT,SAASQ,EAAeR,EAAM50B,GAC5B,IAAIqC,EAASrC,EAAMqC,OAAS,EAAI,EAA4B,EAAxBozB,EAAQz1B,EAAMqC,QAClDuyB,EAAOD,EAAaC,EAAMvyB,GAC1B,IAAK,IAAI/P,EAAI,EAAGA,EAAI+P,EAAQ/P,GAAK,EAC/BsiC,EAAKtiC,GAAgB,IAAX0N,EAAM1N,GAElB,OAAOsiC,EA+DT,SAASa,EAASpzB,GAGhB,GAAIA,GAAUoyB,IACZ,MAAM,IAAII,WAAW,0DACaJ,IAAa95B,SAAS,IAAM,UAEhE,OAAgB,EAAT0H,EAsFT,SAAS6J,EAAY5R,EAAQoR,GAC3B,GAAIJ,EAAOkqB,SAASl7B,GAClB,OAAOA,EAAO+H,OAEhB,GAA2B,oBAAhB6yB,aAA6D,mBAAvBA,YAAYW,SACxDX,YAAYW,OAAOv7B,IAAWA,aAAkB46B,aACnD,OAAO56B,EAAO4R,WAEM,iBAAX5R,IACTA,EAAS,GAAKA,GAGhB,IAAIoM,EAAMpM,EAAO+H,OACjB,GAAY,IAARqE,EAAW,OAAO,EAItB,IADA,IAAIovB,GAAc,IAEhB,OAAQpqB,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAOhF,EACT,IAAK,OACL,IAAK,QACL,UAAK5K,EACH,OAAOi6B,EAAYz7B,GAAQ+H,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAANqE,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOsvB,EAAc17B,GAAQ+H,OAC/B,QACE,GAAIyzB,EAAa,OAAOC,EAAYz7B,GAAQ+H,OAC5CqJ,GAAY,GAAKA,GAAUlR,cAC3Bs7B,GAAc,GAMtB,SAASG,EAAcvqB,EAAU0mB,EAAO/sB,GACtC,IAAIywB,GAAc,EAclB,SALch6B,IAAVs2B,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQj3B,KAAKkH,OACf,MAAO,GAOT,SAJYvG,IAARuJ,GAAqBA,EAAMlK,KAAKkH,UAClCgD,EAAMlK,KAAKkH,QAGTgD,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACT+sB,KAAW,GAGT,MAAO,GAKT,IAFK1mB,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOwqB,EAAS/6B,KAAMi3B,EAAO/sB,GAE/B,IAAK,OACL,IAAK,QACH,OAAO8wB,EAAUh7B,KAAMi3B,EAAO/sB,GAEhC,IAAK,QACH,OAAO+wB,EAAWj7B,KAAMi3B,EAAO/sB,GAEjC,IAAK,SACL,IAAK,SACH,OAAOgxB,EAAYl7B,KAAMi3B,EAAO/sB,GAElC,IAAK,SACH,OAAOixB,EAAYn7B,KAAMi3B,EAAO/sB,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOkxB,EAAap7B,KAAMi3B,EAAO/sB,GAEnC,QACE,GAAIywB,EAAa,MAAM,IAAIb,UAAU,qBAAuBvpB,GAC5DA,GAAYA,EAAW,IAAIlR,cAC3Bs7B,GAAc,GAStB,SAASU,EAAMC,EAAGtiC,EAAGrB,GACnB,IAAIR,EAAImkC,EAAEtiC,GACVsiC,EAAEtiC,GAAKsiC,EAAE3jC,GACT2jC,EAAE3jC,GAAKR,EAmIT,SAASokC,EAAsB9qB,EAAQ8pB,EAAKP,EAAYzpB,EAAUP,GAEhE,GAAsB,IAAlBS,EAAOvJ,OAAc,OAAQ,EAmBjC,GAhB0B,iBAAf8yB,GACTzpB,EAAWypB,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACVpnB,MAAMonB,KAERA,EAAahqB,EAAM,EAAKS,EAAOvJ,OAAS,GAItC8yB,EAAa,IAAGA,EAAavpB,EAAOvJ,OAAS8yB,GAC7CA,GAAcvpB,EAAOvJ,OAAQ,CAC/B,GAAI8I,EAAK,OAAQ,EACZgqB,EAAavpB,EAAOvJ,OAAS,OAC7B,GAAI8yB,EAAa,EAAG,CACzB,IAAIhqB,EACC,OAAQ,EADJgqB,EAAa,EAUxB,GALmB,iBAARO,IACTA,EAAMpqB,EAAOC,KAAKmqB,EAAKhqB,IAIrBJ,EAAOkqB,SAASE,GAElB,OAAmB,IAAfA,EAAIrzB,QACE,EAEHs0B,EAAa/qB,EAAQ8pB,EAAKP,EAAYzpB,EAAUP,GAClD,GAAmB,iBAARuqB,EAEhB,OADAA,GAAY,IACRpqB,EAAOopB,qBACiC,mBAAjCI,WAAWxgC,UAAUoY,QAC1BvB,EACK2pB,WAAWxgC,UAAUoY,QAAQ7Z,KAAK+Y,EAAQ8pB,EAAKP,GAE/CL,WAAWxgC,UAAUsiC,YAAY/jC,KAAK+Y,EAAQ8pB,EAAKP,GAGvDwB,EAAa/qB,EAAQ,CAAE8pB,GAAOP,EAAYzpB,EAAUP,GAG7D,MAAM,IAAI8pB,UAAU,wCAGtB,SAAS0B,EAAcE,EAAKnB,EAAKP,EAAYzpB,EAAUP,GACrD,IA0BI7Y,EA1BAwkC,EAAY,EACZC,EAAYF,EAAIx0B,OAChB20B,EAAYtB,EAAIrzB,OAEpB,QAAiBvG,IAAb4P,IAEe,UADjBA,EAAW9L,OAAO8L,GAAUlR,gBACY,UAAbkR,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAImrB,EAAIx0B,OAAS,GAAKqzB,EAAIrzB,OAAS,EACjC,OAAQ,EAEVy0B,EAAY,EACZC,GAAa,EACbC,GAAa,EACb7B,GAAc,EAIlB,SAAS/vB,EAAM6xB,EAAK3kC,GAClB,OAAkB,IAAdwkC,EACKG,EAAI3kC,GAEJ2kC,EAAIC,aAAa5kC,EAAIwkC,GAKhC,GAAI3rB,EAAK,CACP,IAAIgsB,GAAc,EAClB,IAAK7kC,EAAI6iC,EAAY7iC,EAAIykC,EAAWzkC,IAClC,GAAI8S,EAAKyxB,EAAKvkC,KAAO8S,EAAKswB,GAAqB,IAAhByB,EAAoB,EAAI7kC,EAAI6kC,IAEzD,IADoB,IAAhBA,IAAmBA,EAAa7kC,GAChCA,EAAI6kC,EAAa,IAAMH,EAAW,OAAOG,EAAaL,OAEtC,IAAhBK,IAAmB7kC,GAAKA,EAAI6kC,GAChCA,GAAc,OAKlB,IADIhC,EAAa6B,EAAYD,IAAW5B,EAAa4B,EAAYC,GAC5D1kC,EAAI6iC,EAAY7iC,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAI8kC,GAAQ,EACHC,EAAI,EAAGA,EAAIL,EAAWK,IAC7B,GAAIjyB,EAAKyxB,EAAKvkC,EAAI+kC,KAAOjyB,EAAKswB,EAAK2B,GAAI,CACrCD,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAO9kC,EAItB,OAAQ,EAeV,SAASglC,EAAUL,EAAK38B,EAAQi9B,EAAQl1B,GACtCk1B,EAAS1xB,OAAO0xB,IAAW,EAC3B,IAAIC,EAAYP,EAAI50B,OAASk1B,EACxBl1B,GAGHA,EAASwD,OAAOxD,IACHm1B,IACXn1B,EAASm1B,GAJXn1B,EAASm1B,EASX,IAAIC,EAASn9B,EAAO+H,OACpB,GAAIo1B,EAAS,GAAM,EAAG,MAAM,IAAIxC,UAAU,sBAEtC5yB,EAASo1B,EAAS,IACpBp1B,EAASo1B,EAAS,GAEpB,IAAK,IAAInlC,EAAI,EAAGA,EAAI+P,IAAU/P,EAAG,CAC/B,IAAIolC,EAAS5pB,SAASxT,EAAOqS,OAAW,EAAJra,EAAO,GAAI,IAC/C,GAAIyb,MAAM2pB,GAAS,OAAOplC,EAC1B2kC,EAAIM,EAASjlC,GAAKolC,EAEpB,OAAOplC,EAGT,SAASqlC,EAAWV,EAAK38B,EAAQi9B,EAAQl1B,GACvC,OAAOu1B,EAAW7B,EAAYz7B,EAAQ28B,EAAI50B,OAASk1B,GAASN,EAAKM,EAAQl1B,GAG3E,SAASw1B,EAAYZ,EAAK38B,EAAQi9B,EAAQl1B,GACxC,OAAOu1B,EAq6BT,SAAuB5rB,GAErB,IADA,IAAI8rB,EAAY,GACPxlC,EAAI,EAAGA,EAAI0Z,EAAI3J,SAAU/P,EAEhCwlC,EAAUx1B,KAAyB,IAApB0J,EAAI+rB,WAAWzlC,IAEhC,OAAOwlC,EA36BWE,CAAa19B,GAAS28B,EAAKM,EAAQl1B,GAGvD,SAAS41B,EAAahB,EAAK38B,EAAQi9B,EAAQl1B,GACzC,OAAOw1B,EAAWZ,EAAK38B,EAAQi9B,EAAQl1B,GAGzC,SAAS61B,EAAajB,EAAK38B,EAAQi9B,EAAQl1B,GACzC,OAAOu1B,EAAW5B,EAAc17B,GAAS28B,EAAKM,EAAQl1B,GAGxD,SAAS81B,EAAWlB,EAAK38B,EAAQi9B,EAAQl1B,GACvC,OAAOu1B,EAk6BT,SAAyB5rB,EAAKosB,GAG5B,IAFA,IAAIrlC,EAAGslC,EAAIC,EACPR,EAAY,GACPxlC,EAAI,EAAGA,EAAI0Z,EAAI3J,WACjB+1B,GAAS,GAAK,KADa9lC,EAGhCS,EAAIiZ,EAAI+rB,WAAWzlC,GACnB+lC,EAAKtlC,GAAK,EACVulC,EAAKvlC,EAAI,IACT+kC,EAAUx1B,KAAKg2B,GACfR,EAAUx1B,KAAK+1B,GAGjB,OAAOP,EA/6BWS,CAAej+B,EAAQ28B,EAAI50B,OAASk1B,GAASN,EAAKM,EAAQl1B,GAkF9E,SAASi0B,EAAaW,EAAK7E,EAAO/sB,GAChC,OAAc,IAAV+sB,GAAe/sB,IAAQ4xB,EAAI50B,OACtBkyB,EAAOiE,cAAcvB,GAErB1C,EAAOiE,cAAcvB,EAAIxzB,MAAM2uB,EAAO/sB,IAIjD,SAAS8wB,EAAWc,EAAK7E,EAAO/sB,GAC9BA,EAAMgH,KAAKosB,IAAIxB,EAAI50B,OAAQgD,GAI3B,IAHA,IAAIqzB,EAAM,GAENpmC,EAAI8/B,EACD9/B,EAAI+S,GAAK,CACd,IAQMszB,EAAYC,EAAWC,EAAYC,EARrCC,EAAY9B,EAAI3kC,GAChB0mC,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAIzmC,EAAI2mC,GAAoB5zB,EAG1B,OAAQ4zB,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,MAAV,KADlBJ,EAAa1B,EAAI3kC,EAAI,OAEnBwmC,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAa1B,EAAI3kC,EAAI,GACrBsmC,EAAY3B,EAAI3kC,EAAI,GACQ,MAAV,IAAbqmC,IAAsD,MAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAa1B,EAAI3kC,EAAI,GACrBsmC,EAAY3B,EAAI3kC,EAAI,GACpBumC,EAAa5B,EAAI3kC,EAAI,GACO,MAAV,IAAbqmC,IAAsD,MAAV,IAAZC,IAAsD,MAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbN,EAAIp2B,KAAK02B,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBN,EAAIp2B,KAAK02B,GACT1mC,GAAK2mC,EAGP,OAQF,SAAgCC,GAC9B,IAAIxyB,EAAMwyB,EAAW72B,OACrB,GAAIqE,GAJqB,KAKvB,OAAO9G,OAAOu5B,aAAanyB,MAAMpH,OAAQs5B,GAI3C,IAAIR,EAAM,GACNpmC,EAAI,EACR,KAAOA,EAAIoU,GACTgyB,GAAO94B,OAAOu5B,aAAanyB,MACzBpH,OACAs5B,EAAWz1B,MAAMnR,EAAGA,GAdC,OAiBzB,OAAOomC,EAvBAU,CAAsBV,GA98B/BzmC,EAAQqZ,OAASA,EACjBrZ,EAAQonC,WAoTR,SAAqBh3B,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOiJ,EAAOguB,OAAOj3B,IAvTvBpQ,EAAQsnC,kBAAoB,GA0B5BjuB,EAAOopB,yBAAqD54B,IAA/B+L,EAAO6sB,oBAChC7sB,EAAO6sB,oBAQX,WACE,IACE,IAAImC,EAAM,IAAI/B,WAAW,GAEzB,OADA+B,EAAI9B,UAAY,CAACA,UAAWD,WAAWxgC,UAAWklC,IAAK,WAAc,OAAO,KACvD,KAAd3C,EAAI2C,OACiB,mBAAjB3C,EAAI4C,UACuB,IAAlC5C,EAAI4C,SAAS,EAAG,GAAGvtB,WACvB,MAAOrI,GACP,OAAO,GAfP61B,GAKJznC,EAAQwiC,WAAaA,IAkErBnpB,EAAOquB,SAAW,KAGlBruB,EAAOsuB,SAAW,SAAU/C,GAE1B,OADAA,EAAI9B,UAAYzpB,EAAOhX,UAChBuiC,GA2BTvrB,EAAOC,KAAO,SAAU5X,EAAOqhC,EAAkB3yB,GAC/C,OAAOkJ,EAAK,KAAM5X,EAAOqhC,EAAkB3yB,IAGzCiJ,EAAOopB,sBACTppB,EAAOhX,UAAUygC,UAAYD,WAAWxgC,UACxCgX,EAAOypB,UAAYD,WACG,oBAAXrhC,QAA0BA,OAAOomC,SACxCvuB,EAAO7X,OAAOomC,WAAavuB,GAE7BlY,OAAOC,eAAeiY,EAAQ7X,OAAOomC,QAAS,CAC5ClmC,MAAO,KACPmmC,cAAc,KAiCpBxuB,EAAOguB,MAAQ,SAAUn7B,EAAM47B,EAAMruB,GACnC,OArBF,SAAgBkpB,EAAMz2B,EAAM47B,EAAMruB,GAEhC,OADAkqB,EAAWz3B,GACPA,GAAQ,EACHw2B,EAAaC,EAAMz2B,QAEfrC,IAATi+B,EAIyB,iBAAbruB,EACVipB,EAAaC,EAAMz2B,GAAM47B,KAAKA,EAAMruB,GACpCipB,EAAaC,EAAMz2B,GAAM47B,KAAKA,GAE7BpF,EAAaC,EAAMz2B,GAQnBm7B,CAAM,KAAMn7B,EAAM47B,EAAMruB,IAiBjCJ,EAAOO,YAAc,SAAU1N,GAC7B,OAAO0N,EAAY,KAAM1N,IAK3BmN,EAAO0uB,gBAAkB,SAAU77B,GACjC,OAAO0N,EAAY,KAAM1N,IAiH3BmN,EAAOkqB,SAAW,SAAmBiB,GACnC,QAAe,MAALA,IAAaA,EAAEwD,YAG3B3uB,EAAO4uB,QAAU,SAAkB7nC,EAAGokC,GACpC,IAAKnrB,EAAOkqB,SAASnjC,KAAOiZ,EAAOkqB,SAASiB,GAC1C,MAAM,IAAIxB,UAAU,6BAGtB,GAAI5iC,IAAMokC,EAAG,OAAO,EAKpB,IAHA,IAAI0D,EAAI9nC,EAAEgQ,OACN+3B,EAAI3D,EAAEp0B,OAED/P,EAAI,EAAGoU,EAAM2F,KAAKosB,IAAI0B,EAAGC,GAAI9nC,EAAIoU,IAAOpU,EAC/C,GAAID,EAAEC,KAAOmkC,EAAEnkC,GAAI,CACjB6nC,EAAI9nC,EAAEC,GACN8nC,EAAI3D,EAAEnkC,GACN,MAIJ,OAAI6nC,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGT7uB,EAAOgqB,WAAa,SAAqB5pB,GACvC,OAAQ9L,OAAO8L,GAAUlR,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIb8Q,EAAOhC,OAAS,SAAiB+wB,EAAMh4B,GACrC,IAAKuD,EAAQy0B,GACX,MAAM,IAAIpF,UAAU,+CAGtB,GAAoB,IAAhBoF,EAAKh4B,OACP,OAAOiJ,EAAOguB,MAAM,GAGtB,IAAIhnC,EACJ,QAAewJ,IAAXuG,EAEF,IADAA,EAAS,EACJ/P,EAAI,EAAGA,EAAI+nC,EAAKh4B,SAAU/P,EAC7B+P,GAAUg4B,EAAK/nC,GAAG+P,OAItB,IAAIuJ,EAASN,EAAOO,YAAYxJ,GAC5Bi4B,EAAM,EACV,IAAKhoC,EAAI,EAAGA,EAAI+nC,EAAKh4B,SAAU/P,EAAG,CAChC,IAAI2kC,EAAMoD,EAAK/nC,GACf,IAAKgZ,EAAOkqB,SAASyB,GACnB,MAAM,IAAIhC,UAAU,+CAEtBgC,EAAI9qB,KAAKP,EAAQ0uB,GACjBA,GAAOrD,EAAI50B,OAEb,OAAOuJ,GA8CTN,EAAOY,WAAaA,EA0EpBZ,EAAOhX,UAAU2lC,WAAY,EAQ7B3uB,EAAOhX,UAAUimC,OAAS,WACxB,IAAI7zB,EAAMvL,KAAKkH,OACf,GAAIqE,EAAM,GAAM,EACd,MAAM,IAAImuB,WAAW,6CAEvB,IAAK,IAAIviC,EAAI,EAAGA,EAAIoU,EAAKpU,GAAK,EAC5BkkC,EAAKr7B,KAAM7I,EAAGA,EAAI,GAEpB,OAAO6I,MAGTmQ,EAAOhX,UAAUkmC,OAAS,WACxB,IAAI9zB,EAAMvL,KAAKkH,OACf,GAAIqE,EAAM,GAAM,EACd,MAAM,IAAImuB,WAAW,6CAEvB,IAAK,IAAIviC,EAAI,EAAGA,EAAIoU,EAAKpU,GAAK,EAC5BkkC,EAAKr7B,KAAM7I,EAAGA,EAAI,GAClBkkC,EAAKr7B,KAAM7I,EAAI,EAAGA,EAAI,GAExB,OAAO6I,MAGTmQ,EAAOhX,UAAUmmC,OAAS,WACxB,IAAI/zB,EAAMvL,KAAKkH,OACf,GAAIqE,EAAM,GAAM,EACd,MAAM,IAAImuB,WAAW,6CAEvB,IAAK,IAAIviC,EAAI,EAAGA,EAAIoU,EAAKpU,GAAK,EAC5BkkC,EAAKr7B,KAAM7I,EAAGA,EAAI,GAClBkkC,EAAKr7B,KAAM7I,EAAI,EAAGA,EAAI,GACtBkkC,EAAKr7B,KAAM7I,EAAI,EAAGA,EAAI,GACtBkkC,EAAKr7B,KAAM7I,EAAI,EAAGA,EAAI,GAExB,OAAO6I,MAGTmQ,EAAOhX,UAAUqG,SAAW,WAC1B,IAAI0H,EAAuB,EAAdlH,KAAKkH,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArB0H,UAAU1H,OAAqB8zB,EAAUh7B,KAAM,EAAGkH,GAC/C4zB,EAAajvB,MAAM7L,KAAM4O,YAGlCuB,EAAOhX,UAAUomC,OAAS,SAAiBjE,GACzC,IAAKnrB,EAAOkqB,SAASiB,GAAI,MAAM,IAAIxB,UAAU,6BAC7C,OAAI95B,OAASs7B,GACsB,IAA5BnrB,EAAO4uB,QAAQ/+B,KAAMs7B,IAG9BnrB,EAAOhX,UAAUwQ,QAAU,WACzB,IAAIkH,EAAM,GACN2uB,EAAM1oC,EAAQsnC,kBAKlB,OAJIp+B,KAAKkH,OAAS,IAChB2J,EAAM7Q,KAAKR,SAAS,MAAO,EAAGggC,GAAKnnB,MAAM,SAAS1E,KAAK,KACnD3T,KAAKkH,OAASs4B,IAAK3uB,GAAO,UAEzB,WAAaA,EAAM,KAG5BV,EAAOhX,UAAU4lC,QAAU,SAAkBxnB,EAAQ0f,EAAO/sB,EAAKu1B,EAAWC,GAC1E,IAAKvvB,EAAOkqB,SAAS9iB,GACnB,MAAM,IAAIuiB,UAAU,6BAgBtB,QAbcn5B,IAAVs2B,IACFA,EAAQ,QAEEt2B,IAARuJ,IACFA,EAAMqN,EAASA,EAAOrQ,OAAS,QAEfvG,IAAd8+B,IACFA,EAAY,QAEE9+B,IAAZ++B,IACFA,EAAU1/B,KAAKkH,QAGb+vB,EAAQ,GAAK/sB,EAAMqN,EAAOrQ,QAAUu4B,EAAY,GAAKC,EAAU1/B,KAAKkH,OACtE,MAAM,IAAIwyB,WAAW,sBAGvB,GAAI+F,GAAaC,GAAWzI,GAAS/sB,EACnC,OAAO,EAET,GAAIu1B,GAAaC,EACf,OAAQ,EAEV,GAAIzI,GAAS/sB,EACX,OAAO,EAQT,GAAIlK,OAASuX,EAAQ,OAAO,EAS5B,IAPA,IAAIynB,GAJJU,KAAa,IADbD,KAAe,GAMXR,GAPJ/0B,KAAS,IADT+sB,KAAW,GASP1rB,EAAM2F,KAAKosB,IAAI0B,EAAGC,GAElBU,EAAW3/B,KAAKsI,MAAMm3B,EAAWC,GACjCE,EAAaroB,EAAOjP,MAAM2uB,EAAO/sB,GAE5B/S,EAAI,EAAGA,EAAIoU,IAAOpU,EACzB,GAAIwoC,EAASxoC,KAAOyoC,EAAWzoC,GAAI,CACjC6nC,EAAIW,EAASxoC,GACb8nC,EAAIW,EAAWzoC,GACf,MAIJ,OAAI6nC,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA6HT7uB,EAAOhX,UAAU0mC,SAAW,SAAmBtF,EAAKP,EAAYzpB,GAC9D,OAAoD,IAA7CvQ,KAAKuR,QAAQgpB,EAAKP,EAAYzpB,IAGvCJ,EAAOhX,UAAUoY,QAAU,SAAkBgpB,EAAKP,EAAYzpB,GAC5D,OAAOgrB,EAAqBv7B,KAAMu6B,EAAKP,EAAYzpB,GAAU,IAG/DJ,EAAOhX,UAAUsiC,YAAc,SAAsBlB,EAAKP,EAAYzpB,GACpE,OAAOgrB,EAAqBv7B,KAAMu6B,EAAKP,EAAYzpB,GAAU,IAkD/DJ,EAAOhX,UAAUwK,MAAQ,SAAgBxE,EAAQi9B,EAAQl1B,EAAQqJ,GAE/D,QAAe5P,IAAXy7B,EACF7rB,EAAW,OACXrJ,EAASlH,KAAKkH,OACdk1B,EAAS,OAEJ,QAAez7B,IAAXuG,GAA0C,iBAAXk1B,EACxC7rB,EAAW6rB,EACXl1B,EAASlH,KAAKkH,OACdk1B,EAAS,MAEJ,KAAI0D,SAAS1D,GAWlB,MAAM,IAAIx8B,MACR,2EAXFw8B,GAAkB,EACd0D,SAAS54B,IACXA,GAAkB,OACDvG,IAAb4P,IAAwBA,EAAW,UAEvCA,EAAWrJ,EACXA,OAASvG,GASb,IAAI07B,EAAYr8B,KAAKkH,OAASk1B,EAG9B,SAFez7B,IAAXuG,GAAwBA,EAASm1B,KAAWn1B,EAASm1B,GAEpDl9B,EAAO+H,OAAS,IAAMA,EAAS,GAAKk1B,EAAS,IAAOA,EAASp8B,KAAKkH,OACrE,MAAM,IAAIwyB,WAAW,0CAGlBnpB,IAAUA,EAAW,QAG1B,IADA,IAAIoqB,GAAc,IAEhB,OAAQpqB,GACN,IAAK,MACH,OAAO4rB,EAASn8B,KAAMb,EAAQi9B,EAAQl1B,GAExC,IAAK,OACL,IAAK,QACH,OAAOs1B,EAAUx8B,KAAMb,EAAQi9B,EAAQl1B,GAEzC,IAAK,QACH,OAAOw1B,EAAW18B,KAAMb,EAAQi9B,EAAQl1B,GAE1C,IAAK,SACL,IAAK,SACH,OAAO41B,EAAY98B,KAAMb,EAAQi9B,EAAQl1B,GAE3C,IAAK,SAEH,OAAO61B,EAAY/8B,KAAMb,EAAQi9B,EAAQl1B,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO81B,EAAUh9B,KAAMb,EAAQi9B,EAAQl1B,GAEzC,QACE,GAAIyzB,EAAa,MAAM,IAAIb,UAAU,qBAAuBvpB,GAC5DA,GAAY,GAAKA,GAAUlR,cAC3Bs7B,GAAc,IAKtBxqB,EAAOhX,UAAU4mC,OAAS,WACxB,MAAO,CACLhkC,KAAM,SACN8H,KAAM2G,MAAMrR,UAAUmP,MAAM5Q,KAAKsI,KAAKggC,MAAQhgC,KAAM,KA4GxD,SAASi7B,EAAYa,EAAK7E,EAAO/sB,GAC/B,IAAIwB,EAAM,GACVxB,EAAMgH,KAAKosB,IAAIxB,EAAI50B,OAAQgD,GAE3B,IAAK,IAAI/S,EAAI8/B,EAAO9/B,EAAI+S,IAAO/S,EAC7BuU,GAAOjH,OAAOu5B,aAAsB,IAATlC,EAAI3kC,IAEjC,OAAOuU,EAGT,SAASwvB,EAAaY,EAAK7E,EAAO/sB,GAChC,IAAIwB,EAAM,GACVxB,EAAMgH,KAAKosB,IAAIxB,EAAI50B,OAAQgD,GAE3B,IAAK,IAAI/S,EAAI8/B,EAAO9/B,EAAI+S,IAAO/S,EAC7BuU,GAAOjH,OAAOu5B,aAAalC,EAAI3kC,IAEjC,OAAOuU,EAGT,SAASqvB,EAAUe,EAAK7E,EAAO/sB,GAC7B,IAAIqB,EAAMuwB,EAAI50B,SAET+vB,GAASA,EAAQ,KAAGA,EAAQ,KAC5B/sB,GAAOA,EAAM,GAAKA,EAAMqB,KAAKrB,EAAMqB,GAGxC,IADA,IAAI00B,EAAM,GACD9oC,EAAI8/B,EAAO9/B,EAAI+S,IAAO/S,EAC7B8oC,GAAOC,EAAMpE,EAAI3kC,IAEnB,OAAO8oC,EAGT,SAAS7E,EAAcU,EAAK7E,EAAO/sB,GAGjC,IAFA,IAAIi2B,EAAQrE,EAAIxzB,MAAM2uB,EAAO/sB,GACzBqzB,EAAM,GACDpmC,EAAI,EAAGA,EAAIgpC,EAAMj5B,OAAQ/P,GAAK,EACrComC,GAAO94B,OAAOu5B,aAAamC,EAAMhpC,GAAoB,IAAfgpC,EAAMhpC,EAAI,IAElD,OAAOomC,EA0CT,SAAS6C,EAAahE,EAAQiE,EAAKn5B,GACjC,GAAKk1B,EAAS,GAAO,GAAKA,EAAS,EAAG,MAAM,IAAI1C,WAAW,sBAC3D,GAAI0C,EAASiE,EAAMn5B,EAAQ,MAAM,IAAIwyB,WAAW,yCA+JlD,SAAS4G,EAAUxE,EAAKtjC,EAAO4jC,EAAQiE,EAAKb,EAAKlC,GAC/C,IAAKntB,EAAOkqB,SAASyB,GAAM,MAAM,IAAIhC,UAAU,+CAC/C,GAAIthC,EAAQgnC,GAAOhnC,EAAQ8kC,EAAK,MAAM,IAAI5D,WAAW,qCACrD,GAAI0C,EAASiE,EAAMvE,EAAI50B,OAAQ,MAAM,IAAIwyB,WAAW,sBAkDtD,SAAS6G,EAAmBzE,EAAKtjC,EAAO4jC,EAAQoE,GAC1ChoC,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIrB,EAAI,EAAG+kC,EAAIhrB,KAAKosB,IAAIxB,EAAI50B,OAASk1B,EAAQ,GAAIjlC,EAAI+kC,IAAK/kC,EAC7D2kC,EAAIM,EAASjlC,IAAMqB,EAAS,KAAS,GAAKgoC,EAAerpC,EAAI,EAAIA,MAClC,GAA5BqpC,EAAerpC,EAAI,EAAIA,GA8B9B,SAASspC,EAAmB3E,EAAKtjC,EAAO4jC,EAAQoE,GAC1ChoC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIrB,EAAI,EAAG+kC,EAAIhrB,KAAKosB,IAAIxB,EAAI50B,OAASk1B,EAAQ,GAAIjlC,EAAI+kC,IAAK/kC,EAC7D2kC,EAAIM,EAASjlC,GAAMqB,IAAuC,GAA5BgoC,EAAerpC,EAAI,EAAIA,GAAU,IAmJnE,SAASupC,EAAc5E,EAAKtjC,EAAO4jC,EAAQiE,EAAKb,EAAKlC,GACnD,GAAIlB,EAASiE,EAAMvE,EAAI50B,OAAQ,MAAM,IAAIwyB,WAAW,sBACpD,GAAI0C,EAAS,EAAG,MAAM,IAAI1C,WAAW,sBAGvC,SAASiH,EAAY7E,EAAKtjC,EAAO4jC,EAAQoE,EAAcI,GAKrD,OAJKA,GACHF,EAAa5E,EAAKtjC,EAAO4jC,EAAQ,GAEnC/C,EAAQ11B,MAAMm4B,EAAKtjC,EAAO4jC,EAAQoE,EAAc,GAAI,GAC7CpE,EAAS,EAWlB,SAASyE,EAAa/E,EAAKtjC,EAAO4jC,EAAQoE,EAAcI,GAKtD,OAJKA,GACHF,EAAa5E,EAAKtjC,EAAO4jC,EAAQ,GAEnC/C,EAAQ11B,MAAMm4B,EAAKtjC,EAAO4jC,EAAQoE,EAAc,GAAI,GAC7CpE,EAAS,EA/clBjsB,EAAOhX,UAAUmP,MAAQ,SAAgB2uB,EAAO/sB,GAC9C,IAoBI42B,EApBAv1B,EAAMvL,KAAKkH,OAqBf,IApBA+vB,IAAUA,GAGE,GACVA,GAAS1rB,GACG,IAAG0rB,EAAQ,GACdA,EAAQ1rB,IACjB0rB,EAAQ1rB,IANVrB,OAAcvJ,IAARuJ,EAAoBqB,IAAQrB,GASxB,GACRA,GAAOqB,GACG,IAAGrB,EAAM,GACVA,EAAMqB,IACfrB,EAAMqB,GAGJrB,EAAM+sB,IAAO/sB,EAAM+sB,GAGnB9mB,EAAOopB,qBACTuH,EAAS9gC,KAAKs+B,SAASrH,EAAO/sB,IACvB0vB,UAAYzpB,EAAOhX,cACrB,CACL,IAAI4nC,EAAW72B,EAAM+sB,EACrB6J,EAAS,IAAI3wB,EAAO4wB,OAAUpgC,GAC9B,IAAK,IAAIxJ,EAAI,EAAGA,EAAI4pC,IAAY5pC,EAC9B2pC,EAAO3pC,GAAK6I,KAAK7I,EAAI8/B,GAIzB,OAAO6J,GAWT3wB,EAAOhX,UAAU6nC,WAAa,SAAqB5E,EAAQrrB,EAAY6vB,GACrExE,GAAkB,EAClBrrB,GAA0B,EACrB6vB,GAAUR,EAAYhE,EAAQrrB,EAAY/Q,KAAKkH,QAKpD,IAHA,IAAIqzB,EAAMv6B,KAAKo8B,GACX6E,EAAM,EACN9pC,EAAI,IACCA,EAAI4Z,IAAekwB,GAAO,MACjC1G,GAAOv6B,KAAKo8B,EAASjlC,GAAK8pC,EAG5B,OAAO1G,GAGTpqB,EAAOhX,UAAU+nC,WAAa,SAAqB9E,EAAQrrB,EAAY6vB,GACrExE,GAAkB,EAClBrrB,GAA0B,EACrB6vB,GACHR,EAAYhE,EAAQrrB,EAAY/Q,KAAKkH,QAKvC,IAFA,IAAIqzB,EAAMv6B,KAAKo8B,IAAWrrB,GACtBkwB,EAAM,EACHlwB,EAAa,IAAMkwB,GAAO,MAC/B1G,GAAOv6B,KAAKo8B,IAAWrrB,GAAckwB,EAGvC,OAAO1G,GAGTpqB,EAAOhX,UAAUgoC,UAAY,SAAoB/E,EAAQwE,GAEvD,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpClH,KAAKo8B,IAGdjsB,EAAOhX,UAAUioC,aAAe,SAAuBhF,EAAQwE,GAE7D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpClH,KAAKo8B,GAAWp8B,KAAKo8B,EAAS,IAAM,GAG7CjsB,EAAOhX,UAAU4iC,aAAe,SAAuBK,EAAQwE,GAE7D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACnClH,KAAKo8B,IAAW,EAAKp8B,KAAKo8B,EAAS,IAG7CjsB,EAAOhX,UAAUkoC,aAAe,SAAuBjF,EAAQwE,GAG7D,OAFKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,SAElClH,KAAKo8B,GACTp8B,KAAKo8B,EAAS,IAAM,EACpBp8B,KAAKo8B,EAAS,IAAM,IACD,SAAnBp8B,KAAKo8B,EAAS,IAGrBjsB,EAAOhX,UAAUmoC,aAAe,SAAuBlF,EAAQwE,GAG7D,OAFKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QAEpB,SAAflH,KAAKo8B,IACTp8B,KAAKo8B,EAAS,IAAM,GACrBp8B,KAAKo8B,EAAS,IAAM,EACrBp8B,KAAKo8B,EAAS,KAGlBjsB,EAAOhX,UAAUooC,UAAY,SAAoBnF,EAAQrrB,EAAY6vB,GACnExE,GAAkB,EAClBrrB,GAA0B,EACrB6vB,GAAUR,EAAYhE,EAAQrrB,EAAY/Q,KAAKkH,QAKpD,IAHA,IAAIqzB,EAAMv6B,KAAKo8B,GACX6E,EAAM,EACN9pC,EAAI,IACCA,EAAI4Z,IAAekwB,GAAO,MACjC1G,GAAOv6B,KAAKo8B,EAASjlC,GAAK8pC,EAM5B,OAFI1G,IAFJ0G,GAAO,OAES1G,GAAOrpB,KAAKswB,IAAI,EAAG,EAAIzwB,IAEhCwpB,GAGTpqB,EAAOhX,UAAUsoC,UAAY,SAAoBrF,EAAQrrB,EAAY6vB,GACnExE,GAAkB,EAClBrrB,GAA0B,EACrB6vB,GAAUR,EAAYhE,EAAQrrB,EAAY/Q,KAAKkH,QAKpD,IAHA,IAAI/P,EAAI4Z,EACJkwB,EAAM,EACN1G,EAAMv6B,KAAKo8B,IAAWjlC,GACnBA,EAAI,IAAM8pC,GAAO,MACtB1G,GAAOv6B,KAAKo8B,IAAWjlC,GAAK8pC,EAM9B,OAFI1G,IAFJ0G,GAAO,OAES1G,GAAOrpB,KAAKswB,IAAI,EAAG,EAAIzwB,IAEhCwpB,GAGTpqB,EAAOhX,UAAUuoC,SAAW,SAAmBtF,EAAQwE,GAErD,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACtB,IAAflH,KAAKo8B,IAC0B,GAA5B,IAAOp8B,KAAKo8B,GAAU,GADKp8B,KAAKo8B,IAI3CjsB,EAAOhX,UAAUwoC,YAAc,SAAsBvF,EAAQwE,GACtDA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QAC3C,IAAIqzB,EAAMv6B,KAAKo8B,GAAWp8B,KAAKo8B,EAAS,IAAM,EAC9C,OAAc,MAAN7B,EAAsB,WAANA,EAAmBA,GAG7CpqB,EAAOhX,UAAUyoC,YAAc,SAAsBxF,EAAQwE,GACtDA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QAC3C,IAAIqzB,EAAMv6B,KAAKo8B,EAAS,GAAMp8B,KAAKo8B,IAAW,EAC9C,OAAc,MAAN7B,EAAsB,WAANA,EAAmBA,GAG7CpqB,EAAOhX,UAAU0oC,YAAc,SAAsBzF,EAAQwE,GAG3D,OAFKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QAEnClH,KAAKo8B,GACVp8B,KAAKo8B,EAAS,IAAM,EACpBp8B,KAAKo8B,EAAS,IAAM,GACpBp8B,KAAKo8B,EAAS,IAAM,IAGzBjsB,EAAOhX,UAAU2oC,YAAc,SAAsB1F,EAAQwE,GAG3D,OAFKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QAEnClH,KAAKo8B,IAAW,GACrBp8B,KAAKo8B,EAAS,IAAM,GACpBp8B,KAAKo8B,EAAS,IAAM,EACpBp8B,KAAKo8B,EAAS,IAGnBjsB,EAAOhX,UAAU4oC,YAAc,SAAsB3F,EAAQwE,GAE3D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpCmyB,EAAQpvB,KAAKjK,KAAMo8B,GAAQ,EAAM,GAAI,IAG9CjsB,EAAOhX,UAAU6oC,YAAc,SAAsB5F,EAAQwE,GAE3D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpCmyB,EAAQpvB,KAAKjK,KAAMo8B,GAAQ,EAAO,GAAI,IAG/CjsB,EAAOhX,UAAU8oC,aAAe,SAAuB7F,EAAQwE,GAE7D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpCmyB,EAAQpvB,KAAKjK,KAAMo8B,GAAQ,EAAM,GAAI,IAG9CjsB,EAAOhX,UAAU+oC,aAAe,SAAuB9F,EAAQwE,GAE7D,OADKA,GAAUR,EAAYhE,EAAQ,EAAGp8B,KAAKkH,QACpCmyB,EAAQpvB,KAAKjK,KAAMo8B,GAAQ,EAAO,GAAI,IAS/CjsB,EAAOhX,UAAUgpC,YAAc,SAAsB3pC,EAAO4jC,EAAQrrB,EAAY6vB,IAC9EpoC,GAASA,EACT4jC,GAAkB,EAClBrrB,GAA0B,EACrB6vB,IAEHN,EAAStgC,KAAMxH,EAAO4jC,EAAQrrB,EADfG,KAAKswB,IAAI,EAAG,EAAIzwB,GAAc,EACO,GAGtD,IAAIkwB,EAAM,EACN9pC,EAAI,EAER,IADA6I,KAAKo8B,GAAkB,IAAR5jC,IACNrB,EAAI4Z,IAAekwB,GAAO,MACjCjhC,KAAKo8B,EAASjlC,GAAMqB,EAAQyoC,EAAO,IAGrC,OAAO7E,EAASrrB,GAGlBZ,EAAOhX,UAAUipC,YAAc,SAAsB5pC,EAAO4jC,EAAQrrB,EAAY6vB,IAC9EpoC,GAASA,EACT4jC,GAAkB,EAClBrrB,GAA0B,EACrB6vB,IAEHN,EAAStgC,KAAMxH,EAAO4jC,EAAQrrB,EADfG,KAAKswB,IAAI,EAAG,EAAIzwB,GAAc,EACO,GAGtD,IAAI5Z,EAAI4Z,EAAa,EACjBkwB,EAAM,EAEV,IADAjhC,KAAKo8B,EAASjlC,GAAa,IAARqB,IACVrB,GAAK,IAAM8pC,GAAO,MACzBjhC,KAAKo8B,EAASjlC,GAAMqB,EAAQyoC,EAAO,IAGrC,OAAO7E,EAASrrB,GAGlBZ,EAAOhX,UAAUkpC,WAAa,SAAqB7pC,EAAO4jC,EAAQwE,GAMhE,OALApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,IAAM,GACjDjsB,EAAOopB,sBAAqB/gC,EAAQ0Y,KAAKoxB,MAAM9pC,IACpDwH,KAAKo8B,GAAmB,IAAR5jC,EACT4jC,EAAS,GAWlBjsB,EAAOhX,UAAUopC,cAAgB,SAAwB/pC,EAAO4jC,EAAQwE,GAUtE,OATApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,MAAQ,GACpDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAmB,IAAR5jC,EAChBwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAE9B+nC,EAAkBvgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAUqpC,cAAgB,SAAwBhqC,EAAO4jC,EAAQwE,GAUtE,OATApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,MAAQ,GACpDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAW5jC,IAAU,EAC1BwH,KAAKo8B,EAAS,GAAc,IAAR5jC,GAEpB+nC,EAAkBvgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAUlBjsB,EAAOhX,UAAUspC,cAAgB,SAAwBjqC,EAAO4jC,EAAQwE,GAYtE,OAXApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,WAAY,GACxDjsB,EAAOopB,qBACTv5B,KAAKo8B,EAAS,GAAM5jC,IAAU,GAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,EAC9BwH,KAAKo8B,GAAmB,IAAR5jC,GAEhBioC,EAAkBzgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAUupC,cAAgB,SAAwBlqC,EAAO4jC,EAAQwE,GAYtE,OAXApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,WAAY,GACxDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAW5jC,IAAU,GAC1BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,EAC9BwH,KAAKo8B,EAAS,GAAc,IAAR5jC,GAEpBioC,EAAkBzgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAUwpC,WAAa,SAAqBnqC,EAAO4jC,EAAQrrB,EAAY6vB,GAG5E,GAFApoC,GAASA,EACT4jC,GAAkB,GACbwE,EAAU,CACb,IAAIgC,EAAQ1xB,KAAKswB,IAAI,EAAG,EAAIzwB,EAAa,GAEzCuvB,EAAStgC,KAAMxH,EAAO4jC,EAAQrrB,EAAY6xB,EAAQ,GAAIA,GAGxD,IAAIzrC,EAAI,EACJ8pC,EAAM,EACN4B,EAAM,EAEV,IADA7iC,KAAKo8B,GAAkB,IAAR5jC,IACNrB,EAAI4Z,IAAekwB,GAAO,MAC7BzoC,EAAQ,GAAa,IAARqqC,GAAsC,IAAzB7iC,KAAKo8B,EAASjlC,EAAI,KAC9C0rC,EAAM,GAER7iC,KAAKo8B,EAASjlC,IAAOqB,EAAQyoC,GAAQ,GAAK4B,EAAM,IAGlD,OAAOzG,EAASrrB,GAGlBZ,EAAOhX,UAAU2pC,WAAa,SAAqBtqC,EAAO4jC,EAAQrrB,EAAY6vB,GAG5E,GAFApoC,GAASA,EACT4jC,GAAkB,GACbwE,EAAU,CACb,IAAIgC,EAAQ1xB,KAAKswB,IAAI,EAAG,EAAIzwB,EAAa,GAEzCuvB,EAAStgC,KAAMxH,EAAO4jC,EAAQrrB,EAAY6xB,EAAQ,GAAIA,GAGxD,IAAIzrC,EAAI4Z,EAAa,EACjBkwB,EAAM,EACN4B,EAAM,EAEV,IADA7iC,KAAKo8B,EAASjlC,GAAa,IAARqB,IACVrB,GAAK,IAAM8pC,GAAO,MACrBzoC,EAAQ,GAAa,IAARqqC,GAAsC,IAAzB7iC,KAAKo8B,EAASjlC,EAAI,KAC9C0rC,EAAM,GAER7iC,KAAKo8B,EAASjlC,IAAOqB,EAAQyoC,GAAQ,GAAK4B,EAAM,IAGlD,OAAOzG,EAASrrB,GAGlBZ,EAAOhX,UAAU4pC,UAAY,SAAoBvqC,EAAO4jC,EAAQwE,GAO9D,OANApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,KAAO,KAClDjsB,EAAOopB,sBAAqB/gC,EAAQ0Y,KAAKoxB,MAAM9pC,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCwH,KAAKo8B,GAAmB,IAAR5jC,EACT4jC,EAAS,GAGlBjsB,EAAOhX,UAAU6pC,aAAe,SAAuBxqC,EAAO4jC,EAAQwE,GAUpE,OATApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,OAAS,OACrDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAmB,IAAR5jC,EAChBwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAE9B+nC,EAAkBvgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAU8pC,aAAe,SAAuBzqC,EAAO4jC,EAAQwE,GAUpE,OATApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,OAAS,OACrDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAW5jC,IAAU,EAC1BwH,KAAKo8B,EAAS,GAAc,IAAR5jC,GAEpB+nC,EAAkBvgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAU+pC,aAAe,SAAuB1qC,EAAO4jC,EAAQwE,GAYpE,OAXApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,YAAa,YACzDjsB,EAAOopB,qBACTv5B,KAAKo8B,GAAmB,IAAR5jC,EAChBwH,KAAKo8B,EAAS,GAAM5jC,IAAU,EAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,IAE9BioC,EAAkBzgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAGlBjsB,EAAOhX,UAAUgqC,aAAe,SAAuB3qC,EAAO4jC,EAAQwE,GAapE,OAZApoC,GAASA,EACT4jC,GAAkB,EACbwE,GAAUN,EAAStgC,KAAMxH,EAAO4jC,EAAQ,EAAG,YAAa,YACzD5jC,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxC2X,EAAOopB,qBACTv5B,KAAKo8B,GAAW5jC,IAAU,GAC1BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,GAC9BwH,KAAKo8B,EAAS,GAAM5jC,IAAU,EAC9BwH,KAAKo8B,EAAS,GAAc,IAAR5jC,GAEpBioC,EAAkBzgC,KAAMxH,EAAO4jC,GAAQ,GAElCA,EAAS,GAgBlBjsB,EAAOhX,UAAUiqC,aAAe,SAAuB5qC,EAAO4jC,EAAQwE,GACpE,OAAOD,EAAW3gC,KAAMxH,EAAO4jC,GAAQ,EAAMwE,IAG/CzwB,EAAOhX,UAAUkqC,aAAe,SAAuB7qC,EAAO4jC,EAAQwE,GACpE,OAAOD,EAAW3gC,KAAMxH,EAAO4jC,GAAQ,EAAOwE,IAWhDzwB,EAAOhX,UAAUmqC,cAAgB,SAAwB9qC,EAAO4jC,EAAQwE,GACtE,OAAOC,EAAY7gC,KAAMxH,EAAO4jC,GAAQ,EAAMwE,IAGhDzwB,EAAOhX,UAAUoqC,cAAgB,SAAwB/qC,EAAO4jC,EAAQwE,GACtE,OAAOC,EAAY7gC,KAAMxH,EAAO4jC,GAAQ,EAAOwE,IAIjDzwB,EAAOhX,UAAU6X,KAAO,SAAeuG,EAAQisB,EAAavM,EAAO/sB,GAQjE,GAPK+sB,IAAOA,EAAQ,GACf/sB,GAAe,IAARA,IAAWA,EAAMlK,KAAKkH,QAC9Bs8B,GAAejsB,EAAOrQ,SAAQs8B,EAAcjsB,EAAOrQ,QAClDs8B,IAAaA,EAAc,GAC5Bt5B,EAAM,GAAKA,EAAM+sB,IAAO/sB,EAAM+sB,GAG9B/sB,IAAQ+sB,EAAO,OAAO,EAC1B,GAAsB,IAAlB1f,EAAOrQ,QAAgC,IAAhBlH,KAAKkH,OAAc,OAAO,EAGrD,GAAIs8B,EAAc,EAChB,MAAM,IAAI9J,WAAW,6BAEvB,GAAIzC,EAAQ,GAAKA,GAASj3B,KAAKkH,OAAQ,MAAM,IAAIwyB,WAAW,6BAC5D,GAAIxvB,EAAM,EAAG,MAAM,IAAIwvB,WAAW,2BAG9BxvB,EAAMlK,KAAKkH,SAAQgD,EAAMlK,KAAKkH,QAC9BqQ,EAAOrQ,OAASs8B,EAAct5B,EAAM+sB,IACtC/sB,EAAMqN,EAAOrQ,OAASs8B,EAAcvM,GAGtC,IACI9/B,EADAoU,EAAMrB,EAAM+sB,EAGhB,GAAIj3B,OAASuX,GAAU0f,EAAQuM,GAAeA,EAAct5B,EAE1D,IAAK/S,EAAIoU,EAAM,EAAGpU,GAAK,IAAKA,EAC1BogB,EAAOpgB,EAAIqsC,GAAexjC,KAAK7I,EAAI8/B,QAEhC,GAAI1rB,EAAM,MAAS4E,EAAOopB,oBAE/B,IAAKpiC,EAAI,EAAGA,EAAIoU,IAAOpU,EACrBogB,EAAOpgB,EAAIqsC,GAAexjC,KAAK7I,EAAI8/B,QAGrC0C,WAAWxgC,UAAUgJ,IAAIzK,KACvB6f,EACAvX,KAAKs+B,SAASrH,EAAOA,EAAQ1rB,GAC7Bi4B,GAIJ,OAAOj4B,GAOT4E,EAAOhX,UAAUylC,KAAO,SAAerE,EAAKtD,EAAO/sB,EAAKqG,GAEtD,GAAmB,iBAARgqB,EAAkB,CAS3B,GARqB,iBAAVtD,GACT1mB,EAAW0mB,EACXA,EAAQ,EACR/sB,EAAMlK,KAAKkH,QACa,iBAARgD,IAChBqG,EAAWrG,EACXA,EAAMlK,KAAKkH,QAEM,IAAfqzB,EAAIrzB,OAAc,CACpB,IAAIrH,EAAO06B,EAAIqC,WAAW,GACtB/8B,EAAO,MACT06B,EAAM16B,GAGV,QAAiBc,IAAb4P,GAA8C,iBAAbA,EACnC,MAAM,IAAIupB,UAAU,6BAEtB,GAAwB,iBAAbvpB,IAA0BJ,EAAOgqB,WAAW5pB,GACrD,MAAM,IAAIupB,UAAU,qBAAuBvpB,OAErB,iBAARgqB,IAChBA,GAAY,KAId,GAAItD,EAAQ,GAAKj3B,KAAKkH,OAAS+vB,GAASj3B,KAAKkH,OAASgD,EACpD,MAAM,IAAIwvB,WAAW,sBAGvB,GAAIxvB,GAAO+sB,EACT,OAAOj3B,KAQT,IAAI7I,EACJ,GANA8/B,KAAkB,EAClB/sB,OAAcvJ,IAARuJ,EAAoBlK,KAAKkH,OAASgD,IAAQ,EAE3CqwB,IAAKA,EAAM,GAGG,iBAARA,EACT,IAAKpjC,EAAI8/B,EAAO9/B,EAAI+S,IAAO/S,EACzB6I,KAAK7I,GAAKojC,MAEP,CACL,IAAI4F,EAAQhwB,EAAOkqB,SAASE,GACxBA,EACAK,EAAY,IAAIzqB,EAAOoqB,EAAKhqB,GAAU/Q,YACtC+L,EAAM40B,EAAMj5B,OAChB,IAAK/P,EAAI,EAAGA,EAAI+S,EAAM+sB,IAAS9/B,EAC7B6I,KAAK7I,EAAI8/B,GAASkJ,EAAMhpC,EAAIoU,GAIhC,OAAOvL,MAMT,IAAIyjC,EAAoB,qBAmBxB,SAASvD,EAAOlnC,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAEwG,SAAS,IAC7BxG,EAAEwG,SAAS,IAGpB,SAASo7B,EAAaz7B,EAAQ89B,GAE5B,IAAIY,EADJZ,EAAQA,GAASyG,IAMjB,IAJA,IAAIx8B,EAAS/H,EAAO+H,OAChBy8B,EAAgB,KAChBxD,EAAQ,GAEHhpC,EAAI,EAAGA,EAAI+P,IAAU/P,EAAG,CAI/B,IAHA0mC,EAAY1+B,EAAOy9B,WAAWzlC,IAGd,OAAU0mC,EAAY,MAAQ,CAE5C,IAAK8F,EAAe,CAElB,GAAI9F,EAAY,MAAQ,EAEjBZ,GAAS,IAAM,GAAGkD,EAAMh5B,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIhQ,EAAI,IAAM+P,EAAQ,EAEtB+1B,GAAS,IAAM,GAAGkD,EAAMh5B,KAAK,IAAM,IAAM,KAC9C,SAIFw8B,EAAgB9F,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBZ,GAAS,IAAM,GAAGkD,EAAMh5B,KAAK,IAAM,IAAM,KAC9Cw8B,EAAgB9F,EAChB,SAIFA,EAAkE,OAArD8F,EAAgB,OAAU,GAAK9F,EAAY,YAC/C8F,IAEJ1G,GAAS,IAAM,GAAGkD,EAAMh5B,KAAK,IAAM,IAAM,KAMhD,GAHAw8B,EAAgB,KAGZ9F,EAAY,IAAM,CACpB,IAAKZ,GAAS,GAAK,EAAG,MACtBkD,EAAMh5B,KAAK02B,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKZ,GAAS,GAAK,EAAG,MACtBkD,EAAMh5B,KACJ02B,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKZ,GAAS,GAAK,EAAG,MACtBkD,EAAMh5B,KACJ02B,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIj+B,MAAM,sBARhB,IAAKq9B,GAAS,GAAK,EAAG,MACtBkD,EAAMh5B,KACJ02B,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOsC,EA4BT,SAAStF,EAAehqB,GACtB,OAAOuoB,EAAOwK,YAhIhB,SAAsB/yB,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAIY,KAAaZ,EAAIY,OAClBZ,EAAIgzB,QAAQ,aAAc,IAZ3BC,CAAWjzB,GAAKgzB,QAAQJ,EAAmB,KAEzCv8B,OAAS,EAAG,MAAO,GAE3B,KAAO2J,EAAI3J,OAAS,GAAM,GACxB2J,GAAY,IAEd,OAAOA,EAuHmBkzB,CAAYlzB,IAGxC,SAAS4rB,EAAYuH,EAAKC,EAAK7H,EAAQl1B,GACrC,IAAK,IAAI/P,EAAI,EAAGA,EAAI+P,KACb/P,EAAIilC,GAAU6H,EAAI/8B,QAAY/P,GAAK6sC,EAAI98B,UADhB/P,EAE5B8sC,EAAI9sC,EAAIilC,GAAU4H,EAAI7sC,GAExB,OAAOA,K,+CClvDTc,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM4P,EAAK,EAAQ,GAInB,IAAI3O,GACJ,SAAWA,GAEPA,EAAWyqC,YAAc,MACzBzqC,EAAW0qC,gBAAkB,MAC7B1qC,EAAWyL,gBAAkB,MAC7BzL,EAAW2qC,eAAiB,MAC5B3qC,EAAWuL,eAAiB,MAC5BvL,EAAW4qC,kBAAoB,MAC/B5qC,EAAW6qC,gBAAkB,KAC7B7qC,EAAW8qC,sBAAwB,MACnC9qC,EAAW+qC,kBAAoB,MAE/B/qC,EAAWy/B,kBAAoB,MAC/Bz/B,EAAW0/B,iBAAmB,MAE9B1/B,EAAWkP,kBAAoB,EAC/BlP,EAAWgrC,iBAAmB,EAhBlC,CAiBGhrC,EAAa3C,EAAQ2C,aAAe3C,EAAQ2C,WAAa,KAK5D,MAAMC,UAAsBkG,MACxB,YAAYC,EAAMC,EAAS+D,GACvB9D,MAAMD,GACNE,KAAKH,KAAOuI,EAAGnC,OAAOpG,GAAQA,EAAOpG,EAAW+qC,iBAChDxkC,KAAK6D,KAAOA,EACZ5L,OAAOgI,eAAeD,KAAMtG,EAAcP,WAE9C,SACI,MAAO,CACH0G,KAAMG,KAAKH,KACXC,QAASE,KAAKF,QACd+D,KAAM7D,KAAK6D,OAIvB/M,EAAQ4C,cAAgBA,EAIxB,MAAMgrC,EACF,YAAYnnB,EAASonB,GACjB3kC,KAAKud,QAAUA,EACfvd,KAAK2kC,gBAAkBA,EAE3B,aACI,OAAO3kC,KAAKud,QAEhB,qBACI,OAAOvd,KAAK2kC,iBAGpB7tC,EAAQ4tC,oBAAsBA,EAa9B5tC,EAAQuD,aALR,cAA2BqqC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQsD,YALR,cAA0BsqC,EACtB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQiG,aALR,cAA2B2nC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQkG,aALR,cAA2B0nC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQmG,aALR,cAA2BynC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQoG,aALR,cAA2BwnC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQqG,aALR,cAA2BunC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQsG,aALR,cAA2BsnC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQuG,aALR,cAA2BqnC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQwG,aALR,cAA2BonC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQyG,aALR,cAA2BmnC,EACvB,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAetBhF,EAAQwD,iBANR,cAA+BoqC,EAC3B,YAAY5oC,GACRiE,MAAMjE,EAAQ,GACdkE,KAAK4kC,OAAIjkC,IASjB7J,EAAQyD,kBALR,cAAgCmqC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ0G,kBALR,cAAgCknC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ2G,kBALR,cAAgCinC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ4G,kBALR,cAAgCgnC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ6G,kBALR,cAAgC+mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ8G,kBALR,cAAgC8mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQ+G,kBALR,cAAgC6mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQgH,kBALR,cAAgC4mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQiH,kBALR,cAAgC2mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAStBhF,EAAQkH,kBALR,cAAgC0mC,EAC5B,YAAY5oC,GACRiE,MAAMjE,EAAQ,KAWtBhF,EAAQoL,iBAJR,SAA0BpC,GACtB,IAAIgK,EAAYhK,EAChB,OAAOgK,GAAa1B,EAAGjJ,OAAO2K,EAAUhO,UAAYsM,EAAGjJ,OAAO2K,EAAU/H,KAAOqG,EAAGnC,OAAO6D,EAAU/H,MAUvGjL,EAAQsO,sBAJR,SAA+BtF,GAC3B,IAAIgK,EAAYhK,EAChB,OAAOgK,GAAa1B,EAAGjJ,OAAO2K,EAAUhO,cAA0B,IAAfgE,EAAQiC,IAU/DjL,EAAQsL,kBAJR,SAA2BtC,GACvB,IAAIgK,EAAYhK,EAChB,OAAOgK,SAAmC,IAArBA,EAAUrG,UAAuBqG,EAAUhL,SAAWsJ,EAAGjJ,OAAO2K,EAAU/H,KAAOqG,EAAGnC,OAAO6D,EAAU/H,KAAwB,OAAjB+H,EAAU/H,M,6BCtO/I9J,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMkE,EAAa,EAAQ,GAC3B5F,EAAQ+C,WAAa6C,EAAW7C,WAuBhC/C,EAAQ+tC,qBAtBR,MACI,cACI7kC,KAAKkM,YAAc,GAEvB,UACI,KAAmC,IAA5BlM,KAAKkM,YAAYhF,QACpBlH,KAAKkM,YAAY44B,MAAMh9B,UAG/B,KAAKmX,GACD,MAAM/S,EAAclM,KAAKkM,YAEzB,OADAA,EAAY/E,KAAK8X,GACV,CACH,UACI,MAAMzO,EAAQtE,EAAYqF,QAAQ0N,IACnB,IAAXzO,GACAtE,EAAYV,OAAOgF,EAAO,Q,6BCd9C,SAASrR,EAAO3G,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBiM,OAWzD,SAASiD,EAAKlP,GACV,MAAwB,mBAAVA,EAGlB,SAASqM,EAAMrM,GACX,OAAOgS,MAAMC,QAAQjS,GAWzB,SAASusC,EAASvsC,GACd,OAAOA,GAASkP,EAAKlP,EAAMuM,MAlC/B9M,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAItD1B,EAAQqS,QAHR,SAAiB3Q,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7B1B,EAAQqI,OAASA,EAIjBrI,EAAQmP,OAHR,SAAgBzN,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkS,QAMzD5T,EAAQgI,MAHR,SAAetG,GACX,OAAOA,aAAiBoH,OAM5B9I,EAAQ4Q,KAAOA,EAIf5Q,EAAQ+N,MAAQA,EAIhB/N,EAAQ6T,YAHR,SAAqBnS,GACjB,OAAOqM,EAAMrM,IAAUA,EAAMoS,MAAMC,GAAQ1L,EAAO0L,KAMtD/T,EAAQkuC,WAHR,SAAoBxsC,EAAOysC,GACvB,OAAOz6B,MAAMC,QAAQjS,IAAUA,EAAMoS,MAAMq6B,IAM/CnuC,EAAQiuC,SAAWA,EAcnBjuC,EAAQmiC,UAbR,SAAmBzgC,GACf,OAAIA,aAAiBgQ,QACVhQ,EAEFusC,EAASvsC,GACP,IAAIgQ,QAAQ,CAACzC,EAASD,KACzBtN,EAAMuM,KAAMmgC,GAAan/B,EAAQm/B,GAAYpmC,GAAUgH,EAAOhH,MAI3D0J,QAAQzC,QAAQvN,K,iBCpD/B,iCAC6B,oBAAT2sC,MAAwBA,MAChC/tC,OACRyU,EAAQqI,SAAS/a,UAAU0S,MAiB/B,SAASu5B,EAAQrjC,EAAIsjC,GACnBrlC,KAAK4tB,IAAM7rB,EACX/B,KAAKslC,SAAWD,EAflBvuC,EAAQ+W,WAAa,WACnB,OAAO,IAAIu3B,EAAQv5B,EAAMnU,KAAKmW,WAAY03B,EAAO32B,WAAYd,eAE/DhX,EAAQ0uC,YAAc,WACpB,OAAO,IAAIJ,EAAQv5B,EAAMnU,KAAK8tC,YAAaD,EAAO32B,WAAY62B,gBAEhE3uC,EAAQgX,aACRhX,EAAQ2uC,cAAgB,SAASp3B,GAC3BA,GACFA,EAAQq3B,SAQZN,EAAQjsC,UAAUwsC,MAAQP,EAAQjsC,UAAUysC,IAAM,aAClDR,EAAQjsC,UAAUusC,MAAQ,WACxB1lC,KAAKslC,SAAS5tC,KAAK6tC,EAAOvlC,KAAK4tB,MAIjC92B,EAAQ+uC,OAAS,SAASlkB,EAAMmkB,GAC9Bh4B,aAAa6T,EAAKokB,gBAClBpkB,EAAKqkB,aAAeF,GAGtBhvC,EAAQmvC,SAAW,SAAStkB,GAC1B7T,aAAa6T,EAAKokB,gBAClBpkB,EAAKqkB,cAAgB,GAGvBlvC,EAAQovC,aAAepvC,EAAQqvC,OAAS,SAASxkB,GAC/C7T,aAAa6T,EAAKokB,gBAElB,IAAID,EAAQnkB,EAAKqkB,aACbF,GAAS,IACXnkB,EAAKokB,eAAiBl4B,YAAW,WAC3B8T,EAAKykB,YACPzkB,EAAKykB,eACNN,KAKP,EAAQ,IAIRhvC,EAAQmM,aAAgC,oBAATkiC,MAAwBA,KAAKliC,mBAClB,IAAXyJ,GAA0BA,EAAOzJ,cACxCjD,MAAQA,KAAKiD,aACrCnM,EAAQuvC,eAAkC,oBAATlB,MAAwBA,KAAKkB,qBAClB,IAAX35B,GAA0BA,EAAO25B,gBACxCrmC,MAAQA,KAAKqmC,iB,mCC9DvC,6BACI,aAEA,IAAI35B,EAAOzJ,aAAX,CAIA,IAIIqjC,EA6HIC,EAZAlR,EArBAmR,EACAC,EAjGJC,EAAa,EACbC,EAAgB,GAChBC,GAAwB,EACxBC,EAAMn6B,EAAOmM,SAoJbiuB,EAAW7uC,OAAO8uC,gBAAkB9uC,OAAO8uC,eAAer6B,GAC9Do6B,EAAWA,GAAYA,EAASj5B,WAAai5B,EAAWp6B,EAGf,qBAArC,GAAGlN,SAAS9H,KAAKgV,EAAOc,SApFxB84B,EAAoB,SAASU,GACzBx5B,EAAQmB,UAAS,WAAcs4B,EAAaD,QAIpD,WAGI,GAAIt6B,EAAOw6B,cAAgBx6B,EAAOy6B,cAAe,CAC7C,IAAIC,GAA4B,EAC5BC,EAAe36B,EAAO46B,UAM1B,OALA56B,EAAO46B,UAAY,WACfF,GAA4B,GAEhC16B,EAAOw6B,YAAY,GAAI,KACvBx6B,EAAO46B,UAAYD,EACZD,GAwEJG,GAIA76B,EAAO86B,iBA9CVnS,EAAU,IAAImS,gBACVC,MAAMH,UAAY,SAASr/B,GAE/Bg/B,EADah/B,EAAMpE,OAIvByiC,EAAoB,SAASU,GACzB3R,EAAQqS,MAAMR,YAAYF,KA2CvBH,GAAO,uBAAwBA,EAAIc,cAAc,WAtCpDpB,EAAOM,EAAIe,gBACftB,EAAoB,SAASU,GAGzB,IAAIa,EAAShB,EAAIc,cAAc,UAC/BE,EAAOC,mBAAqB,WACxBb,EAAaD,GACba,EAAOC,mBAAqB,KAC5BvB,EAAKwB,YAAYF,GACjBA,EAAS,MAEbtB,EAAKyB,YAAYH,KAKrBvB,EAAoB,SAASU,GACzBn5B,WAAWo5B,EAAc,EAAGD,KAlD5BR,EAAgB,gBAAkBt1B,KAAK+2B,SAAW,IAClDxB,EAAkB,SAASx+B,GACvBA,EAAM3C,SAAWoH,GACK,iBAAfzE,EAAMpE,MACyB,IAAtCoE,EAAMpE,KAAK0N,QAAQi1B,IACnBS,GAAch/B,EAAMpE,KAAKyE,MAAMk+B,EAAct/B,UAIjDwF,EAAOw7B,iBACPx7B,EAAOw7B,iBAAiB,UAAWzB,GAAiB,GAEpD/5B,EAAOy7B,YAAY,YAAa1B,GAGpCH,EAAoB,SAASU,GACzBt6B,EAAOw6B,YAAYV,EAAgBQ,EAAQ,OAgEnDF,EAAS7jC,aA1KT,SAAsBsD,GAEI,mBAAbA,IACTA,EAAW,IAAI2N,SAAS,GAAK3N,IAI/B,IADA,IAAIkF,EAAO,IAAIjB,MAAMoE,UAAU1H,OAAS,GAC/B/P,EAAI,EAAGA,EAAIsU,EAAKvE,OAAQ/P,IAC7BsU,EAAKtU,GAAKyX,UAAUzX,EAAI,GAG5B,IAAIixC,EAAO,CAAE7hC,SAAUA,EAAUkF,KAAMA,GAGvC,OAFAk7B,EAAcD,GAAc0B,EAC5B9B,EAAkBI,GACXA,KA6JTI,EAAST,eAAiBA,EA1J1B,SAASA,EAAeW,UACbL,EAAcK,GAyBzB,SAASC,EAAaD,GAGlB,GAAIJ,EAGA/4B,WAAWo5B,EAAc,EAAGD,OACzB,CACH,IAAIoB,EAAOzB,EAAcK,GACzB,GAAIoB,EAAM,CACNxB,GAAwB,EACxB,KAjCZ,SAAawB,GACT,IAAI7hC,EAAW6hC,EAAK7hC,SAChBkF,EAAO28B,EAAK38B,KAChB,OAAQA,EAAKvE,QACb,KAAK,EACDX,IACA,MACJ,KAAK,EACDA,EAASkF,EAAK,IACd,MACJ,KAAK,EACDlF,EAASkF,EAAK,GAAIA,EAAK,IACvB,MACJ,KAAK,EACDlF,EAASkF,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAChC,MACJ,QACIlF,EAASsF,WAnDrB,EAmDsCJ,IAiBlB6C,CAAI85B,GACN,QACE/B,EAAeW,GACfJ,GAAwB,MAvE5C,CAyLkB,oBAATzB,UAAyC,IAAXz4B,EAAyB1M,KAAO0M,EAASy4B,Q,oDCvLhFruC,EAAQia,WAuCR,SAAqBs3B,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClD3xC,EAAQ8sC,YAiDR,SAAsByE,GACpB,IAAIK,EAcAvxC,EAbAmxC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvB5M,EAAM,IAAIiN,EAVhB,SAAsBN,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAS9BG,CAAYP,EAAKG,EAAUC,IAEzCI,EAAU,EAGVt9B,EAAMk9B,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAKrxC,EAAI,EAAGA,EAAIoU,EAAKpU,GAAK,EACxBuxC,EACGI,EAAUT,EAAIzL,WAAWzlC,KAAO,GAChC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,KAAO,GACpC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,KAAO,EACrC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,IAC/BukC,EAAImN,KAAcH,GAAO,GAAM,IAC/BhN,EAAImN,KAAcH,GAAO,EAAK,IAC9BhN,EAAImN,KAAmB,IAANH,EAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIzL,WAAWzlC,KAAO,EAChC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,KAAO,EACvCukC,EAAImN,KAAmB,IAANH,GAGK,IAApBD,IACFC,EACGI,EAAUT,EAAIzL,WAAWzlC,KAAO,GAChC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,KAAO,EACpC2xC,EAAUT,EAAIzL,WAAWzlC,EAAI,KAAO,EACvCukC,EAAImN,KAAcH,GAAO,EAAK,IAC9BhN,EAAImN,KAAmB,IAANH,GAGnB,OAAOhN,GA3FT5kC,EAAQumC,cAkHR,SAAwB0L,GAQtB,IAPA,IAAIL,EACAn9B,EAAMw9B,EAAM7hC,OACZ8hC,EAAaz9B,EAAM,EACnB09B,EAAQ,GAIH9xC,EAAI,EAAG+xC,EAAO39B,EAAMy9B,EAAY7xC,EAAI+xC,EAAM/xC,GAH9B,MAInB8xC,EAAM9hC,KAAKgiC,EACTJ,EAAO5xC,EAAIA,EALM,MAKgB+xC,EAAOA,EAAQ/xC,EAL/B,QAUF,IAAf6xC,GACFN,EAAMK,EAAMx9B,EAAM,GAClB09B,EAAM9hC,KACJiiC,EAAOV,GAAO,GACdU,EAAQV,GAAO,EAAK,IACpB,OAEsB,IAAfM,IACTN,GAAOK,EAAMx9B,EAAM,IAAM,GAAKw9B,EAAMx9B,EAAM,GAC1C09B,EAAM9hC,KACJiiC,EAAOV,GAAO,IACdU,EAAQV,GAAO,EAAK,IACpBU,EAAQV,GAAO,EAAK,IACpB,MAIJ,OAAOO,EAAMt1B,KAAK,KA3IpB,IALA,IAAIy1B,EAAS,GACTN,EAAY,GACZH,EAA4B,oBAAfhP,WAA6BA,WAAanvB,MAEvD3K,EAAO,mEACF1I,EAAI,EAAGoU,EAAM1L,EAAKqH,OAAQ/P,EAAIoU,IAAOpU,EAC5CiyC,EAAOjyC,GAAK0I,EAAK1I,GACjB2xC,EAAUjpC,EAAK+8B,WAAWzlC,IAAMA,EAQlC,SAASoxC,EAASF,GAChB,IAAI98B,EAAM88B,EAAInhC,OAEd,GAAIqE,EAAM,EAAI,EACZ,MAAM,IAAI3L,MAAM,kDAKlB,IAAI4oC,EAAWH,EAAI92B,QAAQ,KAO3B,OANkB,IAAdi3B,IAAiBA,EAAWj9B,GAMzB,CAACi9B,EAJcA,IAAaj9B,EAC/B,EACA,EAAKi9B,EAAW,GAsEtB,SAASW,EAAaJ,EAAO9R,EAAO/sB,GAGlC,IAFA,IAAIw+B,EARoBW,EASpBr/B,EAAS,GACJ7S,EAAI8/B,EAAO9/B,EAAI+S,EAAK/S,GAAK,EAChCuxC,GACIK,EAAM5xC,IAAM,GAAM,WAClB4xC,EAAM5xC,EAAI,IAAM,EAAK,QACP,IAAf4xC,EAAM5xC,EAAI,IACb6S,EAAO7C,KAdFiiC,GADiBC,EAeMX,IAdT,GAAK,IACxBU,EAAOC,GAAO,GAAK,IACnBD,EAAOC,GAAO,EAAI,IAClBD,EAAa,GAANC,IAaT,OAAOr/B,EAAO2J,KAAK,IAjGrBm1B,EAAU,IAAIlM,WAAW,IAAM,GAC/BkM,EAAU,IAAIlM,WAAW,IAAM,I,cCnB/B9lC,EAAQmT,KAAO,SAAUwG,EAAQ2rB,EAAQkN,EAAMC,EAAMC,GACnD,IAAI9gC,EAAG/Q,EACH8xC,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTzyC,EAAImyC,EAAQE,EAAS,EAAK,EAC1B3xC,EAAIyxC,GAAQ,EAAI,EAChBhwC,EAAImX,EAAO2rB,EAASjlC,GAOxB,IALAA,GAAKU,EAEL6Q,EAAIpP,GAAM,IAAOswC,GAAU,EAC3BtwC,KAAQswC,EACRA,GAASH,EACFG,EAAQ,EAAGlhC,EAAS,IAAJA,EAAW+H,EAAO2rB,EAASjlC,GAAIA,GAAKU,EAAG+xC,GAAS,GAKvE,IAHAjyC,EAAI+Q,GAAM,IAAOkhC,GAAU,EAC3BlhC,KAAQkhC,EACRA,GAASL,EACFK,EAAQ,EAAGjyC,EAAS,IAAJA,EAAW8Y,EAAO2rB,EAASjlC,GAAIA,GAAKU,EAAG+xC,GAAS,GAEvE,GAAU,IAANlhC,EACFA,EAAI,EAAIihC,MACH,IAAIjhC,IAAMghC,EACf,OAAO/xC,EAAIkyC,IAAsBnG,KAAdpqC,GAAK,EAAI,GAE5B3B,GAAQuZ,KAAKswB,IAAI,EAAG+H,GACpB7gC,GAAQihC,EAEV,OAAQrwC,GAAK,EAAI,GAAK3B,EAAIuZ,KAAKswB,IAAI,EAAG94B,EAAI6gC,IAG5CzyC,EAAQ6M,MAAQ,SAAU8M,EAAQjY,EAAO4jC,EAAQkN,EAAMC,EAAMC,GAC3D,IAAI9gC,EAAG/Q,EAAGC,EACN6xC,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATP,EAAcr4B,KAAKswB,IAAI,GAAI,IAAMtwB,KAAKswB,IAAI,GAAI,IAAM,EAC1DrqC,EAAImyC,EAAO,EAAKE,EAAS,EACzB3xC,EAAIyxC,EAAO,GAAK,EAChBhwC,EAAId,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQ0Y,KAAK64B,IAAIvxC,GAEboa,MAAMpa,IAAUA,IAAUkrC,KAC5B/rC,EAAIib,MAAMpa,GAAS,EAAI,EACvBkQ,EAAIghC,IAEJhhC,EAAIwI,KAAKoxB,MAAMpxB,KAAKjS,IAAIzG,GAAS0Y,KAAK84B,KAClCxxC,GAASZ,EAAIsZ,KAAKswB,IAAI,GAAI94B,IAAM,IAClCA,IACA9Q,GAAK,IAGLY,GADEkQ,EAAIihC,GAAS,EACNG,EAAKlyC,EAELkyC,EAAK54B,KAAKswB,IAAI,EAAG,EAAImI,IAEpB/xC,GAAK,IACf8Q,IACA9Q,GAAK,GAGH8Q,EAAIihC,GAASD,GACf/xC,EAAI,EACJ+Q,EAAIghC,GACKhhC,EAAIihC,GAAS,GACtBhyC,GAAMa,EAAQZ,EAAK,GAAKsZ,KAAKswB,IAAI,EAAG+H,GACpC7gC,GAAQihC,IAERhyC,EAAIa,EAAQ0Y,KAAKswB,IAAI,EAAGmI,EAAQ,GAAKz4B,KAAKswB,IAAI,EAAG+H,GACjD7gC,EAAI,IAID6gC,GAAQ,EAAG94B,EAAO2rB,EAASjlC,GAAS,IAAJQ,EAAUR,GAAKU,EAAGF,GAAK,IAAK4xC,GAAQ,GAI3E,IAFA7gC,EAAKA,GAAK6gC,EAAQ5xC,EAClB8xC,GAAQF,EACDE,EAAO,EAAGh5B,EAAO2rB,EAASjlC,GAAS,IAAJuR,EAAUvR,GAAKU,EAAG6Q,GAAK,IAAK+gC,GAAQ,GAE1Eh5B,EAAO2rB,EAASjlC,EAAIU,IAAU,IAAJyB,I,cClF5B,IAAIkG,EAAW,GAAGA,SAElBzI,EAAOD,QAAU0T,MAAMC,SAAW,SAAUixB,GAC1C,MAA6B,kBAAtBl8B,EAAS9H,KAAKgkC,K,6BCEvBzjC,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM6F,EAAW,EAAQ,GACnBxB,EAAK,EAAQ,GACnB,IAAIlD,GACJ,SAAWA,GACPA,EAAkBoR,KAAO9S,OAAO4G,OAAO,CACnCorC,yBAAyB,EACzBrhC,wBAAyBvK,EAASvE,MAAMiR,OAE5CpR,EAAkBuwC,UAAYjyC,OAAO4G,OAAO,CACxCorC,yBAAyB,EACzBrhC,wBAAyBvK,EAASvE,MAAMiR,OAQ5CpR,EAAkByO,GANlB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,IAAcA,IAAcnQ,EAAkBoR,MAC9CjB,IAAcnQ,EAAkBuwC,WAC/BrtC,EAAGsM,QAAQW,EAAUmgC,4BAA8BngC,EAAUlB,0BAb7E,CAgBGjP,EAAoB7C,EAAQ6C,oBAAsB7C,EAAQ6C,kBAAoB,KACjF,MAAMwwC,EAAgBlyC,OAAO4G,QAAO,SAAU0H,EAAU0E,GACpD,IAAI+7B,EAASn5B,WAAWtH,EAASxN,KAAKkS,GAAU,GAChD,MAAO,CAAE,UAAY6C,aAAak5B,QAEtC,MAAMoD,EACF,cACIpqC,KAAKqqC,cAAe,EAExB,SACSrqC,KAAKqqC,eACNrqC,KAAKqqC,cAAe,EAChBrqC,KAAKsqC,WACLtqC,KAAKsqC,SAASxnC,UAAKnC,GACnBX,KAAK8H,YAIjB,8BACI,OAAO9H,KAAKqqC,aAEhB,8BACI,OAAIrqC,KAAKqqC,aACEF,GAENnqC,KAAKsqC,WACNtqC,KAAKsqC,SAAW,IAAIjsC,EAAStE,SAE1BiG,KAAKsqC,SAASriC,OAEzB,UACQjI,KAAKsqC,WACLtqC,KAAKsqC,SAASxiC,UACd9H,KAAKsqC,cAAW3pC,IAmC5B7J,EAAQ8C,wBA/BR,MACI,YAMI,OALKoG,KAAKuqC,SAGNvqC,KAAKuqC,OAAS,IAAIH,GAEfpqC,KAAKuqC,OAEhB,SACSvqC,KAAKuqC,OAONvqC,KAAKuqC,OAAOhlC,SAHZvF,KAAKuqC,OAAS5wC,EAAkBuwC,UAMxC,UACSlqC,KAAKuqC,OAIDvqC,KAAKuqC,kBAAkBH,GAE5BpqC,KAAKuqC,OAAOziC,UAJZ9H,KAAKuqC,OAAS5wC,EAAkBoR,Q,6BC/E5C,IAAIy/B,EADJvyC,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAEtD,SAAWgyC,GACPA,EAAMz/B,KAAO,EACby/B,EAAMC,MAAQ,EACdD,EAAME,KAAO,EAHjB,CAIGF,EAAQ1zC,EAAQ0zC,QAAU1zC,EAAQ0zC,MAAQ,KA2Q7C1zC,EAAQoK,UA1QR,MACI,cACIlB,KAAK2qC,KAAO,IAAI3pC,IAChBhB,KAAK4qC,WAAQjqC,EACbX,KAAK6qC,WAAQlqC,EACbX,KAAK8qC,MAAQ,EAEjB,QACI9qC,KAAK2qC,KAAK/xB,QACV5Y,KAAK4qC,WAAQjqC,EACbX,KAAK6qC,WAAQlqC,EACbX,KAAK8qC,MAAQ,EAEjB,UACI,OAAQ9qC,KAAK4qC,QAAU5qC,KAAK6qC,MAEhC,WACI,OAAO7qC,KAAK8qC,MAEhB,IAAIhyC,GACA,OAAOkH,KAAK2qC,KAAK9iC,IAAI/O,GAEzB,IAAIA,GACA,MAAM6oB,EAAO3hB,KAAK2qC,KAAKvyC,IAAIU,GAC3B,GAAK6oB,EAGL,OAAOA,EAAKnpB,MAEhB,IAAIM,EAAKN,EAAOuyC,EAAQP,EAAMz/B,MAC1B,IAAI4W,EAAO3hB,KAAK2qC,KAAKvyC,IAAIU,GACzB,GAAI6oB,EACAA,EAAKnpB,MAAQA,EACTuyC,IAAUP,EAAMz/B,MAChB/K,KAAK+qC,MAAMppB,EAAMopB,OAGpB,CAED,OADAppB,EAAO,CAAE7oB,MAAKN,QAAOwyC,UAAMrqC,EAAWsqC,cAAUtqC,GACxCoqC,GACJ,KAAKP,EAAMz/B,KACP/K,KAAKkrC,YAAYvpB,GACjB,MACJ,KAAK6oB,EAAMC,MACPzqC,KAAKmrC,aAAaxpB,GAClB,MACJ,KAAK6oB,EAAME,KAGX,QACI1qC,KAAKkrC,YAAYvpB,GAGzB3hB,KAAK2qC,KAAKxoC,IAAIrJ,EAAK6oB,GACnB3hB,KAAK8qC,SAGb,OAAOhyC,GACH,MAAM6oB,EAAO3hB,KAAK2qC,KAAKvyC,IAAIU,GAC3B,QAAK6oB,IAGL3hB,KAAK2qC,KAAKjkC,OAAO5N,GACjBkH,KAAKorC,WAAWzpB,GAChB3hB,KAAK8qC,SACE,GAEX,QACI,IAAK9qC,KAAK4qC,QAAU5qC,KAAK6qC,MACrB,OAEJ,IAAK7qC,KAAK4qC,QAAU5qC,KAAK6qC,MACrB,MAAM,IAAIjrC,MAAM,gBAEpB,MAAM+hB,EAAO3hB,KAAK4qC,MAIlB,OAHA5qC,KAAK2qC,KAAKjkC,OAAOib,EAAK7oB,KACtBkH,KAAKorC,WAAWzpB,GAChB3hB,KAAK8qC,QACEnpB,EAAKnpB,MAEhB,QAAQ6yC,EAAYC,GAChB,IAAIl6B,EAAUpR,KAAK4qC,MACnB,KAAOx5B,GACCk6B,EACAD,EAAWtyC,KAAKuyC,EAAhBD,CAAyBj6B,EAAQ5Y,MAAO4Y,EAAQtY,IAAKkH,MAGrDqrC,EAAWj6B,EAAQ5Y,MAAO4Y,EAAQtY,IAAKkH,MAE3CoR,EAAUA,EAAQ45B,KAG1B,eAAeK,EAAYC,GACvB,IAAIl6B,EAAUpR,KAAK6qC,MACnB,KAAOz5B,GACCk6B,EACAD,EAAWtyC,KAAKuyC,EAAhBD,CAAyBj6B,EAAQ5Y,MAAO4Y,EAAQtY,IAAKkH,MAGrDqrC,EAAWj6B,EAAQ5Y,MAAO4Y,EAAQtY,IAAKkH,MAE3CoR,EAAUA,EAAQ65B,SAG1B,SACI,IAAIxnC,EAAS,GACT2N,EAAUpR,KAAK4qC,MACnB,KAAOx5B,GACH3N,EAAO0D,KAAKiK,EAAQ5Y,OACpB4Y,EAAUA,EAAQ45B,KAEtB,OAAOvnC,EAEX,OACI,IAAIA,EAAS,GACT2N,EAAUpR,KAAK4qC,MACnB,KAAOx5B,GACH3N,EAAO0D,KAAKiK,EAAQtY,KACpBsY,EAAUA,EAAQ45B,KAEtB,OAAOvnC,EAyCX,aAAake,GAET,GAAK3hB,KAAK4qC,OAAU5qC,KAAK6qC,MAGpB,KAAK7qC,KAAK4qC,MACX,MAAM,IAAIhrC,MAAM,gBAGhB+hB,EAAKqpB,KAAOhrC,KAAK4qC,MACjB5qC,KAAK4qC,MAAMK,SAAWtpB,OAPtB3hB,KAAK6qC,MAAQlpB,EASjB3hB,KAAK4qC,MAAQjpB,EAEjB,YAAYA,GAER,GAAK3hB,KAAK4qC,OAAU5qC,KAAK6qC,MAGpB,KAAK7qC,KAAK6qC,MACX,MAAM,IAAIjrC,MAAM,gBAGhB+hB,EAAKspB,SAAWjrC,KAAK6qC,MACrB7qC,KAAK6qC,MAAMG,KAAOrpB,OAPlB3hB,KAAK4qC,MAAQjpB,EASjB3hB,KAAK6qC,MAAQlpB,EAEjB,WAAWA,GACP,GAAIA,IAAS3hB,KAAK4qC,OAASjpB,IAAS3hB,KAAK6qC,MACrC7qC,KAAK4qC,WAAQjqC,EACbX,KAAK6qC,WAAQlqC,OAEZ,GAAIghB,IAAS3hB,KAAK4qC,MACnB5qC,KAAK4qC,MAAQjpB,EAAKqpB,UAEjB,GAAIrpB,IAAS3hB,KAAK6qC,MACnB7qC,KAAK6qC,MAAQlpB,EAAKspB,aAEjB,CACD,MAAMD,EAAOrpB,EAAKqpB,KACZC,EAAWtpB,EAAKspB,SACtB,IAAKD,IAASC,EACV,MAAM,IAAIrrC,MAAM,gBAEpBorC,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,GAGxB,MAAMrpB,EAAMopB,GACR,IAAK/qC,KAAK4qC,QAAU5qC,KAAK6qC,MACrB,MAAM,IAAIjrC,MAAM,gBAEpB,GAAKmrC,IAAUP,EAAMC,OAASM,IAAUP,EAAME,KAG9C,GAAIK,IAAUP,EAAMC,MAAO,CACvB,GAAI9oB,IAAS3hB,KAAK4qC,MACd,OAEJ,MAAMI,EAAOrpB,EAAKqpB,KACZC,EAAWtpB,EAAKspB,SAElBtpB,IAAS3hB,KAAK6qC,OAGdI,EAASD,UAAOrqC,EAChBX,KAAK6qC,MAAQI,IAIbD,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,GAGpBrpB,EAAKspB,cAAWtqC,EAChBghB,EAAKqpB,KAAOhrC,KAAK4qC,MACjB5qC,KAAK4qC,MAAMK,SAAWtpB,EACtB3hB,KAAK4qC,MAAQjpB,OAEZ,GAAIopB,IAAUP,EAAME,KAAM,CAC3B,GAAI/oB,IAAS3hB,KAAK6qC,MACd,OAEJ,MAAMG,EAAOrpB,EAAKqpB,KACZC,EAAWtpB,EAAKspB,SAElBtpB,IAAS3hB,KAAK4qC,OAGdI,EAAKC,cAAWtqC,EAChBX,KAAK4qC,MAAQI,IAIbA,EAAKC,SAAWA,EAChBA,EAASD,KAAOA,GAEpBrpB,EAAKqpB,UAAOrqC,EACZghB,EAAKspB,SAAWjrC,KAAK6qC,MACrB7qC,KAAK6qC,MAAMG,KAAOrpB,EAClB3hB,KAAK6qC,MAAQlpB,M,8BClRzB,YAKA1pB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM+yC,EAAS,EAAQ,IACjBC,EAAO,EAAQ,IACfC,EAAW,EAAQ,IACnBC,EAAQ,EAAQ,IAChBztC,EAAkB,EAAQ,GAC1BE,EAAkB,EAAQ,GAWhCrH,EAAQmE,uBAVR,WACI,MAAM0wC,EAAeF,EAASG,YAAY,IAAIpsC,SAAS,OACvD,MAAyB,UAArBgO,EAAQq+B,SACD,+BAA+BF,SAI/BJ,EAAO53B,KAAK63B,EAAKM,SAAU,UAAUH,WA0BpD70C,EAAQiE,0BAtBR,SAAmCgxC,EAAUx7B,EAAW,SACpD,IAAIy7B,EACAC,EAAY,IAAIzjC,QAAQ,CAACzC,EAASunB,KAClC0e,EAAiBjmC,IAErB,OAAO,IAAIyC,QAAQ,CAACzC,EAASD,KACzB,IAAIomC,EAASR,EAAMS,aAAc74B,IAC7B44B,EAAOxG,QACPsG,EAAe,CACX,IAAI/tC,EAAgBC,oBAAoBoV,EAAQ/C,GAChD,IAAIpS,EAAgBC,oBAAoBkV,EAAQ/C,OAGxD27B,EAAO/8B,GAAG,QAASrJ,GACnBomC,EAAO1iC,OAAOuiC,EAAU,KACpBG,EAAO38B,eAAe,QAASzJ,GAC/BC,EAAQ,CACJqmC,YAAa,IAAeH,SAa5Cn1C,EAAQkE,0BAPR,SAAmC+wC,EAAUx7B,EAAW,SACpD,MAAM+C,EAASo4B,EAAM/Y,iBAAiBoZ,GACtC,MAAO,CACH,IAAI9tC,EAAgBC,oBAAoBoV,EAAQ/C,GAChD,IAAIpS,EAAgBC,oBAAoBkV,EAAQ/C,O,kCClDxD,YA4BA,SAAS87B,EAAepD,EAAOqD,GAG7B,IADA,IAAIC,EAAK,EACAp1C,EAAI8xC,EAAM/hC,OAAS,EAAG/P,GAAK,EAAGA,IAAK,CAC1C,IAAIkR,EAAO4gC,EAAM9xC,GACJ,MAATkR,EACF4gC,EAAMz9B,OAAOrU,EAAG,GACE,OAATkR,GACT4gC,EAAMz9B,OAAOrU,EAAG,GAChBo1C,KACSA,IACTtD,EAAMz9B,OAAOrU,EAAG,GAChBo1C,KAKJ,GAAID,EACF,KAAOC,IAAMA,EACXtD,EAAMuD,QAAQ,MAIlB,OAAOvD,EA0OT,SAASwD,EAAQC,EAAIC,GACjB,GAAID,EAAGD,OAAQ,OAAOC,EAAGD,OAAOE,GAEhC,IADA,IAAIpP,EAAM,GACDpmC,EAAI,EAAGA,EAAIu1C,EAAGxlC,OAAQ/P,IACvBw1C,EAAED,EAAGv1C,GAAIA,EAAGu1C,IAAKnP,EAAIp2B,KAAKulC,EAAGv1C,IAErC,OAAOomC,EA3OXzmC,EAAQiP,QAAU,WAIhB,IAHA,IAAI6mC,EAAe,GACfC,GAAmB,EAEd11C,EAAIyX,UAAU1H,OAAS,EAAG/P,IAAM,IAAM01C,EAAkB11C,IAAK,CACpE,IAAIo1B,EAAQp1B,GAAK,EAAKyX,UAAUzX,GAAKqW,EAAQsC,MAG7C,GAAoB,iBAATyc,EACT,MAAM,IAAIuN,UAAU,6CACVvN,IAIZqgB,EAAergB,EAAO,IAAMqgB,EAC5BC,EAAsC,MAAnBtgB,EAAKugB,OAAO,IAWjC,OAASD,EAAmB,IAAM,KAJlCD,EAAeP,EAAeI,EAAOG,EAAav7B,MAAM,MAAM,SAAShY,GACrE,QAASA,MACNwzC,GAAkBl5B,KAAK,OAE6B,KAK3D7c,EAAQi2C,UAAY,SAASxgB,GAC3B,IAAIygB,EAAal2C,EAAQk2C,WAAWzgB,GAChC0gB,EAAqC,MAArBz7B,EAAO+a,GAAO,GAclC,OAXAA,EAAO8f,EAAeI,EAAOlgB,EAAKlb,MAAM,MAAM,SAAShY,GACrD,QAASA,MACN2zC,GAAYr5B,KAAK,OAERq5B,IACZzgB,EAAO,KAELA,GAAQ0gB,IACV1gB,GAAQ,MAGFygB,EAAa,IAAM,IAAMzgB,GAInCz1B,EAAQk2C,WAAa,SAASzgB,GAC5B,MAA0B,MAAnBA,EAAKugB,OAAO,IAIrBh2C,EAAQ6c,KAAO,WACb,IAAIu5B,EAAQ1iC,MAAMrR,UAAUmP,MAAM5Q,KAAKkX,UAAW,GAClD,OAAO9X,EAAQi2C,UAAUN,EAAOS,GAAO,SAAS7zC,EAAGmX,GACjD,GAAiB,iBAANnX,EACT,MAAM,IAAIygC,UAAU,0CAEtB,OAAOzgC,KACNsa,KAAK,OAMV7c,EAAQq2C,SAAW,SAAS/8B,EAAMg9B,GAIhC,SAAS37B,EAAKiqB,GAEZ,IADA,IAAIzE,EAAQ,EACLA,EAAQyE,EAAIx0B,QACE,KAAfw0B,EAAIzE,GADiBA,KAK3B,IADA,IAAI/sB,EAAMwxB,EAAIx0B,OAAS,EAChBgD,GAAO,GACK,KAAbwxB,EAAIxxB,GADOA,KAIjB,OAAI+sB,EAAQ/sB,EAAY,GACjBwxB,EAAIpzB,MAAM2uB,EAAO/sB,EAAM+sB,EAAQ,GAfxC7mB,EAAOtZ,EAAQiP,QAAQqK,GAAMoB,OAAO,GACpC47B,EAAKt2C,EAAQiP,QAAQqnC,GAAI57B,OAAO,GAsBhC,IALA,IAAI67B,EAAY57B,EAAKrB,EAAKiB,MAAM,MAC5Bi8B,EAAU77B,EAAK27B,EAAG/7B,MAAM,MAExBnK,EAASgK,KAAKosB,IAAI+P,EAAUnmC,OAAQomC,EAAQpmC,QAC5CqmC,EAAkBrmC,EACb/P,EAAI,EAAGA,EAAI+P,EAAQ/P,IAC1B,GAAIk2C,EAAUl2C,KAAOm2C,EAAQn2C,GAAI,CAC/Bo2C,EAAkBp2C,EAClB,MAIJ,IAAIq2C,EAAc,GAClB,IAASr2C,EAAIo2C,EAAiBp2C,EAAIk2C,EAAUnmC,OAAQ/P,IAClDq2C,EAAYrmC,KAAK,MAKnB,OAFAqmC,EAAcA,EAAYr/B,OAAOm/B,EAAQhlC,MAAMilC,KAE5B55B,KAAK,MAG1B7c,EAAQ22C,IAAM,IACd32C,EAAQ42C,UAAY,IAEpB52C,EAAQ62C,QAAU,SAAUphB,GAE1B,GADoB,iBAATA,IAAmBA,GAAc,IACxB,IAAhBA,EAAKrlB,OAAc,MAAO,IAK9B,IAJA,IAAIrH,EAAO0sB,EAAKqQ,WAAW,GACvBgR,EAAmB,KAAT/tC,EACVqK,GAAO,EACP2jC,GAAe,EACV12C,EAAIo1B,EAAKrlB,OAAS,EAAG/P,GAAK,IAAKA,EAEtC,GAAa,MADb0I,EAAO0sB,EAAKqQ,WAAWzlC,KAEnB,IAAK02C,EAAc,CACjB3jC,EAAM/S,EACN,YAIJ02C,GAAe,EAInB,OAAa,IAAT3jC,EAAmB0jC,EAAU,IAAM,IACnCA,GAAmB,IAAR1jC,EAGN,IAEFqiB,EAAKjkB,MAAM,EAAG4B,IAiCvBpT,EAAQg3C,SAAW,SAAUvhB,EAAM8T,GACjC,IAAIsM,EA/BN,SAAkBpgB,GACI,iBAATA,IAAmBA,GAAc,IAE5C,IAGIp1B,EAHA8/B,EAAQ,EACR/sB,GAAO,EACP2jC,GAAe,EAGnB,IAAK12C,EAAIo1B,EAAKrlB,OAAS,EAAG/P,GAAK,IAAKA,EAClC,GAA2B,KAAvBo1B,EAAKqQ,WAAWzlC,IAGhB,IAAK02C,EAAc,CACjB5W,EAAQ9/B,EAAI,EACZ,YAEgB,IAAT+S,IAGX2jC,GAAe,EACf3jC,EAAM/S,EAAI,GAId,OAAa,IAAT+S,EAAmB,GAChBqiB,EAAKjkB,MAAM2uB,EAAO/sB,GAMjB4jC,CAASvhB,GAIjB,OAHI8T,GAAOsM,EAAEn7B,QAAQ,EAAI6uB,EAAIn5B,UAAYm5B,IACvCsM,EAAIA,EAAEn7B,OAAO,EAAGm7B,EAAEzlC,OAASm5B,EAAIn5B,SAE1BylC,GAGT71C,EAAQi3C,QAAU,SAAUxhB,GACN,iBAATA,IAAmBA,GAAc,IAQ5C,IAPA,IAAIyhB,GAAY,EACZC,EAAY,EACZ/jC,GAAO,EACP2jC,GAAe,EAGfK,EAAc,EACT/2C,EAAIo1B,EAAKrlB,OAAS,EAAG/P,GAAK,IAAKA,EAAG,CACzC,IAAI0I,EAAO0sB,EAAKqQ,WAAWzlC,GAC3B,GAAa,KAAT0I,GASS,IAATqK,IAGF2jC,GAAe,EACf3jC,EAAM/S,EAAI,GAEC,KAAT0I,GAEkB,IAAdmuC,EACFA,EAAW72C,EACY,IAAhB+2C,IACPA,EAAc,IACK,IAAdF,IAGTE,GAAe,QArBb,IAAKL,EAAc,CACjBI,EAAY92C,EAAI,EAChB,OAuBR,OAAkB,IAAd62C,IAA4B,IAAT9jC,GAEH,IAAhBgkC,GAEgB,IAAhBA,GAAqBF,IAAa9jC,EAAM,GAAK8jC,IAAaC,EAAY,EACjE,GAEF1hB,EAAKjkB,MAAM0lC,EAAU9jC,IAa9B,IAAIsH,EAA6B,MAApB,KAAKA,QAAQ,GACpB,SAAUX,EAAKomB,EAAO1rB,GAAO,OAAOsF,EAAIW,OAAOylB,EAAO1rB,IACtD,SAAUsF,EAAKomB,EAAO1rB,GAEpB,OADI0rB,EAAQ,IAAGA,EAAQpmB,EAAI3J,OAAS+vB,GAC7BpmB,EAAIW,OAAOylB,EAAO1rB,M,+BC3SjCzU,EAAQq3C,WAAa,WAAc,MAAO,MAE1Cr3C,EAAQs3C,SAAW,WACf,MAAwB,oBAAbC,SACAA,SAASD,SAER,IAGhBt3C,EAAQw3C,QAAU,WAAc,MAAO,IAEvCx3C,EAAQy3C,OAAS,WAAc,OAAO,GAEtCz3C,EAAQ03C,QAAU,WACd,OAAO9jC,OAAO+jC,WAGlB33C,EAAQ43C,SAAW,WACf,OAAOhkC,OAAO+jC,WAGlB33C,EAAQ63C,KAAO,WAAc,MAAO,IAEpC73C,EAAQiF,KAAO,WAAc,MAAO,WAEpCjF,EAAQ83C,QAAU,WACd,MAAyB,oBAAdC,UACAA,UAAUC,WAEd,IAGXh4C,EAAQi4C,kBACNj4C,EAAQk4C,qBACR,WAAc,MAAO,IAEvBl4C,EAAQm4C,KAAO,WAAc,MAAO,cAEpCn4C,EAAQ+0C,SAAW,WAAc,MAAO,WAExC/0C,EAAQg1C,OAASh1C,EAAQo4C,OAAS,WAC9B,MAAO,QAGXp4C,EAAQq4C,IAAM,KAEdr4C,EAAQs4C,QAAU,WACjB,MAAO,M,6BC1CRn3C,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMkzC,EAAQ,EAAQ,IAChBztC,EAAkB,EAAQ,GAC1BE,EAAkB,EAAQ,GAuBhCrH,EAAQoE,4BAtBR,SAAqCm0C,EAAM9+B,EAAW,SAClD,IAAIy7B,EACAC,EAAY,IAAIzjC,QAAQ,CAACzC,EAASunB,KAClC0e,EAAiBjmC,IAErB,OAAO,IAAIyC,QAAQ,CAACzC,EAASD,KACzB,IAAIomC,EAASR,EAAMS,aAAc74B,IAC7B44B,EAAOxG,QACPsG,EAAe,CACX,IAAI/tC,EAAgBC,oBAAoBoV,EAAQ/C,GAChD,IAAIpS,EAAgBC,oBAAoBkV,EAAQ/C,OAGxD27B,EAAO/8B,GAAG,QAASrJ,GACnBomC,EAAO1iC,OAAO6lC,EAAM,YAAa,KAC7BnD,EAAO38B,eAAe,QAASzJ,GAC/BC,EAAQ,CACJqmC,YAAa,IAAeH,SAa5Cn1C,EAAQqE,4BAPR,SAAqCk0C,EAAM9+B,EAAW,SAClD,MAAM+C,EAASo4B,EAAM/Y,iBAAiB0c,EAAM,aAC5C,MAAO,CACH,IAAIpxC,EAAgBC,oBAAoBoV,EAAQ/C,GAChD,IAAIpS,EAAgBC,oBAAoBkV,EAAQ/C,M,6BC1BxD,SAASpR,EAAO3G,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBiM,OAezD,SAASI,EAAMrM,GACX,OAAOgS,MAAMC,QAAQjS,GAtBzBP,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAItD1B,EAAQqS,QAHR,SAAiB3Q,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7B1B,EAAQqI,OAASA,EAIjBrI,EAAQmP,OAHR,SAAgBzN,GACZ,MAAwB,iBAAVA,GAAsBA,aAAiBkS,QAMzD5T,EAAQgI,MAHR,SAAetG,GACX,OAAOA,aAAiBoH,OAM5B9I,EAAQ4Q,KAHR,SAAclP,GACV,MAAwB,mBAAVA,GAMlB1B,EAAQ+N,MAAQA,EAIhB/N,EAAQ6T,YAHR,SAAqBnS,GACjB,OAAOqM,EAAMrM,IAAUA,EAAMoS,MAAMC,GAAQ1L,EAAO0L,KAMtD/T,EAAQkuC,WAHR,SAAoBxsC,EAAOysC,GACvB,OAAOz6B,MAAMC,QAAQjS,IAAUA,EAAMoS,MAAMq6B,IAS/CnuC,EAAQw4C,cANR,SAAuB92C,GAInB,OAAiB,OAAVA,GAAmC,iBAAVA,I,kCCzCpC,SAASe,EAAS5B,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IAEpEpB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtDe,EAAS,EAAQ,KACjBA,EAAS,EAAQ,IACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,KACjBA,EAAS,EAAQ,M,6BCbjBtB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqH,EAAO,EAAQ,GACrB,MAAM0vC,UAA+B1vC,EAAK2vC,eACtC,YAAYC,GACR1vC,MAAM0vC,IAGd34C,EAAQ44C,QAAUH,G,6BCPlBt3C,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqH,EAAO,EAAQ,GACrB,MAAM8vC,UAAyB9vC,EAAK+vC,SAChC,YAAY1oB,GACRnnB,MAAMmnB,IAGdpwB,EAAQ44C,QAAUC,G,6BCPlB13C,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqH,EAAO,EAAQ,GACrB,MAAMgwC,UAA6BhwC,EAAKiwC,aACpC,YAAY5oB,EAAO3P,GACfxX,MAAMmnB,EAAO3P,IAGrBzgB,EAAQ44C,QAAUG,G,6BCPlB53C,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMu3C,EACF,YAAYjnC,GACR9I,KAAK8I,OAASA,EAGlB,QACI,OAAO9I,KAAK8I,OAEhB,OAAOknC,GACH,OAAOhwC,KAAKiwC,UAAYD,EAAMC,SAGtC,MAAMC,UAAeH,EACjB,cACIhwC,MAAM,CACFmwC,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACP,IACAD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACP,IACA,IACAD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACP,IACAD,EAAOE,OAAOF,EAAOG,eACrBH,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACP,IACAD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,aACPD,EAAOC,cACTx8B,KAAK,KAEX,cAAc9O,GACV,OAAOA,EAAMqM,KAAKoxB,MAAMz9B,EAAMqC,OAASgK,KAAK+2B,WAEhD,oBACI,OAAOiI,EAAOE,OAAOF,EAAOI,SASpC,SAASC,IACL,OAAO,IAAIL,EAPfA,EAAOI,OAAS,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KACjGJ,EAAOG,cAAgB,CAAC,IAAK,IAAK,IAAK,KAIvCv5C,EAAQ05C,MAAQ,IAAIT,EAAU,wCAI9Bj5C,EAAQy5C,GAAKA,EACb,MAAME,EAAe,kEACrB,SAASC,EAAOl4C,GACZ,OAAOi4C,EAAaE,KAAKn4C,GAE7B1B,EAAQ45C,OAASA,EAWjB55C,EAAQoc,MANR,SAAe1a,GACX,IAAKk4C,EAAOl4C,GACR,MAAM,IAAIoH,MAAM,gBAEpB,OAAO,IAAImwC,EAAUv3C,IAMzB1B,EAAQijB,aAHR,WACI,OAAOw2B,IAAKN,U,6BC5FhBh4C,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAYtD1B,EAAQ85C,eAXR,MACI,YAAYC,GACR7wC,KAAK6wC,OAASA,EAElB,gBAAgB7jB,EAASzmB,EAAU+kC,GAC/B,OAAOtrC,KAAK6wC,OAAOC,gBAAgBC,WAAW,CAC1ChvC,GAAIirB,EACJ5oB,QAAS,CAAC4sC,KAAcvlC,IAASlF,KAAYkF,Q,6BCRzDxT,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMkE,EAAa,EAAQ,GA2C3B5F,EAAQm6C,cA1CR,MACI,cACIjxC,KAAKkxC,SAAW,IAAIlwC,IAExB,YAAYjF,EAAM+D,KAAYuyB,GAa1B,OAZIt2B,IAASW,EAAWq1B,YAAYnyB,OAChCgK,QAAQ9K,MAAMgB,GAEd/D,IAASW,EAAWq1B,YAAYC,SAChCpoB,QAAQ7K,KAAKe,GAEb/D,IAASW,EAAWq1B,YAAYT,MAChC1nB,QAAQ5K,KAAKc,GAEb/D,IAASW,EAAWq1B,YAAYof,KAChCvnC,QAAQ3K,IAAIa,GAET0I,QAAQzC,aAAQpF,GAE3B,oBAAoB7I,GAChB,MAAMs5C,EAAWpxC,KAAKkxC,SAAS94C,IAAIN,GACnC,GAAIs5C,EACA,OAAOA,EAEX,MAAM/b,EAAU,CACZ,OAAO78B,GACHoR,QAAQ3K,IAAInH,EAAO,KAAOU,IAE9B,WAAW64C,GACPznC,QAAQ3K,IAAInH,EAAO,KAAOu5C,IAE9B,SAGA,aAKJ,OADArxC,KAAKkxC,SAAS/uC,IAAIrK,EAAMu9B,GACjBA,K,6BC7Cf,IAAIic,EAAatxC,MAAQA,KAAKsxC,WAAc,SAAUhG,EAASiG,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIhpC,WAAU,SAAUzC,EAASD,GAC/C,SAAS4rC,EAAUl5C,GAAS,IAAMm5C,EAAKF,EAAUzG,KAAKxyC,IAAW,MAAOkQ,GAAK5C,EAAO4C,IACpF,SAASkpC,EAASp5C,GAAS,IAAMm5C,EAAKF,EAAiB,MAAEj5C,IAAW,MAAOkQ,GAAK5C,EAAO4C,IACvF,SAASipC,EAAKluC,GAJlB,IAAejL,EAIaiL,EAAOswB,KAAOhuB,EAAQtC,EAAOjL,QAJ1CA,EAIyDiL,EAAOjL,MAJhDA,aAAiBg5C,EAAIh5C,EAAQ,IAAIg5C,GAAE,SAAUzrC,GAAWA,EAAQvN,OAITuM,KAAK2sC,EAAWE,GAClGD,GAAMF,EAAYA,EAAU5lC,MAAMy/B,EAASiG,GAAc,KAAKvG,YAGtE/yC,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMq5C,EAAe,EAAQ,IACvBn1C,EAAa,EAAQ,GACrBo1C,EAAiC,EAAQ,IACzCC,EAAe,EAAQ,IAC7B,IAAIC,EAiBJ,SAASC,EAASC,EAAS15C,GAKvB,OAJeq5C,EAAaK,EAAS,CACjCC,UAAU,EACVC,UAAU,IAEAzB,KAAKn4C,IArBvB,SAAWw5C,GAOPA,EAAsBK,aANtB,SAAsBx5B,GAClB,MAAO,CACHoB,IAAKq4B,OAAOhf,IAAIpgB,MAAM2F,EAASoB,KAC/Bs4B,WAAY15B,EAAS05B,aAU7BP,EAAsBQ,UANtB,SAAmBC,GACf,MAAO,CACHx4B,IAAKw4B,EAAMx4B,IACXs4B,WAAYE,EAAMC,cAX9B,CAeGV,EAAwBl7C,EAAQk7C,wBAA0Bl7C,EAAQk7C,sBAAwB,KAQ7Fl7C,EAAQm7C,SAAWA,EAwdnBn7C,EAAQ67C,gBAvdR,MACI,YAAYC,EAAKC,GACb7yC,KAAK4yC,IAAMA,EACX5yC,KAAK6yC,IAAMA,EAEf,MAAM9lC,EAAU8L,GACZ,OAAO7Y,KAAK8yC,WAAW/lC,EAAUilC,EAAsBK,aAAax5B,IAExE,2BAA2B/gB,GACvB,OAAO,IAAIg6C,EAA+BiB,2BAA2Bj7C,GAAQ,UAAWkI,KAAK4yC,KAEjG,+BAA+B7lC,EAAUuS,KAAa4B,GAClD,MAAMD,EAAqBjhB,KAAKgzC,yBAAyBjmC,EAAUuS,KAAa4B,GAC1E+xB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAU0J,+BAA+BoxB,EAAUjyB,IAG7E,OAAOgyB,EAEX,yBAAyBlmC,EAAUuS,KAAa4B,GAC5C,MAAO,CACHA,oBACAC,uBAAwB,CAACsxB,EAAOrxB,EAAUnW,EAASrG,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACzF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAMW,EAAYX,EAAMY,qBAAqBjyB,GACvCkyB,EAAe,IAAIhB,OAAO9nB,MAAMpJ,EAASmyB,WAAYH,EAAUI,YAAapyB,EAASmyB,WAAYH,EAAUK,WAC3G3vC,EAAS9D,KAAK6yC,IAAIxxB,mBAAmBoxB,EAAOrxB,EAAUnW,GACtDxH,QAAe6b,EAAS6B,uBAAuBrd,EAAQc,GAC7D,OAAOnB,GAAUzD,KAAK4yC,IAAItxB,mBAAmB7d,EAAQ6vC,MAEzD7xB,sBAAuBnC,EAASmC,sBAAwB,CAACgxB,EAAOrxB,EAAUO,EAAM/c,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACtH,MAAM0zC,EAAe1zC,KAAK6yC,IAAIhxB,iBAAiBF,GACzCgyB,QAAqBr0B,EAASmC,sBAAsBiyB,EAAc9uC,GACxE,GAAI+uC,EAAc,CACd,MAAMC,EAAyB5zC,KAAK4yC,IAAI/wB,iBAAiB8xB,EAAchyB,EAAKuF,OAC5EjvB,OAAO4iB,OAAO8G,EAAMiyB,GAExB,OAAOjyB,UACNhhB,GAGb,sBAAsBoM,EAAUuS,GAC5B,MAAM6C,EAAgBniB,KAAK6zC,oBAAoB9mC,EAAUuS,GACnD2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUmK,sBAAsB2wB,EAAU/wB,IAEpE,OAAO8wB,EAEX,oBAAoBlmC,EAAUuS,GAC1B,MAAO,CACH8C,aAAc,CAACqwB,EAAOrxB,EAAUxc,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACtE,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD0yB,QAAcx0B,EAAS8C,aAAate,EAAQc,GAClD,OAAOkvC,GAAS9zC,KAAK4yC,IAAItwB,QAAQwxB,OAI7C,8BAA8B/mC,EAAUuS,KAAa4B,GACjD,MAAM4B,EAAwB9iB,KAAK+zC,4BAA4BhnC,EAAUuS,KAAa4B,GAChF+xB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUgL,8BAA8B8vB,EAAUpwB,IAE5E,OAAOmwB,EAEX,4BAA4BlmC,EAAUuS,KAAa4B,GAE/C,MAAO,CACH8yB,+BAFmC,IAAK10B,EAAS4B,mBAAqBA,GAAqB,IAG3F+yB,iCAAkC30B,EAAS6D,oBAC3CJ,qBAAsB,CAAC0vB,EAAOrxB,EAAUxc,EAAOqG,IAAYqmC,EAAUtxC,UAAM,OAAQ,GAAQ,YACvF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD8yB,QAAsB50B,EAASyD,qBAAqBjf,EAAQc,EAAO5E,KAAK6yC,IAAIsB,uBAAuBlpC,IACzG,OAAOipC,GAAiBl0C,KAAK4yC,IAAIwB,sBAAsBF,OAInE,2BAA2BnnC,EAAUuS,GACjC,MAAMoE,EAAqB1jB,KAAKq0C,yBAAyBtnC,EAAUuS,GAC7D2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUyL,2BAA2BqvB,EAAUxvB,IAEzE,OAAOuvB,EAEX,yBAAyBlmC,EAAUuS,GAC/B,MAAO,CACHqE,kBAAmB,CAAC8uB,EAAOrxB,EAAUxc,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC3E,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD3d,QAAe6b,EAASqE,kBAAkB7f,EAAQc,GACxD,OAAOnB,GAAUzD,KAAK4yC,IAAIhvB,mBAAmBngB,OAIzD,0BAA0BsJ,EAAUuS,GAChC,MAAMg1B,EAAoBt0C,KAAKu0C,wBAAwBxnC,EAAUuS,GAC3D2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUiM,0BAA0B6uB,EAAUoB,IAExE,OAAOrB,EAEX,wBAAwBlmC,EAAUuS,GAC9B,MAAO,CACH2E,kBAAmB,CAACwuB,EAAOrxB,EAAUnW,EAASrG,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACpF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI1uB,kBAAkBsuB,EAAOrxB,EAAUnW,GACrDxH,QAAe6b,EAAS2E,kBAAkBngB,EAAQc,GACxD,OAAOnB,GAAUzD,KAAK4yC,IAAIxuB,aAAa3gB,OAInD,kCAAkCsJ,EAAUuS,GACxC,MAAMkF,EAA4BxkB,KAAKw0C,gCAAgCznC,EAAUuS,GAC3E2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUwM,kCAAkCsuB,EAAU1uB,IAEhF,OAAOyuB,EAEX,gCAAgClmC,EAAUuS,GACtC,MAAO,CACHmF,0BAA2B,CAACguB,EAAOrxB,EAAUxc,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACnF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD3d,QAAe6b,EAASmF,0BAA0B3gB,EAAQc,GAChE,OAAOnB,GAAUzD,KAAK4yC,IAAIjuB,qBAAqBlhB,OAI3D,+BAA+BsJ,EAAUuS,GACrC,MAAM4F,EAAyBllB,KAAKy0C,6BAA6B1nC,EAAUuS,GACrE2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUqN,+BAA+BytB,EAAUhuB,IAE7E,OAAO+tB,EAEX,6BAA6BlmC,EAAUuS,GACnC,MAAO,CACH6F,uBAAwB,CAACstB,EAAO7tC,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACtE,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxtB,uBAAuBotB,GACzChvC,QAAe6b,EAAS6F,uBAAuBrhB,EAAQc,GAC7D,OAAOnB,GAAUzD,KAAK4yC,IAAIrtB,kBAAkB9hB,OAIxD,4BAA4BsJ,EAAUuS,GAClC,MAAM0H,EAAqBhnB,KAAK00C,yBAAyB3nC,EAAUuS,GAC7D2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUu8B,2BAA2BzB,EAAUlsB,IAEzE,OAAOisB,EAEX,yBAAyBlmC,EAAUuS,GAC/B,MAAO,CACH2H,mBAAoB,CAACwrB,EAAOvrB,EAAOjc,EAASrG,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAClF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAE3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI+B,mBAAmBnC,EAAOvrB,EAAOjc,GACnDxH,QAAe6b,EAAS2H,mBAAmBnjB,EAAQc,GAEzD,OAAOnB,GAAUzD,KAAK4yC,IAAIiC,iBAAiBpxC,SAAW9C,MAIlE,yBAAyBoM,EAAUuS,GAC/B,MAAM0I,EAAmBhoB,KAAK80C,uBAAuB/nC,EAAUuS,GACzD2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUoQ,yBAAyB0qB,EAAUlrB,IAEvE,OAAOirB,EAEX,uBAAuBlmC,EAAUuS,GAC7B,MAAO,CACH2I,kBAAmB,CAACwqB,EAAO7tC,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACjE,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI3qB,iBAAiBuqB,GACnChvC,QAAe6b,EAAS2I,kBAAkBnkB,EAAQc,GACxD,OAAOnB,GAAUzD,KAAK4yC,IAAImC,eAAetxC,MAE7C2kB,gBAAiB9I,EAAS8I,gBAAkB,CAACqqB,EAAOpqB,EAAUzjB,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACpG,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAAOpqB,EAEX,MAAM2sB,EAAmBh1C,KAAK6yC,IAAItqB,WAAWF,GACvC5kB,QAAe6b,EAAS8I,gBAAgB4sB,EAAkBpwC,GAChE,GAAInB,EAAQ,CACR,MAAMwxC,EAAmBj1C,KAAK4yC,IAAIrqB,WAAW9kB,GAC7CxL,OAAO4iB,OAAOwN,EAAU4sB,GAE5B,OAAO5sB,KACN,CAAEuc,EAAGvc,IAAaA,GAG/B,uCAAuCtb,EAAUuS,GAC7C,MAAM41B,EAAiCl1C,KAAKm1C,qCAAqCpoC,EAAUuS,GACrF2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAU0Q,uCAAuCoqB,EAAUgC,IAErF,OAAOjC,EAEX,qCAAqClmC,EAAUuS,GAC3C,MAAO,CACHsJ,+BAAgC,CAAC6pB,EAAO7yB,EAAShb,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACvF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIuC,2BAA2B3C,EAAO7yB,GACpDnc,QAAe6b,EAASsJ,+BAA+B9kB,EAAQc,GACrE,OAAOnB,GAAUzD,KAAK4yC,IAAIr2B,YAAY9Y,OAIlD,4CAA4CsJ,EAAUuS,GAClD,MAAM+1B,EAAsCr1C,KAAKs1C,0CAA0CvoC,EAAUuS,GAC/F2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAU+Q,4CAA4C+pB,EAAUmC,IAE1F,OAAOpC,EAEX,0CAA0ClmC,EAAUuS,GAChD,MAAO,CACH4J,oCAAqC,CAACupB,EAAOvrB,EAAOtH,EAAShb,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACnG,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI0C,gCAAgC9C,EAAOvrB,EAAOtH,GAChEnc,QAAe6b,EAAS4J,oCAAoCplB,EAAQc,GAC1E,OAAOnB,GAAUzD,KAAK4yC,IAAIr2B,YAAY9Y,OAIlD,qCAAqCsJ,EAAUuS,EAAUsK,KAA0BF,GAC/E,MAAM8rB,EAA+Bx1C,KAAKy1C,mCAAmC1oC,EAAUuS,EAAUsK,KAA0BF,GACrHupB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUuR,qCAAqCupB,EAAUsC,IAEnF,OAAOvC,EAEX,mCAAmClmC,EAAUuS,EAAUsK,KAA0BF,GAE7E,MAAO,CACHgsB,4BAFgC,CAAC9rB,GAAuBzb,OAAOub,GAG/DH,6BAA8B,CAACkpB,EAAOrxB,EAAUoI,EAAI5J,EAAShb,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACnG,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI8C,iCAAiClD,EAAOrxB,EAAUoI,EAAI5J,GACxEnc,QAAe6b,EAASiK,6BAA6BzlB,EAAQc,GACnE,OAAOnB,GAAUzD,KAAK4yC,IAAIr2B,YAAY9Y,OAIlD,uBAAuBsJ,EAAUuS,GAC7B,MAAM2K,EAAiBjqB,KAAK41C,qBAAqB7oC,EAAUuS,GACrD2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUsS,uBAAuBwoB,EAAUjpB,IAErE,OAAOgpB,EAEX,qBAAqBlmC,EAAUuS,GAC3B,MAAO,CACH6K,mBAAoB,CAACsoB,EAAOrxB,EAAUgJ,EAASxlB,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACrF,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIgD,eAAepD,EAAOrxB,EAAUgJ,GAClD3mB,QAAe6b,EAAS6K,mBAAmBrmB,EAAQc,GACzD,OAAOnB,GAAUzD,KAAK4yC,IAAIvoB,gBAAgB5mB,OAItD,6BAA6BsJ,EAAUuS,GACnC,MAAMw2B,EAAe91C,KAAK+1C,2BAA2BhpC,EAAUuS,GACzD2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAU49B,qBAAqB9C,EAAU4C,IAEnE,OAAO7C,EAEX,2BAA2BlmC,EAAUuS,GACjC,MAAO,CACH22B,aAAc,CAACxD,EAAO7tC,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC5D,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAI5nB,qBAAqBwnB,GACvChvC,QAAe6b,EAAS0L,qBAAqBlnB,EAAQc,GAC3D,OAAOnB,GAAUzD,KAAK4yC,IAAI1nB,gBAAgBznB,MAE9CyyC,YAAa,CAAC9qB,EAAMxmB,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAG1D,GAAIsf,EAAS6L,sBAAqC,OAAbC,EAAK+qB,UAA6Bx1C,IAAbyqB,EAAK+qB,KAAoB,CAC/E,MAAMC,EAAep2C,KAAK6yC,IAAIvnB,eAAeF,GACvC3nB,QAAe6b,EAAS6L,oBAAoBirB,EAAcxxC,GAChE,GAAInB,EAAQ,CACR,MAAM4yC,EAAer2C,KAAK4yC,IAAItnB,eAAe7nB,GAC7CxL,OAAO4iB,OAAOuQ,EAAMirB,IAG5B,OAAOjrB,MAInB,+BAA+Bre,EAAUuS,GACrC,MAAMg3B,EAAyBt2C,KAAKu2C,6BAA6BxpC,EAAUuS,GACrE2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUo+B,+BAA+BtD,EAAUoD,IAE7E,OAAOrD,EAEX,6BAA6BlmC,EAAUuS,GACnC,MAAO,CACHm3B,sBAAuB,CAAChE,EAAOrxB,EAAUxc,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC/E,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD3d,QAAe6b,EAASm3B,sBAAsB3yC,EAAQc,GAC5D,OAAOnB,GAAUzD,KAAK4yC,IAAIhvB,mBAAmBngB,OAIzD,+BAA+BsJ,EAAUuS,GACrC,MAAMo3B,EAAyB12C,KAAK22C,6BAA6B5pC,EAAUuS,GACrE2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUw+B,+BAA+B1D,EAAUwD,IAE7E,OAAOzD,EAEX,6BAA6BlmC,EAAUuS,GACnC,MAAO,CACHu3B,sBAAuB,CAACpE,EAAOrxB,EAAUxc,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC/E,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAM3uC,EAAS9D,KAAK6yC,IAAIxwB,6BAA6BowB,EAAOrxB,GACtD3d,QAAe6b,EAASu3B,sBAAsB/yC,EAAQc,GAC5D,OAAOnB,GAAUzD,KAAK4yC,IAAIhvB,mBAAmBngB,OAIzD,sBAAsBsJ,EAAUuS,GAC5B,MAAMw3B,EAAwB92C,KAAK+2C,4BAA4BhqC,EAAUuS,GACnE2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAU4+B,sBAAsB9D,EAAU4D,IAEpE,OAAO7D,EAEX,4BAA4BlmC,EAAUuS,GAClC,MAAO,CACH23B,sBAAuB,CAACxE,EAAO7tC,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YACrE,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAMt6B,EAAenY,KAAK6yC,IAAIzrB,yBAAyBqrB,GACjDhvC,QAAe6b,EAAS23B,sBAAsB,CAAE9+B,gBAAgBvT,GACtE,OAAOnB,GAAUzD,KAAK4yC,IAAIsE,oBAAoBzzC,MAElD0zC,0BAA2B,CAAC1E,EAAOzzC,EAAM4F,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC/E,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAMt6B,EAAenY,KAAK6yC,IAAIzrB,yBAAyBqrB,GACjDvrB,EAAQlnB,KAAK6yC,IAAIxrB,QAAQroB,EAAKkoB,OAC9BzjB,QAAe6b,EAAS63B,0BAA0B,CACpDh/B,eACAi/B,MAAOp4C,EAAKo4C,MACZlwB,SACDtiB,GACH,OAAOnB,GAAUzD,KAAK4yC,IAAIyE,qBAAqB5zC,OAI3D,6BAA6BsJ,EAAUuS,GACnC,MAAMg4B,EAAuBt3C,KAAKu3C,2BAA2BxqC,EAAUuS,GACjE2zB,EAAY,IAAIlB,EAAalN,qBACnC,IAAK,MAAMqO,KAAYlzC,KAAKmzC,cAAcpmC,GACtCkmC,EAAU9rC,KAAKmrC,OAAOl6B,UAAUo/B,6BAA6BtE,EAAUoE,IAE3E,OAAOrE,EAEX,2BAA2BlmC,EAAUuS,GACjC,MAAO,CACHm4B,qBAAsB,CAAChF,EAAOxnC,EAASrG,IAAU0sC,EAAUtxC,UAAM,OAAQ,GAAQ,YAC7E,IAAKA,KAAK8yC,WAAW/lC,EAAUilC,EAAsBQ,UAAUC,IAC3D,OAEJ,MAAMt6B,EAAenY,KAAK6yC,IAAIzrB,yBAAyBqrB,GACjDhvC,QAAe6b,EAASm4B,qBAAqB,CAC/Ct/B,gBACDvT,GACH,OAAOnB,GAAUzD,KAAK4yC,IAAI8E,gBAAgBj0C,OAItD,WAAWsJ,EAAU0lC,GACjB,OAAIjoC,MAAMC,QAAQsC,GACPA,EAASif,KAAKygB,GAAUzsC,KAAK8yC,WAAWrG,EAAQgG,IAEvD/1C,EAAWsQ,eAAe5E,GAAG2E,KACvBA,EAASmmC,UAAYnmC,EAASmmC,WAAaT,EAAMF,gBAGjDxlC,EAASioB,QAAUjoB,EAASioB,SAAWyd,EAAMx4B,IAAI+a,WAGjDjoB,EAASmlC,UAAYD,EAASllC,EAASmlC,QAASO,EAAMx4B,IAAIsS,QAK7Dxf,IAAa0lC,EAAMF,WAE9B,cAAcxlC,GACV,MAAMqL,EAAY,IAAIu/B,IACtB,GAAIntC,MAAMC,QAAQsC,GACd,IAAK,MAAM0/B,KAAU1/B,EACjBqL,EAAU/L,IAAIrM,KAAK43C,sBAAsBnL,SAI7Cr0B,EAAU/L,IAAIrM,KAAK43C,sBAAsB7qC,IAE7C,OAAOqL,EAEX,sBAAsBrL,GAClB,OAAIrQ,EAAWsQ,eAAe5E,GAAG2E,GACxBA,EAASmmC,SAGPnmC,EAASmmC,SAFL,IAIRnmC,K,6BC/ff9U,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMkE,EAAa,EAAQ,GA2G3B5F,EAAQ+gD,gBA1GR,MACI,YAAYjF,EAAKC,EAAKiF,EAAW,MAC7B93C,KAAK4yC,IAAMA,EACX5yC,KAAK6yC,IAAMA,EACX7yC,KAAK83C,SAAWA,EAChB93C,KAAK+3C,UAAY,IAAI/2C,IACrBhB,KAAKg4C,6BAA+B,IAAIt7C,EAAW3C,QACnDiG,KAAKi4C,8BAAgC,IAAIv7C,EAAW3C,QACpDiG,KAAKk4C,+BAAiC,IAAIx7C,EAAW3C,QACrD,IAAK,MAAM04C,KAASH,OAAOzB,OAAOsH,YAC9Bn4C,KAAKo4C,SAAS3F,GAElBH,OAAOzB,OAAOwH,iBAAiB5F,GAASzyC,KAAKo4C,SAAS3F,IACtDH,OAAOzB,OAAOyH,mBAAmB7F,GAASzyC,KAAKu4C,YAAY9F,IAE/D,cACI,OAAOzyC,KAAK83C,SAEhB,YAAYrF,GACR,MAAMx4B,EAAMw4B,EAAMx4B,IAAIza,WAChBqZ,EAAW7Y,KAAK+3C,UAAU3/C,IAAI6hB,GAChCpB,IACA7Y,KAAK+3C,UAAUrxC,OAAOuT,GACtBja,KAAKi4C,8BAA8Bn1C,KAAK+V,IAGhD,SAAS45B,GACL,MAAMx4B,EAAMw4B,EAAMx4B,IAAIza,WAChBqZ,EAAW7Y,KAAKw4C,SAASv+B,EAAKw4B,GACpCzyC,KAAKg4C,6BAA6Bl1C,KAAK+V,GACvC45B,EAAMgG,mBAAmBxwC,GAASjI,KAAKy4C,mBAAmBx+B,EAAKw4B,EAAOxqC,IAE1E,mBAAmBgS,EAAKw4B,EAAOxqC,GAC3B,MAAMkQ,EAAenY,KAAKw4C,SAASv+B,EAAKw4B,GAClCz3B,EAAiB,GACvB,IAAK,MAAML,KAAU1S,EAAM0tB,QAAS,CAChC,MAAMzO,EAAQlnB,KAAK6yC,IAAIxrB,QAAQ1M,EAAOuM,OAChCwxB,EAAc/9B,EAAO+9B,YACrBC,EAAOh+B,EAAOg+B,KACpB39B,EAAe7T,KAAK,CAAE+f,QAAOwxB,cAAaC,SAE9C34C,KAAKk4C,+BAA+Bp1C,KAAK,CACrCqV,eACA6C,mBAGR,SAASf,EAAKw4B,GACV,MAAM55B,EAAWnc,EAAWk8C,aAAa//C,OAAOohB,EAAKw4B,EAAMC,YAAaD,EAAMoG,eAAgBpG,EAAMqG,YAEpG,OADA94C,KAAK+3C,UAAU51C,IAAI8X,EAAKpB,GACjBA,EAEX,oBACI,OAAOrO,MAAM4F,KAAKpQ,KAAK+3C,UAAUt/B,UAErC,4BACI,OAAOzY,KAAKg4C,6BAA6B/vC,MAE7C,6BACI,OAAOjI,KAAKi4C,8BAA8BhwC,MAE9C,8BACI,OAAOjI,KAAKk4C,+BAA+BjwC,MAE/C,UAAU2vB,GACN,MAAMgB,EAAO54B,KAAK4yC,IAAIvoB,gBAAgBuN,GAEhCmhB,EAASngB,EAAKxc,MAAQwc,EAAKxc,MAAM48B,OAAO,CAACC,EAAKC,KAChD,MAAMC,EAAWD,EAEjB,OADAD,EAAIE,EAAS16B,SAASjf,YAAc8yC,OAAOzB,OAAOuI,SAASD,EAAS16B,UAC7Dw6B,GACR,IAAM,GAET,IAAKhhD,OAAOqR,KAAKyvC,GAAQxwC,IAAI0R,GAAO8+B,EAAO9+B,IAAMrP,MAAM6nC,KAAWA,GAC9D,OAAOjqC,QAAQzC,SAAQ,GAG3B,MAAMszC,EAAkBzgB,EAAKxc,MAAQwc,EAAKxc,MAAM48B,OAAO,CAACC,EAAKC,KACzD,MAAMC,EAAWD,EACXj/B,EAAMk/B,EAAS16B,SAASjf,WACxBya,KAAOg/B,IACTA,EAAIh/B,GAAO,IAEf,MAAMq/B,EAAaH,EAAS/8B,MAAM7T,IAAIqwB,IAC3B,CACH1R,MAAOorB,OAAO9nB,MAAM+uB,KAAK3gB,EAAK1R,OAC9ByxB,KAAM/f,EAAK+f,QAInB,OADAM,EAAIh/B,GAAK9S,QAAQmyC,GACVL,GACR,IAAM,GAaT,OAXAhhD,OAAOqR,KAAK+vC,GAAiB9vC,QAAQ0Q,IACjC8+B,EAAO9+B,GAAKu/B,mBAAmB,GAC/BH,EAAgBp/B,GAAK1R,IAAIkxC,IACd,CACHC,WAAY,CAAEC,MAAO,EAAGC,MAAO,GAC/B1yB,MAAOuyB,EAAavyB,MACpByxB,KAAMc,EAAad,KACnBkB,kBAAkB,KAEtB,IAAM,MAEPrxC,QAAQzC,SAAQ,M,6BCzG/B9N,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMshD,EAAK,EAAQ,GACbj9C,EAAK,EAAQ,IACbH,EAAa,EAAQ,GAC3B,IAAImzC,EAOAF,EAOAJ,GAbJ,SAAWM,GAIPA,EAAqBznC,GAHrB,SAAYuZ,GACR,QAASA,GAAQ,SAAUA,GAFnC,CAKGkuB,EAAuB/4C,EAAQ+4C,uBAAyB/4C,EAAQ+4C,qBAAuB,KAE1F,SAAWF,GAIPA,EAAiBvnC,GAHjB,SAAYuZ,GACR,QAASA,GAAQ,SAAUA,GAFnC,CAKGguB,EAAmB74C,EAAQ64C,mBAAqB74C,EAAQ64C,iBAAmB,KAE9E,SAAWJ,GAIPA,EAAuBnnC,GAHvB,SAAYuZ,GACR,QAASA,GAAQ,SAAUA,GAFnC,CAKG4tB,EAAyBz4C,EAAQy4C,yBAA2Bz4C,EAAQy4C,uBAAyB,KA4WhGz4C,EAAQijD,0BAxWR,MACI,WAAWxG,EAAYyG,GAGnB,MAAO,CACH3I,KAHSkC,aAAkD5yC,EAAY4yC,EAAa,EAG9E0G,UAFQD,aAA0Cr5C,EAAYq5C,EAAS,GAKrF,QAAQ9yB,GACJ,QAAcvmB,IAAVumB,EAAJ,CAGA,GAAc,OAAVA,EACA,OAAO,KAEX,QAjBgBvmB,IAiBGumB,EAjBdgzB,OAkBD,OAAOl6C,KAAKqnB,QAAQH,EAAMgzB,QAK1B,MAAO,CACHjjB,MAHUj3B,KAAKypB,WAAWvC,EAAMizB,gBAAiBjzB,EAAMssB,aAGhDtpC,IAFClK,KAAKypB,WAAWvC,EAAMkzB,cAAelzB,EAAMusB,aAM/D,yBAAyBhB,GACrB,MAAO,CACHx4B,IAAKw4B,EAAMx4B,IAAIza,YAGvB,6BAA6BizC,EAAOrxB,GAChC,MAAO,CACHjJ,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CrxB,SAAUphB,KAAKypB,WAAWrI,EAASmyB,WAAYnyB,EAAS44B,SAGhE,mBAAmBvH,EAAOrxB,EAAUnW,GAChC,OAAOhT,OAAO4iB,OAAO7a,KAAKqiB,6BAA6BowB,EAAOrxB,GAAW,CACrEnW,QAASjL,KAAKq6C,oBAAoBpvC,KAG1C,oBAAoBA,GAChB,MAAO,CACHqvC,YAAat6C,KAAKu6C,wBAAwBtvC,EAAQqvC,aAClDE,iBAAkBvvC,EAAQuvC,kBAGlC,uBAAuBvvC,GACnB,MAAO,CACHqvC,YAAat6C,KAAKy6C,2BAA2BxvC,EAAQqvC,aACrDE,iBAAkBvvC,EAAQuvC,iBAC1BE,YAAazvC,EAAQyvC,YACrBC,oBAAqB36C,KAAKkjB,gBAAgBjY,EAAQ0vC,sBAG1D,gBAAgBzG,GACZ,QAAsBvzC,IAAlBuzC,EAGJ,MAAO,CACH0G,WAAY1G,EAAc0G,WAAWryC,IAAIsyC,GAAiB76C,KAAK86C,uBAAuBD,IACtFE,gBAAiB7G,EAAc6G,gBAC/BC,gBAAiB9G,EAAc8G,iBAGvC,uBAAuBr4B,GACnB,MAAO,CACHs4B,cAAej7C,KAAKk7C,gBAAgBv4B,EAAqBs4B,eACzDxL,MAAO9sB,EAAqB8sB,MAC5B0L,WAAYx4B,EAAqBw4B,WAAW5yC,IAAI6yC,GAAap7C,KAAKq7C,uBAAuBD,KAGjG,uBAAuBx4B,GACnB,MAAO,CACHq4B,cAAej7C,KAAKk7C,gBAAgBt4B,EAAqBq4B,eACzDxL,MAAO7sB,EAAqB6sB,OAGpC,gBAAgB6L,GACZ,QAAsB36C,IAAlB26C,EAGJ,MAA6B,iBAAlBA,EACAA,EAEJ,CACHv9B,KAAMrhB,EAAW4jB,WAAWC,SAC5B/nB,MAAO8iD,EAAc9iD,OAG7B,2BAA2B8hD,GACvB,OAAQA,GACJ,KAAKhI,OAAOl6B,UAAUnL,yBAAyBsuC,cAC3C,OAAO7+C,EAAWuQ,yBAAyBsuC,cAC/C,KAAKjJ,OAAOl6B,UAAUnL,yBAAyBuuC,iBAC3C,OAAO9+C,EAAWuQ,yBAAyBuuC,iBAC/C,QACI,OAAO9+C,EAAWuQ,yBAAyBwuC,QAGvD,wBAAwBnB,GACpB,OAAQA,GACJ,KAAKhI,OAAOl6B,UAAUsjC,sBAAsBF,iBACxC,OAAO9+C,EAAWg/C,sBAAsBF,iBAC5C,KAAKlJ,OAAOl6B,UAAUsjC,sBAAsBC,gCACxC,OAAOj/C,EAAWg/C,sBAAsBC,gCAC5C,QACI,OAAOj/C,EAAWg/C,sBAAsBE,SAGpD,iBAAiBj6B,GACb,MAAMle,EAAS,CAAEgsC,MAAO9tB,EAAK8tB,OACvBiE,EAAenE,EAAuBnnC,GAAGuZ,GAAQA,OAAOhhB,EA6C9D,OA5CIghB,EAAKk6B,SACLp4C,EAAOo4C,OAASl6B,EAAKk6B,QAIrBl6B,EAAKs5B,gBACAvH,GAAiBA,EAAarzB,oBAI/B5c,EAAOw3C,cAAgBj7C,KAAK87C,gBAAgBpI,EAAarzB,oBAAqBsB,EAAKs5B,eAHnFx3C,EAAOw3C,cAAgBt5B,EAAKs5B,eAMhCt5B,EAAKo6B,aACLt4C,EAAOs4C,WAAap6B,EAAKo6B,YAE7B/7C,KAAKg8C,sBAAsBv4C,EAAQke,GAC/B9kB,EAAGoJ,OAAO0b,EAAK5D,QACfta,EAAOsa,KAAO/d,KAAKi8C,qBAAqBt6B,EAAK5D,KAAM21B,GAAgBA,EAAawI,mBAEhFv6B,EAAKw6B,WACL14C,EAAO04C,SAAWx6B,EAAKw6B,UAEvBx6B,EAAKy6B,sBACL34C,EAAO24C,oBAAsBp8C,KAAKuc,YAAYoF,EAAKy6B,sBAEnDz6B,EAAKqL,UACLvpB,EAAOupB,QAAUhtB,KAAKwnB,UAAU7F,EAAKqL,UAErCrL,EAAK06B,mBACL54C,EAAO44C,iBAAmB16B,EAAK06B,iBAAiB/zC,SAEhDqZ,EAAKqL,UACLvpB,EAAOupB,QAAUhtB,KAAKwnB,UAAU7F,EAAKqL,UAGrC0mB,SAC0B/yC,IAAtB+yC,EAAa7vC,OACbJ,EAAOI,KAAO6vC,EAAa7vC,OAEC,IAA5B6vC,EAAa4I,aAAmD,IAA5B5I,EAAa4I,aACjD74C,EAAO64C,WAAa5I,EAAa4I,aAGlC74C,EAEX,qBAAqBjL,EAAO+jD,GACxB,QAAiB57C,IAAb47C,EACA,OAAOA,EAEX,OAAQ/jD,GACJ,KAAK85C,OAAOl6B,UAAUtB,mBAAmBhB,OAAQ,OAAOpZ,EAAWoa,mBAAmBhB,OACtF,KAAKw8B,OAAOl6B,UAAUtB,mBAAmB5C,SAAU,OAAOxX,EAAWoa,mBAAmB5C,SACxF,KAAKo+B,OAAOl6B,UAAUtB,mBAAmBb,YAAa,OAAOvZ,EAAWoa,mBAAmBb,YAC3F,KAAKq8B,OAAOl6B,UAAUtB,mBAAmBd,MAAO,OAAOtZ,EAAWoa,mBAAmBd,MACrF,KAAKs8B,OAAOl6B,UAAUtB,mBAAmBV,SAAU,OAAO1Z,EAAWoa,mBAAmBV,SACxF,KAAKk8B,OAAOl6B,UAAUtB,mBAAmBjB,MAAO,OAAOnZ,EAAWoa,mBAAmBjB,MACrF,KAAKy8B,OAAOl6B,UAAUtB,mBAAmBJ,OAAQ,OAAOha,EAAWoa,mBAAmBJ,OACtF,KAAK47B,OAAOl6B,UAAUtB,mBAAmBX,UAAW,OAAOzZ,EAAWoa,mBAAmBX,UACzF,KAAKm8B,OAAOl6B,UAAUtB,mBAAmBpB,OAAQ,OAAOhZ,EAAWoa,mBAAmBpB,OACtF,KAAK48B,OAAOl6B,UAAUtB,mBAAmBf,SAAU,OAAOrZ,EAAWoa,mBAAmBf,SACxF,KAAKu8B,OAAOl6B,UAAUtB,mBAAmBhd,MAAO,OAAO4C,EAAWoa,mBAAmBhd,MACrF,KAAKw4C,OAAOl6B,UAAUtB,mBAAmBH,SAAU,OAAOja,EAAWoa,mBAAmBH,SACxF,KAAK27B,OAAOl6B,UAAUtB,mBAAmBC,KAAM,OAAOra,EAAWoa,mBAAmBC,KACpF,KAAKu7B,OAAOl6B,UAAUtB,mBAAmBE,MAAO,OAAOta,EAAWoa,mBAAmBE,MACrF,KAAKs7B,OAAOl6B,UAAUtB,mBAAmBT,SAAU,OAAO3Z,EAAWoa,mBAAmBT,SACxF,KAAKi8B,OAAOl6B,UAAUtB,mBAAmBZ,KAAM,OAAOxZ,EAAWoa,mBAAmBZ,KACpF,KAAKo8B,OAAOl6B,UAAUtB,mBAAmBL,WAAY,OAAO/Z,EAAWoa,mBAAmBL,WAC1F,KAAK67B,OAAOl6B,UAAUtB,mBAAmBG,QAAS,OAAOva,EAAWoa,mBAAmBG,QACvF,KAAKq7B,OAAOl6B,UAAUtB,mBAAmBpX,KAAM,OAAOhD,EAAWoa,mBAAmBpX,KACpF,KAAK4yC,OAAOl6B,UAAUtB,mBAAmBK,MAAO,OAAOza,EAAWoa,mBAAmBK,MACrF,KAAKm7B,OAAOl6B,UAAUtB,mBAAmBrB,KAAM,OAAO/Y,EAAWoa,mBAAmBrB,KACpF,KAAK68B,OAAOl6B,UAAUtB,mBAAmBM,UAAW,OAAO1a,EAAWoa,mBAAmBM,UACzF,KAAKk7B,OAAOl6B,UAAUtB,mBAAmB0lC,YAAa,OAAO9/C,EAAWoa,mBAAmBK,MAC3F,KAAKm7B,OAAOl6B,UAAUtB,mBAAmBO,OAAQ,OAAO3a,EAAWoa,mBAAmBO,OACtF,KAAKi7B,OAAOl6B,UAAUtB,mBAAmBF,cAAe,OAAOla,EAAWoa,mBAAmBF,cAC7F,KAAK07B,OAAOl6B,UAAUtB,mBAAmBI,QAAS,OAAOxa,EAAWoa,mBAAmBI,QACvF,QAAS,OAAO1e,EAAQ,GAGhC,gBAAgBikD,EAAQxB,GACpB,OAAQwB,GACJ,KAAK//C,EAAW4jB,WAAWE,UACvB,MAAO,CAAEzC,KAAM0+B,EAAQjkD,MAAOyiD,GAClC,KAAKv+C,EAAW4jB,WAAWC,SACvB,MAAO,CAAExC,KAAM0+B,EAAQjkD,MAAOyiD,EAAcziD,OAChD,QACI,MAAO,iDAAiDikD,GAGpE,sBAAsBllC,EAAQjS,GAC1B,IACIqzC,EACAzxB,EAFAu1B,EAAS//C,EAAWggD,iBAAiBl8B,eAGV7f,IAA3B2E,EAAOq3C,iBAA8H,IAA5Fr3C,EAAOq3C,gBAAkBrK,OAAOl6B,UAAUwkC,6BAA6BC,mBAChHJ,EAAS//C,EAAWggD,iBAAiBxlC,QACrCyhC,EAAOrzC,EAAOw3C,YAElBvlC,EAAOwlC,iBAAmBN,EAC1B9D,EAAOrzC,EAAOw3C,WACVx3C,EAAO4hB,QACPA,EAAQlnB,KAAKqnB,QAAQ/hB,EAAO4hB,QAEhC3P,EAAOwlC,iBAAmBN,EACtBn3C,EAAO03C,UAAYrE,GAAQzxB,EAC3B3P,EAAO4hC,SAAW,CAAE8D,QAAStE,EAAMzxB,MAAOA,GAG1C3P,EAAOulC,WAAanE,EAG5B,WAAW/f,GAEP,MAAO,CACH1R,MAFUlnB,KAAKqnB,QAAQuR,EAAK1R,OAG5B+1B,QAASrkB,EAAK+f,MAAQ,IAG9B,YAAYuE,GACR,GAAKA,EAGL,OAAOA,EAAM30C,IAAIoZ,GAAQ3hB,KAAKm9C,WAAWx7B,IAE7C,kBAAkB8wB,EAAOrxB,EAAUxB,GAC/B,MAAO,CACHzH,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CrxB,SAAUphB,KAAKypB,WAAWrI,EAASmyB,WAAYnyB,EAAS44B,QACxD/uC,QAAS,CAAEmyC,mBAAoBx9B,EAAQw9B,qBAG/C,uBAAuB3K,GACnB,MAAO,CACHt6B,aAAcnY,KAAKonB,yBAAyBqrB,IAGpD,iBAAiBA,GACb,MAAO,CACHt6B,aAAcnY,KAAKonB,yBAAyBqrB,IAGpD,qBAAqBj6C,GACjB,OAAQA,GACJ,KAAK85C,OAAO+K,eAAez9C,MACvB,OAAOlD,EAAW4gD,mBAAmB19C,MACzC,KAAK0yC,OAAO+K,eAAerrB,QACvB,OAAOt1B,EAAW4gD,mBAAmBtrB,QACzC,KAAKsgB,OAAO+K,eAAe/rB,KACvB,OAAO50B,EAAW4gD,mBAAmBC,YACzC,KAAKjL,OAAO+K,eAAeG,KACvB,OAAO9gD,EAAW4gD,mBAAmBE,MAIjD,aAAajvC,GACT,MAAM2Y,EAAQlnB,KAAKqnB,QAAQ,IAAIirB,OAAO9nB,MAAMjc,EAAO4rC,gBAAiB5rC,EAAOilC,YAAajlC,EAAO6rC,cAAe7rC,EAAOklC,YAC/GgK,EAAWz9C,KAAK09C,qBAAqBnvC,EAAOkvC,UAClD,OAAO/gD,EAAWihD,WAAW9kD,OAAOquB,EAAO3Y,EAAOzO,QAAS29C,EAAUlvC,EAAO1O,KAAM0O,EAAOjJ,QAE7F,cAAcs4C,GACV,OAAIA,QACOA,EAEJA,EAAQr1C,IAAIgG,GAAUvO,KAAK69C,aAAatvC,IAEnD,oBAAoBtD,GAChB,GAAIA,QACA,OAAOA,EAEX,MAAMqqB,EAAct1B,KAAK61B,cAAc5qB,EAAQ2yC,SAC/C,OAAOlhD,EAAWohD,kBAAkBjlD,OAAOy8B,EAAaz4B,EAAGsC,OAAO8L,EAAQ8yC,MAAQ,CAAC9yC,EAAQ8yC,WAAQp9C,GAEvG,mBAAmB8xC,EAAOvrB,EAAOjc,GAC7B,MAAO,CACHkN,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CvrB,MAAOlnB,KAAKqnB,QAAQH,GACpBjc,QAASjL,KAAKsnB,oBAAoBrc,IAG1C,UAAU0W,GACN,GAAIA,EAAM,CACN,IAAIlW,EAAOkW,EAAK/S,WAAa,GAC7B,OAAOlS,EAAW6qB,QAAQ1uB,OAAO8oB,EAAK9S,MAAO8S,EAAK5f,MAAO0J,IAIjE,WAAWkW,GACP,IAAIle,EAAS/G,EAAWkzC,SAAS/2C,OAAOmH,KAAKqnB,QAAQ1F,EAAKuF,QAU1D,OATIvF,EAAKqL,UACLvpB,EAAOupB,QAAUhtB,KAAKwnB,UAAU7F,EAAKqL,UAErC2iB,EAAiBvnC,GAAGuZ,IAChBA,EAAK9d,OACLJ,EAAOI,KAAO8d,EAAK9d,MAIpBJ,EAEX,oBAAoBmc,GAChB,MAAO,CAAEo+B,QAASp+B,EAAQo+B,QAASC,aAAcr+B,EAAQq+B,cAE7D,2BAA2BxL,EAAO7yB,GAC9B,MAAO,CACHzH,aAAcnY,KAAKonB,yBAAyBqrB,GAC5C7yB,QAAS5f,KAAK6oB,oBAAoBjJ,IAG1C,gCAAgC6yB,EAAOvrB,EAAOtH,GAC1C,MAAO,CACHzH,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CvrB,MAAOlnB,KAAKqnB,QAAQH,GACpBtH,QAAS5f,KAAK6oB,oBAAoBjJ,IAG1C,iCAAiC6yB,EAAOrxB,EAAUoI,EAAI5J,GAClD,MAAO,CACHzH,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CrxB,SAAUphB,KAAKypB,WAAWrI,EAASmyB,WAAYnyB,EAAS44B,QACxDxwB,KACA5J,QAAS5f,KAAK6oB,oBAAoBjJ,IAG1C,eAAe6yB,EAAOrxB,EAAUgJ,GAC5B,MAAO,CACHjS,aAAcnY,KAAKonB,yBAAyBqrB,GAC5CrxB,SAAUphB,KAAKypB,WAAWrI,EAASmyB,WAAYnyB,EAAS44B,QACxD5vB,WAGR,qBAAqBqoB,GACjB,MAAO,CACHt6B,aAAcnY,KAAKonB,yBAAyBqrB,IAGpD,eAAe9wB,GACX,IAAIle,EAAS/G,EAAWozC,aAAaj3C,OAAOmH,KAAKqnB,QAAQ1F,EAAKuF,QAO9D,OANIvF,EAAKw0B,MACL1yC,EAAO8T,OAA6B,iBAAboK,EAAKw0B,IAAmBx0B,EAAKw0B,IAAMx0B,EAAKw0B,IAAI32C,YAEnEqwC,EAAqBznC,GAAGuZ,IAASA,EAAK9d,OACtCJ,EAAOI,KAAO8d,EAAK9d,MAEhBJ,IAwlBf3M,EAAQonD,0BAplBR,MACI,gBAAgBz/B,EAAUrC,EAAO+hC,GAC7B,MAAO,CACH1/B,SAAUA,EACVrC,MAAOpc,KAAKuc,YAAYH,GACxB+hC,kBAGR,gBAAgBx8B,GACZ,IAAKA,EACD,OAEJ,MAAMvF,EAAQ,GACd,GAAIuF,EAAKkW,gBACLlW,EAAKkW,gBAAgBtuB,QAAQoR,IACzB,GAAIm/B,EAAGsE,WAAWh2C,GAAGuS,GACjByB,EAAMjV,KAAK,CACPk3C,OAAQ/L,OAAOhf,IAAIpgB,MAAMyH,EAAOV,KAChC2F,QAASjF,EAAOiF,eAGnB,GAAIk6B,EAAGwE,WAAWl2C,GAAGuS,GACtByB,EAAMjV,KAAK,CACPo3C,OAAQjM,OAAOhf,IAAIpgB,MAAMyH,EAAO4jC,QAChCF,OAAQ/L,OAAOhf,IAAIpgB,MAAMyH,EAAO0jC,QAChCz+B,QAASjF,EAAOiF,eAGnB,GAAIk6B,EAAG0E,WAAWp2C,GAAGuS,GACtByB,EAAMjV,KAAK,CACPo3C,OAAQjM,OAAOhf,IAAIpgB,MAAMyH,EAAOV,KAChC2F,QAASjF,EAAOiF,eAGnB,GAAIk6B,EAAG/gB,iBAAiB3wB,GAAGuS,GAAS,CACrC,MAAM8D,EAAW6zB,OAAOhf,IAAIpgB,MAAMyH,EAAOxC,aAAa8B,KAChDhL,EAAiD,iBAAhC0L,EAAOxC,aAAalJ,QAAuB0L,EAAOxC,aAAalJ,aAAUtO,EAChGyb,EAAMjV,KAAKnH,KAAKy+C,gBAAgBhgC,EAAU9D,EAAOyB,MAAOnN,SAGxDrF,QAAQ9K,MAAM,4CAA4CW,KAAKsE,UAAU4W,OAAQha,EAAW,WAInG,GAAIghB,EAAKgU,QACV,IAAK,MAAM78B,KAAOb,OAAOqR,KAAKqY,EAAKgU,SAAU,CACzC,MAAMlX,EAAW6zB,OAAOhf,IAAIpgB,MAAMpa,GAClCsjB,EAAMjV,KAAKnH,KAAKy+C,gBAAgBhgC,EAAUkD,EAAKgU,QAAQ78B,KAG/D,MAAO,CACHsjB,SAGR,WAAWwc,GACP,IAAKA,EACD,OAGJ,MAAO,CACH1R,MAFUlnB,KAAKqnB,QAAQuR,EAAK1R,OAG5ByxB,KAAM/f,EAAKqkB,SAGnB,YAAYC,GACR,GAAKA,EAGL,OAAOA,EAAM30C,IAAIoZ,GAAQ3hB,KAAKm9C,WAAWx7B,IAE7C,WAAWA,GACP,IAAKA,EACD,OAGJ,IAAIle,EAAS,CAAEyjB,MADDlnB,KAAKqnB,QAAQ1F,EAAKuF,QAQhC,OANIvF,EAAKqL,UACLvpB,EAAOupB,QAAUhtB,KAAKwnB,UAAU7F,EAAKqL,eAEvB,IAAdrL,EAAK9d,MAAiC,OAAd8d,EAAK9d,OAC7BJ,EAAOI,KAAO8d,EAAK9d,MAEhBJ,EAEX,eAAey5C,GACX,GAAKA,EAGL,MAAO,CACHwB,OAAQxB,EAAM30C,IAAK8f,GAAaroB,KAAKuoB,WAAWF,IAChDvgB,QAAS,QAGjB,iBAAiBuqB,GACb,MAAO,CACHA,QAASA,EAAQ9pB,IAAIwuB,GAAU/2B,KAAKynB,aAAasP,IACjDjvB,QAAS,QAGjB,aAAa6Z,GACT,OAAIjlB,EAAWiiD,WAAWv2C,GAAGuZ,GAClB,CACH9S,MAAO8S,EAAK9S,MACZme,QAAShtB,KAAKwnB,UAAU7F,EAAKqL,SAC7B4L,KAAM54B,KAAKqqB,gBAAgB1I,EAAKiX,MAChCtD,YAAat1B,KAAK61B,cAAclU,EAAK2T,aACrCvX,KAAM4D,EAAK5D,MAGZ,CACHiP,QAAS,CACLjrB,GAAI4f,EAAKqL,QACTne,MAAO8S,EAAK9S,MACZD,UAAW+S,EAAK/S,WAEpBC,MAAO8S,EAAK9S,OAGpB,UAAUme,GACN,GAAKA,EAGL,MAAO,CACHjrB,GAAIirB,EAAQA,QACZne,MAAOme,EAAQne,MACfD,UAAWoe,EAAQpe,WAG3B,iBAAiBpW,GACb,MAAMomD,EAAWpmD,EAAMomD,UAAYpmD,EAAMomD,SAASr2C,IAAI3Q,GAAKoI,KAAK6+C,iBAAiBjnD,IACjF,MAAO,CACHE,KAAMU,EAAMV,KACZ+jD,OAAQrjD,EAAMqjD,QAAU,GACxB99B,KAAM/d,KAAK8+C,aAAatmD,EAAMulB,MAC9BghC,KAAM,GACN73B,MAAOlnB,KAAKqnB,QAAQ7uB,EAAM0uB,OAC1B83B,eAAgBh/C,KAAKqnB,QAAQ7uB,EAAMwmD,gBACnCJ,YAGR,kBAAkBnmC,GACd,OAAI/b,EAAW4oB,eAAeld,GAAGqQ,EAAO,IAC7BA,EAAOlQ,IAAIjP,GAAK0G,KAAK6+C,iBAAiBvlD,IAE1C0G,KAAKwlB,qBAAqB/M,GAErC,qBAAqBA,EAAQwB,GACzB,GAAKxB,EAGL,OAAOA,EAAOlQ,IAAI02C,GAAej/C,KAAKk/C,oBAAoBD,EAAahlC,IAE3E,oBAAoB0H,EAAM1H,GACtB,MAAMo0B,EAAWruC,KAAKm/C,WAAWllC,EAAMhiB,OAAO4iB,OAAO5iB,OAAO4iB,OAAO,GAAI8G,EAAK0sB,UAAW,CAAEp0B,IAAKA,EAAIza,aAAgBmiB,EAAK0sB,UACvH,MAAO,CACHv2C,KAAM6pB,EAAK7pB,KACX+jD,OAAQ,GACRuD,cAAez9B,EAAKy9B,cACpBrhC,KAAM/d,KAAK8+C,aAAan9B,EAAK5D,MAC7BghC,KAAM,GACN73B,MAAOmnB,EAASnnB,MAChB83B,eAAgB3Q,EAASnnB,OAGjC,aAAavF,GACT,OAAIA,GAAQjlB,EAAW8Y,WAAWoB,cAEvB+K,EAAO,EAEX2wB,OAAOl6B,UAAU5C,WAAWO,SAEvC,qBAAqB0C,GACjB,GAAKA,EAGL,OAAOA,EAAOlQ,IAAIoZ,GAAQ3hB,KAAKq/C,oBAAoB19B,IAEvD,oBAAoBA,GAGhB,MAAO,CAAEuF,MAFKlnB,KAAKqnB,QAAQ1F,EAAKuF,OAEhBnJ,KADHlhB,EAAGoJ,OAAO0b,EAAK5D,MAAQ/d,KAAKs/C,wBAAwB39B,EAAK5D,WAAQpd,GAGlF,wBAAwBghB,GACpB,OAAQA,GACJ,KAAKjlB,EAAW6iD,sBAAsB7/C,KAClC,OAAO4yC,OAAOl6B,UAAUmnC,sBAAsB7/C,KAClD,KAAKhD,EAAW6iD,sBAAsBC,KAClC,OAAOlN,OAAOl6B,UAAUmnC,sBAAsBC,KAClD,KAAK9iD,EAAW6iD,sBAAsBE,MAClC,OAAOnN,OAAOl6B,UAAUmnC,sBAAsBE,MAEtD,OAAOnN,OAAOl6B,UAAUmnC,sBAAsB7/C,KAElD,aAAa+Y,GACT,GAAKA,EAGL,OAAOA,EAAOlQ,IAAI8lC,GAAYruC,KAAKm/C,WAAW9Q,IAElD,mBAAmB1sB,GACf,GAAKA,EAAL,CAGA,GAAI9kB,EAAGgI,MAAM8c,GAAO,CAChB,GAAmB,GAAfA,EAAKza,OACL,OAEC,GAAIxK,EAAWgjD,aAAat3C,GAAGuZ,EAAK,IAAK,CAE1C,OADYA,EACCpZ,IAAK8lC,GAAaruC,KAAK2/C,eAAetR,IAInD,OADgB1sB,EACCpZ,IAAK8lC,GAAaruC,KAAKm/C,WAAW9Q,IAIvD,OAAOruC,KAAKm/C,WAAWx9B,IAG/B,WAAWA,GACP,IAAKA,EACD,OAIJ,MAAO,CACH1H,IAHQq4B,OAAOhf,IAAIpgB,MAAMyO,EAAK1H,KAGzBiN,MAFKlnB,KAAKqnB,QAAQ1F,EAAKuF,QAKpC,eAAevF,GACX,IAAKA,EACD,OAEJ,IAAIle,EAAS,CACTwW,IAAKq4B,OAAOhf,IAAIpgB,MAAMyO,EAAKi+B,WAC3B14B,MAAOlnB,KAAKqnB,QAAQ1F,EAAKk+B,sBACzBC,qBAAsB9/C,KAAKqnB,QAAQ1F,EAAKm+B,sBACxCD,qBAAsB7/C,KAAKqnB,QAAQ1F,EAAKk+B,uBAE5C,IAAKp8C,EAAOo8C,qBACR,MAAM,IAAIjgD,MAAM,sDAEpB,OAAO6D,EAEX,sBAAsBke,GAClB,IAAKA,EACD,OAEJ,IAAIle,EAAS,GAqBb,OApBI5G,EAAGoJ,OAAO0b,EAAKq5B,iBACfv3C,EAAOu3C,gBAAkBr5B,EAAKq5B,gBAI9Bv3C,EAAOu3C,gBAAkB,EAEzBn+C,EAAGoJ,OAAO0b,EAAKo5B,iBACft3C,EAAOs3C,gBAAkBp5B,EAAKo5B,gBAI9Bt3C,EAAOs3C,gBAAkB,EAEzBp5B,EAAKi5B,WACLn3C,EAAOm3C,WAAa56C,KAAK+/C,wBAAwBp+B,EAAKi5B,YAGtDn3C,EAAOm3C,WAAa,GAEjB,CACHpiD,MAAOiL,EACPqE,QAAS,QAGjB,wBAAwBo1C,GACpB,OAAOA,EAAM30C,IAAIoZ,GAAQ3hB,KAAK86C,uBAAuBn5B,IAEzD,uBAAuBA,GACnB,IAAIle,EAAS,CAAEgsC,MAAO9tB,EAAK8tB,OAU3B,OATI9tB,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBj7C,KAAK87C,gBAAgBn6B,EAAKs5B,gBAEjDt5B,EAAKw5B,WACL13C,EAAO03C,WAAan7C,KAAKggD,wBAAwBr+B,EAAKw5B,YAGtD13C,EAAO03C,WAAa,GAEjB13C,EAEX,wBAAwBke,GACpB,OAAOA,EAAKpZ,IAAIoZ,GAAQ3hB,KAAKq7C,uBAAuB15B,IAExD,uBAAuBA,GACnB,IAAIle,EAAS,CAAEgsC,MAAO9tB,EAAK8tB,OAK3B,OAJI9tB,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBj7C,KAAK87C,gBAAgBn6B,EAAKs5B,gBAG9Cx3C,EAEX,QAAQqwC,GACJ,GAAKA,EAGL,MAAO,CACHmM,SAAUjgD,KAAKkgD,eAAepM,EAAMmM,UACpC/4B,MAAOlnB,KAAKqnB,QAAQysB,EAAM5sB,QAGlC,eAAe+4B,GACX,OAAIz1C,MAAMC,QAAQw1C,GACPA,EAAS13C,IAAI43C,GAAWngD,KAAKogD,iBAAiBD,IAElD,CAACngD,KAAKogD,iBAAiBH,IAElC,gBAAgBznD,GACZ,OAAIqE,EAAGsC,OAAO3G,GACHA,EAEPA,EAAMulB,OAASrhB,EAAW4jB,WAAWE,UAC9BhoB,EAAMA,MAEVwH,KAAKogD,iBAAiB5nD,GAEjC,iBAAiB2nD,GACb,GAAIzjD,EAAW2jD,cAAcj4C,GAAG+3C,GAC5B,MAAO,CACH3nD,MAAO2nD,EAAQ3nD,OAGvB,GAAIqE,EAAGsC,OAAOghD,GACV,MAAO,CAAE3nD,MAAO2nD,GAEpB,MAAM,SAAEjN,EAAQ,MAAE16C,GAAU2nD,EAC5B,MAAO,CACH3nD,MAAO,MAAQ06C,EAAW,KAAO16C,EAAQ,SAGjD,WAAWilD,GACP,OAAiB,IAAbA,EACOnL,OAAO+K,eAAez9C,MAEhB,IAAb69C,EACOnL,OAAO+K,eAAerrB,QAEhB,IAAbyrB,EACOnL,OAAO+K,eAAe/rB,KAE1BghB,OAAO+K,eAAeG,KAEjC,cAAcloB,GACV,GAAKA,EAGL,OAAOA,EAAY/sB,IAAI+3C,GAActgD,KAAK69C,aAAayC,IAE3D,aAAaA,GACT,MAAO,CACHzgD,KAAiC,iBAApBygD,EAAWzgD,KAAoBygD,EAAWzgD,KAAKL,WAAa8gD,EAAWzgD,KACpF49C,SAAUz9C,KAAKugD,WAAWD,EAAW7C,UACrC39C,QAASwgD,EAAWxgD,QACpBwF,OAAQg7C,EAAWh7C,OACnB60C,gBAAiBmG,EAAWp5B,MAAM+P,MAAMoa,KAAO,EAC/CmC,YAAa8M,EAAWp5B,MAAM+P,MAAMgjB,UAAY,EAChDG,cAAekG,EAAWp5B,MAAMhd,IAAImnC,KAAO,EAC3CoC,UAAW6M,EAAWp5B,MAAMhd,IAAI+vC,UAAY,EAC5C7hB,mBAAoBp4B,KAAKwgD,sBAAsBF,EAAWloB,qBAGlE,sBAAsBA,GAClB,GAAKA,EAGL,OAAOA,EAAmB7vB,IAAIoZ,GAAQ3hB,KAAKygD,qBAAqB9+B,IAEpE,qBAAqByW,GACjB,MAAO,CACH3Z,SAAU6zB,OAAOhf,IAAIpgB,MAAMklB,EAAmBiW,SAASp0B,KACvDkgC,gBAAiB/hB,EAAmBiW,SAASnnB,MAAM+P,MAAMoa,KAAO,EAChEmC,YAAapb,EAAmBiW,SAASnnB,MAAM+P,MAAMgjB,UAAY,EACjEG,cAAehiB,EAAmBiW,SAASnnB,MAAMhd,IAAImnC,KAAO,EAC5DoC,UAAWrb,EAAmBiW,SAASnnB,MAAMhd,IAAI+vC,UAAY,EAC7Dn6C,QAASs4B,EAAmBt4B,SAGpC,mBAAmB2D,EAAQ6vC,GACvB,IAAK7vC,EACD,MAAO,CACHi9C,YAAY,EACZC,YAAa,IAGrB,GAAIn2C,MAAMC,QAAQhH,GAAS,CAEvB,MAAO,CACHi9C,YAAY,EACZC,YAHgBl9C,EAAO8E,IAAIoZ,GAAQ3hB,KAAK6hB,iBAAiBF,EAAM2xB,KAMvE,MAAO,CACHoN,WAAYj9C,EAAOm9C,aACnBD,YAAal9C,EAAOy5C,MAAM30C,IAAIoZ,GAAQ3hB,KAAK6hB,iBAAiBF,EAAM2xB,KAG1E,iBAAiB3xB,EAAM2xB,GACnB,MAAM7vC,EAAS,CAAEgsC,MAAO9tB,EAAK8tB,OACzB9tB,EAAKk6B,SACLp4C,EAAOo4C,OAASl6B,EAAKk6B,QAErBl6B,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBj7C,KAAK87C,gBAAgBn6B,EAAKs5B,eACjDx3C,EAAO4c,oBAAsBxjB,EAAGsC,OAAOwiB,EAAKs5B,oBAAiBt6C,EAAYghB,EAAKs5B,cAAcl9B,MAG5F4D,EAAKo6B,aACLt4C,EAAOs4C,WAAap6B,EAAKo6B,YAE7B,MAAMe,EAAa98C,KAAK6gD,uBAAuBl/B,EAAM2xB,GAOrD,GANA7vC,EAAOq5C,WAAaA,EAAWA,WAC/Br5C,EAAOyjB,MAAQ41B,EAAW51B,MAC1BzjB,EAAOu5C,SAAWF,EAAWE,SACzBF,EAAWgE,YACXr9C,EAAOk5C,gBAAkBrK,OAAOl6B,UAAUwkC,6BAA6BC,iBAEvEhgD,EAAGoJ,OAAO0b,EAAK5D,MAAO,CACtB,IAAKgjC,EAAUxE,GAAYv8C,KAAKi8C,qBAAqBt6B,EAAK5D,MAC1Dta,EAAOsa,KAAOgjC,EACVxE,IACA94C,EAAOy4C,iBAAmBK,GA2BlC,OAxBI56B,EAAKw6B,WACL14C,EAAO04C,SAAWx6B,EAAKw6B,UAEvBx6B,EAAKy6B,sBACL34C,EAAO24C,oBAAsBp8C,KAAKuc,YAAYoF,EAAKy6B,sBAEnDv/C,EAAG8N,YAAYgX,EAAK06B,oBACpB54C,EAAO44C,iBAAmB16B,EAAK06B,iBAAiB/zC,SAEhDqZ,EAAKqL,UACLvpB,EAAOupB,QAAUhtB,KAAKwnB,UAAU7F,EAAKqL,WAEjB,IAApBrL,EAAK26B,aAA2C,IAApB36B,EAAK26B,aACjC74C,EAAO64C,WAAa36B,EAAK26B,aAEN,IAAnB36B,EAAKq/B,YAAyC,IAAnBr/B,EAAKq/B,YAChCv9C,EAAOu9C,UAAYr/B,EAAKq/B,gBAEVrgD,IAAdghB,EAAK9d,OACLJ,EAAOI,KAAO8d,EAAK9d,OAEC,IAApB8d,EAAK26B,aAA2C,IAApB36B,EAAK26B,aACjC74C,EAAO64C,WAAa36B,EAAK26B,YAEtB74C,EAEX,qBAAqBjL,GACjB,GAAIkE,EAAWoa,mBAAmBpX,MAAQlH,GAASA,GAASkE,EAAWoa,mBAAmBF,cACtF,OAAQpe,GACJ,KAAKkE,EAAWoa,mBAAmBpX,KAAM,MAAO,CAAC4yC,OAAOl6B,UAAUtB,mBAAmBpX,UAAMiB,GAC3F,KAAKjE,EAAWoa,mBAAmBhB,OAAQ,MAAO,CAACw8B,OAAOl6B,UAAUtB,mBAAmBhB,YAAQnV,GAC/F,KAAKjE,EAAWoa,mBAAmB5C,SAAU,MAAO,CAACo+B,OAAOl6B,UAAUtB,mBAAmB5C,cAAUvT,GACnG,KAAKjE,EAAWoa,mBAAmBb,YAAa,MAAO,CAACq8B,OAAOl6B,UAAUtB,mBAAmBb,iBAAatV,GACzG,KAAKjE,EAAWoa,mBAAmBd,MAAO,MAAO,CAACs8B,OAAOl6B,UAAUtB,mBAAmBd,WAAOrV,GAC7F,KAAKjE,EAAWoa,mBAAmBV,SAAU,MAAO,CAACk8B,OAAOl6B,UAAUtB,mBAAmBV,cAAUzV,GACnG,KAAKjE,EAAWoa,mBAAmBjB,MAAO,MAAO,CAACy8B,OAAOl6B,UAAUtB,mBAAmBjB,WAAOlV,GAC7F,KAAKjE,EAAWoa,mBAAmBX,UAAW,MAAO,CAACm8B,OAAOl6B,UAAUtB,mBAAmBX,eAAWxV,GACrG,KAAKjE,EAAWoa,mBAAmBpB,OAAQ,MAAO,CAAC48B,OAAOl6B,UAAUtB,mBAAmBpB,YAAQ/U,GAC/F,KAAKjE,EAAWoa,mBAAmBf,SAAU,MAAO,CAACu8B,OAAOl6B,UAAUtB,mBAAmBf,cAAUpV,GACnG,KAAKjE,EAAWoa,mBAAmBC,KAAM,MAAO,CAACu7B,OAAOl6B,UAAUtB,mBAAmBC,UAAMpW,GAC3F,KAAKjE,EAAWoa,mBAAmBE,MAAO,MAAO,CAACs7B,OAAOl6B,UAAUtB,mBAAmBE,WAAOrW,GAC7F,KAAKjE,EAAWoa,mBAAmBZ,KAAM,MAAO,CAACo8B,OAAOl6B,UAAUtB,mBAAmBZ,UAAMvV,GAC3F,KAAKjE,EAAWoa,mBAAmBG,QAAS,MAAO,CAACq7B,OAAOl6B,UAAUtB,mBAAmBG,aAAStW,GACjG,KAAKjE,EAAWoa,mBAAmBI,QAAS,MAAO,CAACo7B,OAAOl6B,UAAUtB,mBAAmBI,aAASvW,GACjG,KAAKjE,EAAWoa,mBAAmBK,MAAO,MAAO,CAACm7B,OAAOl6B,UAAUtB,mBAAmBK,WAAOxW,GAC7F,KAAKjE,EAAWoa,mBAAmBrB,KAAM,MAAO,CAAC68B,OAAOl6B,UAAUtB,mBAAmBrB,UAAM9U,GAC3F,KAAKjE,EAAWoa,mBAAmBM,UAAW,MAAO,CAACk7B,OAAOl6B,UAAUtB,mBAAmBM,eAAWzW,GACrG,KAAKjE,EAAWoa,mBAAmBO,OAAQ,MAAO,CAACi7B,OAAOl6B,UAAUtB,mBAAmBO,YAAQ1W,GAC/F,KAAKjE,EAAWoa,mBAAmBL,WAAY,MAAO,CAAC67B,OAAOl6B,UAAUtB,mBAAmBL,gBAAY9V,GACvG,KAAKjE,EAAWoa,mBAAmBT,SAAU,MAAO,CAACi8B,OAAOl6B,UAAUtB,mBAAmBT,cAAU1V,GACnG,KAAKjE,EAAWoa,mBAAmBJ,OAAQ,MAAO,CAAC47B,OAAOl6B,UAAUtB,mBAAmBJ,YAAQ/V,GAC/F,KAAKjE,EAAWoa,mBAAmBhd,MAAO,MAAO,CAACw4C,OAAOl6B,UAAUtB,mBAAmBhd,WAAO6G,GAC7F,KAAKjE,EAAWoa,mBAAmBH,SAAU,MAAO,CAAC27B,OAAOl6B,UAAUtB,mBAAmBH,cAAUhW,GACnG,KAAKjE,EAAWoa,mBAAmBF,cAAe,MAAO,CAAC07B,OAAOl6B,UAAUtB,mBAAmBF,mBAAejW,GAC7G,QAAS,MAAO,CAACnI,EAAQ,OAAGmI,GAIpC,MAAO,CAACjE,EAAWoa,mBAAmBpX,KAAMlH,GAEhD,uBAAuBmpB,EAAM2xB,GACzB,MAAMwN,EAAYn/B,EAAKo7B,mBAAqBrgD,EAAWggD,iBAAiBxlC,QACxE,GAAIyK,EAAKw3B,SAAU,CACf,MAAMjyB,EAAQlnB,KAAKqnB,QAAQ1F,EAAKw3B,SAASjyB,OAEzC,MAAO,CAAE45B,YAAWhE,WADNn7B,EAAKw3B,SAAS8D,QACW/1B,QAAO81B,UAAU,GAE5D,OAAIr7B,EAAKm7B,WACE,CAAEgE,YAAWhE,WAAYn7B,EAAKm7B,WAAYE,UAAU,EAAO91B,MAAOosB,GAEtE,CAAEwJ,WAAYn7B,EAAK8tB,MAAOvoB,MAAOosB,EAAc0J,UAAU,EAAO8D,WAAW,GAEtF,gBAAgBG,GAEZ,MAAO,CAAEC,MADKD,EAAc14C,IAAI6iB,GAAQprB,KAAKsrB,eAAeF,KAGhE,eAAegrB,GACX,MAAO,CACHlvB,MAAOlnB,KAAKqnB,QAAQ+uB,EAAalvB,OACjCivB,IAAKC,EAAa7+B,OAClB1T,KAAMuyC,EAAavyC,MAG3B,QAAQqjB,GACJ,QAAcvmB,IAAVumB,EACA,OAEJ,GAAc,OAAVA,EACA,OAAO,KAEX,MAAM+P,EAAQj3B,KAAKypB,WAAWvC,EAAM+P,OAC9B/sB,EAAMlK,KAAKypB,WAAWvC,EAAMhd,KAClC,GAAI+sB,aAAiBqb,OAAO6O,UAAYj3C,aAAeooC,OAAO6O,SAC1D,OAAO,IAAI7O,OAAO9nB,MAAMyM,EAAMsc,WAAYtc,EAAM+iB,OAAQ9vC,EAAIqpC,WAAYrpC,EAAI8vC,QAMhF,MAAO,CAAEG,gBAJgBljB,QAA8Bt2B,IAArBs2B,EAAMsc,WAAuCtc,EAAMsc,gBAAlB5yC,EAIzC6yC,YAHLvc,QAA0Bt2B,IAAjBs2B,EAAM+iB,OAAmC/iB,EAAM+iB,YAAlBr5C,EAGpBy5C,cAFhBlwC,QAA0BvJ,IAAnBuJ,EAAIqpC,WAAuCrpC,EAAIqpC,gBAAhB5yC,EAEP8yC,UADnCvpC,QAAsBvJ,IAAfuJ,EAAI8vC,OAAmC9vC,EAAI8vC,YAAhBr5C,GAGzD,WAAWygB,GACP,QAAiBzgB,IAAbygB,EACA,OAEJ,GAAiB,OAAbA,EACA,OAAO,KAEX,MAAM,KAAEiwB,EAAI,UAAE4I,GAAc74B,EACtBmyB,OAAsB5yC,IAAT0wC,OAAqB1wC,EAAY0wC,EAAO,EACrD2I,OAAuBr5C,IAAds5C,OAA0Bt5C,EAAYs5C,EAAY,EACjE,YAAmBt5C,IAAf4yC,QAAuC5yC,IAAXq5C,EACrB,IAAI1H,OAAO6O,SAAS5N,EAAYyG,GAEpC,CAAEzG,aAAYyG,UAEzB,oBAAoBkD,GAChB,OAAOA,EAAM30C,IAAIoZ,GAAQ3hB,KAAKohD,mBAAmBz/B,IAErD,mBAAmBA,GACf,MAAO,CACHuF,MAAOlnB,KAAKqnB,QAAQ1F,EAAKuF,OACzBkwB,MAAOz1B,EAAKy1B,OAGpB,qBAAqB8F,GACjB,OAAOA,EAAM30C,IAAIoZ,GAAQ3hB,KAAKqhD,oBAAoB1/B,IAEtD,oBAAoBA,GAChB,MAAO,CACH8tB,MAAO9tB,EAAK8tB,MACZ0J,SAAUn5C,KAAKm9C,WAAWx7B,EAAKw3B,UAC/BiD,oBAAqBp8C,KAAKuc,YAAYoF,EAAKy6B,sBAGnD,gBAAgBc,GACZ,OAAKA,EAGEA,EAAM30C,IAAIoZ,GAAQ3hB,KAAKshD,eAAe3/B,IAFlCu7B,EAIf,eAAev7B,GACX,MAAO,CACHsV,MAAOtV,EAAK4/B,UAAY,EACxBr3C,IAAKyX,EAAK6/B,QAAU,EACpBzjC,KAAM/d,KAAKyhD,mBAAmB9/B,EAAK5D,OAG3C,mBAAmBA,GACf,GAAIA,EACA,OAAQA,GACJ,KAAKrhB,EAAWglD,iBAAiBC,QAC7B,OAAOrP,OAAOl6B,UAAUspC,iBAAiBC,QAC7C,KAAKjlD,EAAWglD,iBAAiBE,QAC7B,OAAOtP,OAAOl6B,UAAUspC,iBAAiBE,QAC7C,KAAKllD,EAAWglD,iBAAiBG,OAC7B,OAAOvP,OAAOl6B,UAAUspC,iBAAiBG,W,iCCv9B7D,qG,6BCSO,IAAIV,EAwBA32B,EA2BAs3B,EAwBApC,EA4BAvoC,EA8BA4qC,EAyBAC,EA2BAN,EAmBAO,EAsCAC,EAwBA5E,EAwBAhlB,EAoBAqlB,EAyCAp2B,EA8BA46B,EAwCAppB,EAiBAqlB,EAqBAE,EAsBAE,EAqBA4D,EA/fX,iyEAUA,SAAWjB,GASPA,EAAStoD,OAHT,SAAgBw4C,EAAM4I,GAClB,MAAO,CAAE5I,KAAMA,EAAM4I,UAAWA,IAUpCkH,EAAS/4C,GAJT,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGyyC,cAAcxlC,IAAcjN,GAAGoJ,OAAO6D,EAAUunC,OAASx0C,GAAGoJ,OAAO6D,EAAUmwC,YAf/F,CAkBGkH,IAAaA,EAAW,KAM3B,SAAW32B,GAYPA,EAAM3xB,OAXN,SAAgBwpD,EAAKC,EAAKC,EAAOC,GAC7B,GAAI3lD,GAAGoJ,OAAOo8C,IAAQxlD,GAAGoJ,OAAOq8C,IAAQzlD,GAAGoJ,OAAOs8C,IAAU1lD,GAAGoJ,OAAOu8C,GAClE,MAAO,CAAEvrB,MAAOkqB,EAAStoD,OAAOwpD,EAAKC,GAAMp4C,IAAKi3C,EAAStoD,OAAO0pD,EAAOC,IAEtE,GAAIrB,EAAS/4C,GAAGi6C,IAAQlB,EAAS/4C,GAAGk6C,GACrC,MAAO,CAAErrB,MAAOorB,EAAKn4C,IAAKo4C,GAG1B,MAAM,IAAI1iD,MAAM,8CAAgDyiD,EAAM,KAAOC,EAAM,KAAOC,EAAQ,KAAOC,EAAO,MAWxHh4B,EAAMpiB,GAJN,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGyyC,cAAcxlC,IAAcq3C,EAAS/4C,GAAG0B,EAAUmtB,QAAUkqB,EAAS/4C,GAAG0B,EAAUI,MAlBpG,CAqBGsgB,IAAUA,EAAQ,KAMrB,SAAWs3B,GASPA,EAASjpD,OAHT,SAAgBohB,EAAKiN,GACjB,MAAO,CAAEjN,IAAKA,EAAKiN,MAAOA,IAU9B46B,EAAS15C,GAJT,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAc0gB,EAAMpiB,GAAG0B,EAAUod,SAAWrqB,GAAGsC,OAAO2K,EAAUmQ,MAAQpd,GAAG8D,UAAUmJ,EAAUmQ,OAfzH,CAkBG6nC,IAAaA,EAAW,KAM3B,SAAWpC,GAWPA,EAAa7mD,OAHb,SAAgB+mD,EAAW8C,EAAa7C,EAAsBC,GAC1D,MAAO,CAAEF,UAAWA,EAAW8C,YAAaA,EAAa7C,qBAAsBA,EAAsBC,qBAAsBA,IAY/HJ,EAAat3C,GANb,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAc0gB,EAAMpiB,GAAG0B,EAAU44C,cAAgB7lD,GAAGsC,OAAO2K,EAAU81C,aAC/Ep1B,EAAMpiB,GAAG0B,EAAU+1C,uBAAyBhjD,GAAG8D,UAAUmJ,EAAU+1C,yBACnEr1B,EAAMpiB,GAAG0B,EAAUg2C,uBAAyBjjD,GAAG8D,UAAUmJ,EAAUg2C,wBAnBnF,CAsBGJ,IAAiBA,EAAe,KAMnC,SAAWvoC,GAYPA,EAAMte,OARN,SAAgB8pD,EAAKC,EAAOC,EAAMC,GAC9B,MAAO,CACHH,IAAKA,EACLC,MAAOA,EACPC,KAAMA,EACNC,MAAOA,IAcf3rC,EAAM/O,GAPN,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGoJ,OAAO6D,EAAU64C,MACpB9lD,GAAGoJ,OAAO6D,EAAU84C,QACpB/lD,GAAGoJ,OAAO6D,EAAU+4C,OACpBhmD,GAAGoJ,OAAO6D,EAAUg5C,QArBnC,CAwBG3rC,IAAUA,EAAQ,KAMrB,SAAW4qC,GAUPA,EAAiBlpD,OANjB,SAAgBquB,EAAOkwB,GACnB,MAAO,CACHlwB,MAAOA,EACPkwB,MAAOA,IAWf2K,EAAiB35C,GAJjB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOgyB,EAAMpiB,GAAG0B,EAAUod,QAAU/P,EAAM/O,GAAG0B,EAAUstC,QAhB/D,CAmBG2K,IAAqBA,EAAmB,KAM3C,SAAWC,GAWPA,EAAkBnpD,OAPlB,SAAgB42C,EAAO0J,EAAUiD,GAC7B,MAAO,CACH3M,MAAOA,EACP0J,SAAUA,EACViD,oBAAqBA,IAa7B4F,EAAkB55C,GANlB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGsC,OAAO2K,EAAU2lC,SACnB5yC,GAAG8D,UAAUmJ,EAAUqvC,WAAagJ,EAAS/5C,GAAG0B,MAChDjN,GAAG8D,UAAUmJ,EAAUsyC,sBAAwBv/C,GAAGmoC,WAAWl7B,EAAUsyC,oBAAqB+F,EAAS/5C,MAnBrH,CAsBG45C,IAAsBA,EAAoB,KAK7C,SAAWN,GAIPA,EAA0B,QAAI,UAI9BA,EAA0B,QAAI,UAI9BA,EAAyB,OAAI,SAZjC,CAaGA,IAAqBA,EAAmB,KAM3C,SAAWO,GAoBPA,EAAappD,OAhBb,SAAgB0oD,EAAWC,EAASuB,EAAgBC,EAAcjlC,GAC9D,IAAIta,EAAS,CACT89C,UAAWA,EACXC,QAASA,GAWb,OATI3kD,GAAG4lD,QAAQM,KACXt/C,EAAOs/C,eAAiBA,GAExBlmD,GAAG4lD,QAAQO,KACXv/C,EAAOu/C,aAAeA,GAEtBnmD,GAAG4lD,QAAQ1kC,KACXta,EAAOsa,KAAOA,GAEXta,GAaXw+C,EAAa75C,GAPb,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGoJ,OAAO6D,EAAUy3C,YAAc1kD,GAAGoJ,OAAO6D,EAAUy3C,aACrD1kD,GAAG8D,UAAUmJ,EAAUi5C,iBAAmBlmD,GAAGoJ,OAAO6D,EAAUi5C,mBAC9DlmD,GAAG8D,UAAUmJ,EAAUk5C,eAAiBnmD,GAAGoJ,OAAO6D,EAAUk5C,iBAC5DnmD,GAAG8D,UAAUmJ,EAAUiU,OAASlhB,GAAGsC,OAAO2K,EAAUiU,QA7BpE,CAgCGkkC,IAAiBA,EAAe,KAMnC,SAAWC,GAUPA,EAA6BrpD,OAN7B,SAAgBw1C,EAAUvuC,GACtB,MAAO,CACHuuC,SAAUA,EACVvuC,QAASA,IAWjBoiD,EAA6B95C,GAJ7B,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcg4C,EAAS15C,GAAG0B,EAAUukC,WAAaxxC,GAAGsC,OAAO2K,EAAUhK,UAhB/F,CAmBGoiD,IAAiCA,EAA+B,KAKnE,SAAW5E,GAIPA,EAAmB19C,MAAQ,EAI3B09C,EAAmBtrB,QAAU,EAI7BsrB,EAAmBC,YAAc,EAIjCD,EAAmBE,KAAO,EAhB9B,CAiBGF,IAAuBA,EAAqB,KAO/C,SAAWhlB,GAOPA,EAAcC,YAAc,EAM5BD,EAAcxX,WAAa,EAb/B,CAcGwX,IAAkBA,EAAgB,KAMrC,SAAWqlB,GAoBPA,EAAW9kD,OAhBX,SAAgBquB,EAAOpnB,EAAS29C,EAAU59C,EAAMyF,EAAQ8yB,GACpD,IAAI30B,EAAS,CAAEyjB,MAAOA,EAAOpnB,QAASA,GAatC,OAZIjD,GAAG4lD,QAAQhF,KACXh6C,EAAOg6C,SAAWA,GAElB5gD,GAAG4lD,QAAQ5iD,KACX4D,EAAO5D,KAAOA,GAEdhD,GAAG4lD,QAAQn9C,KACX7B,EAAO6B,OAASA,GAEhBzI,GAAG4lD,QAAQrqB,KACX30B,EAAO20B,mBAAqBA,GAEzB30B,GAgBXk6C,EAAWv1C,GAVX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IACX0gB,EAAMpiB,GAAG0B,EAAUod,QACnBrqB,GAAGsC,OAAO2K,EAAUhK,WACnBjD,GAAGoJ,OAAO6D,EAAU2zC,WAAa5gD,GAAG8D,UAAUmJ,EAAU2zC,aACxD5gD,GAAGoJ,OAAO6D,EAAUjK,OAAShD,GAAGsC,OAAO2K,EAAUjK,OAAShD,GAAG8D,UAAUmJ,EAAUjK,SACjFhD,GAAGsC,OAAO2K,EAAUxE,SAAWzI,GAAG8D,UAAUmJ,EAAUxE,WACtDzI,GAAG8D,UAAUmJ,EAAUsuB,qBAAuBv7B,GAAGmoC,WAAWl7B,EAAUsuB,mBAAoB8pB,EAA6B95C,MAhCvI,CAmCGu1C,IAAeA,EAAa,KAM/B,SAAWp2B,GAePA,EAAQ1uB,OAXR,SAAgBgW,EAAOme,GAEnB,IADA,IAAIvhB,EAAO,GACFw3C,EAAK,EAAGA,EAAKr0C,UAAU1H,OAAQ+7C,IACpCx3C,EAAKw3C,EAAK,GAAKr0C,UAAUq0C,GAE7B,IAAIx/C,EAAS,CAAEoL,MAAOA,EAAOme,QAASA,GAItC,OAHInwB,GAAG4lD,QAAQh3C,IAASA,EAAKvE,OAAS,IAClCzD,EAAOmL,UAAYnD,GAEhBhI,GAUX8jB,EAAQnf,GAJR,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGsC,OAAO2K,EAAU+E,QAAUhS,GAAGsC,OAAO2K,EAAUkjB,UArB1F,CAwBGzF,IAAYA,EAAU,KAMzB,SAAW46B,GASPA,EAASte,QAHT,SAAiB3c,EAAO+1B,GACpB,MAAO,CAAE/1B,MAAOA,EAAO+1B,QAASA,IAWpCkF,EAASjI,OAHT,SAAgB94B,EAAU67B,GACtB,MAAO,CAAE/1B,MAAO,CAAE+P,MAAO7V,EAAUlX,IAAKkX,GAAY67B,QAASA,IAUjEkF,EAASe,IAHT,SAAah8B,GACT,MAAO,CAAEA,MAAOA,EAAO+1B,QAAS,KASpCkF,EAAS/5C,GANT,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGyyC,cAAcxlC,IACjBjN,GAAGsC,OAAO2K,EAAUmzC,UACpBzyB,EAAMpiB,GAAG0B,EAAUod,QA/BlC,CAkCGi7B,IAAaA,EAAW,KAM3B,SAAWppB,GAOPA,EAAiBlgC,OAHjB,SAAgBsf,EAAciE,GAC1B,MAAO,CAAEjE,aAAcA,EAAciE,MAAOA,IAShD2c,EAAiB3wB,GANjB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IACXq5C,EAAgC/6C,GAAG0B,EAAUqO,eAC7C3N,MAAMC,QAAQX,EAAUsS,QAZvC,CAeG2c,IAAqBA,EAAmB,KAE3C,SAAWqlB,GAWPA,EAAWvlD,OAVX,SAAgBohB,EAAK2F,GACjB,IAAInc,EAAS,CACTsa,KAAM,SACN9D,IAAKA,GAKT,YAHgB,IAAZ2F,QAA6C,IAAtBA,EAAQwjC,gBAAmD,IAA3BxjC,EAAQyjC,iBAC/D5/C,EAAOmc,QAAUA,GAEdnc,GASX26C,EAAWh2C,GANX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAgC,WAAnBA,EAAUiU,MAAqBlhB,GAAGsC,OAAO2K,EAAUmQ,YAC5C,IAAtBnQ,EAAU8V,eAC2B,IAAhC9V,EAAU8V,QAAQwjC,WAAwBvmD,GAAGsM,QAAQW,EAAU8V,QAAQwjC,mBAAqD,IAArCt5C,EAAU8V,QAAQyjC,gBAA6BxmD,GAAGsM,QAAQW,EAAU8V,QAAQyjC,mBAhBrL,CAmBGjF,IAAeA,EAAa,KAE/B,SAAWE,GAYPA,EAAWzlD,OAXX,SAAgB0lD,EAAQF,EAAQz+B,GAC5B,IAAInc,EAAS,CACTsa,KAAM,SACNwgC,OAAQA,EACRF,OAAQA,GAKZ,YAHgB,IAAZz+B,QAA6C,IAAtBA,EAAQwjC,gBAAmD,IAA3BxjC,EAAQyjC,iBAC/D5/C,EAAOmc,QAAUA,GAEdnc,GASX66C,EAAWl2C,GANX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAgC,WAAnBA,EAAUiU,MAAqBlhB,GAAGsC,OAAO2K,EAAUy0C,SAAW1hD,GAAGsC,OAAO2K,EAAUu0C,eAC3E,IAAtBv0C,EAAU8V,eAC2B,IAAhC9V,EAAU8V,QAAQwjC,WAAwBvmD,GAAGsM,QAAQW,EAAU8V,QAAQwjC,mBAAqD,IAArCt5C,EAAU8V,QAAQyjC,gBAA6BxmD,GAAGsM,QAAQW,EAAU8V,QAAQyjC,mBAjBrL,CAoBG/E,IAAeA,EAAa,KAE/B,SAAWE,GAWPA,EAAW3lD,OAVX,SAAgBohB,EAAK2F,GACjB,IAAInc,EAAS,CACTsa,KAAM,SACN9D,IAAKA,GAKT,YAHgB,IAAZ2F,QAA6C,IAAtBA,EAAQ0jC,gBAAsD,IAA9B1jC,EAAQ2jC,oBAC/D9/C,EAAOmc,QAAUA,GAEdnc,GASX+6C,EAAWp2C,GANX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAgC,WAAnBA,EAAUiU,MAAqBlhB,GAAGsC,OAAO2K,EAAUmQ,YAC5C,IAAtBnQ,EAAU8V,eAC2B,IAAhC9V,EAAU8V,QAAQ0jC,WAAwBzmD,GAAGsM,QAAQW,EAAU8V,QAAQ0jC,mBAAwD,IAAxCx5C,EAAU8V,QAAQ2jC,mBAAgC1mD,GAAGsM,QAAQW,EAAU8V,QAAQ2jC,sBAhBxL,CAmBG/E,IAAeA,EAAa,KAE/B,SAAW4D,GAcPA,EAAch6C,GAbd,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,SACoB,IAAtBA,EAAU6rB,cAAoD,IAA9B7rB,EAAU+tB,wBACZ,IAA9B/tB,EAAU+tB,iBAA8B/tB,EAAU+tB,gBAAgBjtB,OAAM,SAAU+P,GAC/E,OAAI9d,GAAGsC,OAAOwb,EAAOoD,MACVqgC,EAAWh2C,GAAGuS,IAAW2jC,EAAWl2C,GAAGuS,IAAW6jC,EAAWp2C,GAAGuS,GAGhEoe,EAAiB3wB,GAAGuS,QAV/C,CAeGynC,IAAkBA,EAAgB,KACrC,IA+HWoB,EAuBAL,EAwBAM,EA6BAnjC,EAqBA+/B,EAcAvpC,EAgCA4lC,EAwBA77B,EAWA2uB,EAeAkU,EAaAC,EAoBAC,EAiBAC,EAiBAC,EAwBAvE,EAmBAwE,EAkBAvuC,EAiCAwuC,EAOAC,EAwBA3+B,EA2CAiB,EA0EAu3B,EAsBAa,EAgCA/O,EA0BAsU,EAsBApU,EAsBAqU,EAjvBPC,EAAoC,WACpC,SAASA,EAAmBhoC,GACxBpc,KAAKoc,MAAQA,EAoBjB,OAlBAgoC,EAAmBjrD,UAAU+gD,OAAS,SAAU94B,EAAU67B,GACtDj9C,KAAKoc,MAAMjV,KAAKg7C,EAASjI,OAAO94B,EAAU67B,KAE9CmH,EAAmBjrD,UAAU0qC,QAAU,SAAU3c,EAAO+1B,GACpDj9C,KAAKoc,MAAMjV,KAAKg7C,EAASte,QAAQ3c,EAAO+1B,KAE5CmH,EAAmBjrD,UAAUuN,OAAS,SAAUwgB,GAC5ClnB,KAAKoc,MAAMjV,KAAKg7C,EAASe,IAAIh8B,KAEjCk9B,EAAmBjrD,UAAUkT,IAAM,SAAUusB,GACzC54B,KAAKoc,MAAMjV,KAAKyxB,IAEpBwrB,EAAmBjrD,UAAUkrD,IAAM,WAC/B,OAAOrkD,KAAKoc,OAEhBgoC,EAAmBjrD,UAAUyf,MAAQ,WACjC5Y,KAAKoc,MAAM5Q,OAAO,EAAGxL,KAAKoc,MAAMlV,SAE7Bk9C,EAtB4B,GA2BnCE,EAAiC,WACjC,SAASA,EAAgB1sB,GACrB,IAAI2sB,EAAQvkD,KACZA,KAAKwkD,iBAAmBvsD,OAAOY,OAAO,MAClC++B,IACA53B,KAAKykD,eAAiB7sB,EAClBA,EAAcC,gBACdD,EAAcC,gBAAgBtuB,SAAQ,SAAUoR,GAC5C,GAAIoe,EAAiB3wB,GAAGuS,GAAS,CAC7B,IAAI+pC,EAAiB,IAAIN,EAAmBzpC,EAAOyB,OACnDmoC,EAAMC,iBAAiB7pC,EAAOxC,aAAa8B,KAAOyqC,MAIrD9sB,EAAcjC,SACnB19B,OAAOqR,KAAKsuB,EAAcjC,SAASpsB,SAAQ,SAAUzQ,GACjD,IAAI4rD,EAAiB,IAAIN,EAAmBxsB,EAAcjC,QAAQ78B,IAClEyrD,EAAMC,iBAAiB1rD,GAAO4rD,MA4E9C,OAvEAzsD,OAAOC,eAAeosD,EAAgBnrD,UAAW,OAAQ,CAKrDf,IAAK,WACD,OAAO4H,KAAKykD,gBAEhBtsD,YAAY,EACZwmC,cAAc,IAElB2lB,EAAgBnrD,UAAUwrD,kBAAoB,SAAU7rD,GACpD,GAAIqqD,EAAgC/6C,GAAGtP,GAAM,CAMzC,GALKkH,KAAKykD,iBACNzkD,KAAKykD,eAAiB,CAClB5sB,gBAAiB,MAGpB73B,KAAKykD,eAAe5sB,gBACrB,MAAM,IAAIj4B,MAAM,0DAEpB,IAAIuY,EAAerf,EAEnB,KADI2K,EAASzD,KAAKwkD,iBAAiBrsC,EAAa8B,MACnC,CACT,IACI2qC,EAAmB,CACnBzsC,aAAcA,EACdiE,MAHAA,EAAQ,IAKZpc,KAAKykD,eAAe5sB,gBAAgB1wB,KAAKy9C,GACzCnhD,EAAS,IAAI2gD,EAAmBhoC,GAChCpc,KAAKwkD,iBAAiBrsC,EAAa8B,KAAOxW,EAE9C,OAAOA,EAQP,GALKzD,KAAKykD,iBACNzkD,KAAKykD,eAAiB,CAClB9uB,QAAS19B,OAAOY,OAAO,SAG1BmH,KAAKykD,eAAe9uB,QACrB,MAAM,IAAI/1B,MAAM,kEAEpB,IAAI6D,EACJ,KADIA,EAASzD,KAAKwkD,iBAAiB1rD,IACtB,CACT,IAAIsjB,EAAQ,GACZpc,KAAKykD,eAAe9uB,QAAQ78B,GAAOsjB,EACnC3Y,EAAS,IAAI2gD,EAAmBhoC,GAChCpc,KAAKwkD,iBAAiB1rD,GAAO2K,EAEjC,OAAOA,GAGf6gD,EAAgBnrD,UAAU0rD,WAAa,SAAU5qC,EAAK2F,GAClD5f,KAAK8kD,uBACL9kD,KAAKykD,eAAe5sB,gBAAgB1wB,KAAKi3C,EAAWvlD,OAAOohB,EAAK2F,KAEpE0kC,EAAgBnrD,UAAU4rD,WAAa,SAAUxG,EAAQF,EAAQz+B,GAC7D5f,KAAK8kD,uBACL9kD,KAAKykD,eAAe5sB,gBAAgB1wB,KAAKm3C,EAAWzlD,OAAO0lD,EAAQF,EAAQz+B,KAE/E0kC,EAAgBnrD,UAAU6rD,WAAa,SAAU/qC,EAAK2F,GAClD5f,KAAK8kD,uBACL9kD,KAAKykD,eAAe5sB,gBAAgB1wB,KAAKq3C,EAAW3lD,OAAOohB,EAAK2F,KAEpE0kC,EAAgBnrD,UAAU2rD,qBAAuB,WAC7C,IAAK9kD,KAAKykD,iBAAmBzkD,KAAKykD,eAAe5sB,gBAC7C,MAAM,IAAIj4B,MAAM,2DAGjB0kD,EA7FyB,IAqGpC,SAAWd,GAQPA,EAAuB3qD,OAHvB,SAAgBohB,GACZ,MAAO,CAAEA,IAAKA,IAUlBupC,EAAuBp7C,GAJvB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGsC,OAAO2K,EAAUmQ,MAd5D,CAiBGupC,IAA2BA,EAAyB,KAMvD,SAAWL,GASPA,EAAgCtqD,OAHhC,SAAgBohB,EAAKhL,GACjB,MAAO,CAAEgL,IAAKA,EAAKhL,QAASA,IAUhCk0C,EAAgC/6C,GAJhC,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGsC,OAAO2K,EAAUmQ,OAA+B,OAAtBnQ,EAAUmF,SAAoBpS,GAAGoJ,OAAO6D,EAAUmF,WAfvH,CAkBGk0C,IAAoCA,EAAkC,KAMzE,SAAWM,GAWPA,EAAiB5qD,OAHjB,SAAgBohB,EAAKs4B,EAAYtjC,EAAS0pC,GACtC,MAAO,CAAE1+B,IAAKA,EAAKs4B,WAAYA,EAAYtjC,QAASA,EAAS0pC,KAAMA,IAUvE8K,EAAiBr7C,GAJjB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGsC,OAAO2K,EAAUmQ,MAAQpd,GAAGsC,OAAO2K,EAAUyoC,aAAe11C,GAAGoJ,OAAO6D,EAAUmF,UAAYpS,GAAGsC,OAAO2K,EAAU6uC,OAjB3J,CAoBG8K,IAAqBA,EAAmB,KAS3C,SAAWnjC,GAIPA,EAAWE,UAAY,YAIvBF,EAAWC,SAAW,WAR1B,CASGD,IAAeA,EAAa,KAC/B,SAAWA,GAQPA,EAAWlY,GAJX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,IAAcwW,EAAWE,WAAa1W,IAAcwW,EAAWC,UAN9E,CASGD,IAAeA,EAAa,KAE/B,SAAW+/B,GAQPA,EAAcj4C,GAJd,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGyyC,cAAc92C,IAAU8nB,EAAWlY,GAAG0B,EAAUiU,OAASlhB,GAAGsC,OAAO2K,EAAUtR,QAN/F,CASG6nD,IAAkBA,EAAgB,KAKrC,SAAWvpC,GACPA,EAAmBpX,KAAO,EAC1BoX,EAAmBhB,OAAS,EAC5BgB,EAAmB5C,SAAW,EAC9B4C,EAAmBb,YAAc,EACjCa,EAAmBd,MAAQ,EAC3Bc,EAAmBV,SAAW,EAC9BU,EAAmBjB,MAAQ,EAC3BiB,EAAmBX,UAAY,EAC/BW,EAAmBpB,OAAS,EAC5BoB,EAAmBf,SAAW,GAC9Be,EAAmBC,KAAO,GAC1BD,EAAmBE,MAAQ,GAC3BF,EAAmBZ,KAAO,GAC1BY,EAAmBG,QAAU,GAC7BH,EAAmBI,QAAU,GAC7BJ,EAAmBK,MAAQ,GAC3BL,EAAmBrB,KAAO,GAC1BqB,EAAmBM,UAAY,GAC/BN,EAAmBO,OAAS,GAC5BP,EAAmBL,WAAa,GAChCK,EAAmBT,SAAW,GAC9BS,EAAmBJ,OAAS,GAC5BI,EAAmBhd,MAAQ,GAC3Bgd,EAAmBH,SAAW,GAC9BG,EAAmBF,cAAgB,GAzBvC,CA0BGE,IAAuBA,EAAqB,KAM/C,SAAW4lC,GAIPA,EAAiBl8B,UAAY,EAW7Bk8B,EAAiBxlC,QAAU,EAf/B,CAgBGwlC,IAAqBA,EAAmB,KAQ3C,SAAW77B,GAIPA,EAAkBC,WAAa,EAJnC,CAKGD,IAAsBA,EAAoB,KAM7C,SAAW2uB,GAQPA,EAAe32C,OAHf,SAAgB42C,GACZ,MAAO,CAAEA,MAAOA,IANxB,CASGD,IAAmBA,EAAiB,KAMvC,SAAWkU,GAUPA,EAAe7qD,OAHf,SAAgBqkD,EAAO0D,GACnB,MAAO,CAAE1D,MAAOA,GAAgB,GAAI0D,eAAgBA,IAR5D,CAWG8C,IAAmBA,EAAiB,KAEvC,SAAWC,GASPA,EAAasB,cAHb,SAAuBC,GACnB,OAAOA,EAAUrhB,QAAQ,wBAAyB,SAUtD8f,EAAav7C,GAJb,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAGsC,OAAO2K,IAAejN,GAAGyyC,cAAcxlC,IAAcjN,GAAGsC,OAAO2K,EAAUopC,WAAar2C,GAAGsC,OAAO2K,EAAUtR,QAf5H,CAkBGmrD,IAAiBA,EAAe,KAEnC,SAAWC,GAUPA,EAAMx7C,GANN,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,QAASsR,GAAajN,GAAGyyC,cAAcxlC,KAAeu2C,EAAcj4C,GAAG0B,EAAUm2C,WAC7E0D,EAAav7C,GAAG0B,EAAUm2C,WAC1BpjD,GAAGmoC,WAAWl7B,EAAUm2C,SAAU0D,EAAav7C,YAAyB,IAAhB5P,EAAM0uB,OAAoBsD,EAAMpiB,GAAG5P,EAAM0uB,SAR7G,CAWG08B,IAAUA,EAAQ,KAMrB,SAAWC,GAUPA,EAAqBhrD,OAHrB,SAAgB42C,EAAOwL,GACnB,OAAOA,EAAgB,CAAExL,MAAOA,EAAOwL,cAAeA,GAAkB,CAAExL,MAAOA,IARzF,CAWGoU,IAAyBA,EAAuB,KAMnD,SAAWC,GAkBPA,EAAqBjrD,OAjBrB,SAAgB42C,EAAOwL,GAEnB,IADA,IAAIE,EAAa,GACR8H,EAAK,EAAGA,EAAKr0C,UAAU1H,OAAQ+7C,IACpC9H,EAAW8H,EAAK,GAAKr0C,UAAUq0C,GAEnC,IAAIx/C,EAAS,CAAEgsC,MAAOA,GAUtB,OATI5yC,GAAG4lD,QAAQxH,KACXx3C,EAAOw3C,cAAgBA,GAEvBp+C,GAAG4lD,QAAQtH,GACX13C,EAAO03C,WAAaA,EAGpB13C,EAAO03C,WAAa,GAEjB13C,GAhBf,CAmBGqgD,IAAyBA,EAAuB,KAKnD,SAAWvE,GAIPA,EAAsB7/C,KAAO,EAI7B6/C,EAAsBC,KAAO,EAI7BD,EAAsBE,MAAQ,EAZlC,CAaGF,IAA0BA,EAAwB,KAMrD,SAAWwE,GAYPA,EAAkBlrD,OAPlB,SAAgBquB,EAAOnJ,GACnB,IAAIta,EAAS,CAAEyjB,MAAOA,GAItB,OAHIrqB,GAAGoJ,OAAO8X,KACVta,EAAOsa,KAAOA,GAEXta,GAVf,CAaGsgD,IAAsBA,EAAoB,KAK7C,SAAWvuC,GACPA,EAAWC,KAAO,EAClBD,EAAWE,OAAS,EACpBF,EAAWG,UAAY,EACvBH,EAAWI,QAAU,EACrBJ,EAAWK,MAAQ,EACnBL,EAAWM,OAAS,EACpBN,EAAWO,SAAW,EACtBP,EAAWQ,MAAQ,EACnBR,EAAWS,YAAc,EACzBT,EAAWU,KAAO,GAClBV,EAAWW,UAAY,GACvBX,EAAWtB,SAAW,GACtBsB,EAAWY,SAAW,GACtBZ,EAAWa,SAAW,GACtBb,EAAW/Q,OAAS,GACpB+Q,EAAW9K,OAAS,GACpB8K,EAAWc,QAAU,GACrBd,EAAWhL,MAAQ,GACnBgL,EAAWvd,OAAS,GACpBud,EAAWe,IAAM,GACjBf,EAAWgB,KAAO,GAClBhB,EAAWiB,WAAa,GACxBjB,EAAWkB,OAAS,GACpBlB,EAAW1b,MAAQ,GACnB0b,EAAWmB,SAAW,GACtBnB,EAAWoB,cAAgB,GA1B/B,CA2BGpB,IAAeA,EAAa,KAM/B,SAAWwuC,GAIPA,EAAUljC,WAAa,EAJ3B,CAKGkjC,IAAcA,EAAY,KAE7B,SAAWC,GAqBPA,EAAkBprD,OAXlB,SAAgBf,EAAMimB,EAAMmJ,EAAOjN,EAAKmlC,GACpC,IAAI37C,EAAS,CACT3L,KAAMA,EACNimB,KAAMA,EACNswB,SAAU,CAAEp0B,IAAKA,EAAKiN,MAAOA,IAKjC,OAHIk4B,IACA37C,EAAO27C,cAAgBA,GAEpB37C,GAnBf,CAsBGwgD,IAAsBA,EAAoB,KAE7C,SAAW3+B,GAwBPA,EAAezsB,OAbf,SAAgBf,EAAM+jD,EAAQ99B,EAAMmJ,EAAO83B,EAAgBJ,GACvD,IAAIn7C,EAAS,CACT3L,KAAMA,EACN+jD,OAAQA,EACR99B,KAAMA,EACNmJ,MAAOA,EACP83B,eAAgBA,GAKpB,YAHiB,IAAbJ,IACAn7C,EAAOm7C,SAAWA,GAEfn7C,GAeX6hB,EAAeld,GATf,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GACHjN,GAAGsC,OAAO2K,EAAUhS,OAAS+E,GAAGoJ,OAAO6D,EAAUiU,OACjDyM,EAAMpiB,GAAG0B,EAAUod,QAAUsD,EAAMpiB,GAAG0B,EAAUk1C,uBAC1B,IAArBl1C,EAAU+xC,QAAqBh/C,GAAGsC,OAAO2K,EAAU+xC,gBAC1B,IAAzB/xC,EAAUwyC,YAAyBz/C,GAAGsM,QAAQW,EAAUwyC,oBACjC,IAAvBxyC,EAAU80C,UAAuBp0C,MAAMC,QAAQX,EAAU80C,YAnCtE,CAsCGt5B,IAAmBA,EAAiB,KAKvC,SAAWiB,GAIPA,EAAeC,MAAQ,GAIvBD,EAAeE,SAAW,WAI1BF,EAAeG,SAAW,WAY1BH,EAAeI,gBAAkB,mBAWjCJ,EAAeK,eAAiB,kBAahCL,EAAeM,gBAAkB,mBAMjCN,EAAeO,OAAS,SAIxBP,EAAeQ,sBAAwB,yBASvCR,EAAe4+B,aAAe,gBAnElC,CAoEG5+B,IAAmBA,EAAiB,KAMvC,SAAWu3B,GAWPA,EAAkBjlD,OAPlB,SAAgBy8B,EAAayoB,GACzB,IAAIt6C,EAAS,CAAE6xB,YAAaA,GAI5B,OAHIyoB,UACAt6C,EAAOs6C,KAAOA,GAEXt6C,GAUXq6C,EAAkB11C,GAJlB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGmoC,WAAWl7B,EAAUwrB,YAAaqoB,EAAWv1C,WAA2B,IAAnB0B,EAAUi0C,MAAmBlhD,GAAGmoC,WAAWl7B,EAAUi0C,KAAMlhD,GAAGsC,UAjB9J,CAoBG2+C,IAAsBA,EAAoB,KAE7C,SAAWa,GAcPA,EAAW9lD,OAbX,SAAgBgW,EAAOu2C,EAAernC,GAClC,IAAIta,EAAS,CAAEoL,MAAOA,GAUtB,OATI0Y,EAAQnf,GAAGg9C,GACX3hD,EAAOupB,QAAUo4B,EAGjB3hD,EAAOm1B,KAAOwsB,OAEL,IAATrnC,IACAta,EAAOsa,KAAOA,GAEXta,GAaXk7C,EAAWv2C,GAVX,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,GAAGsC,OAAO2K,EAAU+E,cACT,IAA1B/E,EAAUwrB,aAA0Bz4B,GAAGmoC,WAAWl7B,EAAUwrB,YAAaqoB,EAAWv1C,YACjE,IAAnB0B,EAAUiU,MAAmBlhB,GAAGsC,OAAO2K,EAAUiU,cAC9B,IAAnBjU,EAAU8uB,WAAyC,IAAtB9uB,EAAUkjB,gBACjB,IAAtBljB,EAAUkjB,SAAsBzF,EAAQnf,GAAG0B,EAAUkjB,iBAC3B,IAA1BljB,EAAUu7C,aAA0BxoD,GAAGsM,QAAQW,EAAUu7C,qBACtC,IAAnBv7C,EAAU8uB,MAAmBwpB,EAAch6C,GAAG0B,EAAU8uB,QAvBrE,CA0BG+lB,IAAeA,EAAa,KAM/B,SAAW/O,GAWPA,EAAS/2C,OAPT,SAAgBquB,EAAOrjB,GACnB,IAAIJ,EAAS,CAAEyjB,MAAOA,GAItB,OAHIrqB,GAAG4lD,QAAQ5+C,KACXJ,EAAOI,KAAOA,GAEXJ,GAUXmsC,EAASxnC,GAJT,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAc0gB,EAAMpiB,GAAG0B,EAAUod,SAAWrqB,GAAG8D,UAAUmJ,EAAUkjB,UAAYzF,EAAQnf,GAAG0B,EAAUkjB,WAjB9H,CAoBG4iB,IAAaA,EAAW,KAM3B,SAAWsU,GAOPA,EAAkBrrD,OAHlB,SAAgBmlD,EAASC,GACrB,MAAO,CAAED,QAASA,EAASC,aAAcA,IAU7CiG,EAAkB97C,GAJlB,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGoJ,OAAO6D,EAAUk0C,UAAYnhD,GAAGsM,QAAQW,EAAUm0C,eAb7F,CAgBGiG,IAAsBA,EAAoB,KAM7C,SAAWpU,GAOPA,EAAaj3C,OAHb,SAAgBquB,EAAO3P,EAAQ1T,GAC3B,MAAO,CAAEqjB,MAAOA,EAAO3P,OAAQA,EAAQ1T,KAAMA,IAUjDisC,EAAa1nC,GAJb,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOqE,GAAG4lD,QAAQ34C,IAAc0gB,EAAMpiB,GAAG0B,EAAUod,SAAWrqB,GAAG8D,UAAUmJ,EAAUyN,SAAW1a,GAAGsC,OAAO2K,EAAUyN,UAb5H,CAgBGu4B,IAAiBA,EAAe,KAMnC,SAAWqU,GASPA,EAAetrD,OAHf,SAAgBquB,EAAOo+B,GACnB,MAAO,CAAEp+B,MAAOA,EAAOo+B,OAAQA,IAOnCnB,EAAe/7C,GAJf,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,YAAqBmI,IAAdmJ,GAA2B0gB,EAAMpiB,GAAG0B,EAAUod,cAAgCvmB,IAArBmJ,EAAUw7C,QAAwBnB,EAAe/7C,GAAG0B,EAAUw7C,UAZtI,CAeGnB,IAAmBA,EAAiB,KAChC,IAIIvL,EAJAzJ,EAAM,CAAC,KAAM,OAAQ,OAKhC,SAAWyJ,GAUPA,EAAa//C,OAHb,SAAgBohB,EAAKs4B,EAAYtjC,EAASkxC,GACtC,OAAO,IAAIoF,GAAiBtrC,EAAKs4B,EAAYtjC,EAASkxC,IAW1DvH,EAAaxwC,GALb,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,SAAOqE,GAAG4lD,QAAQ34C,IAAcjN,GAAGsC,OAAO2K,EAAUmQ,OAASpd,GAAG8D,UAAUmJ,EAAUyoC,aAAe11C,GAAGsC,OAAO2K,EAAUyoC,cAAgB11C,GAAGoJ,OAAO6D,EAAU07C,YACpJ3oD,GAAG6K,KAAKoC,EAAU27C,UAAY5oD,GAAG6K,KAAKoC,EAAU47C,aAAe7oD,GAAG6K,KAAKoC,EAAU67C,YA2B5F/M,EAAagN,WAxBb,SAAoB/sC,EAAUuD,GAU1B,IATA,IAAIu8B,EAAO9/B,EAAS4sC,UAChBI,EAuBR,SAASC,EAAUjiD,EAAMk7B,GACrB,GAAIl7B,EAAKqD,QAAU,EAEf,OAAOrD,EAEX,IAAIxK,EAAKwK,EAAKqD,OAAS,EAAK,EACxB6+C,EAAOliD,EAAKyE,MAAM,EAAGjP,GACrB2sD,EAAQniD,EAAKyE,MAAMjP,GACvBysD,EAAUC,EAAMhnB,GAChB+mB,EAAUE,EAAOjnB,GACjB,IAAIknB,EAAU,EACVC,EAAW,EACX/uD,EAAI,EACR,KAAO8uD,EAAUF,EAAK7+C,QAAUg/C,EAAWF,EAAM9+C,QAAQ,CACrD,IAAIwE,EAAMqzB,EAAQgnB,EAAKE,GAAUD,EAAME,IAGnCriD,EAAK1M,KAFLuU,GAAO,EAEKq6C,EAAKE,KAILD,EAAME,KAG1B,KAAOD,EAAUF,EAAK7+C,QAClBrD,EAAK1M,KAAO4uD,EAAKE,KAErB,KAAOC,EAAWF,EAAM9+C,QACpBrD,EAAK1M,KAAO6uD,EAAME,KAEtB,OAAOriD,EArDWiiD,CAAU1pC,GAAO,SAAUllB,EAAGokC,GAC5C,IAAI6qB,EAAOjvD,EAAEgwB,MAAM+P,MAAMoa,KAAO/V,EAAEpU,MAAM+P,MAAMoa,KAC9C,OAAa,IAAT8U,EACOjvD,EAAEgwB,MAAM+P,MAAMgjB,UAAY3e,EAAEpU,MAAM+P,MAAMgjB,UAE5CkM,KAEPC,EAAqBzN,EAAKzxC,OACrB/P,EAAI0uD,EAAY3+C,OAAS,EAAG/P,GAAK,EAAGA,IAAK,CAC9C,IAAIuR,EAAIm9C,EAAY1uD,GAChBkvD,EAAcxtC,EAAS8sC,SAASj9C,EAAEwe,MAAM+P,OACxCqvB,EAAYztC,EAAS8sC,SAASj9C,EAAEwe,MAAMhd,KAC1C,KAAIo8C,GAAaF,GAIb,MAAM,IAAIxmD,MAAM,oBAHhB+4C,EAAOA,EAAK4N,UAAU,EAAGF,GAAe39C,EAAEu0C,QAAUtE,EAAK4N,UAAUD,EAAW3N,EAAKzxC,QAKvFk/C,EAAqBC,EAEzB,OAAO1N,GA1Cf,CA6EGC,IAAiBA,EAAe,KACnC,IA2GI/7C,GA3GA0oD,GAAkC,WAClC,SAASA,EAAiBtrC,EAAKs4B,EAAYtjC,EAASkxC,GAChDngD,KAAKwmD,KAAOvsC,EACZja,KAAKymD,YAAclU,EACnBvyC,KAAK0mD,SAAWz3C,EAChBjP,KAAK2mD,SAAWxG,EAChBngD,KAAK4mD,kBAAejmD,EAmGxB,OAjGA1I,OAAOC,eAAeqtD,EAAiBpsD,UAAW,MAAO,CACrDf,IAAK,WACD,OAAO4H,KAAKwmD,MAEhBruD,YAAY,EACZwmC,cAAc,IAElB1mC,OAAOC,eAAeqtD,EAAiBpsD,UAAW,aAAc,CAC5Df,IAAK,WACD,OAAO4H,KAAKymD,aAEhBtuD,YAAY,EACZwmC,cAAc,IAElB1mC,OAAOC,eAAeqtD,EAAiBpsD,UAAW,UAAW,CACzDf,IAAK,WACD,OAAO4H,KAAK0mD,UAEhBvuD,YAAY,EACZwmC,cAAc,IAElB4mB,EAAiBpsD,UAAUssD,QAAU,SAAUv+B,GAC3C,GAAIA,EAAO,CACP,IAAI+P,EAAQj3B,KAAK2lD,SAASz+B,EAAM+P,OAC5B/sB,EAAMlK,KAAK2lD,SAASz+B,EAAMhd,KAC9B,OAAOlK,KAAK2mD,SAASJ,UAAUtvB,EAAO/sB,GAE1C,OAAOlK,KAAK2mD,UAEhBpB,EAAiBpsD,UAAU0tD,OAAS,SAAU5+C,EAAOgH,GACjDjP,KAAK2mD,SAAW1+C,EAAM0wC,KACtB34C,KAAK0mD,SAAWz3C,EAChBjP,KAAK4mD,kBAAejmD,GAExB4kD,EAAiBpsD,UAAU2tD,eAAiB,WACxC,QAA0BnmD,IAAtBX,KAAK4mD,aAA4B,CAIjC,IAHA,IAAIG,EAAc,GACdpO,EAAO34C,KAAK2mD,SACZK,GAAc,EACT7vD,EAAI,EAAGA,EAAIwhD,EAAKzxC,OAAQ/P,IAAK,CAC9B6vD,IACAD,EAAY5/C,KAAKhQ,GACjB6vD,GAAc,GAElB,IAAIx9B,EAAKmvB,EAAK7L,OAAO31C,GACrB6vD,EAAsB,OAAPx9B,GAAsB,OAAPA,EACnB,OAAPA,GAAeryB,EAAI,EAAIwhD,EAAKzxC,QAAiC,OAAvByxC,EAAK7L,OAAO31C,EAAI,IACtDA,IAGJ6vD,GAAerO,EAAKzxC,OAAS,GAC7B6/C,EAAY5/C,KAAKwxC,EAAKzxC,QAE1BlH,KAAK4mD,aAAeG,EAExB,OAAO/mD,KAAK4mD,cAEhBrB,EAAiBpsD,UAAUusD,WAAa,SAAUtpB,GAC9CA,EAASlrB,KAAKsuB,IAAItuB,KAAKosB,IAAIlB,EAAQp8B,KAAK2mD,SAASz/C,QAAS,GAC1D,IAAI6/C,EAAc/mD,KAAK8mD,iBACnBG,EAAM,EAAGC,EAAOH,EAAY7/C,OAChC,GAAa,IAATggD,EACA,OAAO/F,EAAStoD,OAAO,EAAGujC,GAE9B,KAAO6qB,EAAMC,GAAM,CACf,IAAIC,EAAMj2C,KAAKoxB,OAAO2kB,EAAMC,GAAQ,GAChCH,EAAYI,GAAO/qB,EACnB8qB,EAAOC,EAGPF,EAAME,EAAM,EAKpB,IAAI9V,EAAO4V,EAAM,EACjB,OAAO9F,EAAStoD,OAAOw4C,EAAMjV,EAAS2qB,EAAY1V,KAEtDkU,EAAiBpsD,UAAUwsD,SAAW,SAAUvkC,GAC5C,IAAI2lC,EAAc/mD,KAAK8mD,iBACvB,GAAI1lC,EAASiwB,MAAQ0V,EAAY7/C,OAC7B,OAAOlH,KAAK2mD,SAASz/C,OAEpB,GAAIka,EAASiwB,KAAO,EACrB,OAAO,EAEX,IAAI+V,EAAaL,EAAY3lC,EAASiwB,MAClCgW,EAAkBjmC,EAASiwB,KAAO,EAAI0V,EAAY7/C,OAAU6/C,EAAY3lC,EAASiwB,KAAO,GAAKrxC,KAAK2mD,SAASz/C,OAC/G,OAAOgK,KAAKsuB,IAAItuB,KAAKosB,IAAI8pB,EAAahmC,EAAS64B,UAAWoN,GAAiBD,IAE/EnvD,OAAOC,eAAeqtD,EAAiBpsD,UAAW,YAAa,CAC3Df,IAAK,WACD,OAAO4H,KAAK8mD,iBAAiB5/C,QAEjC/O,YAAY,EACZwmC,cAAc,IAEX4mB,EAzG0B,IA4GrC,SAAW1oD,GACP,IAAI2C,EAAWvH,OAAOkB,UAAUqG,SAIhC3C,EAAG4lD,QAHH,SAAiBjqD,GACb,YAAwB,IAAVA,GAMlBqE,EAAG8D,UAHH,SAAmBnI,GACf,YAAwB,IAAVA,GAMlBqE,EAAGsM,QAHH,SAAiB3Q,GACb,OAAiB,IAAVA,IAA4B,IAAVA,GAM7BqE,EAAGsC,OAHH,SAAgB3G,GACZ,MAAgC,oBAAzBgH,EAAS9H,KAAKc,IAMzBqE,EAAGoJ,OAHH,SAAgBzN,GACZ,MAAgC,oBAAzBgH,EAAS9H,KAAKc,IAMzBqE,EAAG6K,KAHH,SAAclP,GACV,MAAgC,sBAAzBgH,EAAS9H,KAAKc,IASzBqE,EAAGyyC,cANH,SAAuB92C,GAInB,OAAiB,OAAVA,GAAmC,iBAAVA,GAMpCqE,EAAGmoC,WAHH,SAAoBxsC,EAAOysC,GACvB,OAAOz6B,MAAMC,QAAQjS,IAAUA,EAAMoS,MAAMq6B,IAlCnD,CAqCGpoC,KAAOA,GAAK,M,6BCj/Cf5E,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqE,EAAK,EAAQ,IACbrD,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,GACrBwqD,EAA4B,EAAQ,IAC1CxwD,EAAQywD,sBAAwBD,EAA0BC,sBAC1D,MAAMC,EAA4B,EAAQ,IAC1C1wD,EAAQ2wD,sBAAwBD,EAA0BC,sBAC1D,MAAMC,EAA8B,EAAQ,IAC5C5wD,EAAQ6wD,wBAA0BD,EAA4BC,wBAC9D7wD,EAAQ8wD,sCAAwCF,EAA4BE,sCAC5E,MAAMC,EAA2B,EAAQ,IACzC/wD,EAAQgxD,qBAAuBD,EAAyBC,qBACxD,MAAMC,EAA2B,EAAQ,IACzCjxD,EAAQkxD,qBAAuBD,EAAyBC,qBACxDlxD,EAAQmxD,yBAA2BF,EAAyBE,yBAC5D,MAAMC,EAA0B,EAAQ,IACxCpxD,EAAQqxD,oBAAsBD,EAAwBC,oBACtD,MAAMC,EAAyB,EAAQ,IACvCtxD,EAAQuxD,mBAAqBD,EAAuBC,mBACpD,MAAMC,EAA4B,EAAQ,IAC1CxxD,EAAQyxD,sBAAwBD,EAA0BC,sBAC1D,MAAMC,EAAsB,EAAQ,IAUpC,IAAIx7C,EAYAy7C,EArBJ3xD,EAAQ4xD,iBAAmBF,EAAoBE,iBAC/C5xD,EAAQ6xD,8BAAgCH,EAAoBG,8BAC5D7xD,EAAQ8xD,mCAAqCJ,EAAoBI,mCAQjE,SAAW57C,GAKPA,EAAe5E,GAJf,SAAY5P,GACR,MAAMsR,EAAYtR,EAClB,OAAOqE,EAAGsC,OAAO2K,EAAUopC,WAAar2C,EAAGsC,OAAO2K,EAAUkrB,SAAWn4B,EAAGsC,OAAO2K,EAAUooC,UAHnG,CAMGllC,EAAiBlW,EAAQkW,iBAAmBlW,EAAQkW,eAAiB,KAMxE,SAAWy7C,GAYPA,EAAiBrgD,GAXjB,SAAY5P,GACR,IAAKgS,MAAMC,QAAQjS,GACf,OAAO,EAEX,IAAK,IAAIqS,KAAQrS,EACb,IAAKqE,EAAGsC,OAAO0L,KAAUmC,EAAe5E,GAAGyC,GACvC,OAAO,EAGf,OAAO,GAVf,CAaG49C,EAAmB3xD,EAAQ2xD,mBAAqB3xD,EAAQ2xD,iBAAmB,KAM9E,SAAWt0B,GACPA,EAAoBp4B,KAAO,IAAIe,EAAWuN,oBAAoB,6BADlE,CAEyBvT,EAAQq9B,sBAAwBr9B,EAAQq9B,oBAAsB,KAMvF,SAAWE,GACPA,EAAsBt4B,KAAO,IAAIe,EAAWuN,oBAAoB,+BADpE,CAE2BvT,EAAQu9B,wBAA0Bv9B,EAAQu9B,sBAAwB,KAE7F,SAAW0D,GAIPA,EAAsB9Z,OAAS,SAI/B8Z,EAAsBC,OAAS,SAI/BD,EAAsB5Z,OAAS,SAZnC,CAa2BrnB,EAAQihC,wBAA0BjhC,EAAQihC,sBAAwB,KAE7F,SAAWG,GAKPA,EAAoB2wB,MAAQ,QAK5B3wB,EAAoB4wB,cAAgB,gBAMpC5wB,EAAoBC,sBAAwB,wBAK5CD,EAAoB6wB,KAAO,OArB/B,CAsByBjyD,EAAQohC,sBAAwBphC,EAAQohC,oBAAsB,KAMvF,SAAWzY,GAKPA,EAA0BC,MAJ1B,SAAelnB,GACX,MAAMsR,EAAYtR,EAClB,OAAOsR,GAAajN,EAAGsC,OAAO2K,EAAU/H,KAAO+H,EAAU/H,GAAGmF,OAAS,GAH7E,CAM+BpQ,EAAQ2oB,4BAA8B3oB,EAAQ2oB,0BAA4B,KAMzG,SAAWD,GAKPA,EAAgCpX,GAJhC,SAAY5P,GACR,MAAMsR,EAAYtR,EAClB,OAAOsR,IAA6C,OAA/BA,EAAUyO,kBAA6BkwC,EAAiBrgD,GAAG0B,EAAUyO,oBAHlG,CAMqCzhB,EAAQ0oB,kCAAoC1oB,EAAQ0oB,gCAAkC,KAM3H,SAAWG,GAKPA,EAAwBvX,GAJxB,SAAY5P,GACR,MAAMsR,EAAYtR,EAClB,OAAOqE,EAAGyyC,cAAcxlC,UAA8CnJ,IAA/BmJ,EAAU+b,kBAAkChpB,EAAGsM,QAAQW,EAAU+b,oBAO5GlG,EAAwBqpC,oBAJxB,SAA6BxwD,GACzB,MAAMsR,EAAYtR,EAClB,OAAOsR,GAAajN,EAAGsM,QAAQW,EAAU+b,mBARjD,CAW6B/uB,EAAQ6oB,0BAA4B7oB,EAAQ6oB,wBAA0B,KASnG,SAAWyW,GACPA,EAAkBr6B,KAAO,IAAIe,EAAWuN,oBAAoB,cADhE,CAEuBvT,EAAQs/B,oBAAsBt/B,EAAQs/B,kBAAoB,KAKjF,SAAW6yB,GAMPA,EAAgBC,uBAAyB,EAN7C,CAOqBpyD,EAAQmyD,kBAAoBnyD,EAAQmyD,gBAAkB,KAO3E,SAAWx0B,GACPA,EAAwB14B,KAAO,IAAIe,EAAWwN,yBAAyB,eAD3E,CAE6BxT,EAAQ29B,0BAA4B39B,EAAQ29B,wBAA0B,KASnG,SAAW4B,GACPA,EAAgBt6B,KAAO,IAAIe,EAAWsN,qBAAqB,YAD/D,CAEqBtT,EAAQu/B,kBAAoBv/B,EAAQu/B,gBAAkB,KAO3E,SAAWC,GACPA,EAAiBv6B,KAAO,IAAIe,EAAWyN,0BAA0B,QADrE,CAEsBzT,EAAQw/B,mBAAqBx/B,EAAQw/B,iBAAmB,KAO9E,SAAW5K,GACPA,EAAmC3vB,KAAO,IAAIe,EAAWwN,yBAAyB,oCADtF,CAEwCxT,EAAQ40B,qCAAuC50B,EAAQ40B,mCAAqC,KAMpI,SAAWqG,GAIPA,EAAYnyB,MAAQ,EAIpBmyB,EAAYC,QAAU,EAItBD,EAAYT,KAAO,EAInBS,EAAYof,IAAM,EAhBtB,CAiBiBr6C,EAAQi7B,cAAgBj7B,EAAQi7B,YAAc,KAM/D,SAAWyE,GACPA,EAAwBz6B,KAAO,IAAIe,EAAWwN,yBAAyB,sBAD3E,CAE6BxT,EAAQ0/B,0BAA4B1/B,EAAQ0/B,wBAA0B,KAMnG,SAAWrE,GACPA,EAAmBp2B,KAAO,IAAIe,EAAWuN,oBAAoB,6BADjE,CAEwBvT,EAAQq7B,qBAAuBr7B,EAAQq7B,mBAAqB,KAMpF,SAAWoE,GACPA,EAAuBx6B,KAAO,IAAIe,EAAWwN,yBAAyB,qBAD1E,CAE4BxT,EAAQy/B,yBAA2Bz/B,EAAQy/B,uBAAyB,KAOhG,SAAWE,GACPA,EAA2B16B,KAAO,IAAIe,EAAWwN,yBAAyB,mBAD9E,CAEgCxT,EAAQ2/B,6BAA+B3/B,EAAQ2/B,2BAA6B,KAM5G,SAAW7b,GAIPA,EAAqB7P,KAAO,EAK5B6P,EAAqBS,KAAO,EAM5BT,EAAqBM,YAAc,EAfvC,CAgB0BpkB,EAAQ8jB,uBAAyB9jB,EAAQ8jB,qBAAuB,KAY1F,SAAWzB,GACPA,EAAgCrd,OAAS,uBACzCqd,EAAgCpd,KAAO,IAAIe,EAAWwN,yBAAyB6O,EAAgCrd,QAFnH,CAGqChF,EAAQqiB,kCAAoCriB,EAAQqiB,gCAAkC,KAM3H,SAAWuB,GACPA,EAAkC5e,OAAS,yBAC3C4e,EAAkC3e,KAAO,IAAIe,EAAWwN,yBAAyBoQ,EAAkC5e,QAFvH,CAGuChF,EAAQ4jB,oCAAsC5jB,EAAQ4jB,kCAAoC,KAWjI,SAAWN,GACPA,EAAiCte,OAAS,wBAC1Cse,EAAiCre,KAAO,IAAIe,EAAWwN,yBAAyB8P,EAAiCte,QAFrH,CAGsChF,EAAQsjB,mCAAqCtjB,EAAQsjB,iCAAmC,KAM9H,SAAWuC,GACPA,EAAgC7gB,OAAS,uBACzC6gB,EAAgC5gB,KAAO,IAAIe,EAAWwN,yBAAyBqS,EAAgC7gB,QAFnH,CAGqChF,EAAQ6lB,kCAAoC7lB,EAAQ6lB,gCAAkC,KAK3H,SAAWwsC,GAKPA,EAAuBC,OAAS,EAIhCD,EAAuBE,WAAa,EAIpCF,EAAuBG,SAAW,EAbtC,CAc4BxyD,EAAQqyD,yBAA2BryD,EAAQqyD,uBAAyB,KAMhG,SAAWttC,GACPA,EAAiC/f,OAAS,wBAC1C+f,EAAiC9f,KAAO,IAAIe,EAAWwN,yBAAyBuR,EAAiC/f,QAFrH,CAGsChF,EAAQ+kB,mCAAqC/kB,EAAQ+kB,iCAAmC,KAU9H,SAAWK,GACPA,EAAqCpgB,OAAS,iCAC9CogB,EAAqCngB,KAAO,IAAIe,EAAWuN,oBAAoB6R,EAAqCpgB,QAFxH,CAG0ChF,EAAQolB,uCAAyCplB,EAAQolB,qCAAuC,KAM1I,SAAWkB,GACPA,EAAkCrhB,KAAO,IAAIe,EAAWwN,yBAAyB,mCADrF,CAEuCxT,EAAQsmB,oCAAsCtmB,EAAQsmB,kCAAoC,KAKjI,SAAWuB,GAIPA,EAAeC,QAAU,EAIzBD,EAAeG,QAAU,EAIzBH,EAAeK,QAAU,EAZ7B,CAaoBloB,EAAQ6nB,iBAAmB7nB,EAAQ6nB,eAAiB,KAExE,SAAWX,GAIPA,EAAUC,OAAS,EAInBD,EAAUE,OAAS,EAInBF,EAAUG,OAAS,EAZvB,CAaernB,EAAQknB,YAAclnB,EAAQknB,UAAY,KAMzD,SAAW8Y,GACPA,EAA+B/6B,KAAO,IAAIe,EAAWwN,yBAAyB,mCADlF,CAEoCxT,EAAQggC,iCAAmChgC,EAAQggC,+BAAiC,KAKxH,SAAW4kB,GAKPA,EAAsBE,QAAU,EAKhCF,EAAsBF,iBAAmB,EAIzCE,EAAsBC,gCAAkC,EAd5D,CAe2B7kD,EAAQ4kD,wBAA0B5kD,EAAQ4kD,sBAAwB,KAa7F,SAAW57B,GACPA,EAAkBhkB,OAAS,0BAC3BgkB,EAAkB/jB,KAAO,IAAIe,EAAWuN,oBAAoByV,EAAkBhkB,QAE9EgkB,EAAkBypC,WAAa,IAAI/vD,EAAiB4B,aAJxD,CAKuBtE,EAAQgpB,oBAAsBhpB,EAAQgpB,kBAAoB,KAOjF,SAAW8B,GACPA,EAAyB9lB,OAAS,yBAClC8lB,EAAyB7lB,KAAO,IAAIe,EAAWuN,oBAAoBuX,EAAyB9lB,QAFhG,CAG8BhF,EAAQ8qB,2BAA6B9qB,EAAQ8qB,yBAA2B,KAOtG,SAAWI,GACPA,EAAalmB,OAAS,qBACtBkmB,EAAajmB,KAAO,IAAIe,EAAWuN,oBAAoB2X,EAAalmB,QAFxE,CAGkBhF,EAAQkrB,eAAiBlrB,EAAQkrB,aAAe,KAOlE,SAAW/U,GAIPA,EAAyB2uC,QAAU,EAInC3uC,EAAyBuuC,iBAAmB,EAI5CvuC,EAAyBsuC,cAAgB,EAZ7C,CAa8BzkD,EAAQmW,2BAA6BnW,EAAQmW,yBAA2B,KAEtG,SAAWwV,GACPA,EAAqB3mB,OAAS,6BAC9B2mB,EAAqB1mB,KAAO,IAAIe,EAAWuN,oBAAoBoY,EAAqB3mB,QAFxF,CAG0BhF,EAAQ2rB,uBAAyB3rB,EAAQ2rB,qBAAuB,KAS1F,SAAWc,GACPA,EAAkBznB,OAAS,0BAC3BynB,EAAkBxnB,KAAO,IAAIe,EAAWuN,oBAAoBkZ,EAAkBznB,QAE9EynB,EAAkBgmC,WAAa,IAAI/vD,EAAiB4B,aAJxD,CAKuBtE,EAAQysB,oBAAsBzsB,EAAQysB,kBAAoB,KAQjF,SAAWQ,GACPA,EAAkBjoB,OAAS,0BAC3BioB,EAAkBhoB,KAAO,IAAIe,EAAWuN,oBAAoB0Z,EAAkBjoB,QAE9EioB,EAAkBwlC,WAAa,IAAI/vD,EAAiB4B,aAJxD,CAKuBtE,EAAQitB,oBAAsBjtB,EAAQitB,kBAAoB,KAQjF,SAAWQ,GACPA,EAAyBzoB,OAAS,iCAClCyoB,EAAyBxoB,KAAO,IAAIe,EAAWuN,oBAAoBka,EAAyBzoB,QAE5FyoB,EAAyBglC,WAAa,IAAI/vD,EAAiB4B,aAJ/D,CAK8BtE,EAAQytB,2BAA6BztB,EAAQytB,yBAA2B,KAQtG,SAAWO,GACPA,EAAsBhpB,OAAS,8BAC/BgpB,EAAsB/oB,KAAO,IAAIe,EAAWuN,oBAAoBya,EAAsBhpB,QAEtFgpB,EAAsBykC,WAAa,IAAI/vD,EAAiB4B,aAJ5D,CAK2BtE,EAAQguB,wBAA0BhuB,EAAQguB,sBAAwB,KAK7F,SAAWoB,GACPA,EAAkBpqB,OAAS,0BAC3BoqB,EAAkBnqB,KAAO,IAAIe,EAAWuN,oBAAoB6b,EAAkBpqB,QAE9EoqB,EAAkBqjC,WAAa,IAAI/vD,EAAiB4B,aAJxD,CAKuBtE,EAAQovB,oBAAsBpvB,EAAQovB,kBAAoB,KAQjF,SAAWP,GACPA,EAAuB7pB,OAAS,mBAChC6pB,EAAuB5pB,KAAO,IAAIe,EAAWuN,oBAAoBsb,EAAuB7pB,QAExF6pB,EAAuB4jC,WAAa,IAAI/vD,EAAiB4B,aAJ7D,CAK4BtE,EAAQ6uB,yBAA2B7uB,EAAQ6uB,uBAAyB,KAKhG,SAAWoC,GACPA,EAAgBhsB,KAAO,IAAIe,EAAWuN,oBAAoB,yBAE1D0d,EAAgBwhC,WAAa,IAAI/vD,EAAiB4B,aAHtD,CAIqBtE,EAAQixB,kBAAoBjxB,EAAQixB,gBAAkB,KAK3E,SAAWO,GACPA,EAAuBvsB,KAAO,IAAIe,EAAWuN,oBAAoB,oBADrE,CAE4BvT,EAAQwxB,yBAA2BxxB,EAAQwxB,uBAAyB,KAKhG,SAAWsC,GACPA,EAAoB9uB,OAAS,4BAC7B8uB,EAAoB7uB,KAAO,IAAIe,EAAWuN,oBAAoBugB,EAAoB9uB,QAElF8uB,EAAoB2+B,WAAa,IAAI/vD,EAAiB4B,aAJ1D,CAKyBtE,EAAQ8zB,sBAAwB9zB,EAAQ8zB,oBAAsB,KAOvF,SAAWS,GACPA,EAA2BtvB,KAAO,IAAIe,EAAWuN,oBAAoB,wBADzE,CAEgCvT,EAAQu0B,6BAA+Bv0B,EAAQu0B,2BAA6B,KAK5G,SAAW3C,GACPA,EAA0B5sB,OAAS,0BACnC4sB,EAA0B3sB,KAAO,IAAIe,EAAWuN,oBAAoBqe,EAA0B5sB,QAFlG,CAG+BhF,EAAQ4xB,4BAA8B5xB,EAAQ4xB,0BAA4B,KAKzG,SAAWM,GACPA,EAA+BltB,OAAS,+BACxCktB,EAA+BjtB,KAAO,IAAIe,EAAWuN,oBAAoB2e,EAA+BltB,QAF5G,CAGoChF,EAAQkyB,iCAAmClyB,EAAQkyB,+BAAiC,KAKxH,SAAWK,GACPA,EAAgCvtB,OAAS,gCACzCutB,EAAgCttB,KAAO,IAAIe,EAAWuN,oBAAoBgf,EAAgCvtB,QAF9G,CAGqChF,EAAQuyB,kCAAoCvyB,EAAQuyB,gCAAkC,KAK3H,SAAWS,GACPA,EAAchuB,OAAS,sBACvBguB,EAAc/tB,KAAO,IAAIe,EAAWuN,oBAAoByf,EAAchuB,QAF1E,CAGmBhF,EAAQgzB,gBAAkBhzB,EAAQgzB,cAAgB,KAKrE,SAAWS,GACPA,EAAqBzuB,OAAS,6BAC9ByuB,EAAqBxuB,KAAO,IAAIe,EAAWuN,oBAAoBkgB,EAAqBzuB,QAFxF,CAG0BhF,EAAQyzB,uBAAyBzzB,EAAQyzB,qBAAuB,KAM1F,SAAWsC,GACPA,EAAsB9wB,KAAO,IAAIe,EAAWuN,oBAAoB,4BADpE,CAE2BvT,EAAQ+1B,wBAA0B/1B,EAAQ+1B,sBAAwB,KAK7F,SAAW0H,GACPA,EAA0Bx4B,KAAO,IAAIe,EAAWuN,oBAAoB,uBADxE,CAE+BvT,EAAQy9B,4BAA8Bz9B,EAAQy9B,0BAA4B,M,6BCvqBzGt8B,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAU3B,SAAWyqD,GACPA,EAAsBzrD,OAAS,8BAC/ByrD,EAAsBxrD,KAAO,IAAIe,EAAWuN,oBAAoBk9C,EAAsBzrD,QAEtFyrD,EAAsBgC,WAAa,IAAI/vD,EAAiB4B,aAJ5D,CAK2BtE,EAAQywD,wBAA0BzwD,EAAQywD,sBAAwB,M,6BCjB7FtvD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAU3B,SAAW2qD,GACPA,EAAsB3rD,OAAS,8BAC/B2rD,EAAsB1rD,KAAO,IAAIe,EAAWuN,oBAAoBo9C,EAAsB3rD,QAEtF2rD,EAAsB8B,WAAa,IAAI/vD,EAAiB4B,aAJ5D,CAK2BtE,EAAQ2wD,wBAA0B3wD,EAAQ2wD,sBAAwB,M,6BCjB7FxvD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMsE,EAAa,EAAQ,IAK3B,SAAW6qD,GACPA,EAAwB5rD,KAAO,IAAIe,EAAWsN,qBAAqB,8BADvE,CAE6BtT,EAAQ6wD,0BAA4B7wD,EAAQ6wD,wBAA0B,KAMnG,SAAWC,GACPA,EAAsC7rD,KAAO,IAAIe,EAAWwN,yBAAyB,uCADzF,CAE2CxT,EAAQ8wD,wCAA0C9wD,EAAQ8wD,sCAAwC,M,6BChB7I3vD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMsE,EAAa,EAAQ,IAW3B,SAAWgrD,GACPA,EAAqB/rD,KAAO,IAAIe,EAAWuN,oBAAoB,2BADnE,CAE0BvT,EAAQgxD,uBAAyBhxD,EAAQgxD,qBAAuB,M,6BCd1F7vD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAQ3B,SAAWkrD,GACPA,EAAqBlsD,OAAS,6BAC9BksD,EAAqBjsD,KAAO,IAAIe,EAAWuN,oBAAoB29C,EAAqBlsD,QAEpFksD,EAAqBuB,WAAa,IAAI/vD,EAAiB4B,aAJ3D,CAK0BtE,EAAQkxD,uBAAyBlxD,EAAQkxD,qBAAuB,KAQ1F,SAAWC,GACPA,EAAyBlsD,KAAO,IAAIe,EAAWuN,oBAAoB,kCADvE,CAE8BvT,EAAQmxD,2BAA6BnxD,EAAQmxD,yBAA2B,M,6BCzBtGhwD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAK3B,SAAW4kD,GAIPA,EAA0B,QAAI,UAI9BA,EAA0B,QAAI,UAI9BA,EAAyB,OAAI,SAZjC,CAasB5qD,EAAQ4qD,mBAAqB5qD,EAAQ4qD,iBAAmB,KAQ9E,SAAWyG,GACPA,EAAoBrsD,OAAS,4BAC7BqsD,EAAoBpsD,KAAO,IAAIe,EAAWuN,oBAAoB89C,EAAoBrsD,QAElFqsD,EAAoBoB,WAAa,IAAI/vD,EAAiB4B,aAJ1D,CAKyBtE,EAAQqxD,sBAAwBrxD,EAAQqxD,oBAAsB,M,6BCjCvFlwD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAW3B,SAAWurD,GACPA,EAAmBvsD,OAAS,2BAC5BusD,EAAmBtsD,KAAO,IAAIe,EAAWuN,oBAAoBg+C,EAAmBvsD,QAEhFusD,EAAmBkB,WAAa,IAAI/vD,EAAiB4B,aAJzD,CAKwBtE,EAAQuxD,qBAAuBvxD,EAAQuxD,mBAAqB,M,6BClBpFpwD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAQ3B,SAAWyrD,GACPA,EAAsBzsD,OAAS,8BAC/BysD,EAAsBxsD,KAAO,IAAIe,EAAWuN,oBAAoBk+C,EAAsBzsD,QAEtFysD,EAAsBgB,WAAa,IAAI/vD,EAAiB4B,aAJ5D,CAK2BtE,EAAQyxD,wBAA0BzxD,EAAQyxD,sBAAwB,M,6BCf7FtwD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMgB,EAAmB,EAAQ,GAC3BsD,EAAa,EAAQ,IAE3B,SAAW4rD,GACPA,EAAiB3sD,KAAO,IAAIvC,EAAiB4B,aADjD,CAEsBtE,EAAQ4xD,mBAAqB5xD,EAAQ4xD,iBAAmB,KAM9E,SAAWC,GACPA,EAA8B5sD,KAAO,IAAIe,EAAWuN,oBAAoB,kCAD5E,CAEmCvT,EAAQ6xD,gCAAkC7xD,EAAQ6xD,8BAAgC,KAMrH,SAAWC,GACPA,EAAmC7sD,KAAO,IAAIe,EAAWwN,yBAAyB,kCADtF,CAEwCxT,EAAQ8xD,qCAAuC9xD,EAAQ8xD,mCAAqC,M,6BCtBpI3wD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMsE,EAAa,EAAQ,IAQ3B,SAAWtB,GACPA,EAA4BM,OAAS,oCACrCN,EAA4BO,KAAO,IAAIe,EAAWuN,oBAAoB7O,EAA4BM,QAFtG,CAGiChF,EAAQ0E,8BAAgC1E,EAAQ0E,4BAA8B,KAO/G,SAAWC,GACPA,EAAkCK,OAAS,8BAC3CL,EAAkCM,KAAO,IAAIe,EAAWuN,oBAAoB5O,EAAkCK,QAFlH,CAGuChF,EAAQ2E,oCAAsC3E,EAAQ2E,kCAAoC,KAOjI,SAAWC,GACPA,EAAkCI,OAAS,8BAC3CJ,EAAkCK,KAAO,IAAIe,EAAWuN,oBAAoB3O,EAAkCI,QAFlH,CAGuChF,EAAQ4E,oCAAsC5E,EAAQ4E,kCAAoC,M,6BChCjIzD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMsE,EAAa,EAAQ,IAS3B,SAAWd,GACPA,EAA4B,QAAI,UAChCA,EAA4B,QAAI,UAChCA,EAA2B,OAAI,SAC/BA,EAA2B,OAAI,SAC/BA,EAA2B,OAAI,SAC/BA,EAA6B,SAAI,WACjCA,EAA8B,UAAI,YAClCA,EAAyB,KAAI,OAC7BA,EAA2B,OAAI,SAC/BA,EAA0B,MAAI,QAC9BA,EAA8B,UAAI,YAClCA,EAAyB,KAAI,OAC7BA,EAAkC,cAAI,gBACtCA,EAA6B,SAAI,WACjCA,EAA2B,OAAI,SAC/BA,EAA6B,SAAI,WACjCA,EAA0B,MAAI,QAC9BA,EAA6B,SAAI,WACjCA,EAA8B,UAAI,YAClCA,EAA0B,MAAI,QApBlC,CAqBwBlF,EAAQkF,qBAAuBlF,EAAQkF,mBAAqB,KASpF,SAAWC,GACPA,EAAsC,cAAI,gBAC1CA,EAAoC,YAAI,cACxCA,EAAmC,WAAI,aACvCA,EAAkC,UAAI,YACtCA,EAA+B,OAAI,SACnCA,EAAiC,SAAI,WACrCA,EAAmC,WAAI,aACvCA,EAA8B,MAAI,QAClCA,EAAiC,SAAI,WACrCA,EAAiC,SAAI,WAVzC,CAW4BnF,EAAQmF,yBAA2BnF,EAAQmF,uBAAyB,KAKhG,SAAWC,GAMPA,EAAekM,GALf,SAAY5P,GACR,MAAMsR,EAAYtR,EAClB,YAAqBmI,IAAdmJ,SAAmDnJ,IAAvBmJ,EAAU0/C,UAAwD,iBAAvB1/C,EAAU0/C,WACpFh/C,MAAMC,QAAQX,EAAUjG,QAAoC,IAA1BiG,EAAUjG,KAAKqD,QAA6C,iBAAtB4C,EAAUjG,KAAK,KAJnG,CAOoB/M,EAAQoF,iBAAmBpF,EAAQoF,eAAiB,KAKxE,SAAWP,GACPA,EAAsBG,OAAS,8BAC/BH,EAAsBI,KAAO,IAAIe,EAAWuN,oBAAoB1O,EAAsBG,QAF1F,CAG2BhF,EAAQ6E,wBAA0B7E,EAAQ6E,sBAAwB,KAK7F,SAAWC,GACPA,EAA2BE,OAAS,oCACpCF,EAA2BG,KAAO,IAAIe,EAAWuN,oBAAoBzO,EAA2BE,QAFpG,CAGgChF,EAAQ8E,6BAA+B9E,EAAQ8E,2BAA6B,KAK5G,SAAWC,GACPA,EAA2BC,OAAS,oCACpCD,EAA2BE,KAAO,IAAIe,EAAWuN,oBAAoBxO,EAA2BC,QAFpG,CAGgChF,EAAQ+E,6BAA+B/E,EAAQ+E,2BAA6B,M,6BCvF5G5D,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMixD,EAAS,EAAQ,GACjB5sD,EAAK,EAAQ,IA2BnB/F,EAAQ67B,iBA1BR,SAA0BvrB,EAAYknB,EAAczrB,GAGhD,OAFAuE,EAAWd,QAASzC,IAAWyqB,EAAazqB,EAAK,GAAIA,EAAK,GAAIA,EAAK,MACnEuD,EAAWf,QAAQxD,GACZ,CACH2G,OAAQ,IAAMpC,EAAWoC,SACzBtB,YAAa,CAACnM,KAAS+H,IAAWsD,EAAWc,YAAYrL,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,UAAWgI,GAClG+E,UAAW,CAAC9M,EAAMqI,IAAYgD,EAAWyB,UAAUhM,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQsI,GACzFiD,iBAAkB,CAACtL,EAAM+H,IAAWsD,EAAWC,iBAAiBxK,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQgI,GACtG2D,eAAgB,CAAC1L,EAAMqI,IAAYgD,EAAWK,eAAe5K,EAAGsC,OAAOpD,GAAQA,EAAOA,EAAKD,OAAQsI,GACnG/C,MAAO,CAAC7I,EAAOiI,EAAQ4G,GAAmB,IAAUD,EAAW/F,MAAM7I,EAAOiI,EAAQ4G,GACpFkrB,WAAazuB,GAAWsD,EAAWc,YAAYuhD,EAAOrzB,kBAAkBr6B,KAAM+H,GAC9EoxB,SAAU,IAAM9tB,EAAWc,YAAYuhD,EAAOpzB,gBAAgBt6B,UAAM4E,GACpEw0B,KAAM,IAAM/tB,EAAWC,iBAAiBoiD,EAAOnzB,iBAAiBv6B,MAChE+1B,aAAe1tB,GAAYgD,EAAWK,eAAegiD,EAAOlzB,uBAAuBx6B,KAAMqI,GACzF6tB,cAAgB7tB,GAAYgD,EAAWK,eAAegiD,EAAOjzB,wBAAwBz6B,KAAMqI,GAC3FkuB,YAAcluB,GAAYgD,EAAWK,eAAegiD,EAAOhzB,2BAA2B16B,KAAMqI,GAC5F8nB,uBAAyBpoB,GAAWsD,EAAWC,iBAAiBoiD,EAAO/9B,mCAAmC3vB,KAAM+H,GAChH4xB,sBAAwB5xB,GAAWsD,EAAWC,iBAAiBoiD,EAAOrsC,kCAAkCrhB,KAAM+H,GAC9G4yB,oBAAsB5yB,GAAWsD,EAAWC,iBAAiBoiD,EAAOtwC,gCAAgCpd,KAAM+H,GAC1G6yB,sBAAwB7yB,GAAWsD,EAAWC,iBAAiBoiD,EAAO/uC,kCAAkC3e,KAAM+H,GAC9G8yB,qBAAuB9yB,GAAWsD,EAAWC,iBAAiBoiD,EAAOrvC,iCAAiCre,KAAM+H,GAC5G+yB,oBAAsB/yB,GAAWsD,EAAWC,iBAAiBoiD,EAAO9sC,gCAAgC5gB,KAAM+H,GAC1GmwB,cAAgB7vB,GAAYgD,EAAWK,eAAegiD,EAAO3yB,+BAA+B/6B,KAAMqI,GAClG0D,QAAS,IAAMV,EAAWU,a,6BC3BlC7P,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMkxD,EAAW,EAAQ,IACnBC,EAAmB,EAAQ,IAC3BC,EAAkB,EAAQ,IAC1BC,EAAmB,EAAQ,IAC3BC,EAAkB,EAAQ,IAC1BC,EAAqB,EAAQ,IAC7BC,EAAiB,EAAQ,IACzBC,EAAgB,EAAQ,KAf9B,SAAkBtyD,GACd,IAAK,IAAI0B,KAAK1B,EAAQb,EAAQsC,eAAeC,KAAIvC,EAAQuC,GAAK1B,EAAE0B,IAepEE,CAAS,EAAQ,KACjB,MAAM2wD,UAA6BR,EAASl8B,mBACxC,aAAY,GAAEzrB,EAAE,KAAEjK,EAAI,cAAEshB,EAAa,mBAAE+wC,IACnCpqD,MAAMgC,GAAMjK,EAAKuH,cAAevH,EAAMshB,GACtCpZ,KAAKmqD,mBAAqBA,EAC1BnqD,KAAK2yB,iBAAmB3yB,KAAKoqD,mBAAmBrxD,KAAKiH,MAExCA,KACRgwB,KAAO,IAAIq6B,MADHrqD,KACcgwB,KAAM,CAC7B53B,IAAK,CAACmf,EAAQ+yC,IACG,UAATA,EACO/yC,EAAO+yC,GAEXJ,EAAqBK,mBANvBvqD,KASR6vB,KAAO,IAAIw6B,MATHrqD,KASc6vB,KAAM,CAC7Bz3B,IAAK,CAACmf,EAAQ+yC,IACG,UAATA,EACO/yC,EAAO+yC,GAEL,uBAATA,EACO,CAACnyC,EAAciJ,EAAUnW,KACrB,CACHkN,aAAcZ,EAAO6P,yBAAyBjP,GAC9CiJ,WACAnW,YAIC,iCAATq/C,EACQriD,IACG,CACHkQ,aAAcZ,EAAO6P,yBAAyBnf,EAAM4Q,UACpD2xC,OAAQviD,EAAMuiD,SAItBF,EAAKG,SAAS,UACPlzC,EAAO+yC,GAEXJ,EAAqBK,mBAIxC,qBACI,MAAMj8B,EAAetuB,KAAK+1B,sBAAsBh9B,KAAKiH,MAC/C6C,EAAe7C,KAAKg2B,uBAAuBj9B,KAAKiH,MACtD,OAAOA,KAAKmqD,mBAAmB/xD,IAAIk2B,EAAczrB,EAAc7C,KAAK4uB,eAExE,wBAAwBre,GACpB,MAAM,IAAI3Q,MAAM,eAEpB,0BACIG,MAAMmwB,0BACNlwB,KAAKw3B,gBAAgB,IAAIoyB,EAAgBp+B,qBAAqBxrB,OAC9DA,KAAKw3B,gBAAgB,IAAImyB,EAAiBe,sBAAsB1qD,OAChEA,KAAKw3B,gBAAgB,IAAIqyB,EAAiBc,sBAAsB3qD,OAChEA,KAAKw3B,gBAAgB,IAAIsyB,EAAgBc,qBAAqB5qD,OAC9DA,KAAKw3B,gBAAgB,IAAIuyB,EAAmBc,wBAAwB7qD,OACpE,MAAM8qD,EAAsB,IAAId,EAAee,oBAAoB/qD,MACnE8qD,EAAqC,gBAAIZ,EAAqBK,iBAC9DvqD,KAAKw3B,gBAAgBszB,GACrB9qD,KAAKw3B,gBAAgB,IAAIyyB,EAAce,mBAAmBhrD,OAC1D,MAAMs3B,EAAWt3B,KAAgB,UACjC,IAAK,MAAMu3B,KAAWD,EACdC,aAAmBuyB,EAAgBc,uBACnCrzB,EAAiB,QAAI2yB,EAAqBK,iBAC1ChzB,EAA6B,oBAAI2yB,EAAqBK,iBACtDhzB,EAA8B,qBAAI2yB,EAAqBK,mBAKvEzzD,EAAQozD,qBAAuBA,EAC/BA,EAAqBK,iBAAoB9mD,GAAWA,QAAU9C,G,6BCvF9D,IAAI2wC,EAAatxC,MAAQA,KAAKsxC,WAAc,SAAUhG,EAASiG,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIhpC,WAAU,SAAUzC,EAASD,GAC/C,SAAS4rC,EAAUl5C,GAAS,IAAMm5C,EAAKF,EAAUzG,KAAKxyC,IAAW,MAAOkQ,GAAK5C,EAAO4C,IACpF,SAASkpC,EAASp5C,GAAS,IAAMm5C,EAAKF,EAAiB,MAAEj5C,IAAW,MAAOkQ,GAAK5C,EAAO4C,IACvF,SAASipC,EAAKluC,GAJlB,IAAejL,EAIaiL,EAAOswB,KAAOhuB,EAAQtC,EAAOjL,QAJ1CA,EAIyDiL,EAAOjL,MAJhDA,aAAiBg5C,EAAIh5C,EAAQ,IAAIg5C,GAAE,SAAUzrC,GAAWA,EAAQvN,OAITuM,KAAK2sC,EAAWE,GAClGD,GAAMF,EAAYA,EAAU5lC,MAAMy/B,EAASiG,GAAc,KAAKvG,YAGtE/yC,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMyyD,EAAS,EAAQ,GACjBC,EAAe,EAAQ,IACvBnZ,EAAe,EAAQ,IACvBr1C,EAAa,EAAQ,GACrByuD,EAAiB,EAAQ,GAwwB/Br0D,EAAQ6F,gBAvwBR,SAAyByuD,GACrB,MAAMC,EAAc,KAAQ,MAAM,IAAIzrD,MAAM,gBACtC0zB,EAAM43B,EAAaI,IAsBzB,MAAM/kC,EACF,YAAY/tB,GACRwH,KAAKxH,MAAQA,EACbwH,KAAKurD,SAAWF,EAChBrrD,KAAKwrD,WAAaH,EAEtB,OAAOpiB,GACH,OAAO,IAAI1iB,EAAevmB,KAAKxH,MAAQwH,KAAKxH,MAAQ+tB,EAAeknB,IAAMxE,EAAQA,IAGzF1iB,EAAeknB,IAAM,IACrBlnB,EAAeC,MAAQ,IAAID,EAAe,IAC1CA,EAAeE,SAAW,IAAIF,EAAe,YAC7CA,EAAeG,SAAW,IAAIH,EAAe,YAC7CA,EAAeI,gBAAkBJ,EAAeG,SAASnU,OAAO,WAChEgU,EAAeK,eAAiBL,EAAeG,SAASnU,OAAO,UAC/DgU,EAAeM,gBAAkBN,EAAeG,SAASnU,OAAO,WAChEgU,EAAeO,OAAS,IAAIP,EAAe,UAC3CA,EAAeQ,sBAAwBR,EAAeO,OAAOvU,OAAO,mBACpEgU,EAAe4+B,aAAe5+B,EAAeO,OAAOvU,OAAO,UA2B3D,MAAM0G,EAAY,CACdwyC,GAAI,IA3BR,MACI,KAAKxxC,GACD,MAAM,IAAIra,MAAM,2BAEpB,cAAcqa,GACV,OAAOzR,QAAQzC,QAAQ,IAE3B,gBAAgBkU,GACZ,OAAOzR,QAAQzC,UAEnB,SAASkU,GACL,OAAOzR,QAAQzC,QAAQ,IAAI4zB,WAAW,IAE1C,UAAU1f,EAAKkmC,GACX,OAAO33C,QAAQzC,UAEnB,OAAOkU,EAAK2F,GACR,OAAOpX,QAAQzC,UAEnB,OAAOT,EAAQiS,EAAQqI,GACnB,OAAOpX,QAAQzC,UAEnB,KAAKT,EAAQiS,EAAQqI,GACjB,OAAOpX,QAAQzC,YAKnB2lD,mBAAe/qD,EACf,wBAAwBgd,EAAaguC,EAAoBC,EAAoBC,GACzE,MAAMj/C,EAAWw+C,IACjB,GAA2B,iBAAhBztC,EACP,MAAM,IAAI/d,MAAM,eAEpB,GAAIgN,EAASqM,UAAUoF,wBAAyB,CAC5C,MAAMX,EAAU9Q,EAASqM,UAAUoF,wBAAwBV,EAAaguC,EAAoBC,EAAoBC,GAChH,OAAO5zD,OAAO4iB,OAAO6C,EAAS,CAC1BiuC,qBAAsBA,EACtBC,qBAAsBA,EACtBC,qBAAsBA,IAG9B,MAAO,CACHF,qBAAsBA,EACtBC,qBAAsBA,EACtBC,qBAAsBA,EACtBrtC,YAAa9hB,EAAW5C,MAAMiR,KAC9B8T,YAAaniB,EAAW5C,MAAMiR,KAC9BgU,YAAariB,EAAW5C,MAAMiR,KAC9BjD,QAAS,SAGjB6vB,UAAYiB,GAAS0Y,EAAUtxC,UAAM,OAAQ,GAAQ,YACjD,MAAM4M,EAAWw+C,IACjB,GAAI1uD,EAAW0lD,cAAch6C,GAAGwwB,GAC5B,OAAOhsB,EAASqM,UAAU0e,UAAUiB,GAExC,MAAM,IAAIh5B,MAAM,kBAEpB,iBAAiB+rB,EAASlN,GACtB,MAAM,UAAExF,GAAcmyC,IAChBU,EAAgB7yC,EAAU8yC,eAC5B9yC,EAAU8yC,eAAer/B,iBAAiBf,EAASlN,EAAWA,EAASjf,gBAAamB,QACpFA,EACE8C,EAAS,CACXrL,IAAK,CAACuzB,EAASqgC,IACJF,EAAgBA,EAAc1zD,IAAIuzB,EAASqgC,GAAgBA,EAEtEnkD,IAAM8jB,KACKmgC,GAAgBA,EAAcjkD,IAAI8jB,GAE7ChiB,QAAS0hD,EACTxE,OAAQwE,GAEZ,OAAOpzD,OAAO4iB,OAAOpX,EAAQ,CACzBs8B,OAAQ,IAAM+rB,EAAgBA,EAAc/rB,cAAWp/B,KAG/D,+BACI,MAAMiM,EAAWw+C,IACjB,OAAIx+C,EAASqM,UAAU8yC,eACZn/C,EAASqM,UAAU8yC,eAAejgC,yBAEtCpvB,EAAW5C,MAAMiR,MAE5B,uBACI,MAAM6B,EAAWw+C,IACjB,GAAI,qBAAsBx+C,EAASqM,UAC/B,OAAOrM,EAASqM,UAAUwa,iBAE9B,MAAMJ,EAAUzmB,EAASqM,UAAUoa,QACnC,IAAKA,EACD,OAEJ,MAAMpZ,EAAMqZ,EAAIpgB,MAAMmgB,GACtB,MAAO,CAAC,CACApZ,MACAzJ,MAAO,EACP1Y,KAAMmiB,EAAIza,cAGtB,kCAEI,OADiB4rD,IACDnyC,UAAUgzC,6BAA+BvvD,EAAW5C,MAAMiR,MAE9E,oBAEI,OADiBqgD,IACDnyC,UAAUe,eAE9B,4BAEI,OADiBoxC,IACDnyC,UAAUC,uBAE9B,6BAEI,OADiBkyC,IACDnyC,UAAUkB,wBAE9B,8BACI,MAAMvN,EAAWw+C,IACjB,MAAO,CAACp/C,EAAUC,EAAUC,IACjBU,EAASqM,UAAU8B,wBAAwB,EAAG5C,eAAc6C,qBACrDhP,EAASjT,KAAKkT,EACxBzU,CAAE,CACEqhB,SAAUV,EACV6C,eAAgBA,UAErBra,EAAWuL,IAGtB,6BACI,MACM0P,EADWwvC,IACuBnyC,UAAU2C,uBAClD,OAAKA,EAGE,CAAC5P,EAAUC,EAAUC,IACjB0P,EAAuB,EAAGzD,eAAcqyC,SAAQhuC,gBACzCxQ,EAASjT,KAAKkT,EACxBzU,CAAE,CACEqhB,SAAUV,EACVqyC,OAAQA,EACRhuC,UAAYJ,IACJI,GACAA,EAAUJ,YAIvBzb,EAAWuL,GAdPxP,EAAW5C,MAAMiR,MAiBhC,4BAEI,OADiBqgD,IACDnyC,UAAUyD,uBAAyBhgB,EAAW5C,MAAMiR,MAExE,wBACI,OAAOrO,EAAW5C,MAAMiR,MAE5B,uBACI,OAAOrO,EAAW5C,MAAMiR,MAE5B,wBACI,OAAOrO,EAAW5C,MAAMiR,MAE5B,uBACI,OAAOrO,EAAW5C,MAAMiR,MAE5B,wBACI,OAAOrO,EAAW5C,MAAMiR,MAE5B,uBACI,OAAOrO,EAAW5C,MAAMiR,MAE5BmhD,mBAAoBb,EACpBc,eAAgBd,EAChBe,uBAAwBf,EACxBgB,UAAWhB,EACXiB,QAASjB,EACTkB,iBAAkBlB,EAClBmB,oCAAqCnB,EACrCoB,qBAAsBpB,EACtBqB,2BAA4BrB,EAC5Bv4B,cAAUnyB,EACV7I,UAAM6I,GAKV,MAAMgsD,EACF,YAAY70D,GACRkI,KAAKlI,KAAOA,GAAQ,UAChBkI,KAAK4M,SAAWw+C,IACpBprD,KAAK4sD,WAAa5sD,KAAK4M,SAASwL,UAAUyZ,2BACpC7xB,KAAK4M,SAASwL,UAAUyZ,2BAA2B/5B,QACnD6I,EAEV,WAEA,IAAIksD,EAAMC,GAuBUD,aAnCC3B,EAAaI,WAAS3qD,EAoC/BX,KAAK4sD,aACDE,EACA9sD,KAAK4sD,WAAWzqD,IAAI0qD,EAAKrtD,WAAYstD,EAAKvkD,IAAIwkD,IACnC,CACH7lC,MAAO6lC,EAAK7lC,MACZrnB,KAAMktD,EAAKltD,KACXyF,OAAQynD,EAAKznD,OACbxF,QAASitD,EAAKjtD,QACdi/C,KAAMgO,EAAKhO,KACX3mB,wBAAoBz3B,EACpB88C,SAA6BsP,EAAKtP,aAK1Cz9C,KAAK4sD,WAAWzqD,IAAI0qD,EAAKrtD,WAAY,KAK7CqtD,EAAKtjD,QAAQpF,IACTnE,KAAKmC,IAAIgC,EAAQ,GAAIA,EAAQ,MAIzC,UACQnE,KAAK4sD,YACL5sD,KAAK4sD,WAAW9kD,UAGxB,OAAOmS,IACP,SACA,QAAQ1T,EAAU+kC,IAClB,IAAIrxB,IACJ,IAAIA,GAAO,OAAO,GAEtB,MAAM7B,EAAY,CACd,MAAMrL,EAAU8L,GACZ,IAAKnc,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,IAAKrQ,EAAWyQ,mBAAmB/E,GAAGyQ,GAClC,MAAM,IAAIjZ,MAAM,wBAA0BH,KAAKsE,UAAU8U,IAI7D,OAFiBuyC,IACOhzC,UAAUC,MAAMtL,EAAU8L,GAClC,EAAI,GAExBm0C,8BAA6B,CAACjgD,EAAUuS,KAE7B,CACH,cAIRuS,2BAA2B/5B,GAChB,IAAI60D,EAAwB70D,GAEvC,+BAA+BiV,EAAUuS,KAAa4B,GAClD,IAAKxkB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,IAAKhzC,EAAU0J,+BACX,OAAOiwB,EAAal4C,WAAWhB,OAAO,QAE1C,MAAM4oB,EAAwBnC,EAASmC,sBACvC,OAAOrJ,EAAU0J,+BAA+B/U,EAAU,CACtDoU,uBAAsB,EAAC,aAAEhJ,EAAY,SAAEiJ,EAAQ,QAAEnW,GAAWrG,IACjD0a,EAAS6B,uBAAuBhJ,EAAciJ,EAAUxc,EAAOqG,GAAW,CAC7EqvC,YAAa59C,EAAWg/C,sBAAsBE,UAGtDn6B,sBAAuBA,EAAwB,CAACE,EAAM/c,IAC3C6c,EAAsBE,EAAM/c,QACnCjE,MACFugB,IAEV,4BAA4BnU,EAAUuS,GAClC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUsP,4BAGRtP,EAAUsP,4BAA4B3a,EAAU,CACnDka,mBAAkB,EAAC,aAAE9O,EAAY,MAAE+O,EAAK,QAAEjc,GAAWrG,IAC1C0a,EAAS2H,mBAAmB9O,EAAc+O,EAAOjc,EAASrG,KAJ9DmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,yBAAyBkU,EAAUuS,GAC/B,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,IAAKhzC,EAAUoQ,yBACX,OAAOupB,EAAal4C,WAAWhB,OAAO,QAE1C,MAAMuvB,EAAkB9I,EAAS8I,gBACjC,OAAOhQ,EAAUoQ,yBAAyBzb,EAAU,CAChDkb,kBAAiB,EAAC,aAAE9P,GAAgBvT,IACzB0a,EAAS2I,kBAAkB9P,EAAcvT,GAEpDwjB,gBAAiBA,EAAkB,CAACC,EAAUzjB,IACnCwjB,EAAgBC,EAAUzjB,QACjCjE,KAGZ,2BAA2BoM,EAAUuS,GACjC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUyL,2BAGRzL,EAAUyL,2BAA2B9W,EAAU,CAClD4W,kBAAiB,EAAC,aAAExL,EAAY,SAAEiJ,GAAYxc,IACnC0a,EAASqE,kBAAkBxL,EAAciJ,EAAUxc,KAJvDmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,+BAA+BkU,EAAUuS,GACrC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUo+B,+BAGRp+B,EAAUo+B,+BAA+BzpC,EAAU,CACtD0pC,sBAAqB,EAAC,aAAEt+B,EAAY,SAAEiJ,GAAYxc,IACvC0a,EAASm3B,sBAAsBt+B,EAAciJ,EAAUxc,KAJ3DmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,+BAA+BkU,EAAUuS,GACrC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUw+B,+BAGRx+B,EAAUw+B,+BAA+B7pC,EAAU,CACtD8pC,sBAAqB,EAAC,aAAE1+B,EAAY,SAAEiJ,GAAYxc,IACvC0a,EAASu3B,sBAAsB1+B,EAAciJ,EAAUxc,KAJ3DmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,4BAA4BkU,EAAUuS,GAClC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAU60C,4BAGR70C,EAAU60C,4BAA4BlgD,EAAU,CACnDmgD,mBAAkB,EAAC,aAAE/0C,EAAY,SAAEiJ,GAAYxc,IACpC0a,EAAS4tC,mBAAmB/0C,EAAciJ,EAAUxc,KAJxDmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,sBAAsBkU,EAAUuS,GAC5B,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAIhzC,EAAUmK,sBACHnK,EAAUmK,sBAAsBxV,EAAU,CAC7CqV,aAAY,EAAC,aAAEjK,EAAY,SAAEiJ,GAAYxc,IAC9B0a,EAAS8C,aAAajK,EAAciJ,EAAUxc,KAI1DmtC,EAAal4C,WAAWhB,OAAO,SAE1C,kCAAkCkU,EAAUuS,GACxC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUwM,kCAGRxM,EAAUwM,kCAAkC7X,EAAU,CACzD0X,0BAAyB,EAAC,aAAEtM,EAAY,SAAEiJ,GAAYxc,IAC3C0a,EAASmF,0BAA0BtM,EAAciJ,EAAUxc,KAJ/DmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,+BAA+BkU,EAAUuS,GACrC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUqN,+BAGRrN,EAAUqN,+BAA+B1Y,EAAU,CACtDoY,uBAAsB,EAAC,aAAEhN,GAAgBvT,IAC9B0a,EAAS6F,uBAAuBhN,EAAcvT,KAJlDmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,gCAAgCymB,GAC5B,MAAM,UAAElH,GAAcgzC,IACtB,OAAKhzC,EAAU4N,gCAGR5N,EAAU4N,gCAAgC,CAC7CF,wBAAuB,EAAC,MAAEC,GAASnhB,IACxB0a,EAASwG,wBAAwBC,EAAOnhB,KAJ5CmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,0BAA0BkU,EAAUuS,GAChC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUiM,0BAGRjM,EAAUiM,0BAA0BtX,EAAU,CACjDkX,kBAAiB,EAAC,aAAE9L,EAAY,SAAEiJ,EAAQ,QAAEnW,GAAWrG,IAC5C0a,EAAS2E,kBAAkB9L,EAAciJ,EAAUnW,EAASrG,KAJhEmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,uBAAuBkU,EAAUuS,GAC7B,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUsS,uBAGRtS,EAAUsS,uBAAuB3d,EAAU,CAC9Cod,mBAAkB,EAAC,aAAEhS,EAAY,SAAEiJ,EAAQ,QAAEgJ,GAAWxlB,IAC7C0a,EAAS6K,mBAAmBhS,EAAciJ,EAAUgJ,EAASxlB,KAJjEmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,uCAAuCkU,EAAUuS,GAC7C,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAU0Q,uCAGR1Q,EAAU0Q,uCAAuC/b,EAAU,CAC9D6b,+BAA8B,EAAC,aAAEzQ,EAAY,QAAEyH,GAAWhb,IAC/C0a,EAASsJ,+BAA+BzQ,EAAcyH,EAAShb,KAJnEmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,4CAA4CkU,EAAUuS,GAClD,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAU+Q,4CAGR/Q,EAAU+Q,4CAA4Cpc,EAAU,CACnEmc,oCAAmC,EAAC,aAAE/Q,EAAY,MAAE+O,EAAK,QAAEtH,GAAWhb,IAC3D0a,EAAS4J,oCAAoC/Q,EAAc+O,EAAOtH,EAAShb,KAJ/EmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,qCAAqCkU,EAAUuS,EAAUsK,KAA0BF,GAC/E,IAAKhtB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUuR,qCAGRvR,EAAUuR,qCAAqC5c,EAAU,CAC5Dwc,6BAA4B,EAAC,aAAEpR,EAAY,SAAEiJ,EAAQ,GAAEoI,EAAE,QAAE5J,GAAWhb,IAC3D0a,EAASiK,6BAA6BpR,EAAciJ,EAAUoI,EAAI5J,EAAShb,IAEvFglB,KAA0BF,GANlBqoB,EAAal4C,WAAWhB,OAAO,SAQ9C,8BAA8BkU,EAAUuS,EAAU6tC,KAAc9wB,GAC5D,IAAK3/B,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,IAAKhzC,EAAUgL,8BACX,OAAO2uB,EAAal4C,WAAWhB,OAAO,QAE1C,IAAIqoB,EACAiC,EAQJ,MAPyB,iBAAdgqC,EACPjsC,EAAoB,CAACisC,KAAc9wB,GAE9B8wB,IACLjsC,EAAoBisC,EAAUjsC,kBAC9BiC,EAAsBgqC,EAAUhqC,qBAE7B/K,EAAUgL,8BAA8BrW,EAAU,CACrDmU,oBACAiC,sBACAJ,qBAAoB,EAAC,aAAE5K,EAAY,SAAEiJ,GAAYxc,EAAOqG,IAC7CqU,EAASyD,qBAAqB5K,EAAciJ,EAAUxc,EAAOqG,MAIhF,6BAA6B8B,EAAUuS,GACnC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,IAAKhzC,EAAUmT,6BACX,OAAOwmB,EAAal4C,WAAWhB,OAAO,QAE1C,MAAMsyB,EAAsB7L,EAAS6L,oBACrC,OAAO/S,EAAUmT,6BAA6Bxe,EAAU,CACpDie,qBAAoB,EAAC,aAAE7S,GAAgBvT,IAC5B0a,EAAS0L,qBAAqB7S,EAAcvT,GAEvDumB,oBAAqBA,EAAsB,CAACC,EAAMxmB,IACvCumB,EAAoBC,EAAMxmB,QACjCjE,KAGZ,sBAAsBoM,EAAUuS,GAC5B,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAU4+B,sBAGR5+B,EAAU4+B,sBAAsBjqC,EAAU,CAC7CkqC,sBAAqB,EAAC,aAAE9+B,GAAgBvT,IAC7B0a,EAAS23B,sBAAsB9+B,EAAcvT,GAExDuyC,0BAAyB,EAAC,aAAEh/B,EAAY,MAAEi/B,EAAK,MAAElwB,GAAStiB,IAC/C0a,EAAS63B,0BAA0BC,EAAO,CAC7Cv+B,SAAUV,EACV+O,MAAOA,GACRtiB,KAVAmtC,EAAal4C,WAAWhB,OAAO,SAc9C,6BAA6BkU,EAAUuS,GACnC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUo/B,6BAGRp/B,EAAUo/B,6BAA6BzqC,EAAU,CACpD0qC,qBAAoB,EAAC,aAAEt/B,GAAgBvT,IAC5B0a,EAASm4B,qBAAqBt/B,EAAc,GAAIvT,KAJpDmtC,EAAal4C,WAAWhB,OAAO,SAQ9C,+BAA+BkU,EAAUuS,GACrC,IAAK5iB,EAAWoQ,mBAAmBC,GAC/B,MAAM,IAAInN,MAAM,wBAA0BH,KAAKsE,UAAUgJ,IAE7D,MAAM,UAAEqL,GAAcgzC,IACtB,OAAKhzC,EAAUg1C,+BAGRh1C,EAAUg1C,+BAA+BrgD,EAAU,CACtDsgD,uBAAsB,EAAC,aAAEl1C,EAAY,UAAEm1C,GAAa1oD,IACzC0a,EAAS+tC,uBAAuBl1C,EAAcm1C,EAAW1oD,KAJ7DmtC,EAAal4C,WAAWhB,OAAO,SAQ9C00D,aAAclC,EACdmC,wBAAyBnC,EACzBoC,eAAgBpC,EAChBqC,yBAA0BrC,EAC1BsC,uBAAwBtC,GAE5B,SAASuC,EAAY7xD,EAAM8wD,KAASC,GAChC,GAAoB,iBAATD,EACP,MAAM,IAAIjtD,MAAM,uBAAyBH,KAAKsE,UAAU8oD,IAE5D,MAAM/sD,EAAU+sD,EAChB,QAAalsD,IAATmsD,IAAuBtiD,MAAMC,QAAQqiD,GACrC,MAAM,IAAIltD,MAAM,uBAAyBH,KAAKsE,UAAU+oD,IAE5D,MAAMz6B,EAAUy6B,GAAQ,IAClB,OAAE11D,GAAWg0D,IACnB,OAAKh0D,EAGEA,EAAOw2D,YAAY7xD,EAAM+D,KAAYuyB,GAFjC7pB,QAAQzC,aAAQpF,GAI/B,MAAMvJ,EAAS,CACXq6B,uBAAwBm8B,EAAY70D,UAAK4H,EAAWjE,EAAWq1B,YAAYT,MAC3EY,mBAAoB07B,EAAY70D,UAAK4H,EAAWjE,EAAWq1B,YAAYC,SACvE3c,iBAAkBu4C,EAAY70D,UAAK4H,EAAWjE,EAAWq1B,YAAYnyB,OACrE,oBAAoB9H,GAChB,MAAM,OAAEV,GAAWg0D,IACbx6B,EAAsBx5B,EAASA,EAAOw5B,yBAAsBjwB,EAC5D00B,EAAUzE,EAAsBA,EAAoB73B,KAAK3B,EAAzBw5B,CAAiC94B,QAAQ6I,EAC/E,MAAO,CACH7I,OACAya,OAAQ8iB,EAAUA,EAAQ9iB,OAAOxZ,KAAKs8B,GAAW,OACjDlE,WAAYkE,EAAUA,EAAQlE,WAAWp4B,KAAKs8B,GAAW,OACzDzc,MAAOyyC,EACP35B,KAAOtkB,IACH,QAAYzM,IAARyM,GAAoC,kBAARA,EAC5B,MAAM,IAAIxN,MAAM,sCAAwCH,KAAKsE,UAAUqJ,OAAKzM,EAAW,IAE3F,OAAO00B,EAAUA,EAAQ3D,KAAKtkB,GAAO,QAEzCygD,KAAMxC,EACNvjD,QAASutB,EAAUA,EAAQvtB,QAAQ/O,KAAKs8B,GAAW,SAG3Dy4B,aAAc,CAACluC,EAASwoB,KACpB,MAAM,OAAEhxC,GAAWg0D,IACnB,OAAIh0D,GAAUA,EAAO02D,aACV12D,EAAO02D,aAAaluC,EAASwoB,GAEjCA,EAAK,CAAE2lB,OAAQ,SAAa,IAAI9C,EAAOrxD,yBAA0BgL,QAE5EopD,iBAAkB3C,EAClB4C,+BAAgC5C,EAChC6C,cAAe7C,EACf8C,wBAAyB9C,EACzB+C,eAAgB/C,EAChBgD,eAAgBhD,EAChBiD,aAAcjD,EACdkD,mBAAoBlD,EACpBmD,oBAAqBnD,EACrBoD,gBAAiBpD,EACjBqD,oBAAqBrD,EACrBsD,eAAgBtD,EAChBuD,yBAA0BvD,EAC1BwD,eAAgBxD,EAChByD,+BAAgCzD,EAChC,uBACI,OAAOA,KAEX,yBACI,OAAOA,KAEX0D,4BAA6B1D,EAC7B2D,8BAA+B3D,EAC/B4D,+BAAgC5D,EAChC6D,mCAAoC7D,EACpC8D,6BAA8B9D,EAC9B+D,gCAAiC/D,EACjC,gBACI,OAAOA,KAEX,qBACI,OAAOA,KAEXgE,0BAA2BhE,EAC3BiE,kBAAmBjE,EACnBkE,mBAAoBlE,EACpB,YACI,OAAOA,KAEXmE,uBAAwBnE,EACxBoE,gBAAiBpE,EACjBqE,eAAgBrE,EAChBsE,mBAAoBtE,GAsBxB,MAAO,CACHpyC,YACAb,YACAhhB,SACA61B,SAxBa,CACb,gBAAgBD,EAASzmB,EAAU+kC,GAC/B,MAAM,SAAEre,GAAam+B,IACrB,OAAKn+B,EAGEA,EAASC,gBAAgBF,EAASzmB,EAAU+kC,GAFxCyG,EAAal4C,WAAWhB,OAAO,SAI9C+2D,0BAA2BvE,EAC3Bt+B,eAAgBs+B,EAChBwE,YAAaxE,GAeb/3B,MACAkc,eA3vBJ,MACI,YAAYC,EAAO1xB,GACf/d,KAAKyvC,MAAQA,EACbzvC,KAAK+d,KAAOA,IAyvBhB6xB,SAtvBJ,MACI,YAAY1oB,EAAO8F,GACfhtB,KAAKknB,MAAQA,EACblnB,KAAKgtB,QAAUA,EAEnB,iBACI,QAAShtB,KAAKgtB,UAivBlB8iB,aA9uBJ,MACI,YAAY5oB,EAAO3P,GACfvX,KAAKknB,MAAQA,EACblnB,KAAKuX,OAASA,IA4uBlBgP,iBACA1sB,WAlBJ,MACI,YAAYi2D,GACR9vD,KAAK8vD,cAAgBA,EAEzB,UACI9vD,KAAK8vD,kBAcT7iD,yBAA0BvQ,EAAWuQ,yBACrCqwC,mBAAoB6N,EAAe7N,sB,6BCxxB3C,mGAKA,IACQyS,EAYJx6B,EACAy6B,EAdAC,GACIF,EAAgB,SAAUl4D,EAAGyjC,GAI7B,OAHAy0B,EAAgB93D,OAAOgI,gBAClB,CAAE25B,UAAW,cAAgBpvB,OAAS,SAAU3S,EAAGyjC,GAAKzjC,EAAE+hC,UAAY0B,IACvE,SAAUzjC,EAAGyjC,GAAK,IAAK,IAAIjiC,KAAKiiC,EAAOA,EAAEliC,eAAeC,KAAIxB,EAAEwB,GAAKiiC,EAAEjiC,MACpDxB,EAAGyjC,IAErB,SAAUzjC,EAAGyjC,GAEhB,SAAS40B,IAAOlwD,KAAKmwD,YAAct4D,EADnCk4D,EAAcl4D,EAAGyjC,GAEjBzjC,EAAEsB,UAAkB,OAANmiC,EAAarjC,OAAOY,OAAOyiC,IAAM40B,EAAG/2D,UAAYmiC,EAAEniC,UAAW,IAAI+2D,KAKvF,GAAuB,iBAAZ1iD,EACPwiD,EAAiC,UAArBxiD,EAAQq+B,cAEnB,GAAyB,iBAAdgD,UAAwB,CACpC,IAAIuhB,EAAYvhB,UAAUuhB,UAC1BJ,EAAYI,EAAU7+C,QAAQ,YAAc,EAqBhD,IAAI8+C,EAAiB,iBACjBC,EAAoB,MACpBC,EAAoB,QA2DxB,IACIC,EAAS,IACTC,EAAU,+DAiBVnF,EAAqB,WAIrB,SAASA,EAAIoF,EAAcC,EAAWpkC,EAAMxG,EAAO6qC,EAAUC,QACzC,IAAZA,IAAsBA,GAAU,GACR,iBAAjBH,GACP1wD,KAAKg1B,OAAS07B,EAAa17B,QA1B1B,GA2BDh1B,KAAK2wD,UAAYD,EAAaC,WA3B7B,GA4BD3wD,KAAKusB,KAAOmkC,EAAankC,MA5BxB,GA6BDvsB,KAAK+lB,MAAQ2qC,EAAa3qC,OA7BzB,GA8BD/lB,KAAK4wD,SAAWF,EAAaE,UA9B5B,KAoCD5wD,KAAKg1B,OA9DjB,SAAoBA,EAAQ67B,GACxB,OAAK77B,GAAW67B,EAGT77B,EAFI,OA4DW87B,CAAWJ,EAAcG,GACvC7wD,KAAK2wD,UAAYA,GArChB,GAsCD3wD,KAAKusB,KAzDjB,SAA8ByI,EAAQzI,GAKlC,OAAQyI,GACJ,IAAK,QACL,IAAK,OACL,IAAK,OACIzI,EAGIA,EAAK,KAAOikC,IACjBjkC,EAAOikC,EAASjkC,GAHhBA,EAAOikC,EAOnB,OAAOjkC,EAwCawkC,CAAqB/wD,KAAKg1B,OAAQzI,GAtC7C,IAuCDvsB,KAAK+lB,MAAQA,GAvCZ,GAwCD/lB,KAAK4wD,SAAWA,GAxCf,GA1Db,SAAsBllD,EAAKmlD,GAEvB,IAAKnlD,EAAIspB,QAAU67B,EACf,MAAM,IAAIjxD,MAAM,2DAAgE8L,EAAIilD,UAAY,aAAiBjlD,EAAI6gB,KAAO,cAAkB7gB,EAAIqa,MAAQ,iBAAqBra,EAAIklD,SAAW,MAIlM,GAAIllD,EAAIspB,SAAWq7B,EAAe1f,KAAKjlC,EAAIspB,QACvC,MAAM,IAAIp1B,MAAM,mDAOpB,GAAI8L,EAAI6gB,KACJ,GAAI7gB,EAAIilD,WACJ,IAAKL,EAAkB3f,KAAKjlC,EAAI6gB,MAC5B,MAAM,IAAI3sB,MAAM,iJAIpB,GAAI2wD,EAAkB5f,KAAKjlC,EAAI6gB,MAC3B,MAAM,IAAI3sB,MAAM,6HA4EpBoxD,CAAahxD,KAAM6wD,IAqN3B,OAlNAvF,EAAI2F,MAAQ,SAAUC,GAClB,OAAIA,aAAiB5F,KAGhB4F,IAG6B,iBAApBA,EAAMP,WACa,iBAAnBO,EAAMN,UACS,iBAAfM,EAAM3kC,MACU,iBAAhB2kC,EAAMnrC,OACW,iBAAjBmrC,EAAMl8B,QACW,mBAAjBk8B,EAAMn+B,QACS,mBAAfm+B,EAAMC,MACa,mBAAnBD,EAAM1xD,WAExBvH,OAAOC,eAAeozD,EAAInyD,UAAW,SAAU,CA0B3Cf,IAAK,WAID,OAAOg5D,EAAYpxD,MAAM,IAE7B7H,YAAY,EACZwmC,cAAc,IAGlB2sB,EAAInyD,UAAUg4D,KAAO,SAAUx2C,GAC3B,IAAKA,EACD,OAAO3a,KAEX,IAAIg1B,EAASra,EAAOqa,OAAQ27B,EAAYh2C,EAAOg2C,UAAWpkC,EAAO5R,EAAO4R,KAAMxG,EAAQpL,EAAOoL,MAAO6qC,EAAWj2C,EAAOi2C,SA+BtH,YA9BejwD,IAAXq0B,EACAA,EAASh1B,KAAKg1B,OAEE,OAAXA,IACLA,EAzGC,SA2Gar0B,IAAdgwD,EACAA,EAAY3wD,KAAK2wD,UAEE,OAAdA,IACLA,EA/GC,SAiHQhwD,IAAT4rB,EACAA,EAAOvsB,KAAKusB,KAEE,OAATA,IACLA,EArHC,SAuHS5rB,IAAVolB,EACAA,EAAQ/lB,KAAK+lB,MAEE,OAAVA,IACLA,EA3HC,SA6HYplB,IAAbiwD,EACAA,EAAW5wD,KAAK4wD,SAEE,OAAbA,IACLA,EAjIC,IAmID57B,IAAWh1B,KAAKg1B,QACb27B,IAAc3wD,KAAK2wD,WACnBpkC,IAASvsB,KAAKusB,MACdxG,IAAU/lB,KAAK+lB,OACf6qC,IAAa5wD,KAAK4wD,SACd5wD,KAEJ,IAAIqxD,EAAKr8B,EAAQ27B,EAAWpkC,EAAMxG,EAAO6qC,IASpDtF,EAAIp4C,MAAQ,SAAU1a,EAAOq4D,QACT,IAAZA,IAAsBA,GAAU,GACpC,IAAIx4C,EAAQo4C,EAAQa,KAAK94D,GACzB,OAAK6f,EAGE,IAAIg5C,EAAKh5C,EAAM,IAzJjB,GAyJ+Bk5C,EAAcl5C,EAAM,IAzJnD,IAyJkEk5C,EAAcl5C,EAAM,IAzJtF,IAyJqGk5C,EAAcl5C,EAAM,IAzJzH,IAyJwIk5C,EAAcl5C,EAAM,IAzJ5J,IAyJ2Kw4C,GAFrK,IAAIQ,EAvJV,iBAgLT/F,EAAI/3B,KAAO,SAAUhH,GACjB,IAAIokC,EAjLC,GA0LL,GALIX,IACAzjC,EAAOA,EAAKsX,QAAQ,MAAO2sB,IAI3BjkC,EAAK,KAAOikC,GAAUjkC,EAAK,KAAOikC,EAAQ,CAC1C,IAAIgB,EAAMjlC,EAAKhb,QAAQi/C,EAAQ,IAClB,IAATgB,GACAb,EAAYpkC,EAAKg6B,UAAU,GAC3Bh6B,EAAOikC,IAGPG,EAAYpkC,EAAKg6B,UAAU,EAAGiL,GAC9BjlC,EAAOA,EAAKg6B,UAAUiL,IAAQhB,GAGtC,OAAO,IAAIa,EAAK,OAAQV,EAAWpkC,EArM9B,QAuMT++B,EAAIl7C,KAAO,SAAUqhD,GACjB,OAAO,IAAIJ,EAAKI,EAAWz8B,OAAQy8B,EAAWd,UAAWc,EAAWllC,KAAMklC,EAAW1rC,MAAO0rC,EAAWb,WAiC3GtF,EAAInyD,UAAUqG,SAAW,SAAUkyD,GAE/B,YADqB,IAAjBA,IAA2BA,GAAe,GACvCC,EAAa3xD,KAAM0xD,IAE9BpG,EAAInyD,UAAU4mC,OAAS,WACnB,OAAO//B,MAEXsrD,EAAIsG,OAAS,SAAU/tD,GACnB,GAAKA,EAGA,IAAIA,aAAgBynD,EACrB,OAAOznD,EAGP,IAAIJ,EAAS,IAAI4tD,EAAKxtD,GAGtB,OAFAJ,EAAOouD,WAAahuD,EAAKiuD,SACzBruD,EAAOsuD,QAAUluD,EAAKmuD,OAASC,EAAiBpuD,EAAKkvB,OAAS,KACvDtvB,EATP,OAAOI,GAYRynD,EA3Oa,GA8OpB2G,EAAiBjC,EAAY,OAAIrvD,EAEjC0wD,EAAsB,SAAUa,GAEhC,SAASb,IACL,IAAI9M,EAAmB,OAAX2N,GAAmBA,EAAOrmD,MAAM7L,KAAM4O,YAAc5O,KAGhE,OAFAukD,EAAMsN,WAAa,KACnBtN,EAAMwN,QAAU,KACTxN,EAuDX,OA5DA0L,EAAUoB,EAAMa,GAOhBj6D,OAAOC,eAAem5D,EAAKl4D,UAAW,SAAU,CAC5Cf,IAAK,WAID,OAHK4H,KAAK+xD,UACN/xD,KAAK+xD,QAAUX,EAAYpxD,MAAM,IAE9BA,KAAK+xD,SAEhB55D,YAAY,EACZwmC,cAAc,IAElB0yB,EAAKl4D,UAAUqG,SAAW,SAAUkyD,GAEhC,YADqB,IAAjBA,IAA2BA,GAAe,GACzCA,EAQMC,EAAa3xD,MAAM,IAPrBA,KAAK6xD,aACN7xD,KAAK6xD,WAAaF,EAAa3xD,MAAM,IAElCA,KAAK6xD,aAOpBR,EAAKl4D,UAAU4mC,OAAS,WACpB,IAAIxC,EAAM,CACN40B,KAAM,GA0BV,OAvBInyD,KAAK+xD,UACLx0B,EAAIxK,OAAS/yB,KAAK+xD,QAClBx0B,EAAIy0B,KAAOC,GAEXjyD,KAAK6xD,aACLt0B,EAAIu0B,SAAW9xD,KAAK6xD,YAGpB7xD,KAAKusB,OACLgR,EAAIhR,KAAOvsB,KAAKusB,MAEhBvsB,KAAKg1B,SACLuI,EAAIvI,OAASh1B,KAAKg1B,QAElBh1B,KAAK2wD,YACLpzB,EAAIozB,UAAY3wD,KAAK2wD,WAErB3wD,KAAK+lB,QACLwX,EAAIxX,MAAQ/lB,KAAK+lB,OAEjB/lB,KAAK4wD,WACLrzB,EAAIqzB,SAAW5wD,KAAK4wD,UAEjBrzB,GAEJ8zB,EA7Dc,CA8DvB/F,GAEE8G,IAAe78B,EAAK,IACjB,IAAkB,MACrBA,EAAG,IAAkB,MACrBA,EAAG,IAAyB,MAC5BA,EAAG,IAAiB,MACpBA,EAAG,IAA8B,MACjCA,EAAG,IAA+B,MAClCA,EAAG,IAAmB,MACtBA,EAAG,IAA4B,MAC/BA,EAAG,IAAuB,MAC1BA,EAAG,IAAsB,MACzBA,EAAG,IAAwB,MAC3BA,EAAG,IAAsB,MACzBA,EAAG,IAAuB,MAC1BA,EAAG,IAAqB,MACxBA,EAAG,IAAiB,MACpBA,EAAG,IAAkB,MACrBA,EAAG,IAAsB,MACzBA,EAAG,IAAmB,MACtBA,EAAG,IAAkB,MACrBA,GACJ,SAAS88B,EAAuBC,EAAcC,GAG1C,IAFA,IAAIh1B,OAAM58B,EACN6xD,GAAmB,EACdrzB,EAAM,EAAGA,EAAMmzB,EAAaprD,OAAQi4B,IAAO,CAChD,IAAIt/B,EAAOyyD,EAAa11B,WAAWuC,GAEnC,GAAKt/B,GAAQ,IAAcA,GAAQ,KAC3BA,GAAQ,IAAcA,GAAQ,IAC9BA,GAAQ,IAAmBA,GAAQ,IAC3B,KAATA,GACS,KAATA,GACS,KAATA,GACS,MAATA,GACC0yD,GAAuB,KAAT1yD,GAEO,IAArB2yD,IACAj1B,GAAOk1B,mBAAmBH,EAAa/L,UAAUiM,EAAiBrzB,IAClEqzB,GAAmB,QAGX7xD,IAAR48B,IACAA,GAAO+0B,EAAaxlB,OAAO3N,QAG9B,MAEWx+B,IAAR48B,IACAA,EAAM+0B,EAAa9gD,OAAO,EAAG2tB,IAGjC,IAAIuzB,EAAUN,EAAYvyD,QACVc,IAAZ+xD,IAEyB,IAArBF,IACAj1B,GAAOk1B,mBAAmBH,EAAa/L,UAAUiM,EAAiBrzB,IAClEqzB,GAAmB,GAGvBj1B,GAAOm1B,IAEmB,IAArBF,IAELA,EAAkBrzB,IAO9B,OAHyB,IAArBqzB,IACAj1B,GAAOk1B,mBAAmBH,EAAa/L,UAAUiM,UAEtC7xD,IAAR48B,EAAoBA,EAAM+0B,EAErC,SAASK,EAA0BpmC,GAE/B,IADA,IAAIgR,OAAM58B,EACDw+B,EAAM,EAAGA,EAAM5S,EAAKrlB,OAAQi4B,IAAO,CACxC,IAAIt/B,EAAO0sB,EAAKqQ,WAAWuC,GACd,KAATt/B,GAAmC,KAATA,QACdc,IAAR48B,IACAA,EAAMhR,EAAK/a,OAAO,EAAG2tB,IAEzB5B,GAAO60B,EAAYvyD,SAGPc,IAAR48B,IACAA,GAAOhR,EAAK4S,IAIxB,YAAex+B,IAAR48B,EAAoBA,EAAMhR,EAK9B,SAAS6kC,EAAYn3C,EAAK24C,GAC7B,IAAIp6D,EAuBJ,OApBIA,EAFAyhB,EAAI02C,WAAa12C,EAAIsS,KAAKrlB,OAAS,GAAoB,SAAf+S,EAAI+a,OAEpC,KAAO/a,EAAI02C,UAAY12C,EAAIsS,KAEH,KAA3BtS,EAAIsS,KAAKqQ,WAAW,KACrB3iB,EAAIsS,KAAKqQ,WAAW,IAAM,IAAc3iB,EAAIsS,KAAKqQ,WAAW,IAAM,IAAc3iB,EAAIsS,KAAKqQ,WAAW,IAAM,IAAc3iB,EAAIsS,KAAKqQ,WAAW,IAAM,MACxH,KAA3B3iB,EAAIsS,KAAKqQ,WAAW,GAClBg2B,EAKO34C,EAAIsS,KAAK/a,OAAO,GAHhByI,EAAIsS,KAAK,GAAGltB,cAAgB4a,EAAIsS,KAAK/a,OAAO,GAQhDyI,EAAIsS,KAEZyjC,IACAx3D,EAAQA,EAAMqrC,QAAQ,MAAO,OAE1BrrC,EAKX,SAASm5D,EAAa13C,EAAKy3C,GACvB,IAAImB,EAAWnB,EAETiB,EADAN,EAEF90B,EAAM,GACNvI,EAAS/a,EAAI+a,OAAQ27B,EAAY12C,EAAI02C,UAAWpkC,EAAOtS,EAAIsS,KAAMxG,EAAQ9L,EAAI8L,MAAO6qC,EAAW32C,EAAI22C,SASvG,GARI57B,IACAuI,GAAOvI,EACPuI,GAAO,MAEPozB,GAAwB,SAAX37B,KACbuI,GAAOizB,EACPjzB,GAAOizB,GAEPG,EAAW,CACX,IAAIa,EAAMb,EAAUp/C,QAAQ,KAC5B,IAAa,IAATigD,EAAY,CAEZ,IAAIsB,EAAWnC,EAAUn/C,OAAO,EAAGggD,GACnCb,EAAYA,EAAUn/C,OAAOggD,EAAM,IAEtB,KADbA,EAAMsB,EAASvhD,QAAQ,MAEnBgsB,GAAOs1B,EAAQC,GAAU,IAIzBv1B,GAAOs1B,EAAQC,EAASthD,OAAO,EAAGggD,IAAM,GACxCj0B,GAAO,IACPA,GAAOs1B,EAAQC,EAASthD,OAAOggD,EAAM,IAAI,IAE7Cj0B,GAAO,KAIE,KADbi0B,GADAb,EAAYA,EAAUtxD,eACNkS,QAAQ,MAEpBgsB,GAAOs1B,EAAQlC,GAAW,IAI1BpzB,GAAOs1B,EAAQlC,EAAUn/C,OAAO,EAAGggD,IAAM,GACzCj0B,GAAOozB,EAAUn/C,OAAOggD,IAGhC,GAAIjlC,EAAM,CAEN,GAAIA,EAAKrlB,QAAU,GAA4B,KAAvBqlB,EAAKqQ,WAAW,IAAgD,KAAvBrQ,EAAKqQ,WAAW,IACzE/8B,EAAO0sB,EAAKqQ,WAAW,KACf,IAAc/8B,GAAQ,KAC9B0sB,EAAO,IAAM9nB,OAAOu5B,aAAan+B,EAAO,IAAM,IAAM0sB,EAAK/a,OAAO,SAGnE,GAAI+a,EAAKrlB,QAAU,GAA4B,KAAvBqlB,EAAKqQ,WAAW,GAAuB,CAChE,IAAI/8B,KAAO0sB,EAAKqQ,WAAW,KACf,IAAc/8B,GAAQ,KAC9B0sB,EAAO9nB,OAAOu5B,aAAan+B,EAAO,IAAM,IAAM0sB,EAAK/a,OAAO,IAIlE+rB,GAAOs1B,EAAQtmC,GAAM,GAUzB,OARIxG,IACAwX,GAAO,IACPA,GAAOs1B,EAAQ9sC,GAAO,IAEtB6qC,IACArzB,GAAO,IACPA,GAAQm0B,EAAyDd,EAA1CyB,EAAuBzB,GAAU,IAErDrzB,EAgBX,IAAIw1B,EAAiB,8BACrB,SAASxB,EAAc1gD,GACnB,OAAKA,EAAIwH,MAAM06C,GAGRliD,EAAIgzB,QAAQkvB,GAAgB,SAAU16C,GAAS,OAlB1D,SAAS26C,EAA2BniD,GAChC,IACI,OAAOoiD,mBAAmBpiD,GAE9B,MAAO0kB,GACH,OAAI1kB,EAAI3J,OAAS,EACN2J,EAAIW,OAAO,EAAG,GAAKwhD,EAA2BniD,EAAIW,OAAO,IAGzDX,GAS8CmiD,CAA2B36C,MAF7ExH,I,8CC1nBf5Y,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqH,EAAO,EAAQ,GACfqzD,EAAQ,EAAQ,GAChBr2D,EAAK,EAAQ,IACbs2D,EAA2B,EAAQ,IACnCC,EAAqB,EAAQ,IAC7BC,EAAyB,EAAQ,IAwhBvCv8D,EAAQg5B,gBAvhBR,SAAyBwjC,GACrB,MACMC,EAAgBD,GADA,CAAC96D,GAAUA,EAAMgH,YAEvC,SAASkf,EAAMlmB,GACX,OAAO+6D,EAAc/6D,GAEzB,SAAS4uB,EAAyBjP,GAC9B,MAAO,CACH8B,IAAKs5C,EAAcp7C,EAAa8B,MAGxC,SAASu5C,EAAkCr7C,GACvC,MAAO,CACH8B,IAAKs5C,EAAcp7C,EAAa8B,KAChChL,QAASkJ,EAAalJ,SAuE9B,SAASwkD,EAAyBjJ,GAC9B,OAAQA,GACJ,KAAK3qD,EAAKspD,uBAAuBC,OAC7B,OAAO8J,EAAM/J,uBAAuBC,OACxC,KAAKvpD,EAAKspD,uBAAuBE,WAC7B,OAAO6J,EAAM/J,uBAAuBE,WACxC,KAAKxpD,EAAKspD,uBAAuBG,SAC7B,OAAO4J,EAAM/J,uBAAuBG,SAE5C,OAAO4J,EAAM/J,uBAAuBC,OAcxC,SAAS7O,EAAwBD,GAC7B,OAAQA,GACJ,KAAKz6C,EAAK67C,sBAAsBF,iBAC5B,OAAO0X,EAAMxX,sBAAsBF,iBACvC,KAAK37C,EAAK67C,sBAAsBC,gCAC5B,OAAOuX,EAAMxX,sBAAsBC,gCACvC,QACI,OAAOuX,EAAMxX,sBAAsBE,SAa/C,SAASnB,EAA2BH,GAChC,OAAQA,GACJ,KAAKz6C,EAAKoN,yBAAyBwuC,OAC/B,OAAOyX,EAAMjmD,yBAAyB2uC,QAC1C,KAAK/7C,EAAKoN,yBAAyBuuC,iBAC/B,OAAO0X,EAAMjmD,yBAAyBuuC,iBAC1C,KAAK37C,EAAKoN,yBAAyBsuC,cAC/B,OAAO2X,EAAMjmD,yBAAyBsuC,eAGlD,SAASF,EAAuB7iD,GAG5B,MAAO,CACHi3C,MAAOj3C,EAAMi3C,OAMrB,SAASqL,EAAuBtiD,GAG5B,MAAO,CACHi3C,MAAOj3C,EAAMi3C,MACb0L,YARyB1iC,EAQWjgB,EAAM2iD,WAPvC1iC,EAAOlQ,IAAI8yC,KADtB,IAAiC5iC,EAoCjC,SAASi7C,EAAiBtyC,GACtB,MAAO,CAAEiwB,KAAMjwB,EAASiwB,KAAM4I,UAAW74B,EAAS64B,WAEtD,SAASxwB,EAAWjxB,GAChB,OAAIA,QACOA,EAEJ,CAAE64C,KAAM74C,EAAM64C,KAAM4I,UAAWzhD,EAAMyhD,WAahD,SAAS5yB,EAAQ7uB,GACb,GAAIA,QACA,OAAOA,EAGX,GATJ,SAAyBA,GACrB,MAAMsR,EAAYtR,EAClB,OAAOsR,KAAeA,EAAU6pD,aAAe7pD,EAAU8pD,UAOrDC,CAAgBr7D,GAChB,MAAM,IAAIoH,MAAM,0CAEpB,MAAO,CAAEq3B,MAAOxN,EAAWjxB,EAAMy+B,OAAQ/sB,IAAKuf,EAAWjxB,EAAM0R,MAEnE,SAASi1C,EAAW3mD,GAChB,OAAIA,QACOA,EAEJ06D,EAAMpR,SAASjpD,OAAO6lB,EAAMlmB,EAAMyhB,KAAMoN,EAAQ7uB,EAAM0uB,QAEjE,SAASw2B,EAAqBllD,GAC1B,OAAQA,GACJ,KAAKqH,EAAKy9C,mBAAmB19C,MACzB,OAAOszD,EAAM5V,mBAAmB19C,MACpC,KAAKC,EAAKy9C,mBAAmBtrB,QACzB,OAAOkhC,EAAM5V,mBAAmBtrB,QACpC,KAAKnyB,EAAKy9C,mBAAmBC,YACzB,OAAO2V,EAAM5V,mBAAmBC,YACpC,KAAK19C,EAAKy9C,mBAAmBE,KACzB,OAAO0V,EAAM5V,mBAAmBE,MAgB5C,SAASsW,EAAgBC,GACrB,OAAQA,GACJ,KAAKl0D,EAAKy4B,cAAcC,YACpB,OAAO26B,EAAM56B,cAAcC,YAC/B,KAAK14B,EAAKy4B,cAAcxX,WACpB,OAAOoyC,EAAM56B,cAAcxX,WAC/B,QACI,QAGZ,SAAS2/B,EAAqB9+B,GAC1B,MAAO,CACH7hB,QAAS6hB,EAAK7hB,QACduuC,SAAU8Q,EAAWx9B,EAAK0sB,WAMlC,SAASwP,EAAal8B,GAClB,IAAIle,EAASyvD,EAAMvV,WAAW9kD,OAAOwuB,EAAQ1F,EAAKuF,OAAQvF,EAAK7hB,SAgB/D,OAfIjD,EAAGoJ,OAAO0b,EAAK87B,YACfh6C,EAAOg6C,SAAWC,EAAqB/7B,EAAK87B,YAE5C5gD,EAAGoJ,OAAO0b,EAAK9hB,OAAShD,EAAGsC,OAAOwiB,EAAK9hB,SACvC4D,EAAO5D,KAAO8hB,EAAK9hB,MAEnB2K,MAAMC,QAAQkX,EAAKo9B,QACnBt7C,EAAOs7C,KAzCf,SAA0BA,GACtB,IAAKA,EACD,OAEJ,IAAIt7C,EAAS,GACb,IAAK,IAAIswD,KAAOhV,EAAM,CAClB,IAAIiV,EAAYF,EAAgBC,QACdpzD,IAAdqzD,GACAvwD,EAAO0D,KAAK6sD,GAGpB,OAAOvwD,EAAOyD,OAAS,EAAIzD,OAAS9C,EA8BlBszD,CAAiBtyC,EAAKo9B,OAEpCp9B,EAAKyW,qBACL30B,EAAO20B,mBAA2CzW,EAAKyW,mBAd9C7vB,IAAIk4C,IAgBb9+B,EAAKrc,SACL7B,EAAO6B,OAASqc,EAAKrc,QAElB7B,EAEX,SAASoyB,EAAcqnB,GACnB,OAAIA,QACOA,EAEJA,EAAM30C,IAAIs1C,GAcrB,SAASqW,EAAoBH,GACzB,OAAQA,GACJ,KAAKl0D,EAAKghB,kBAAkBC,WACxB,OAAOoyC,EAAMryC,kBAAkBC,YA2G3C,SAASq8B,EAAWvkB,GAChB,MAAO,CAAE1R,MAAOG,EAAQuR,EAAK1R,OAAQ+1B,QAASrkB,EAAKqkB,SAevD,SAASkX,EAAYxyC,GACjB,OAAOA,EAsBX,SAAS6F,EAAU7F,GACf,IAAIle,EAASyvD,EAAM3rC,QAAQ1uB,OAAO8oB,EAAK9S,MAAO8S,EAAKqL,SAInD,OAHIrL,EAAK/S,YACLnL,EAAOmL,UAAY+S,EAAK/S,WAErBnL,EA8CX,MAAO,CACHib,QACA0I,2BACAosC,oCACAh6C,yBAreJ,SAAkCrB,GAC9B,MAAO,CACHA,aAAc,CACV8B,IAAKs5C,EAAcp7C,EAAa8B,KAChCs4B,WAAYp6B,EAAao6B,WACzBtjC,QAASkJ,EAAalJ,QACtB0pC,KAAMxgC,EAAastC,aAge3BtqC,2BApdJ,SAAoC/N,GAChC,GALJ,SAAwB5U,GACpB,IAAIsR,EAAYtR,EAChB,QAASsR,EAAUmQ,OAASnQ,EAAUmF,QAGlCmlD,CAAehnD,GAAM,CAQrB,MAPa,CACT+K,aAAc,CACV8B,IAAKs5C,EAAcnmD,EAAI6M,KACvBhL,QAAS7B,EAAI6B,SAEjB+L,eAAgB,CAAC,CAAE29B,KAAMvrC,EAAIq4C,aAIhC,GAnBT,SAAmCjtD,GAC/B,IAAIsR,EAAYtR,EAChB,QAASsR,EAAU+O,YAAc/O,EAAUkR,eAiBlCq5C,CAA0BjnD,GAAM,CACrC,IAAIyL,EAAWzL,EAAIyL,SAkBnB,MAjBa,CACTV,aAAc,CACV8B,IAAKs5C,EAAc16C,EAASoB,KAC5BhL,QAAS4J,EAAS5J,SAEtB+L,eAAgB5N,EAAI4N,eAAezS,IAAKoS,IACpC,IAAIuM,EAAQvM,EAAOuM,MACnB,MAAO,CACHA,MAAO,CACH+P,MAAO,CAAEoa,KAAMnqB,EAAM+P,MAAMoa,KAAM4I,UAAW/yB,EAAM+P,MAAMgjB,WACxD/vC,IAAK,CAAEmnC,KAAMnqB,EAAMhd,IAAImnC,KAAM4I,UAAW/yB,EAAMhd,IAAI+vC,YAEtDvB,YAAa/9B,EAAO+9B,YACpBC,KAAMh+B,EAAOg+B,SAOzB,MAAM/4C,MAAM,+CAobhB0a,0BAjbJ,SAAmCnC,GAC/B,MAAO,CACHA,aAAciP,EAAyBjP,KAgb3C0E,yBA7aJ,SAAkC1E,EAAcm8C,GAAiB,GAC7D,IAAI7wD,EAAS,CACT0U,aAAcq7C,EAAkCr7C,IAKpD,OAHIm8C,IACA7wD,EAAOk1C,KAAOxgC,EAAastC,WAExBhiD,GAuaPuY,6BA1ZJ,SAAsC/T,GAClC,MAAO,CACHkQ,aAAciP,EAAyBnf,EAAM4Q,UAC7C2xC,OAAQiJ,EAAyBxrD,EAAMuiD,UAwZ3CnoC,6BArZJ,SAAsClK,EAAciJ,GAChD,MAAO,CACHjJ,aAAciP,EAAyBjP,GACvCiJ,SAAUsyC,EAAiBtyC,KAmZ/BC,mBAtYJ,SAA4BlJ,EAAciJ,EAAUnW,GAChD,MAAO,CACHkN,aAAciP,EAAyBjP,GACvCiJ,SAAUsyC,EAAiBtyC,GAC3BnW,QAAS,CACLqvC,YAAaC,EAAwBtvC,EAAQqvC,aAC7CE,iBAAkBvvC,EAAQuvC,oBAiYlCv3B,sBApVJ,SAA+B9K,EAAciJ,EAAUnW,GACnD,MAAO,CACHkN,aAAciP,EAAyBjP,GACvCiJ,SAAUsyC,EAAiBtyC,GAC3BnW,QAAS,CACLyvC,YAAazvC,EAAQyvC,YACrBF,iBAAkBvvC,EAAQuvC,iBAC1BF,YAAaG,EAA2BxvC,EAAQqvC,aAChDK,qBAlBaniD,EAkBwByS,EAAQ0vC,yBAjBvCh6C,IAAVnI,EACOA,EAEJ,CACHoiD,YARyBniC,EAQWjgB,EAAMoiD,WAPvCniC,EAAOlQ,IAAIuyC,IAQdE,gBAAiBxiD,EAAMwiD,gBACvBD,gBAAiBviD,EAAMuiD,oBAP/B,IAAyBviD,EAHQigB,GAkW7Bi7C,mBACArsC,UACAoC,aACA8qC,YAnUJ,SAAqB/7D,GACjB,IAAIiL,EAAS,GACb,IAAK,IAAIoH,KAAQrS,EACbiL,EAAO0D,KAAKsiB,EAAW5e,IAE3B,OAAOpH,GA+TP07C,aACAzB,uBACAoW,kBACAjW,eACAhoB,gBACAhU,iBAnMJ,SAA0BF,GACtB,IAAIle,EAAS,CAAEgsC,MAAO9tB,EAAK8tB,OACvBiE,EAAe/xB,aAAgBwxC,EAAyBzjB,QAAU/tB,OAAOhhB,EARjF,IAA8BnI,EAAO+jD,EAS7B56B,EAAKk6B,SACLp4C,EAAOo4C,OAASl6B,EAAKk6B,QAIrBl6B,EAAKs5B,gBACAvH,GAAqD,YAArCA,EAAarzB,oBAI9B5c,EAAOw3C,cAnDnB,SAAyBwB,EAAQxB,GAC7B,OAAQwB,GACJ,IAAK,UACD,OAAOxB,EACX,KAAKiY,EAAM5yC,WAAWE,UAClB,MAAO,CAAEzC,KAAM0+B,EAAQjkD,MAAOyiD,GAClC,KAAKiY,EAAM5yC,WAAWC,SAClB,MAAO,CAAExC,KAAM0+B,EAAQjkD,MAAOyiD,EAAcziD,OAChD,QACI,MAAO,iDAAiDikD,GA0CjCX,CAAgBpI,EAAarzB,oBAAqBsB,EAAKs5B,eAH9Ex3C,EAAOw3C,cAAgBt5B,EAAKs5B,eAMhCt5B,EAAKo6B,aACLt4C,EAAOs4C,WAAap6B,EAAKo6B,YAyCjC,SAA+BxkC,EAAQjS,GACnC,IAAIm3C,EAASyW,EAAMxW,iBAAiBl8B,UAChCm4B,OAAOh4C,EACPumB,OAAQvmB,EACR2E,EAAO6zC,UACPR,EAAOrzC,EAAO6zC,SAAS8D,QACvB/1B,EAAQG,EAAQ/hB,EAAO6zC,SAASjyB,QAE3B5hB,EAAOw3C,sBAAsBj9C,EAAK20D,eACvC/X,EAASyW,EAAMxW,iBAAiBxlC,QAChCyhC,EAAOrzC,EAAOw3C,WAAWtkD,OAGzBmgD,EAAOrzC,EAAOw3C,WAEdx3C,EAAO4hB,QACPA,EAAQG,EAAQ/hB,EAAO4hB,QAE3B3P,EAAOwlC,iBAAmBN,EACtBn3C,EAAO03C,eAAqBr8C,IAATg4C,QAAgCh4C,IAAVumB,EACzC3P,EAAO4hC,SAAW,CAAE8D,QAAStE,EAAMzxB,MAAOA,GAG1C3P,EAAOulC,WAAanE,EA9DxBqD,CAAsBv4C,EAAQke,GAC1B9kB,EAAGoJ,OAAO0b,EAAK5D,QACfta,EAAOsa,MA3BevlB,EA2BampB,EAAK5D,UA1B3Bpd,KADgB47C,EA2BiB7I,GAAgBA,EAAawI,kBAzBpEK,EAEJ/jD,EAAQ,IAyBXmpB,EAAKw6B,WACL14C,EAAO04C,SAAWx6B,EAAKw6B,UAEvBx6B,EAAKy6B,sBACL34C,EAAO24C,oBA4Df,SAAqBhgC,GACjB,GAAIA,QACA,OAAOA,EAEX,OAAOA,EAAM7T,IAAI40C,GAhEgB5gC,CAAYoF,EAAKy6B,sBAE9Cz6B,EAAK06B,mBACL54C,EAAO44C,iBAAmB16B,EAAK06B,iBAAiB/zC,SAEhDqZ,EAAKqL,UACLvpB,EAAOupB,QAAUxF,EAAU7F,EAAKqL,WAEb,IAAnBrL,EAAKq/B,YAAyC,IAAnBr/B,EAAKq/B,YAChCv9C,EAAOu9C,UAAYr/B,EAAKq/B,WAE5B,MAAMjC,EAzDV,SAA8BA,GAC1B,QAAap+C,IAATo+C,EACA,OAAOA,EAEX,MAAMt7C,EAAS,GACf,IAAK,IAAIswD,KAAOhV,EAAM,CAClB,MAAMiV,EAAYE,EAAoBH,QACpBpzD,IAAdqzD,GACAvwD,EAAO0D,KAAK6sD,GAGpB,OAAOvwD,EA8CMgxD,CAAqB9yC,EAAKo9B,MACvC,GAAIrL,SAC0B/yC,IAAtB+yC,EAAa7vC,OACbJ,EAAOI,KAAO6vC,EAAa7vC,OAEC,IAA5B6vC,EAAa4I,aAAmD,IAA5B5I,EAAa4I,YAAsB,CACvE,IAAgC,IAA5B5I,EAAa4I,iBAAgC37C,IAATo+C,GAAsBA,EAAK73C,OAAS,EAAG,CAC3E,MAAMsJ,EAAQuuC,EAAKxtC,QAAQ1R,EAAKghB,kBAAkBC,aACnC,IAAXtQ,GACAuuC,EAAKvzC,OAAOgF,EAAO,GAG3B/M,EAAO64C,WAAa5I,EAAa4I,WAMzC,YAHa37C,IAATo+C,GAAsBA,EAAK73C,OAAS,IACpCzD,EAAOs7C,KAAOA,GAEXt7C,GA4IP05C,aACA2B,aAxGJ,SAAsBn9B,GAClB,OAAIA,GAAQ9hB,EAAK2V,WAAWoB,cAEhB+K,EAAO,EAEZuxC,EAAM19C,WAAWO,UAoGxBo+C,cACAO,aAhGJ,SAAsBxX,GAClB,OAAOA,EAAM30C,IAAI4rD,IAgGjBhwC,kBA9FJ,SAA2BhM,EAAciJ,EAAUxB,GAC/C,MAAO,CACHzH,aAAciP,EAAyBjP,GACvCiJ,SAAUsyC,EAAiBtyC,GAC3BnW,QAAS,CAAEmyC,mBAAoBx9B,EAAQw9B,sBA2F3C91B,oBAxFJ,SAA6Brc,GACzB,GAAIA,QACA,OAAOA,EAEX,IAAI8yC,EAIJ,OAHI9yC,EAAQ8yC,MAAQlhD,EAAGsC,OAAO8L,EAAQ8yC,KAAKvlD,SACvCulD,EAAO,CAAC9yC,EAAQ8yC,KAAKvlD,QAElB06D,EAAMpV,kBAAkBjlD,OAAOg9B,EAAc5qB,EAAQqqB,aAAcyoB,IAiF1Ev2B,YACAe,WAzEJ,SAAoB5G,GAChB,IAAIle,EAASyvD,EAAMtjB,SAAS/2C,OAAOwuB,EAAQ1F,EAAKuF,QAShD,OARIvF,EAAKqL,UACLvpB,EAAOupB,QAAUxF,EAAU7F,EAAKqL,UAEhCrL,aAAgByxC,EAAmB1jB,SAC/B/tB,EAAK9d,OACLJ,EAAOI,KAAO8d,EAAK9d,MAGpBJ,GAgEPolB,oBA9DJ,SAA6BlH,GACzB,MAAO,CAAEq8B,QAASr8B,EAAKq8B,QAASC,aAAct8B,EAAKs8B,eA8DnD54B,uBA5DJ,SAAgClN,GAC5B,MAAO,CACHA,aAAciP,EAAyBjP,KA2D3C+P,iBAxDJ,SAA0B/P,GACtB,MAAO,CACHA,aAAciP,EAAyBjP,KAuD3CmT,eApDJ,SAAwB3J,GACpB,IAAIle,EAASyvD,EAAMpjB,aAAaj3C,OAAOwuB,EAAQ1F,EAAKuF,QAChDvF,EAAKpK,SACL9T,EAAO8T,OAASmH,EAAMiD,EAAKpK,cAEV5W,IAAjBghB,EAAKgzC,UACLlxD,EAAOkxD,QAAUhzC,EAAKgzC,SAE1B,IAAIjhB,EAAe/xB,aAAgB0xC,EAAuB3jB,QAAU/tB,OAAOhhB,EAI3E,OAHI+yC,GAAgBA,EAAa7vC,OAC7BJ,EAAOI,KAAO6vC,EAAa7vC,MAExBJ,GAyCPwnB,qBAvCJ,SAA8B9S,GAC1B,MAAO,CACHA,aAAciP,EAAyBjP,Q,6BCtfnDlgB,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMqH,EAAO,EAAQ,GACfi6C,EAAK,EAAQ,GACbj9C,EAAK,EAAQ,IACbs2D,EAA2B,EAAQ,IACnCC,EAAqB,EAAQ,IAC7BC,EAAyB,EAAQ,IACvC,IAAIuB,GACJ,SAAWA,GAKPA,EAAUxsD,GAJV,SAAY5P,GACR,IAAIsR,EAAYtR,EAChB,OAAOsR,GAAajN,EAAGsC,OAAO2K,EAAUopC,WAAar2C,EAAGsC,OAAO2K,EAAUtR,QAHjF,CAMGo8D,IAAcA,EAAY,KA8rB7B99D,EAAQg5B,gBA7rBR,SAAyBwjC,GACrB,MACMC,EAAgBD,GADA,CAAC96D,GAAUqH,EAAKyzB,IAAIpgB,MAAM1a,IAEhD,SAASkmB,EAAMlmB,GACX,OAAO+6D,EAAc/6D,GAEzB,SAASq9B,EAAcP,GACnB,OAAOA,EAAY/sB,IAAIs1C,GAE3B,SAASA,EAAayC,GAClB,IAAI78C,EAAS,IAAI5D,EAAK89C,WAAWt2B,EAAQi5B,EAAWp5B,OAAQo5B,EAAWxgD,QAAS49C,EAAqB4C,EAAW7C,WAahH,OAZI5gD,EAAGoJ,OAAOq6C,EAAWzgD,OAAShD,EAAGsC,OAAOmhD,EAAWzgD,SACnD4D,EAAO5D,KAAOygD,EAAWzgD,MAEzBygD,EAAWh7C,SACX7B,EAAO6B,OAASg7C,EAAWh7C,QAE3Bg7C,EAAWloB,qBACX30B,EAAO20B,mBAA0CkoB,EAAWloB,mBAQtC7vB,IAAIssD,IAN1BrqD,MAAMC,QAAQ61C,EAAWvB,QACzBt7C,EAAOs7C,KAUf,SAA0BA,GACtB,IAAKA,EACD,OAEJ,IAAIt7C,EAAS,GACb,IAAK,IAAIswD,KAAOhV,EAAM,CAClB,IAAIiV,EAAYF,EAAgBC,QACdpzD,IAAdqzD,GACAvwD,EAAO0D,KAAK6sD,GAGpB,OAAOvwD,EAAOyD,OAAS,EAAIzD,OAAS9C,EArBlBszD,CAAiB3T,EAAWvB,OAEvCt7C,EAKX,SAASoxD,EAA+B5V,GACpC,OAAO,IAAIp/C,EAAKqiD,6BAA6B/C,EAAWF,EAAY5Q,UAAW4Q,EAAYn/C,SAe/F,SAASg0D,EAAgBC,GACrB,OAAQA,GACJ,KAAKja,EAAGxhB,cAAcC,YAClB,OAAO14B,EAAKy4B,cAAcC,YAC9B,KAAKuhB,EAAGxhB,cAAcxX,WAClB,OAAOjhB,EAAKy4B,cAAcxX,WAC9B,QACI,QAGZ,SAAS2I,EAAWjxB,GAChB,GAAKA,EAGL,OAAO,IAAIqH,EAAKshD,SAAS3oD,EAAM64C,KAAM74C,EAAMyhD,WAE/C,SAAS5yB,EAAQ7uB,GACb,GAAKA,EAGL,OAAO,IAAIqH,EAAK2qB,MAAMf,EAAWjxB,EAAMy+B,OAAQxN,EAAWjxB,EAAM0R,MAKpE,SAASwzC,EAAqBllD,GAC1B,GAAIA,QACA,OAAOqH,EAAKy9C,mBAAmB19C,MAEnC,OAAQpH,GACJ,KAAKshD,EAAGwD,mBAAmB19C,MACvB,OAAOC,EAAKy9C,mBAAmB19C,MACnC,KAAKk6C,EAAGwD,mBAAmBtrB,QACvB,OAAOnyB,EAAKy9C,mBAAmBtrB,QACnC,KAAK8nB,EAAGwD,mBAAmBC,YACvB,OAAO19C,EAAKy9C,mBAAmBC,YACnC,KAAKzD,EAAGwD,mBAAmBE,KACvB,OAAO39C,EAAKy9C,mBAAmBE,KAEvC,OAAO39C,EAAKy9C,mBAAmB19C,MAwCnC,SAASk8C,EAAgBtjD,GACrB,GAAIqE,EAAGsC,OAAO3G,GACV,OAAOA,EAGP,OAAQA,EAAMulB,MACV,KAAK+7B,EAAGx5B,WAAWC,SACf,OAAO,IAAI1gB,EAAKi1D,eAAet8D,EAAMA,OACzC,KAAKshD,EAAGx5B,WAAWE,UACf,OAAOhoB,EAAMA,MACjB,QACI,MAAO,iDAAiDA,EAAMulB,MA4B9E,SAASm2C,EAAoBH,GACzB,OAAQA,GACJ,KAAKja,EAAGj5B,kBAAkBC,WACtB,OAAOjhB,EAAKghB,kBAAkBC,YAiB1C,SAASe,EAAiBF,GACtB,IAAIo9B,EAdR,SAA8BA,GAC1B,GAAIA,QACA,MAAO,GAEX,MAAMt7C,EAAS,GACf,IAAK,IAAIswD,KAAOhV,EAAM,CAClB,MAAMiV,EAAYE,EAAoBH,QACpBpzD,IAAdqzD,GACAvwD,EAAO0D,KAAK6sD,GAGpB,OAAOvwD,EAGIgxD,CAAqB9yC,EAAKo9B,MACjCt7C,EAAS,IAAI0vD,EAAyBzjB,QAAQ/tB,EAAK8tB,OACnD9tB,EAAKk6B,SACLp4C,EAAOo4C,OAASl6B,EAAKk6B,QAErBl6B,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBa,EAAgBn6B,EAAKs5B,eAC5Cx3C,EAAO4c,oBAAsBxjB,EAAGsC,OAAOwiB,EAAKs5B,eAAiB,UAAYt5B,EAAKs5B,cAAcl9B,MAE5F4D,EAAKo6B,aACLt4C,EAAOs4C,WAAap6B,EAAKo6B,YAE7B,IAAIe,EA0CR,SAAgCn7B,GAC5B,OAAIA,EAAKw3B,SACDx3B,EAAKo7B,mBAAqBjD,EAAG4C,iBAAiBxlC,QACvC,CAAEyhC,KAAM,IAAI94C,EAAK20D,cAAc7yC,EAAKw3B,SAAS8D,SAAU/1B,MAAOG,EAAQ1F,EAAKw3B,SAASjyB,OAAQ81B,UAAU,GAGtG,CAAErE,KAAMh3B,EAAKw3B,SAAS8D,QAAS/1B,MAAOG,EAAQ1F,EAAKw3B,SAASjyB,OAAQ81B,UAAU,GAGpFr7B,EAAKm7B,WACNn7B,EAAKo7B,mBAAqBjD,EAAG4C,iBAAiBxlC,QACvC,CAAEyhC,KAAM,IAAI94C,EAAK20D,cAAc7yC,EAAKm7B,YAAaE,UAAU,GAG3D,CAAErE,KAAMh3B,EAAKm7B,WAAYE,UAAU,QAI9C,EA5Da6D,CAAuBl/B,GAMxC,GALIm7B,IACAr5C,EAAOq5C,WAAaA,EAAWnE,KAC/Bl1C,EAAOyjB,MAAQ41B,EAAW51B,MAC1BzjB,EAAOu5C,SAAWF,EAAWE,UAE7BngD,EAAGoJ,OAAO0b,EAAK5D,MAAO,CACtB,IAAKgjC,EAAUxE,IA/CO/jD,EA+C0BmpB,EAAK5D,KA7CrD+7B,EAAGhjC,mBAAmBpX,MAAQlH,GAASA,GAASshD,EAAGhjC,mBAAmBF,cAC/D,CAACpe,EAAQ,OAAGmI,GAEhB,CAACd,EAAKiX,mBAAmBpX,KAAMlH,IA2ClCiL,EAAOsa,KAAOgjC,EACVxE,IACA94C,EAAOy4C,iBAAmBK,GAlDtC,IAA8B/jD,EAgF1B,OA3BImpB,EAAKw6B,WACL14C,EAAO04C,SAAWx6B,EAAKw6B,UAEvBx6B,EAAKy6B,sBACL34C,EAAO24C,oBAAsB7/B,EAAYoF,EAAKy6B,sBAE9Cv/C,EAAG8N,YAAYgX,EAAK06B,oBACpB54C,EAAO44C,iBAAmB16B,EAAK06B,iBAAiB/zC,SAEhDqZ,EAAKqL,UACLvpB,EAAOupB,QAAUxF,EAAU7F,EAAKqL,WAEZ,IAApBrL,EAAK26B,aAA2C,IAApB36B,EAAK26B,aACjC74C,EAAO64C,WAAa36B,EAAK26B,YACD,IAApB36B,EAAK26B,YACLyC,EAAK53C,KAAKtH,EAAKghB,kBAAkBC,cAGlB,IAAnBa,EAAKq/B,YAAyC,IAAnBr/B,EAAKq/B,YAChCv9C,EAAOu9C,UAAYr/B,EAAKq/B,gBAEVrgD,IAAdghB,EAAK9d,OACLJ,EAAOI,KAAO8d,EAAK9d,MAEnBk7C,EAAK73C,OAAS,IACdzD,EAAOs7C,KAAOA,GAEXt7C,EAuBX,SAAS05C,EAAWvkB,GAChB,GAAKA,EAGL,OAAO,IAAI/4B,EAAKsiD,SAAS96B,EAAQuR,EAAK1R,OAAQ0R,EAAKqkB,SAEvD,SAAS1gC,EAAY2gC,GACjB,GAAKA,EAGL,OAAOA,EAAM30C,IAAI40C,GA0BrB,SAAS4C,EAAwB7C,GAC7B,OAAOA,EAAM30C,IAAIuyC,GAErB,SAASA,EAAuBn5B,GAC5B,IAAIle,EAAS,IAAI5D,EAAKikD,qBAAqBniC,EAAK8tB,OAOhD,OANI9tB,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBa,EAAgBn6B,EAAKs5B,gBAE5Ct5B,EAAKw5B,aACL13C,EAAO03C,WAAa6E,EAAwBr+B,EAAKw5B,aAE9C13C,EAEX,SAASu8C,EAAwBr+B,GAC7B,OAAOA,EAAKpZ,IAAI8yC,GAEpB,SAASA,EAAuB15B,GAC5B,IAAIle,EAAS,IAAI5D,EAAKgkD,qBAAqBliC,EAAK8tB,OAIhD,OAHI9tB,EAAKs5B,gBACLx3C,EAAOw3C,cAAgBa,EAAgBn6B,EAAKs5B,gBAEzCx3C,EAEX,SAAS07C,EAAWx9B,GAChB,GAAKA,EAGL,OAAO,IAAI9hB,EAAKiiD,SAASyR,EAAc5xC,EAAK1H,KAAMoN,EAAQ1F,EAAKuF,QAcnE,SAASy4B,EAAeh+B,GACpB,IAAKA,EACD,OAEJ,IAAIle,EAAS,CACTm8C,UAAW2T,EAAc5xC,EAAKi+B,WAC9B8C,YAAar7B,EAAQ1F,EAAKk+B,sBAC1BC,qBAAsBz4B,EAAQ1F,EAAKm+B,sBACnCD,qBAAsBx4B,EAAQ1F,EAAKk+B,uBAEvC,IAAKp8C,EAAOo8C,qBACR,MAAM,IAAIjgD,MAAM,sDAEpB,OAAO6D,EAEX,SAASsxD,EAAiBpzC,GACtB,GAAKA,EAAL,CAGA,GAAI9kB,EAAGgI,MAAM8c,GAAO,CAChB,GAAoB,IAAhBA,EAAKza,OACL,MAAO,GAEN,GAAI4yC,EAAG4F,aAAat3C,GAAGuZ,EAAK,IAAK,CAElC,OADYA,EACCpZ,IAAK6iB,GAASu0B,EAAev0B,IAI1C,OADgBzJ,EACCpZ,IAAK8lC,GAAa8Q,EAAW9Q,IAGjD,OAAIyL,EAAG4F,aAAat3C,GAAGuZ,GACjB,CAACg+B,EAAeh+B,IAGhBw9B,EAAWx9B,IAe1B,SAAS09B,EAAoB19B,GACzB,IAAIle,EAAS,IAAI5D,EAAKkkD,kBAAkB18B,EAAQ1F,EAAKuF,QAIrD,OAHIrqB,EAAGoJ,OAAO0b,EAAK5D,QACfta,EAAOsa,KAAOuhC,EAAwB39B,EAAK5D,OAExCta,EAEX,SAAS67C,EAAwB39B,GAC7B,OAAQA,GACJ,KAAKm4B,EAAGyF,sBAAsB7/C,KAC1B,OAAOG,EAAK0/C,sBAAsB7/C,KACtC,KAAKo6C,EAAGyF,sBAAsBC,KAC1B,OAAO3/C,EAAK0/C,sBAAsBC,KACtC,KAAK1F,EAAGyF,sBAAsBE,MAC1B,OAAO5/C,EAAK0/C,sBAAsBE,MAE1C,OAAO5/C,EAAK0/C,sBAAsB7/C,KAQtC,SAASo/C,EAAan9B,GAClB,OAAIA,GAAQm4B,EAAGtkC,WAAWoB,cAEf+K,EAAO,EAEX9hB,EAAK2V,WAAWO,SAE3B,SAASo+C,EAAY37D,GACjB,OAAOA,EAQX,SAAS0mD,EAAoBv9B,EAAM1H,GAE/B,IAAIxW,EAAS,IAAI5D,EAAKokD,kBAAkBtiC,EAAK7pB,KAAMgnD,EAAan9B,EAAK5D,MAAOsJ,EAAQ1F,EAAK0sB,SAASnnB,OAAQvF,EAAK0sB,SAASp0B,IAAMs5C,EAAc5xC,EAAK0sB,SAASp0B,KAAOA,GAIjK,OAHI0H,EAAKy9B,gBACL37C,EAAO27C,cAAgBz9B,EAAKy9B,eAEzB37C,EAQX,SAASo7C,EAAiBrmD,GACtB,IAAIiL,EAAS,IAAI5D,EAAKylB,eAAe9sB,EAAMV,KAAMU,EAAMqjD,QAAU,GAAIiD,EAAatmD,EAAMulB,MAAOsJ,EAAQ7uB,EAAM0uB,OAAQG,EAAQ7uB,EAAMwmD,iBACnI,QAAuBr+C,IAAnBnI,EAAMomD,UAA0BpmD,EAAMomD,SAAS13C,OAAS,EAAG,CAC3D,IAAI03C,EAAW,GACf,IAAK,IAAIoW,KAASx8D,EAAMomD,SACpBA,EAASz3C,KAAK03C,EAAiBmW,IAEnCvxD,EAAOm7C,SAAWA,EAEtB,OAAOn7C,EAEX,SAAS+jB,EAAU7F,GACf,IAAIle,EAAS,CAAEoL,MAAO8S,EAAK9S,MAAOme,QAASrL,EAAKqL,SAIhD,OAHIrL,EAAK/S,YACLnL,EAAOmL,UAAY+S,EAAK/S,WAErBnL,EAQX,MAAMwxD,EAAc,IAAIj0D,IASxB,SAASk0D,EAAiBvzC,GACtB,GAAIA,QACA,OAEJ,IAAIle,EAASwxD,EAAY78D,IAAIupB,GAC7B,GAAIle,EACA,OAAOA,EAEX,IAAIwlC,EAAQtnB,EAAKtQ,MAAM,KACvB5N,EAAS5D,EAAK0mB,eAAeC,MAC7B,IAAK,IAAImN,KAAQsV,EACbxlC,EAASA,EAAO8O,OAAOohB,GAE3B,OAAOlwB,EA8BX,SAAS8kB,EAAW5G,GAChB,IAAKA,EACD,OAEJ,IAAIle,EAAS,IAAI2vD,EAAmB1jB,QAAQroB,EAAQ1F,EAAKuF,QAOzD,OANIvF,EAAKqL,UACLvpB,EAAOupB,QAAUxF,EAAU7F,EAAKqL,eAElBrsB,IAAdghB,EAAK9d,MAAoC,OAAd8d,EAAK9d,OAChCJ,EAAOI,KAAO8d,EAAK9d,MAEhBJ,EAQX,SAAS4mB,EAAgB1I,GACrB,IAAKA,EACD,OAEJ,IAAIle,EAAS,IAAI5D,EAAKuiD,cAyBtB,OAxBIzgC,EAAKkW,gBACLlW,EAAKkW,gBAAgBtuB,QAAQoR,IACrBm/B,EAAGsE,WAAWh2C,GAAGuS,GACjBlX,EAAOohD,WAAW0O,EAAc54C,EAAOV,KAAMU,EAAOiF,SAE/Ck6B,EAAGwE,WAAWl2C,GAAGuS,GACtBlX,EAAOshD,WAAWwO,EAAc54C,EAAO4jC,QAASgV,EAAc54C,EAAO0jC,QAAS1jC,EAAOiF,SAEhFk6B,EAAG0E,WAAWp2C,GAAGuS,GACtBlX,EAAOuhD,WAAWuO,EAAc54C,EAAOV,KAAMU,EAAOiF,SAE/Ck6B,EAAG/gB,iBAAiB3wB,GAAGuS,GAC5BlX,EAAOtB,IAAIoxD,EAAc54C,EAAOxC,aAAa8B,KAAMsC,EAAY5B,EAAOyB,QAGtExS,QAAQ9K,MAAM,4CAA4CW,KAAKsE,UAAU4W,OAAQha,EAAW,MAI/FghB,EAAKgU,SACV19B,OAAOqR,KAAKqY,EAAKgU,SAASpsB,QAAQzQ,IAC9B2K,EAAOtB,IAAIoxD,EAAcz6D,GAAMyjB,EAAYoF,EAAKgU,QAAQ78B,OAGzD2K,EAEX,SAAS6nB,EAAe3J,GACpB,IAAIuF,EAAQG,EAAQ1F,EAAKuF,OACrB3P,EAASoK,EAAKpK,OAASmH,EAAMiD,EAAKpK,aAAU5W,EAE5CyqB,EAAO,IAAIioC,EAAuB3jB,QAAQxoB,EAAO3P,GAOrD,YANqB5W,IAAjBghB,EAAKgzC,UACLvpC,EAAKupC,QAAUhzC,EAAKgzC,cAENh0D,IAAdghB,EAAK9d,MAAoC,OAAd8d,EAAK9d,OAChCunB,EAAKvnB,KAAO8d,EAAK9d,MAEdunB,EAQX,SAAS+pC,EAAQ/d,GACb,OAAO,IAAIv3C,EAAKsX,MAAMigC,EAAMuL,IAAKvL,EAAMwL,MAAOxL,EAAMyL,KAAMzL,EAAM0L,OAEpE,SAAS1B,EAAmBgU,GACxB,OAAO,IAAIv1D,EAAKkiD,iBAAiB16B,EAAQ+tC,EAAGluC,OAAQiuC,EAAQC,EAAGhe,QAQnE,SAASiK,EAAoBgU,GACzB,IAAIC,EAAe,IAAIz1D,EAAKmiD,kBAAkBqT,EAAG5lB,OAKjD,OAJA6lB,EAAalZ,oBAAsB7/B,EAAY84C,EAAGjZ,qBAC9CiZ,EAAGlc,WACHmc,EAAanc,SAAWgE,EAAWkY,EAAGlc,WAEnCmc,EAQX,SAAS7T,EAAmB1jC,GACxB,GAAIA,EACA,OAAQA,GACJ,KAAK+7B,EAAG4H,iBAAiBC,QACrB,OAAO9hD,EAAK6hD,iBAAiBC,QACjC,KAAK7H,EAAG4H,iBAAiBE,QACrB,OAAO/hD,EAAK6hD,iBAAiBE,QACjC,KAAK9H,EAAG4H,iBAAiBG,OACrB,OAAOhiD,EAAK6hD,iBAAiBG,QAK7C,SAASP,EAAejpD,GACpB,OAAO,IAAIwH,EAAKoiD,aAAa5pD,EAAEkpD,UAAWlpD,EAAEmpD,QAASC,EAAmBppD,EAAE0lB,OAQ9E,SAASw3C,EAAiBvW,GACtB,OAAO,IAAIn/C,EAAKskD,eAAe98B,EAAQ23B,EAAe93B,OAAQ83B,EAAesG,OAASiQ,EAAiBvW,EAAesG,aAAU3kD,GAYpI,OArLAs0D,EAAY9yD,IAAI23C,EAAGvzB,eAAeC,MAAO3mB,EAAK0mB,eAAeC,OAC7DyuC,EAAY9yD,IAAI23C,EAAGvzB,eAAeE,SAAU5mB,EAAK0mB,eAAeE,UAChEwuC,EAAY9yD,IAAI23C,EAAGvzB,eAAeG,SAAU7mB,EAAK0mB,eAAeG,UAChEuuC,EAAY9yD,IAAI23C,EAAGvzB,eAAeI,gBAAiB9mB,EAAK0mB,eAAeI,iBACvEsuC,EAAY9yD,IAAI23C,EAAGvzB,eAAeK,eAAgB/mB,EAAK0mB,eAAeK,gBACtEquC,EAAY9yD,IAAI23C,EAAGvzB,eAAeM,gBAAiBhnB,EAAK0mB,eAAeM,iBACvEouC,EAAY9yD,IAAI23C,EAAGvzB,eAAeO,OAAQjnB,EAAK0mB,eAAeO,QAC9DmuC,EAAY9yD,IAAI23C,EAAGvzB,eAAeQ,sBAAuBlnB,EAAK0mB,eAAeQ,uBA8KtE,CACHrI,QACAmX,gBACAgoB,eACAx2B,UACAmuC,SAzkBJ,SAAkBh9D,GACd,OAAOA,EAAM+P,IAAI/P,GAAS6uB,EAAQ7uB,KAykBlCixB,aACAi0B,uBACAoW,kBACAxxC,QArgBJ,SAAiBwxB,GACb,GAAKA,EAGL,OAAO,IAAIj0C,EAAK+jD,MAzDpB,SAAwBprD,GACpB,GAAIqE,EAAGsC,OAAO3G,GACV,OAAO,IAAIqH,EAAKi1D,eAAet8D,GAE9B,GAAIo8D,EAAUxsD,GAAG5P,GAAQ,CAE1B,OADa,IAAIqH,EAAKi1D,gBACRW,gBAAgBj9D,EAAMA,MAAOA,EAAM06C,UAEhD,GAAI1oC,MAAMC,QAAQjS,GAAQ,CAC3B,IAAIiL,EAAS,GACb,IAAK,IAAIU,KAAW3L,EAAO,CACvB,IAAImpB,EAAO,IAAI9hB,EAAKi1D,eAChBF,EAAUxsD,GAAGjE,GACbwd,EAAK8zC,gBAAgBtxD,EAAQ3L,MAAO2L,EAAQ+uC,UAG5CvxB,EAAK+zC,eAAevxD,GAExBV,EAAO0D,KAAKwa,GAEhB,OAAOle,EAEN,CACD,IAAIA,EACJ,OAAQjL,EAAMulB,MACV,KAAK+7B,EAAGx5B,WAAWC,SACf,OAAO,IAAI1gB,EAAKi1D,eAAet8D,EAAMA,OACzC,KAAKshD,EAAGx5B,WAAWE,UAGf,OAFA/c,EAAS,IAAI5D,EAAKi1D,eAClBrxD,EAAOkyD,WAAWn9D,EAAMA,OACjBiL,EACX,QAGI,OAFAA,EAAS,IAAI5D,EAAKi1D,eAClBrxD,EAAOkyD,WAAW,iDAAiDn9D,EAAMulB,MAClEta,IAuBGy8C,CAAepM,EAAMmM,UAAW54B,EAAQysB,EAAM5sB,SAkgBpE5F,mBAhgBJ,SAA4B7d,GACxB,IAAKA,EACD,OAEJ,GAAI+G,MAAMC,QAAQhH,GAAS,CAEvB,OADYA,EACC8E,IAAIsZ,GAErB,IAAIqd,EAAOz7B,EACX,OAAO,IAAI5D,EAAK6jD,eAAexkB,EAAKge,MAAM30C,IAAIsZ,GAAmBqd,EAAK0hB,eAwftE/+B,mBACAs7B,aACA5gC,cACA2G,gBAtYJ,SAAyBvB,GACrB,IAAKA,EACD,OAEJ,IAAIle,EAAS,IAAI5D,EAAK+1D,cAkBtB,OAjBI/4D,EAAGoJ,OAAO0b,EAAKq5B,iBACfv3C,EAAOu3C,gBAAkBr5B,EAAKq5B,gBAI9Bv3C,EAAOu3C,gBAAkB,EAEzBn+C,EAAGoJ,OAAO0b,EAAKo5B,iBACft3C,EAAOs3C,gBAAkBp5B,EAAKo5B,gBAI9Bt3C,EAAOs3C,gBAAkB,EAEzBp5B,EAAKi5B,aACLn3C,EAAOm3C,WAAamF,EAAwBp+B,EAAKi5B,aAE9Cn3C,GAiXPs8C,0BACAjF,yBACAkF,0BACA3E,yBACAwa,oBAtVJ,SAA6Bl0C,GACzB,GAAKA,EAGL,OAAOozC,EAAiBpzC,IAmVxBiC,mBAjVJ,SAA4BjC,GACxB,GAAKA,EAGL,OAAOozC,EAAiBpzC,IA8UxBw9B,aACA/6B,aAtSJ,SAAsB3L,GAClB,GAAKA,EAGL,OAAOA,EAAOlQ,IAAI8lC,GAAY8Q,EAAW9Q,KAmSzC1pB,qBAjSJ,SAA8BlM,GAC1B,GAAKA,EAGL,OAAOA,EAAOlQ,IAAI82C,IA8RlBA,sBACAC,0BACAR,eACAqV,cACAO,aA9PJ,SAAsBxX,GAClB,GAAIA,QAGJ,OAAOA,EAAM30C,IAAI4rD,IA2PjB3uC,qBA/QJ,SAA8B/M,EAAQwB,GAClC,GAAKxB,EAGL,OAAOA,EAAOlQ,IAAI02C,GAAeC,EAAoBD,EAAahlC,KA4QlEilC,sBACA35B,kBAnPJ,SAA2B9M,GACvB,GAAIA,QAGJ,OAAOA,EAAOlQ,IAAIs2C,IAgPlBA,mBACAr3B,YACAsuC,WA9NJ,SAAoB5Y,GAChB,GAAKA,EAGL,OAAOA,EAAM30C,IAAIif,IA2NjBC,aA3LJ,SAAsB9F,GAClB,GAAIA,QACA,OAEJ,IAAIle,EAAS,IAAI5D,EAAK8+C,WAAWh9B,EAAK9S,OAgBtC,YAfkBlO,IAAdghB,EAAK5D,OACLta,EAAOsa,KAAOm3C,EAAiBvzC,EAAK5D,OAEpC4D,EAAK2T,cACL7xB,EAAO6xB,YAAcO,EAAclU,EAAK2T,cAExC3T,EAAKiX,OACLn1B,EAAOm1B,KAAOvO,EAAgB1I,EAAKiX,OAEnCjX,EAAKqL,UACLvpB,EAAOupB,QAAUxF,EAAU7F,EAAKqL,eAEXrsB,IAArBghB,EAAK0jC,cACL5hD,EAAO4hD,YAAc1jC,EAAK0jC,aAEvB5hD,GAwKPyxD,mBACArtC,kBAnMJ,SAA2Bq1B,GACvB,GAAIA,QAGJ,OAAOA,EAAM30C,IAAIwV,GAAQm3C,EAAiBn3C,KAgM1CwK,aACAJ,aA5JJ,SAAsB+0B,GAClB,GAAKA,EAGL,OAAOA,EAAM30C,IAAK8f,GAAaE,EAAWF,KAyJ1CgC,kBACAiB,iBACAJ,gBA7GJ,SAAyBgyB,GACrB,GAAKA,EAGL,OAAOA,EAAM30C,IAAI+iB,IA0GjBm2B,qBACAH,iBACA5J,gBAhEJ,SAAyBqe,GACrB,GAAIvrD,MAAMC,QAAQsrD,GACd,OAAOA,EAAcxtD,IAAI+4C,IA+D7B6T,UACA/T,qBACAlK,oBAvGJ,SAA6B8e,GACzB,GAAIxrD,MAAMC,QAAQurD,GACd,OAAOA,EAAiBztD,IAAI64C,IAsGhCC,sBACAhK,qBA3FJ,SAA8B4e,GAC1B,GAAIzrD,MAAMC,QAAQwrD,GACd,OAAOA,EAAmB1tD,IAAI84C,IA0FlCkU,mBACAW,kBA9DJ,SAA2BC,GACvB,IAAK3rD,MAAMC,QAAQ0rD,GACf,MAAO,GAEX,IAAI1yD,EAAS,GACb,IAAK,IAAIyjB,KAASivC,EACd1yD,EAAO0D,KAAKouD,EAAiBruC,IAEjC,OAAOzjB,M,6BCnpBfxL,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IA0DtD1B,EAAQ4kB,QAzDR,MACI,YAAY06C,GACRp2D,KAAKo2D,aAAeA,EACpBp2D,KAAKqO,aAAU1N,EACfX,KAAKq2D,uBAAoB11D,EACzBX,KAAKs2D,eAAY31D,EACjBX,KAAKooC,UAAOznC,EAEhB,QAAQynC,EAAMmuB,EAAQv2D,KAAKo2D,cAsBvB,OArBAp2D,KAAKooC,KAAOA,EACRmuB,GAAS,GACTv2D,KAAKw2D,gBAEJx2D,KAAKq2D,oBACNr2D,KAAKq2D,kBAAoB,IAAI7tD,QAASzC,IAClC/F,KAAKs2D,UAAYvwD,IAClBhB,KAAK,KACJ/E,KAAKq2D,uBAAoB11D,EACzBX,KAAKs2D,eAAY31D,EACjB,IAAI8C,EAASzD,KAAKooC,OAElB,OADApoC,KAAKooC,UAAOznC,EACL8C,MAGX8yD,GAAS,QAAsB,IAAjBv2D,KAAKqO,WACnBrO,KAAKqO,QAAUR,WAAW,KACtB7N,KAAKqO,aAAU1N,EACfX,KAAKs2D,eAAU31D,IAChB41D,GAAS,EAAIA,EAAQv2D,KAAKo2D,eAE1Bp2D,KAAKq2D,kBAEhB,gBACI,IAAKr2D,KAAKq2D,kBACN,OAEJr2D,KAAKw2D,gBACL,IAAI/yD,EAASzD,KAAKooC,OAIlB,OAHApoC,KAAKq2D,uBAAoB11D,EACzBX,KAAKs2D,eAAY31D,EACjBX,KAAKooC,UAAOznC,EACL8C,EAEX,cACI,YAAwB,IAAjBzD,KAAKqO,QAEhB,SACIrO,KAAKw2D,gBACLx2D,KAAKq2D,uBAAoB11D,EAE7B,qBACyB,IAAjBX,KAAKqO,UACLP,aAAa9N,KAAKqO,SAClBrO,KAAKqO,aAAU1N,M,6BCtD3B1I,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3C5P,EAAK,EAAQ,IAsEnB/F,EAAQ88B,aArER,MACI,YAAY/b,EAAS0yB,GACjBvqC,KAAK6X,QAAUA,EACf7X,KAAKuqC,OAASA,EACdvqC,KAAKy2D,UAAY,EACjBz2D,KAAK8K,YAAc9K,KAAK6X,QAAQlQ,WAAW8E,EAAiCi8C,iBAAiB3sD,KAAMiE,KAAKuqC,OAAS/xC,IAC7G,OAAQA,EAAMulB,MACV,IAAK,QACD/d,KAAK02D,MAAMl+D,GACX,MACJ,IAAK,SACDwH,KAAK+tD,OAAOv1D,GACZ,MACJ,IAAK,MACDwH,KAAK+zB,UAKrB,MAAMjwB,GACF,IAAIuqC,EAAWvqC,EAAO6yD,YAAcxiD,EAASyiD,iBAAiBC,aAAe1iD,EAASyiD,iBAAiBE,OACvG3iD,EAAS/c,OAAO02D,aAAa,CAAEzf,WAAUsoB,YAAa7yD,EAAO6yD,YAAa9nD,MAAO/K,EAAO+K,OAASkoD,MAAOC,EAAUC,KAC9Gj3D,KAAKk3D,UAAYF,EACjBh3D,KAAKm3D,eAAkCx2D,IAAtBmD,EAAOszD,WACxBp3D,KAAKq3D,mBAAqBJ,EAC1Bj3D,KAAKq3D,mBAAmBzuD,wBAAwB,KAC5C5I,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCm8C,mCAAmC7sD,KAAM,CAAE6I,MAAO5E,KAAKuqC,WAE1HvqC,KAAK+tD,OAAOjqD,GACL,IAAI0E,QAAQ,CAACzC,EAASD,KACzB9F,KAAKqtB,SAAWtnB,EAChB/F,KAAKstB,QAAUxnB,MAI3B,OAAOhC,GACH,GAAI9D,KAAKm3D,WAAat6D,EAAGsC,OAAO2E,EAAOhE,SACnCE,KAAKk3D,UAAUnJ,OAAO,CAAEjuD,QAASgE,EAAOhE,eAEvC,GAAIjD,EAAGoJ,OAAOnC,EAAOszD,YAAa,CACnC,IAAIA,EAAalmD,KAAKsuB,IAAI,EAAGtuB,KAAKosB,IAAIx5B,EAAOszD,WAAY,MACrDE,EAAQpmD,KAAKsuB,IAAI,EAAG43B,EAAap3D,KAAKy2D,WAC1Cz2D,KAAKk3D,UAAUnJ,OAAO,CAAEjuD,QAASgE,EAAOhE,QAASy3D,UAAWD,IAC5Dt3D,KAAKy2D,WAAaa,GAG1B,SACQt3D,KAAK8K,cACL9K,KAAK8K,YAAYhD,UACjB9H,KAAK8K,iBAAcnK,GAEnBX,KAAKstB,UACLttB,KAAKstB,UACLttB,KAAKqtB,cAAW1sB,EAChBX,KAAKstB,aAAU3sB,GAGvB,OACQX,KAAK8K,cACL9K,KAAK8K,YAAYhD,UACjB9H,KAAK8K,iBAAcnK,GAEnBX,KAAKqtB,WACLrtB,KAAKqtB,WACLrtB,KAAKqtB,cAAW1sB,EAChBX,KAAKstB,aAAU3sB,M,6BCrE3B1I,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3Ci9C,EAAW,EAAQ,IACzB,SAASpyC,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,MAAM4xD,UAA8BhB,EAASxqC,oBACzC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCg7C,sBAAsB1rD,MAEzE,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,kBAAkBpG,qBAAsB,EACpF,IAAI69C,EAAwBlgD,EAAOA,EAAOyI,EAAa,gBAAiB,kBACxEy3C,EAAsB79C,qBAAsB,EAC5C69C,EAAsB/zC,aAAc,EAExC,WAAW/J,EAAcnB,GACrB,IAAKxW,EAAI6d,GAAW5f,KAAKy3D,gBAAgBl/C,EAAkBmB,EAAag9B,wBACnE30C,GAAO6d,GAGZ5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIA,EAAIuW,gBAAiBsH,IAE5D,yBAAyBA,GACrB,MAAMN,EAAW,CACbu3B,sBAAuB,CAACh+B,EAAUuI,EAAUxc,KACxC,MAAMmU,EAAS/Y,KAAK6X,QACdg/B,EAAwB,CAACh+B,EAAUuI,EAAUxc,IACxCmU,EAAO7Q,YAAYuE,EAAiCg7C,sBAAsB1rD,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBsH,mBAAqB9kB,IAClOia,EAAOwI,iBAAiB9U,EAAiCg7C,sBAAsB1rD,KAAM+C,GAC9E0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWw9B,sBACZx9B,EAAWw9B,sBAAsBh+B,EAAUuI,EAAUxc,EAAOiyC,GAC5DA,EAAsBh+B,EAAUuI,EAAUxc,KAGxD,MAAO,CAACuP,EAASiE,UAAUw+B,+BAA+Bh3B,EAAQrH,iBAAkB+G,GAAWA,IAGvGxoB,EAAQ4zD,sBAAwBA,G,6BC9ChCzyD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAuDjD3V,EAAQ00B,qBAtDR,MACI,YAAY3T,GACR7X,KAAK6X,QAAUA,EAEnB,uBAAuB6B,GACnBA,EAAaT,UAAYS,EAAaT,WAAa,GACnDS,EAAaT,UAAU6yC,eAAgB,EAE3C,aACI,IAAI/yC,EAAS/Y,KAAK6X,QAClBkB,EAAOlQ,UAAU4D,EAAiCq7C,qBAAqB/rD,KAAM,CAAC+H,EAAQc,KAClF,IAAIknD,EAAiBhoD,IACjB,IAAIL,EAAS,GACb,IAAK,IAAIke,KAAQ7d,EAAOo5C,MAAO,CAC3B,IAAIz+B,OAA6B,IAAlBkD,EAAK+1C,UAAyC,OAAlB/1C,EAAK+1C,SAAoB13D,KAAK6X,QAAQyE,uBAAuBoC,MAAMiD,EAAK+1C,eAAY/2D,EAC/H8C,EAAO0D,KAAKnH,KAAK0sB,iBAAiBjO,EAA2B,OAAjBkD,EAAKgK,QAAmBhK,EAAKgK,aAAUhrB,IAEvF,OAAO8C,GAEP4V,EAAaN,EAAOK,cAAcC,WAAWJ,UACjD,OAAOI,GAAcA,EAAWyyC,cAC1BzyC,EAAWyyC,cAAchoD,EAAQc,EAAOknD,GACxCA,EAAchoD,KAG5B,iBAAiB2a,EAAUkN,GACvB,IAAIloB,EAAS,KACb,GAAIkoB,EAAS,CACT,IAAInb,EAAQmb,EAAQ8P,YAAY,KAChC,IAAe,IAAXjrB,EACA/M,EAAS0Q,EAAS8E,UAAUyT,sBAAiB/rB,EAAW8d,GAAUrmB,IAAIuzB,OAErE,CACD,IAAIjJ,EAASvO,EAAS8E,UAAUyT,iBAAiBf,EAAQna,OAAO,EAAGhB,GAAQiO,GACvEiE,IACAjf,EAASif,EAAOtqB,IAAIuzB,EAAQna,OAAOhB,EAAQ,UAIlD,CACD,IAAIkS,EAASvO,EAAS8E,UAAUyT,sBAAiB/rB,EAAW8d,GAC5Dhb,EAAS,GACT,IAAK,IAAI3K,KAAOb,OAAOqR,KAAKoZ,GACpBA,EAAO7a,IAAI/O,KACX2K,EAAO3K,GAAO4pB,EAAOtqB,IAAIU,IAIrC,OAAK2K,GACM,Q,6BCpDnBxL,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3Ci9C,EAAW,EAAQ,IACzB,SAASpyC,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,MAAM6xD,UAA8BjB,EAASxqC,oBACzC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC86C,sBAAsBxrD,MAEzE,uBAAuBgkB,GACnB,IAAI43C,EAAwBrgD,EAAOA,EAAOyI,EAAa,gBAAiB,kBACxE43C,EAAsBh+C,qBAAsB,EAC5Cg+C,EAAsBl0C,aAAc,EAExC,WAAW/J,EAAcnB,GACrB,IAAKxW,EAAI6d,GAAW5f,KAAKy3D,gBAAgBl/C,EAAkBmB,EAAa48B,wBACnEv0C,GAAO6d,GAGZ5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIA,EAAIuW,gBAAiBsH,IAE5D,yBAAyBA,GACrB,MAAMN,EAAW,CACbm3B,sBAAuB,CAAC59B,EAAUuI,EAAUxc,KACxC,MAAMmU,EAAS/Y,KAAK6X,QACd4+B,EAAwB,CAAC59B,EAAUuI,EAAUxc,IACxCmU,EAAO7Q,YAAYuE,EAAiC86C,sBAAsBxrD,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBsH,mBAAqB9kB,IAClOia,EAAOwI,iBAAiB9U,EAAiC86C,sBAAsBxrD,KAAM+C,GAC9E0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWo9B,sBACZp9B,EAAWo9B,sBAAsB59B,EAAUuI,EAAUxc,EAAO6xC,GAC5DA,EAAsB59B,EAAUuI,EAAUxc,KAGxD,MAAO,CAACuP,EAASiE,UAAUo+B,+BAA+B52B,EAAQrH,iBAAkB+G,GAAWA,IAGvGxoB,EAAQ6zD,sBAAwBA,G,6BC7ChC1yD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3Ci9C,EAAW,EAAQ,IACzB,SAASpyC,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,MAAM8xD,UAA6BlB,EAASxqC,oBACxC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiCu7C,qBAAqBjsD,MAExE,uBAAuBgkB,GACnBzI,EAAOA,EAAOyI,EAAa,gBAAiB,iBAAiBpG,qBAAsB,EAEvF,WAAWD,EAAcnB,GACrB,IAAKxW,EAAI6d,GAAW5f,KAAKy3D,gBAAgBl/C,EAAkBmB,EAAak+C,eACnE71D,GAAO6d,GAGZ5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIA,EAAIuW,gBAAiBsH,IAE5D,yBAAyBA,GACrB,MAAMN,EAAW,CACb63B,0BAA2B,CAACC,EAAOnsC,EAASrG,KACxC,MAAMmU,EAAS/Y,KAAK6X,QACds/B,EAA4B,CAACC,EAAOnsC,EAASrG,KAC/C,MAAMizD,EAAgB,CAClBzgB,QACAj/B,aAAcY,EAAOQ,uBAAuB6N,yBAAyBnc,EAAQ4N,UAC7EqO,MAAOnO,EAAOQ,uBAAuB8N,QAAQpc,EAAQic,QAEzD,OAAOnO,EAAO7Q,YAAYuE,EAAiCw7C,yBAAyBlsD,KAAM87D,EAAejzD,GAAOG,KAAK/E,KAAKq3C,qBAAqBt+C,KAAKiH,MAAQlB,IACxJia,EAAOwI,iBAAiB9U,EAAiCw7C,yBAAyBlsD,KAAM+C,GACjF0J,QAAQzC,QAAQ,SAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW89B,0BACZ99B,EAAW89B,0BAA0BC,EAAOnsC,EAASrG,EAAOuyC,GAC5DA,EAA0BC,EAAOnsC,EAASrG,IAEpDqyC,sBAAuB,CAACp+B,EAAUjU,KAC9B,MAAMmU,EAAS/Y,KAAK6X,QACdo/B,EAAwB,CAACp+B,EAAUjU,KACrC,MAAMizD,EAAgB,CAClB1/C,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,IAEzE,OAAOE,EAAO7Q,YAAYuE,EAAiCu7C,qBAAqBjsD,KAAM87D,EAAejzD,GAAOG,KAAK/E,KAAKk3C,oBAAoBn+C,KAAKiH,MAAQlB,IACnJia,EAAOwI,iBAAiB9U,EAAiCw7C,yBAAyBlsD,KAAM+C,GACjF0J,QAAQzC,QAAQ,SAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW49B,sBACZ59B,EAAW49B,sBAAsBp+B,EAAUjU,EAAOqyC,GAClDA,EAAsBp+B,EAAUjU,KAG9C,MAAO,CAACuP,EAASiE,UAAU4+B,sBAAsBp3B,EAAQrH,iBAAkB+G,GAAWA,GAE1F,QAAQ83B,GACJ,OAAO,IAAIjjC,EAASgD,MAAMigC,EAAMuL,IAAKvL,EAAMwL,MAAOxL,EAAMyL,KAAMzL,EAAM0L,OAExE,oBAAoBkT,GAChB,OAAIxrD,MAAMC,QAAQurD,GACPA,EAAiBztD,IAAI6sD,GACjB,IAAIjhD,EAAS4tC,iBAAiB/hD,KAAK6X,QAAQyE,uBAAuB+K,QAAQ+tC,EAAGluC,OAAQlnB,KAAKm1D,QAAQC,EAAGhe,SAG7G,GAEX,qBAAqB6e,GACjB,OAAIzrD,MAAMC,QAAQwrD,GACPA,EAAmB1tD,IAAI8sD,IAC1B,IAAIC,EAAe,IAAInhD,EAAS6tC,kBAAkBqT,EAAG5lB,OAGrD,OAFA6lB,EAAalZ,oBAAsBp8C,KAAK6X,QAAQyE,uBAAuBC,YAAY84C,EAAGjZ,qBACtFkZ,EAAanc,SAAWn5C,KAAK6X,QAAQyE,uBAAuB6gC,WAAWkY,EAAGlc,UACnEmc,IAGR,IAGfx+D,EAAQ8zD,qBAAuBA,G,6BCtF/B3yD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM+b,EAAO,EAAQ,IACfJ,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GACjD,SAASqrD,EAAOvgD,EAAQze,GACpB,QAAe,IAAXye,EAGJ,OAAOA,EAAOze,GAElB,SAASi/D,EAAUhS,EAAMC,GACrB,OAAOD,EAAKtZ,OAAOtoC,GAAW6hD,EAAMz0C,QAAQpN,GAAW,GAE3DrN,EAAQihE,UAAYA,EAuHpBjhE,EAAQ+zD,wBAtHR,MACI,YAAYhzC,GACR7X,KAAK6X,QAAUA,EACf7X,KAAKyrB,WAAa,IAAIzqB,IAE1B,eACI,OAAOyL,EAAiCm7C,sCAAsC7rD,KAElF,qBAAqB+H,GACjB,IAAIgxB,EAAU3gB,EAAS8E,UAAUwa,iBACjCzzB,KAAKg4D,sBAAsBljC,GAEvBhxB,EAAO2vB,sBADK,IAAZqB,EAC0B,KAGAA,EAAQvsB,IAAIwsB,GAAU/0B,KAAKi4D,WAAWljC,IAGxE,sBAAsBmjC,GAClBl4D,KAAKm4D,gBAAkBD,EAE3B,uBAAuBx+C,GACnBA,EAAaT,UAAYS,EAAaT,WAAa,GACnDS,EAAaT,UAAUwa,kBAAmB,EAE9C,WAAW/Z,GACP,IAAIX,EAAS/Y,KAAK6X,QAClBkB,EAAOlQ,UAAU4D,EAAiCk7C,wBAAwB5rD,KAAO6I,IAC7E,IAAI6uB,EAAmB,KACnB,IAAIqB,EAAU3gB,EAAS8E,UAAUwa,iBACjC,YAAgB,IAAZqB,EACO,KAEEA,EAAQvsB,IAAKwsB,GACf/0B,KAAKi4D,WAAWljC,KAI3B1b,EAAaN,EAAOK,cAAcC,WAAWJ,UACjD,OAAOI,GAAcA,EAAWoa,iBAC1Bpa,EAAWoa,iBAAiB7uB,EAAO6uB,GACnCA,MAEV,IACI1xB,EADAvJ,EAAQs/D,EAAOA,EAAOA,EAAOp+C,EAAc,aAAc,oBAAqB,uBAE7D,iBAAVlhB,EACPuJ,EAAKvJ,GAEU,IAAVA,IACLuJ,EAAKwS,EAAKwF,gBAEVhY,GACA/B,KAAKyX,SAASzX,KAAK2X,SAAU,CACzB5V,GAAIA,EACJuW,qBAAiB3X,IAI7B,iBAAiBu3D,GACb,GAAIl4D,KAAKm4D,iBAAmBD,EAAyB,CACjD,MAAME,EAAUL,EAAU/3D,KAAKm4D,gBAAiBD,GAC1CG,EAAQN,EAAUG,EAAyBl4D,KAAKm4D,kBAClDE,EAAMnxD,OAAS,GAAKkxD,EAAQlxD,OAAS,IACrClH,KAAKs4D,YAAYD,EAAOD,QAGvBp4D,KAAKm4D,gBACVn4D,KAAKs4D,YAAY,GAAIt4D,KAAKm4D,iBAErBD,GACLl4D,KAAKs4D,YAAYJ,EAAyB,IAGlD,YAAYK,EAAcC,GACtB,IAAI10D,EAAS,CACTmE,MAAO,CACHowD,MAAOE,EAAahwD,IAAIwsB,GAAU/0B,KAAKi4D,WAAWljC,IAClDqjC,QAASI,EAAejwD,IAAIwsB,GAAU/0B,KAAKi4D,WAAWljC,MAG9D/0B,KAAK6X,QAAQxQ,iBAAiBoF,EAAiCm7C,sCAAsC7rD,KAAM+H,GAE/G,SAASxB,EAAUuB,GACf,IAAI9B,EAAK8B,EAAK9B,GACVgX,EAAS/Y,KAAK6X,QACdoH,EAAa9K,EAAS8E,UAAUgzC,4BAA6BhkD,IAC7D,IAAIwwD,EAA6BxwD,IAC7BjI,KAAKs4D,YAAYrwD,EAAMowD,MAAOpwD,EAAMmwD,UAEpC/+C,EAAaN,EAAOK,cAAcC,WAAWJ,UACjDI,GAAcA,EAAWo/C,0BACnBp/C,EAAWo/C,0BAA0BxwD,EAAOwwD,GAC5CA,EAA0BxwD,KAEpCjI,KAAKyrB,WAAWtpB,IAAIJ,EAAIkd,GACxBjf,KAAK04D,iBAAiBvkD,EAAS8E,UAAUwa,kBAE7C,WAAW1xB,GACP,IAAIkd,EAAajf,KAAKyrB,WAAWrzB,IAAI2J,QAClB,IAAfkd,IAGJjf,KAAKyrB,WAAW/kB,OAAO3E,GACvBkd,EAAWnX,WAEf,UACI,IAAK,IAAImX,KAAcjf,KAAKyrB,WAAWhT,SACnCwG,EAAWnX,UAEf9H,KAAKyrB,WAAW7S,QAEpB,WAAW6T,GACP,YAAwB,IAApBA,EACO,KAEJ,CAAExS,IAAKja,KAAK6X,QAAQ0B,uBAAuBmF,MAAM+N,EAAgBxS,KAAMniB,KAAM20B,EAAgB30B,S,6BCjI5GG,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3Ci9C,EAAW,EAAQ,IACzB,SAASpyC,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,MAAMiyD,UAA4BrB,EAASxqC,oBACvC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC07C,oBAAoBpsD,MAEvE,uBAAuBgkB,GACnB,IAAIR,EAAajI,EAAOA,EAAOyI,EAAa,gBAAiB,gBAC7DR,EAAW5F,qBAAsB,EACjC4F,EAAWo5C,WAAa,IACxBp5C,EAAWq5C,iBAAkB,EAEjC,WAAWl/C,EAAcnB,GACrB,IAAKxW,EAAI6d,GAAW5f,KAAKy3D,gBAAgBl/C,EAAkBmB,EAAa49B,sBACnEv1C,GAAO6d,GAGZ5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIA,EAAIuW,gBAAiBsH,IAE5D,yBAAyBA,GACrB,MAAMN,EAAW,CACbm4B,qBAAsB,CAAC5+B,EAAU5N,EAASrG,KACtC,MAAMmU,EAAS/Y,KAAK6X,QACd4/B,EAAuB,CAAC5+B,EAAU+rB,EAAGhgC,KACvC,MAAMizD,EAAgB,CAClB1/C,aAAcY,EAAOQ,uBAAuB6N,yBAAyBvO,IAEzE,OAAOE,EAAO7Q,YAAYuE,EAAiC07C,oBAAoBpsD,KAAM87D,EAAejzD,GAAOG,KAAK/E,KAAK03C,gBAAgB3+C,KAAKiH,MAAQlB,IAC9Iia,EAAOwI,iBAAiB9U,EAAiC07C,oBAAoBpsD,KAAM+C,GAC5E0J,QAAQzC,QAAQ,SAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAWo+B,qBACZp+B,EAAWo+B,qBAAqB5+B,EAAU5N,EAASrG,EAAO6yC,GAC1DA,EAAqB5+B,EAAU5N,EAASrG,KAGtD,MAAO,CAACuP,EAASiE,UAAUo/B,6BAA6B53B,EAAQrH,iBAAkB+G,GAAWA,GAEjG,mBAAmBvB,GACf,GAAIA,EACA,OAAQA,GACJ,KAAKtR,EAAiCi1C,iBAAiBC,QACnD,OAAOxtC,EAASutC,iBAAiBC,QACrC,KAAKl1C,EAAiCi1C,iBAAiBE,QACnD,OAAOztC,EAASutC,iBAAiBE,QACrC,KAAKn1C,EAAiCi1C,iBAAiBG,OACnD,OAAO1tC,EAASutC,iBAAiBG,QAKjD,gBAAgBkU,GACZ,OAAIvrD,MAAMC,QAAQsrD,GACPA,EAAcxtD,IAAIlQ,GACd,IAAI8b,EAAS8tC,aAAa5pD,EAAEkpD,UAAWlpD,EAAEmpD,QAASxhD,KAAKyhD,mBAAmBppD,EAAE0lB,QAGpF,IAGfjnB,EAAQi0D,oBAAsBA,G,6BCtE9B9yD,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAM2b,EAAW,EAAQ,GACnB1H,EAAmC,EAAQ,GAC3Ci9C,EAAW,EAAQ,IACzB,SAASpyC,EAAOC,EAAQze,GAIpB,YAHoB,IAAhBye,EAAOze,KACPye,EAAOze,GAAO,IAEXye,EAAOze,GAElB,MAAMkyD,UAA2BtB,EAASxqC,oBACtC,YAAYnG,GACRhZ,MAAMgZ,EAAQtM,EAAiC47C,mBAAmBtsD,MAEtE,uBAAuBgkB,GACnB,MAAM84C,EAAqBvhD,EAAOA,EAAOyI,EAAa,gBAAiB,eACvE84C,EAAmBl/C,qBAAsB,EACzCk/C,EAAmBp1C,aAAc,EAErC,WAAW/J,EAAcnB,GACrB,MAAOxW,EAAI6d,GAAW5f,KAAKy3D,gBAAgBl/C,EAAkBmB,EAAao/C,qBACrE/2D,GAAO6d,GAGZ5f,KAAKyX,SAASzX,KAAK2X,SAAU,CAAE5V,GAAIA,EAAIuW,gBAAiBsH,IAE5D,yBAAyBA,GACrB,MAAMN,EAAW,CACb4tC,mBAAoB,CAACr0C,EAAUuI,EAAUxc,KACrC,MAAMmU,EAAS/Y,KAAK6X,QACdq1C,EAAqB,CAACr0C,EAAUuI,EAAUxc,IACrCmU,EAAO7Q,YAAYuE,EAAiC47C,mBAAmBtsD,KAAMgd,EAAOQ,uBAAuB8I,6BAA6BxJ,EAAUuI,GAAWxc,GAAOG,KAAKgU,EAAOuD,uBAAuBu5C,oBAAsB/2D,IAChOia,EAAOwI,iBAAiB9U,EAAiC47C,mBAAmBtsD,KAAM+C,GAC3E0J,QAAQzC,QAAQ,QAGzBsT,EAAaN,EAAOK,cAAcC,WACxC,OAAOA,EAAW6zC,mBACZ7zC,EAAW6zC,mBAAmBr0C,EAAUuI,EAAUxc,EAAOsoD,GACzDA,EAAmBr0C,EAAUuI,EAAUxc,KAGrD,MAAO,CAACuP,EAASiE,UAAU60C,4BAA4BrtC,EAAQrH,iBAAkB+G,GAAWA,IAGpGxoB,EAAQk0D,mBAAqBA,G,cClD7Bj0D,EAAOD,QAAU,SAAUiiE,EAAMC,GAC/B,GAAoB,iBAATD,EACT,MAAM,IAAIj/B,UAAU,qBAgCtB,IA7BA,IA4BIliC,EA5BAiZ,EAAMpM,OAAOs0D,GAGbE,EAAQ,GAKR9mB,IAAW6mB,KAASA,EAAK7mB,SAWzBC,IAAW4mB,KAASA,EAAK5mB,SAIzB8mB,GAAU,EAGVC,EAAQH,GAAiC,iBAAjBA,EAAW,MAAiBA,EAAKG,MAAQ,GAG5DhiE,EAAI,EAAGoU,EAAMsF,EAAI3J,OAAQ/P,EAAIoU,EAAKpU,IAGzC,OAFAS,EAAIiZ,EAAI1Z,IAGR,IAAK,KACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACH8hE,GAAS,KAAOrhE,EAChB,MAEF,IAAK,IACH,GAAIu6C,EAAU,CACZ8mB,GAAS,IACZ,MAGD,IAAK,IACL,IAAK,IACH,GAAI9mB,EAAU,CACZ8mB,GAASrhE,EACZ,MAGD,IAAK,IACH,GAAIu6C,EAAU,CACZ+mB,GAAU,EACbD,GAAS,IACT,MAGD,IAAK,IACH,GAAI9mB,EAAU,CACZ+mB,GAAU,EACbD,GAAS,IACT,MAGD,IAAK,IACH,GAAIC,EAAS,CACXD,GAAS,IACZ,MAECA,GAAS,KAAOrhE,EAChB,MAEF,IAAK,IAKH,IAFA,IAAIwhE,EAAWvoD,EAAI1Z,EAAI,GACnBkiE,EAAY,EACK,MAAfxoD,EAAI1Z,EAAI,IACZkiE,IACAliE,IAEF,IAAImiE,EAAWzoD,EAAI1Z,EAAI,GAEvB,GAAKi7C,EAKcinB,EAAY,IACV,MAAbD,QAAiCz4D,IAAby4D,KACP,MAAbE,QAAiC34D,IAAb24D,IAIxBL,GAAS,oBACT9hE,KAGA8hE,GAAS,aAbXA,GAAS,KAgBX,MAEF,QACEA,GAASrhE,EAUb,OAJKuhE,IAAWA,EAAM5nD,QAAQ,OAC5B0nD,EAAQ,IAAMA,EAAQ,KAGjB,IAAIM,OAAON,EAAOE,K,6BChI3BlhE,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IACtD,MAAMu5C,EAAe,EAAQ,IA8B7Bj7C,EAAQi8C,2BA7BR,MACI,YAAYj7C,EAAM86C,GACd5yC,KAAKlI,KAAOA,EACZkI,KAAK4yC,IAAMA,EACX5yC,KAAKs1B,YAAc,IAAIt0B,IACvBhB,KAAKw5D,UAAY,IAAIznB,EAAalN,qBAEtC,UACI7kC,KAAKw5D,UAAU1xD,UAEnB,IAAImS,GACA,MAAMqb,EAAct1B,KAAKs1B,YAAYl9B,IAAI6hB,GACzC,OAASqb,EAAcA,EAAYA,YAAc,GAErD,IAAIrb,EAAKqb,GACL,MAAM8b,EAAWpxC,KAAKs1B,YAAYl9B,IAAI6hB,GACtC,GAAIm3B,EACAA,EAAS9b,YAAcA,MAEtB,CACD,MAAMmkC,EAAmB,IAAIC,EAAuBz/C,EAAKqb,EAAat1B,KAAKlI,KAAMkI,KAAK4yC,KACtF5yC,KAAKs1B,YAAYnzB,IAAI8X,EAAKw/C,GAC1Bz5D,KAAKw5D,UAAUryD,KAAK4qC,EAAal4C,WAAWhB,OAAO,KAC/CmH,KAAKs1B,YAAY5uB,OAAOuT,GACxBw/C,EAAiB3xD,gBAMjC,MAAM4xD,EACF,YAAYz/C,EAAKqb,EAAaqkC,EAAO/mB,GACjC5yC,KAAK25D,MAAQA,EACb35D,KAAK4yC,IAAMA,EACX5yC,KAAK45D,SAAW,GAChB55D,KAAKkvB,aAAe,GACpBlvB,KAAKia,IAAMq4B,OAAOhf,IAAIpgB,MAAM+G,GAC5Bja,KAAKs1B,YAAcA,EACnBgd,OAAOzB,OAAOwH,iBAAiB5F,GAASzyC,KAAK65D,qBAAqBpnB,IAEtE,gBAAgBnd,GACZt1B,KAAKkvB,aAAeoG,EACpBt1B,KAAK45D,SAAW55D,KAAK4yC,IAAI/c,cAAcP,GACvCt1B,KAAK85D,qBAET,kBACI,OAAO95D,KAAKkvB,aAEhB,cACI,OAAOlvB,KAAK45D,SAEhB,UACI55D,KAAK45D,SAAW,GAChB55D,KAAK85D,qBAET,qBACI,MAAMrnB,EAAQH,OAAOzB,OAAOuI,SAASp5C,KAAKia,KAC1Cja,KAAK65D,qBAAqBpnB,QAAgB9xC,GAE9C,qBAAqB8xC,GACbA,GAASzyC,KAAKia,IAAIza,aAAeizC,EAAMx4B,IAAIza,YAC3C8yC,OAAOzB,OAAOkpB,gBAAgBtnB,EAAOzyC,KAAK25D,MAAO35D,KAAK45D,WAIlE9iE,EAAQ4iE,uBAAyBA,G,6BCnEjCzhE,OAAOC,eAAepB,EAAS,aAAc,CAAE0B,OAAO,IAKtD,MAAMwhE,EAAqB,EAAQ,IAC7BC,EAAoB,EAAQ,IAC5BC,EAAqB,EAAQ,IAC7BC,EAAqB,EAAQ,IAC7BC,EAAmB,EAAQ,IAC3B19D,EAAa,EAAQ,IAE3B,SAAW29D,GACP,SAASxhE,EAAOg4C,EAAQjxB,EAAU,IAC9B,MAAMizB,EAAM,IAAImnB,EAAmBjgB,0BAC7BnH,EAAM,IAAIonB,EAAmB9b,0BACnC,MAAO,CACHjxB,SAAU,IAAIgtC,EAAkBrpB,eAAeC,GAC/Cz4B,UAAW,IAAI8hD,EAAmBvnB,gBAAgBC,EAAKC,GACvD55B,UAAW,IAAIkhD,EAAmBtiB,gBAAgBjF,EAAKC,EAAKjzB,EAAQyT,SACpEj8B,OAAQ,IAAIgjE,EAAiBnpB,eAGrCopB,EAAexhE,OAASA,EAMxBwhE,EAAextD,QALf,SAAiBgkC,EAAQjxB,EAAU,IAC/B,MAAMhT,EAAW/T,EAAOg4C,EAAQjxB,GAEhC,OADAljB,EAAWE,SAASiQ,QAAQD,GACrBA,GAMXytD,EAAejiE,IAHf,WACI,OAAOsE,EAAWE,SAASxE,OAnBnC,CAsBoBtB,EAAQujE,iBAAmBvjE,EAAQujE,eAAiB","file":"monaco-languageclient.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 48);\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_api_1 = require(\"./vscode-api\");\nconst services_1 = require(\"./services\");\nmodule.exports = vscode_api_1.createVSCodeApi(services_1.Services.get);\n//# sourceMappingURL=vscode-compatibility.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nexports.Disposable = vscode_jsonrpc_1.Disposable;\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\nexports.Event = vscode_jsonrpc_1.Event;\nexports.Emitter = vscode_jsonrpc_1.Emitter;\n__export(require(\"vscode-languageserver-protocol/lib/main\"));\nvar Services;\n(function (Services) {\n    const global = window;\n    const symbol = Symbol('Services');\n    Services.get = () => {\n        const services = global[symbol];\n        if (!services) {\n            throw new Error('Language Client services has not been installed');\n        }\n        return services;\n    };\n    function install(services) {\n        if (global[symbol]) {\n            console.error(new Error('Language Client services has been overridden'));\n        }\n        global[symbol] = services;\n        return vscode_jsonrpc_1.Disposable.create(() => global[symbol] = undefined);\n    }\n    Services.install = install;\n})(Services = exports.Services || (exports.Services = {}));\nfunction isDocumentSelector(selector) {\n    if (!selector || !Array.isArray(selector)) {\n        return false;\n    }\n    return selector.every(value => typeof value === 'string' || vscode_languageserver_protocol_1.DocumentFilter.is(value));\n}\nexports.isDocumentSelector = isDocumentSelector;\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"Invoke\"] = 1] = \"Invoke\";\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"TriggerCharacter\"] = 2] = \"TriggerCharacter\";\n    SignatureHelpTriggerKind[SignatureHelpTriggerKind[\"ContentChange\"] = 3] = \"ContentChange\";\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\n// runtime support\nvar VsCodeDiagnosticSeverity;\n(function (VsCodeDiagnosticSeverity) {\n    VsCodeDiagnosticSeverity[VsCodeDiagnosticSeverity[\"Error\"] = 0] = \"Error\";\n    VsCodeDiagnosticSeverity[VsCodeDiagnosticSeverity[\"Warning\"] = 1] = \"Warning\";\n    VsCodeDiagnosticSeverity[VsCodeDiagnosticSeverity[\"Information\"] = 2] = \"Information\";\n    VsCodeDiagnosticSeverity[VsCodeDiagnosticSeverity[\"Hint\"] = 3] = \"Hint\";\n})(VsCodeDiagnosticSeverity = exports.VsCodeDiagnosticSeverity || (exports.VsCodeDiagnosticSeverity = {}));\nvar DocumentIdentifier;\n(function (DocumentIdentifier) {\n    function is(arg) {\n        return !!arg && ('uri' in arg) && ('languageId' in arg);\n    }\n    DocumentIdentifier.is = is;\n})(DocumentIdentifier = exports.DocumentIdentifier || (exports.DocumentIdentifier = {}));\nvar ConfigurationTarget;\n(function (ConfigurationTarget) {\n    ConfigurationTarget[ConfigurationTarget[\"Global\"] = 1] = \"Global\";\n    ConfigurationTarget[ConfigurationTarget[\"Workspace\"] = 2] = \"Workspace\";\n    ConfigurationTarget[ConfigurationTarget[\"WorkspaceFolder\"] = 3] = \"WorkspaceFolder\";\n})(ConfigurationTarget = exports.ConfigurationTarget || (exports.ConfigurationTarget = {}));\n//# sourceMappingURL=services.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const selector of this._selectors.values()) {\r\n            if (vscode_1.languages.match(selector, document)) {\r\n                return {\r\n                    send: (data) => {\r\n                        this.callback(data);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\r\n                return {\r\n                    send: (event) => {\r\n                        this.callback(event);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((value) => {\r\n            value.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n    getProvider(textDocument) {\r\n        for (const registration of this._registrations.values()) {\r\n            let selector = registration.data.registerOptions.documentSelector;\r\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\r\n                return registration.provider;\r\n            }\r\n        }\r\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        const registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((registration) => {\r\n            registration.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getProviders() {\r\n        const result = [];\r\n        for (const registration of this._registrations.values()) {\r\n            result.push(registration.provider);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true,\r\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] }\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const triggerCharacters = options.triggerCharacters || [];\r\n        const provider = {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const middleware = this._client.clientOptions.middleware;\r\n                const provideCompletionItems = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    const client = this._client;\r\n                    const middleware = this._client.clientOptions.middleware;\r\n                    const resolveCompletionItem = (item, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                            return Promise.resolve(item);\r\n                        });\r\n                    };\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideHover: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideHover = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n        config.contextSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSignatureHelp: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const providerSignatureHelp = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, context, token);\r\n            }\r\n        };\r\n        let disposable;\r\n        if (options.retriggerCharacters === undefined) {\r\n            const triggerCharacters = options.triggerCharacters || [];\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\r\n        }\r\n        else {\r\n            const metaData = {\r\n                triggerCharacters: options.triggerCharacters || [],\r\n                retriggerCharacters: options.retriggerCharacters || []\r\n            };\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\r\n        }\r\n        return [disposable, provider];\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideReferences: (document, position, options, token) => {\r\n                const client = this._client;\r\n                const _providerReferences = (document, position, options, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\r\n                    : _providerReferences(document, position, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentHighlights = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\r\n                    : _provideDocumentHighlights(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentSymbols: (document, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentSymbols = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                        if (data === null) {\r\n                            return undefined;\r\n                        }\r\n                        if (data.length === 0) {\r\n                            return [];\r\n                        }\r\n                        else {\r\n                            let element = data[0];\r\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                            }\r\n                            else {\r\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                            }\r\n                        }\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\r\n                    : _provideDocumentSymbols(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        const provider = {\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                const client = this._client;\r\n                const provideWorkspaceSymbols = (query, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.isPreferredSupport = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                const client = this._client;\r\n                const _provideCodeActions = (document, range, context, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                        if (values === null) {\r\n                            return undefined;\r\n                        }\r\n                        const result = [];\r\n                        for (let item of values) {\r\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                                result.push(client.protocol2CodeConverter.asCommand(item));\r\n                            }\r\n                            else {\r\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                            }\r\n                        }\r\n                        return result;\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\r\n                    : _provideCodeActions(document, range, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\r\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n                : undefined)), provider];\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeLenses: (document, token) => {\r\n                const client = this._client;\r\n                const provideCodeLenses = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    const client = this._client;\r\n                    const resolveCodeLens = (codeLens, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                            return codeLens;\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentFormattingEdits = (document, options, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                let middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                const client = this._client;\r\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        ch: ch,\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        };\r\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                const client = this._client;\r\n                const provideRenameEdits = (document, position, newName, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        newName: newName\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                        return Promise.reject(new Error(error.message));\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    const client = this._client;\r\n                    const prepareRename = (document, position, token) => {\r\n                        let params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            position: client.code2ProtocolConverter.asPosition(position),\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                                return client.protocol2CodeConverter.asRange(result);\r\n                            }\r\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                                return {\r\n                                    range: client.protocol2CodeConverter.asRange(result.range),\r\n                                    placeholder: result.placeholder\r\n                                };\r\n                            }\r\n                            // To cancel the rename vscode API expects a rejected promise.\r\n                            return Promise.reject(new Error(`The element can't be renamed.`));\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                            return Promise.reject(new Error(error.message));\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\r\n        documentLinkCapabilities.dynamicRegistration = true;\r\n        documentLinkCapabilities.tooltipSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentLinks: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentLinks = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    const client = this._client;\r\n                    let resolveDocumentLink = (link, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                            return Promise.resolve(link);\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        const client = this._client;\r\n        const middleware = client.clientOptions.middleware;\r\n        const executeCommand = (command, args) => {\r\n            let params = {\r\n                command,\r\n                arguments: args\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n            });\r\n        };\r\n        if (data.registerOptions.commands) {\r\n            const disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    return middleware.executeCommand\r\n                        ? middleware.executeCommand(command, args, executeCommand)\r\n                        : executeCommand(command, args);\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message, undefined, false);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            clientInfo: {\r\n                name: 'vscode',\r\n                version: vscode_1.version\r\n            },\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        var _a, _b;\r\n        const client = this;\r\n        function didChangeWatchedFile(event) {\r\n            client._fileEvents.push(event);\r\n            client._fileEventDelayer.trigger(() => {\r\n                client.onReady().then(() => {\r\n                    client.resolveConnection().then(connection => {\r\n                        if (client.isConnectionActive()) {\r\n                            client.forceDocumentSync();\r\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\r\n                        }\r\n                        client._fileEvents = [];\r\n                    });\r\n                }, (error) => {\r\n                    client.error(`Notify file events failed.`, error);\r\n                });\r\n            });\r\n        }\r\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\r\n        ((_b = workSpaceMiddleware) === null || _b === void 0 ? void 0 : _b.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware;\r\n        if (middleware.handleDiagnostics) {\r\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    getFeature(request) {\r\n        return this._dynamicFeatures.get(request);\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.versionSupport = false;\r\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\r\n    }\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel or a content modified don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified)) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst services_1 = require(\"./services\");\nexports.Disposable = services_1.Disposable;\nclass DisposableCollection {\n    constructor() {\n        this.disposables = [];\n    }\n    dispose() {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop().dispose();\n        }\n    }\n    push(disposable) {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose() {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    }\n}\nexports.DisposableCollection = DisposableCollection;\n//# sourceMappingURL=disposable.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction asPromise(value) {\r\n    if (value instanceof Promise) {\r\n        return value;\r\n    }\r\n    else if (thenable(value)) {\r\n        return new Promise((resolve, reject) => {\r\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\r\n        });\r\n    }\r\n    else {\r\n        return Promise.resolve(value);\r\n    }\r\n}\r\nexports.asPromise = asPromise;\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n__export(require(\"./disposable\"));\n__export(require(\"./services\"));\n__export(require(\"./connection\"));\n__export(require(\"./monaco-language-client\"));\n__export(require(\"./monaco-commands\"));\n__export(require(\"./console-window\"));\n__export(require(\"./monaco-languages\"));\n__export(require(\"./monaco-workspace\"));\n__export(require(\"./monaco-services\"));\n__export(require(\"./monaco-converter\"));\n//# sourceMappingURL=index.js.map","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass MonacoCommands {\n    constructor(editor) {\n        this.editor = editor;\n    }\n    registerCommand(command, callback, thisArg) {\n        return this.editor._commandService.addCommand({\n            id: command,\n            handler: (_accessor, ...args) => callback(...args)\n        });\n    }\n}\nexports.MonacoCommands = MonacoCommands;\n//# sourceMappingURL=monaco-commands.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst services_1 = require(\"./services\");\nclass ConsoleWindow {\n    constructor() {\n        this.channels = new Map();\n    }\n    showMessage(type, message, ...actions) {\n        if (type === services_1.MessageType.Error) {\n            console.error(message);\n        }\n        if (type === services_1.MessageType.Warning) {\n            console.warn(message);\n        }\n        if (type === services_1.MessageType.Info) {\n            console.info(message);\n        }\n        if (type === services_1.MessageType.Log) {\n            console.log(message);\n        }\n        return Promise.resolve(undefined);\n    }\n    createOutputChannel(name) {\n        const existing = this.channels.get(name);\n        if (existing) {\n            return existing;\n        }\n        const channel = {\n            append(value) {\n                console.log(name + ': ' + value);\n            },\n            appendLine(line) {\n                console.log(name + ': ' + line);\n            },\n            show() {\n                // no-op\n            },\n            dispose() {\n                // no-op\n            }\n        };\n        this.channels.set(name, channel);\n        return channel;\n    }\n}\nexports.ConsoleWindow = ConsoleWindow;\n//# sourceMappingURL=console-window.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst globToRegExp = require(\"glob-to-regexp\");\nconst services_1 = require(\"./services\");\nconst monaco_diagnostic_collection_1 = require(\"./monaco-diagnostic-collection\");\nconst disposable_1 = require(\"./disposable\");\nvar MonacoModelIdentifier;\n(function (MonacoModelIdentifier) {\n    function fromDocument(document) {\n        return {\n            uri: monaco.Uri.parse(document.uri),\n            languageId: document.languageId\n        };\n    }\n    MonacoModelIdentifier.fromDocument = fromDocument;\n    function fromModel(model) {\n        return {\n            uri: model.uri,\n            languageId: model.getModeId()\n        };\n    }\n    MonacoModelIdentifier.fromModel = fromModel;\n})(MonacoModelIdentifier = exports.MonacoModelIdentifier || (exports.MonacoModelIdentifier = {}));\nfunction testGlob(pattern, value) {\n    const regExp = globToRegExp(pattern, {\n        extended: true,\n        globstar: true\n    });\n    return regExp.test(value);\n}\nexports.testGlob = testGlob;\nclass MonacoLanguages {\n    constructor(p2m, m2p) {\n        this.p2m = p2m;\n        this.m2p = m2p;\n    }\n    match(selector, document) {\n        return this.matchModel(selector, MonacoModelIdentifier.fromDocument(document));\n    }\n    createDiagnosticCollection(name) {\n        return new monaco_diagnostic_collection_1.MonacoDiagnosticCollection(name || 'default', this.p2m);\n    }\n    registerCompletionItemProvider(selector, provider, ...triggerCharacters) {\n        const completionProvider = this.createCompletionProvider(selector, provider, ...triggerCharacters);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCompletionItemProvider(language, completionProvider));\n        }\n        ;\n        return providers;\n    }\n    createCompletionProvider(selector, provider, ...triggerCharacters) {\n        return {\n            triggerCharacters,\n            provideCompletionItems: (model, position, context, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const wordUntil = model.getWordUntilPosition(position);\n                const defaultRange = new monaco.Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\n                const params = this.m2p.asCompletionParams(model, position, context);\n                const result = yield provider.provideCompletionItems(params, token);\n                return result && this.p2m.asCompletionResult(result, defaultRange);\n            }),\n            resolveCompletionItem: provider.resolveCompletionItem ? (model, position, item, token) => __awaiter(this, void 0, void 0, function* () {\n                const protocolItem = this.m2p.asCompletionItem(item);\n                const resolvedItem = yield provider.resolveCompletionItem(protocolItem, token);\n                if (resolvedItem) {\n                    const resolvedCompletionItem = this.p2m.asCompletionItem(resolvedItem, item.range);\n                    Object.assign(item, resolvedCompletionItem);\n                }\n                return item;\n            }) : undefined\n        };\n    }\n    registerHoverProvider(selector, provider) {\n        const hoverProvider = this.createHoverProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerHoverProvider(language, hoverProvider));\n        }\n        return providers;\n    }\n    createHoverProvider(selector, provider) {\n        return {\n            provideHover: (model, position, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const hover = yield provider.provideHover(params, token);\n                return hover && this.p2m.asHover(hover);\n            })\n        };\n    }\n    registerSignatureHelpProvider(selector, provider, ...triggerCharacters) {\n        const signatureHelpProvider = this.createSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerSignatureHelpProvider(language, signatureHelpProvider));\n        }\n        return providers;\n    }\n    createSignatureHelpProvider(selector, provider, ...triggerCharacters) {\n        const signatureHelpTriggerCharacters = [...(provider.triggerCharacters || triggerCharacters || [])];\n        return {\n            signatureHelpTriggerCharacters,\n            signatureHelpRetriggerCharacters: provider.retriggerCharacters,\n            provideSignatureHelp: (model, position, token, context) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const signatureHelp = yield provider.provideSignatureHelp(params, token, this.m2p.asSignatureHelpContext(context));\n                return signatureHelp && this.p2m.asSignatureHelpResult(signatureHelp);\n            })\n        };\n    }\n    registerDefinitionProvider(selector, provider) {\n        const definitionProvider = this.createDefinitionProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDefinitionProvider(language, definitionProvider));\n        }\n        return providers;\n    }\n    createDefinitionProvider(selector, provider) {\n        return {\n            provideDefinition: (model, position, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = yield provider.provideDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            })\n        };\n    }\n    registerReferenceProvider(selector, provider) {\n        const referenceProvider = this.createReferenceProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerReferenceProvider(language, referenceProvider));\n        }\n        return providers;\n    }\n    createReferenceProvider(selector, provider) {\n        return {\n            provideReferences: (model, position, context, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asReferenceParams(model, position, context);\n                const result = yield provider.provideReferences(params, token);\n                return result && this.p2m.asReferences(result);\n            })\n        };\n    }\n    registerDocumentHighlightProvider(selector, provider) {\n        const documentHighlightProvider = this.createDocumentHighlightProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentHighlightProvider(language, documentHighlightProvider));\n        }\n        return providers;\n    }\n    createDocumentHighlightProvider(selector, provider) {\n        return {\n            provideDocumentHighlights: (model, position, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = yield provider.provideDocumentHighlights(params, token);\n                return result && this.p2m.asDocumentHighlights(result);\n            })\n        };\n    }\n    registerDocumentSymbolProvider(selector, provider) {\n        const documentSymbolProvider = this.createDocumentSymbolProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentSymbolProvider(language, documentSymbolProvider));\n        }\n        return providers;\n    }\n    createDocumentSymbolProvider(selector, provider) {\n        return {\n            provideDocumentSymbols: (model, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentSymbolParams(model);\n                const result = yield provider.provideDocumentSymbols(params, token);\n                return result && this.p2m.asDocumentSymbols(result);\n            })\n        };\n    }\n    registerCodeActionsProvider(selector, provider) {\n        const codeActionProvider = this.createCodeActionProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeActionProvider(language, codeActionProvider));\n        }\n        return providers;\n    }\n    createCodeActionProvider(selector, provider) {\n        return {\n            provideCodeActions: (model, range, context, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    // FIXME: get rid of `!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                    return undefined;\n                }\n                const params = this.m2p.asCodeActionParams(model, range, context);\n                const result = yield provider.provideCodeActions(params, token);\n                // FIXME: get rid of `|| undefined!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                return result && this.p2m.asCodeActionList(result) || undefined;\n            })\n        };\n    }\n    registerCodeLensProvider(selector, provider) {\n        const codeLensProvider = this.createCodeLensProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeLensProvider(language, codeLensProvider));\n        }\n        return providers;\n    }\n    createCodeLensProvider(selector, provider) {\n        return {\n            provideCodeLenses: (model, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asCodeLensParams(model);\n                const result = yield provider.provideCodeLenses(params, token);\n                return result && this.p2m.asCodeLensList(result);\n            }),\n            resolveCodeLens: provider.resolveCodeLens ? (model, codeLens, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return codeLens;\n                }\n                const protocolCodeLens = this.m2p.asCodeLens(codeLens);\n                const result = yield provider.resolveCodeLens(protocolCodeLens, token);\n                if (result) {\n                    const resolvedCodeLens = this.p2m.asCodeLens(result);\n                    Object.assign(codeLens, resolvedCodeLens);\n                }\n                return codeLens;\n            }) : ((_, codeLens) => codeLens)\n        };\n    }\n    registerDocumentFormattingEditProvider(selector, provider) {\n        const documentFormattingEditProvider = this.createDocumentFormattingEditProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(language, documentFormattingEditProvider));\n        }\n        return providers;\n    }\n    createDocumentFormattingEditProvider(selector, provider) {\n        return {\n            provideDocumentFormattingEdits: (model, options, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentFormattingParams(model, options);\n                const result = yield provider.provideDocumentFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            })\n        };\n    }\n    registerDocumentRangeFormattingEditProvider(selector, provider) {\n        const documentRangeFormattingEditProvider = this.createDocumentRangeFormattingEditProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(language, documentRangeFormattingEditProvider));\n        }\n        return providers;\n    }\n    createDocumentRangeFormattingEditProvider(selector, provider) {\n        return {\n            provideDocumentRangeFormattingEdits: (model, range, options, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentRangeFormattingParams(model, range, options);\n                const result = yield provider.provideDocumentRangeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            })\n        };\n    }\n    registerOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter) {\n        const onTypeFormattingEditProvider = this.createOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerOnTypeFormattingEditProvider(language, onTypeFormattingEditProvider));\n        }\n        return providers;\n    }\n    createOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter) {\n        const autoFormatTriggerCharacters = [firstTriggerCharacter].concat(moreTriggerCharacter);\n        return {\n            autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: (model, position, ch, options, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentOnTypeFormattingParams(model, position, ch, options);\n                const result = yield provider.provideOnTypeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            })\n        };\n    }\n    registerRenameProvider(selector, provider) {\n        const renameProvider = this.createRenameProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerRenameProvider(language, renameProvider));\n        }\n        return providers;\n    }\n    createRenameProvider(selector, provider) {\n        return {\n            provideRenameEdits: (model, position, newName, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asRenameParams(model, position, newName);\n                const result = yield provider.provideRenameEdits(params, token);\n                return result && this.p2m.asWorkspaceEdit(result);\n            })\n        };\n    }\n    registerDocumentLinkProvider(selector, provider) {\n        const linkProvider = this.createDocumentLinkProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerLinkProvider(language, linkProvider));\n        }\n        return providers;\n    }\n    createDocumentLinkProvider(selector, provider) {\n        return {\n            provideLinks: (model, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentLinkParams(model);\n                const result = yield provider.provideDocumentLinks(params, token);\n                return result && this.p2m.asDocumentLinks(result);\n            }),\n            resolveLink: (link, token) => __awaiter(this, void 0, void 0, function* () {\n                // resolve the link if the provider supports it\n                // and the link doesn't have a url set\n                if (provider.resolveDocumentLink && (link.url === null || link.url === undefined)) {\n                    const documentLink = this.m2p.asDocumentLink(link);\n                    const result = yield provider.resolveDocumentLink(documentLink, token);\n                    if (result) {\n                        const resolvedLink = this.p2m.asDocumentLink(result);\n                        Object.assign(link, resolvedLink);\n                    }\n                }\n                return link;\n            })\n        };\n    }\n    registerImplementationProvider(selector, provider) {\n        const implementationProvider = this.createImplementationProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerImplementationProvider(language, implementationProvider));\n        }\n        return providers;\n    }\n    createImplementationProvider(selector, provider) {\n        return {\n            provideImplementation: (model, position, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = yield provider.provideImplementation(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            })\n        };\n    }\n    registerTypeDefinitionProvider(selector, provider) {\n        const typeDefinitionProvider = this.createTypeDefinitionProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerTypeDefinitionProvider(language, typeDefinitionProvider));\n        }\n        return providers;\n    }\n    createTypeDefinitionProvider(selector, provider) {\n        return {\n            provideTypeDefinition: (model, position, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = yield provider.provideTypeDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            })\n        };\n    }\n    registerColorProvider(selector, provider) {\n        const documentColorProvider = this.createDocumentColorProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerColorProvider(language, documentColorProvider));\n        }\n        return providers;\n    }\n    createDocumentColorProvider(selector, provider) {\n        return {\n            provideDocumentColors: (model, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = yield provider.provideDocumentColors({ textDocument }, token);\n                return result && this.p2m.asColorInformations(result);\n            }),\n            provideColorPresentations: (model, info, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const range = this.m2p.asRange(info.range);\n                const result = yield provider.provideColorPresentations({\n                    textDocument,\n                    color: info.color,\n                    range\n                }, token);\n                return result && this.p2m.asColorPresentations(result);\n            })\n        };\n    }\n    registerFoldingRangeProvider(selector, provider) {\n        const foldingRangeProvider = this.createFoldingRangeProvider(selector, provider);\n        const providers = new disposable_1.DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerFoldingRangeProvider(language, foldingRangeProvider));\n        }\n        return providers;\n    }\n    createFoldingRangeProvider(selector, provider) {\n        return {\n            provideFoldingRanges: (model, context, token) => __awaiter(this, void 0, void 0, function* () {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = yield provider.provideFoldingRanges({\n                    textDocument\n                }, token);\n                return result && this.p2m.asFoldingRanges(result);\n            })\n        };\n    }\n    matchModel(selector, model) {\n        if (Array.isArray(selector)) {\n            return selector.some(filter => this.matchModel(filter, model));\n        }\n        if (services_1.DocumentFilter.is(selector)) {\n            if (!!selector.language && selector.language !== model.languageId) {\n                return false;\n            }\n            if (!!selector.scheme && selector.scheme !== model.uri.scheme) {\n                return false;\n            }\n            if (!!selector.pattern && !testGlob(selector.pattern, model.uri.path)) {\n                return false;\n            }\n            return true;\n        }\n        return selector === model.languageId;\n    }\n    matchLanguage(selector) {\n        const languages = new Set();\n        if (Array.isArray(selector)) {\n            for (const filter of selector) {\n                languages.add(this.matchLanguageByFilter(filter));\n            }\n        }\n        else {\n            languages.add(this.matchLanguageByFilter(selector));\n        }\n        return languages;\n    }\n    matchLanguageByFilter(selector) {\n        if (services_1.DocumentFilter.is(selector)) {\n            if (!selector.language) {\n                return '*';\n            }\n            return selector.language;\n        }\n        return selector;\n    }\n}\nexports.MonacoLanguages = MonacoLanguages;\n//# sourceMappingURL=monaco-languages.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst services_1 = require(\"./services\");\nclass MonacoWorkspace {\n    constructor(p2m, m2p, _rootUri = null) {\n        this.p2m = p2m;\n        this.m2p = m2p;\n        this._rootUri = _rootUri;\n        this.documents = new Map();\n        this.onDidOpenTextDocumentEmitter = new services_1.Emitter();\n        this.onDidCloseTextDocumentEmitter = new services_1.Emitter();\n        this.onDidChangeTextDocumentEmitter = new services_1.Emitter();\n        for (const model of monaco.editor.getModels()) {\n            this.addModel(model);\n        }\n        monaco.editor.onDidCreateModel(model => this.addModel(model));\n        monaco.editor.onWillDisposeModel(model => this.removeModel(model));\n    }\n    get rootUri() {\n        return this._rootUri;\n    }\n    removeModel(model) {\n        const uri = model.uri.toString();\n        const document = this.documents.get(uri);\n        if (document) {\n            this.documents.delete(uri);\n            this.onDidCloseTextDocumentEmitter.fire(document);\n        }\n    }\n    addModel(model) {\n        const uri = model.uri.toString();\n        const document = this.setModel(uri, model);\n        this.onDidOpenTextDocumentEmitter.fire(document);\n        model.onDidChangeContent(event => this.onDidChangeContent(uri, model, event));\n    }\n    onDidChangeContent(uri, model, event) {\n        const textDocument = this.setModel(uri, model);\n        const contentChanges = [];\n        for (const change of event.changes) {\n            const range = this.m2p.asRange(change.range);\n            const rangeLength = change.rangeLength;\n            const text = change.text;\n            contentChanges.push({ range, rangeLength, text });\n        }\n        this.onDidChangeTextDocumentEmitter.fire({\n            textDocument,\n            contentChanges\n        });\n    }\n    setModel(uri, model) {\n        const document = services_1.TextDocument.create(uri, model.getModeId(), model.getVersionId(), model.getValue());\n        this.documents.set(uri, document);\n        return document;\n    }\n    get textDocuments() {\n        return Array.from(this.documents.values());\n    }\n    get onDidOpenTextDocument() {\n        return this.onDidOpenTextDocumentEmitter.event;\n    }\n    get onDidCloseTextDocument() {\n        return this.onDidCloseTextDocumentEmitter.event;\n    }\n    get onDidChangeTextDocument() {\n        return this.onDidChangeTextDocumentEmitter.event;\n    }\n    applyEdit(workspaceEdit) {\n        const edit = this.p2m.asWorkspaceEdit(workspaceEdit);\n        // Collect all referenced models\n        const models = edit.edits ? edit.edits.reduce((acc, currentEdit) => {\n            const textEdit = currentEdit;\n            acc[textEdit.resource.toString()] = monaco.editor.getModel(textEdit.resource);\n            return acc;\n        }, {}) : {};\n        // If any of the models do not exist, refuse to apply the edit.\n        if (!Object.keys(models).map(uri => models[uri]).every(model => !!model)) {\n            return Promise.resolve(false);\n        }\n        // Group edits by resource so we can batch them when applying\n        const editsByResource = edit.edits ? edit.edits.reduce((acc, currentEdit) => {\n            const textEdit = currentEdit;\n            const uri = textEdit.resource.toString();\n            if (!(uri in acc)) {\n                acc[uri] = [];\n            }\n            const operations = textEdit.edits.map(edit => {\n                return {\n                    range: monaco.Range.lift(edit.range),\n                    text: edit.text,\n                };\n            });\n            acc[uri].push(...operations);\n            return acc;\n        }, {}) : {};\n        // Apply edits for each resource\n        Object.keys(editsByResource).forEach(uri => {\n            models[uri].pushEditOperations([], // Do not try and preserve editor selections.\n            editsByResource[uri].map(resourceEdit => {\n                return {\n                    identifier: { major: 1, minor: 0 },\n                    range: resourceEdit.range,\n                    text: resourceEdit.text,\n                    forceMoveMarkers: true,\n                };\n            }), () => []);\n        });\n        return Promise.resolve(true);\n    }\n}\nexports.MonacoWorkspace = MonacoWorkspace;\n//# sourceMappingURL=monaco-workspace.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst ls = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"vscode-languageserver-protocol/lib/utils/is\");\nconst services_1 = require(\"./services\");\nvar ProtocolDocumentLink;\n(function (ProtocolDocumentLink) {\n    function is(item) {\n        return !!item && 'data' in item;\n    }\n    ProtocolDocumentLink.is = is;\n})(ProtocolDocumentLink = exports.ProtocolDocumentLink || (exports.ProtocolDocumentLink = {}));\nvar ProtocolCodeLens;\n(function (ProtocolCodeLens) {\n    function is(item) {\n        return !!item && 'data' in item;\n    }\n    ProtocolCodeLens.is = is;\n})(ProtocolCodeLens = exports.ProtocolCodeLens || (exports.ProtocolCodeLens = {}));\nvar ProtocolCompletionItem;\n(function (ProtocolCompletionItem) {\n    function is(item) {\n        return !!item && 'data' in item;\n    }\n    ProtocolCompletionItem.is = is;\n})(ProtocolCompletionItem = exports.ProtocolCompletionItem || (exports.ProtocolCompletionItem = {}));\nfunction isRangeReplace(v) {\n    return v.insert !== undefined;\n}\nclass MonacoToProtocolConverter {\n    asPosition(lineNumber, column) {\n        const line = lineNumber === undefined || lineNumber === null ? undefined : lineNumber - 1;\n        const character = column === undefined || column === null ? undefined : column - 1;\n        return {\n            line, character\n        };\n    }\n    asRange(range) {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        if (isRangeReplace(range)) {\n            return this.asRange(range.insert);\n        }\n        else {\n            const start = this.asPosition(range.startLineNumber, range.startColumn);\n            const end = this.asPosition(range.endLineNumber, range.endColumn);\n            return {\n                start, end\n            };\n        }\n    }\n    asTextDocumentIdentifier(model) {\n        return {\n            uri: model.uri.toString()\n        };\n    }\n    asTextDocumentPositionParams(model, position) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column)\n        };\n    }\n    asCompletionParams(model, position, context) {\n        return Object.assign(this.asTextDocumentPositionParams(model, position), {\n            context: this.asCompletionContext(context)\n        });\n    }\n    asCompletionContext(context) {\n        return {\n            triggerKind: this.asCompletionTriggerKind(context.triggerKind),\n            triggerCharacter: context.triggerCharacter\n        };\n    }\n    asSignatureHelpContext(context) {\n        return {\n            triggerKind: this.asSignatureHelpTriggerKind(context.triggerKind),\n            triggerCharacter: context.triggerCharacter,\n            isRetrigger: context.isRetrigger,\n            activeSignatureHelp: this.asSignatureHelp(context.activeSignatureHelp)\n        };\n    }\n    asSignatureHelp(signatureHelp) {\n        if (signatureHelp === undefined) {\n            return undefined;\n        }\n        return {\n            signatures: signatureHelp.signatures.map(signatureInfo => this.asSignatureInformation(signatureInfo)),\n            activeParameter: signatureHelp.activeParameter,\n            activeSignature: signatureHelp.activeSignature\n        };\n    }\n    asSignatureInformation(signatureInformation) {\n        return {\n            documentation: this.asMarkupContent(signatureInformation.documentation),\n            label: signatureInformation.label,\n            parameters: signatureInformation.parameters.map(paramInfo => this.asParameterInformation(paramInfo))\n        };\n    }\n    asParameterInformation(parameterInformation) {\n        return {\n            documentation: this.asMarkupContent(parameterInformation.documentation),\n            label: parameterInformation.label\n        };\n    }\n    asMarkupContent(markupContent) {\n        if (markupContent === undefined) {\n            return undefined;\n        }\n        if (typeof markupContent === \"string\") {\n            return markupContent;\n        }\n        return {\n            kind: services_1.MarkupKind.Markdown,\n            value: markupContent.value\n        };\n    }\n    asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case monaco.languages.SignatureHelpTriggerKind.ContentChange:\n                return services_1.SignatureHelpTriggerKind.ContentChange;\n            case monaco.languages.SignatureHelpTriggerKind.TriggerCharacter:\n                return services_1.SignatureHelpTriggerKind.TriggerCharacter;\n            default:\n                return services_1.SignatureHelpTriggerKind.Invoke;\n        }\n    }\n    asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case monaco.languages.CompletionTriggerKind.TriggerCharacter:\n                return services_1.CompletionTriggerKind.TriggerCharacter;\n            case monaco.languages.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return services_1.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return services_1.CompletionTriggerKind.Invoked;\n        }\n    }\n    asCompletionItem(item) {\n        const result = { label: item.label };\n        const protocolItem = ProtocolCompletionItem.is(item) ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || !protocolItem.documentationFormat) {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = this.asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        this.fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = this.asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits);\n        }\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        // TODO if (item.preselect === true || item.preselect === false) { result.preselect = item.preselect; }\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                result.deprecated = protocolItem.deprecated;\n            }\n        }\n        return result;\n    }\n    asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        switch (value) {\n            case monaco.languages.CompletionItemKind.Method: return services_1.CompletionItemKind.Method;\n            case monaco.languages.CompletionItemKind.Function: return services_1.CompletionItemKind.Function;\n            case monaco.languages.CompletionItemKind.Constructor: return services_1.CompletionItemKind.Constructor;\n            case monaco.languages.CompletionItemKind.Field: return services_1.CompletionItemKind.Field;\n            case monaco.languages.CompletionItemKind.Variable: return services_1.CompletionItemKind.Variable;\n            case monaco.languages.CompletionItemKind.Class: return services_1.CompletionItemKind.Class;\n            case monaco.languages.CompletionItemKind.Struct: return services_1.CompletionItemKind.Struct;\n            case monaco.languages.CompletionItemKind.Interface: return services_1.CompletionItemKind.Interface;\n            case monaco.languages.CompletionItemKind.Module: return services_1.CompletionItemKind.Module;\n            case monaco.languages.CompletionItemKind.Property: return services_1.CompletionItemKind.Property;\n            case monaco.languages.CompletionItemKind.Event: return services_1.CompletionItemKind.Event;\n            case monaco.languages.CompletionItemKind.Operator: return services_1.CompletionItemKind.Operator;\n            case monaco.languages.CompletionItemKind.Unit: return services_1.CompletionItemKind.Unit;\n            case monaco.languages.CompletionItemKind.Value: return services_1.CompletionItemKind.Value;\n            case monaco.languages.CompletionItemKind.Constant: return services_1.CompletionItemKind.Constant;\n            case monaco.languages.CompletionItemKind.Enum: return services_1.CompletionItemKind.Enum;\n            case monaco.languages.CompletionItemKind.EnumMember: return services_1.CompletionItemKind.EnumMember;\n            case monaco.languages.CompletionItemKind.Keyword: return services_1.CompletionItemKind.Keyword;\n            case monaco.languages.CompletionItemKind.Text: return services_1.CompletionItemKind.Text;\n            case monaco.languages.CompletionItemKind.Color: return services_1.CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.File: return services_1.CompletionItemKind.File;\n            case monaco.languages.CompletionItemKind.Reference: return services_1.CompletionItemKind.Reference;\n            case monaco.languages.CompletionItemKind.Customcolor: return services_1.CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.Folder: return services_1.CompletionItemKind.Folder;\n            case monaco.languages.CompletionItemKind.TypeParameter: return services_1.CompletionItemKind.TypeParameter;\n            case monaco.languages.CompletionItemKind.Snippet: return services_1.CompletionItemKind.Snippet;\n            default: return value + 1;\n        }\n    }\n    asDocumentation(format, documentation) {\n        switch (format) {\n            case services_1.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case services_1.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    fillPrimaryInsertText(target, source) {\n        let format = services_1.InsertTextFormat.PlainText;\n        let text;\n        let range;\n        if (source.insertTextRules !== undefined && (source.insertTextRules & monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet) === 0) {\n            format = services_1.InsertTextFormat.Snippet;\n            text = source.insertText;\n        }\n        target.insertTextFormat = format;\n        text = source.insertText;\n        if (source.range) {\n            range = this.asRange(source.range);\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text && range) {\n            target.textEdit = { newText: text, range: range };\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    asTextEdit(edit) {\n        const range = this.asRange(edit.range);\n        return {\n            range,\n            newText: edit.text || ''\n        };\n    }\n    asTextEdits(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n    asReferenceParams(model, position, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    asDocumentSymbolParams(model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    }\n    asCodeLensParams(model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    }\n    asDiagnosticSeverity(value) {\n        switch (value) {\n            case monaco.MarkerSeverity.Error:\n                return services_1.DiagnosticSeverity.Error;\n            case monaco.MarkerSeverity.Warning:\n                return services_1.DiagnosticSeverity.Warning;\n            case monaco.MarkerSeverity.Info:\n                return services_1.DiagnosticSeverity.Information;\n            case monaco.MarkerSeverity.Hint:\n                return services_1.DiagnosticSeverity.Hint;\n        }\n        return undefined;\n    }\n    asDiagnostic(marker) {\n        const range = this.asRange(new monaco.Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn));\n        const severity = this.asDiagnosticSeverity(marker.severity);\n        return services_1.Diagnostic.create(range, marker.message, severity, marker.code, marker.source);\n    }\n    asDiagnostics(markers) {\n        if (markers === void 0 || markers === null) {\n            return markers;\n        }\n        return markers.map(marker => this.asDiagnostic(marker));\n    }\n    asCodeActionContext(context) {\n        if (context === void 0 || context === null) {\n            return context;\n        }\n        const diagnostics = this.asDiagnostics(context.markers);\n        return services_1.CodeActionContext.create(diagnostics, Is.string(context.only) ? [context.only] : undefined);\n    }\n    asCodeActionParams(model, range, context) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            context: this.asCodeActionContext(context)\n        };\n    }\n    asCommand(item) {\n        if (item) {\n            let args = item.arguments || [];\n            return services_1.Command.create(item.title, item.id, ...args);\n        }\n        return undefined;\n    }\n    asCodeLens(item) {\n        let result = services_1.CodeLens.create(this.asRange(item.range));\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        if (ProtocolCodeLens.is(item)) {\n            if (item.data) {\n                result.data = item.data;\n            }\n            ;\n        }\n        return result;\n    }\n    asFormattingOptions(options) {\n        return { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n    }\n    asDocumentFormattingParams(model, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            options: this.asFormattingOptions(options)\n        };\n    }\n    asDocumentRangeFormattingParams(model, range, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            options: this.asFormattingOptions(options)\n        };\n    }\n    asDocumentOnTypeFormattingParams(model, position, ch, options) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            ch,\n            options: this.asFormattingOptions(options)\n        };\n    }\n    asRenameParams(model, position, newName) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            newName\n        };\n    }\n    asDocumentLinkParams(model) {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        };\n    }\n    asDocumentLink(item) {\n        let result = services_1.DocumentLink.create(this.asRange(item.range));\n        if (item.url) {\n            result.target = typeof item.url === 'string' ? item.url : item.url.toString();\n        }\n        if (ProtocolDocumentLink.is(item) && item.data) {\n            result.data = item.data;\n        }\n        return result;\n    }\n}\nexports.MonacoToProtocolConverter = MonacoToProtocolConverter;\nclass ProtocolToMonacoConverter {\n    asResourceEdits(resource, edits, modelVersionId) {\n        return {\n            resource: resource,\n            edits: this.asTextEdits(edits),\n            modelVersionId\n        };\n    }\n    asWorkspaceEdit(item) {\n        if (!item) {\n            return undefined;\n        }\n        const edits = [];\n        if (item.documentChanges) {\n            item.documentChanges.forEach(change => {\n                if (ls.CreateFile.is(change)) {\n                    edits.push({\n                        newUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                }\n                else if (ls.RenameFile.is(change)) {\n                    edits.push({\n                        oldUri: monaco.Uri.parse(change.oldUri),\n                        newUri: monaco.Uri.parse(change.newUri),\n                        options: change.options\n                    });\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    edits.push({\n                        oldUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    const resource = monaco.Uri.parse(change.textDocument.uri);\n                    const version = typeof change.textDocument.version === 'number' ? change.textDocument.version : undefined;\n                    edits.push(this.asResourceEdits(resource, change.edits, version));\n                }\n                else {\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            });\n        }\n        else if (item.changes) {\n            for (const key of Object.keys(item.changes)) {\n                const resource = monaco.Uri.parse(key);\n                edits.push(this.asResourceEdits(resource, item.changes[key]));\n            }\n        }\n        return {\n            edits\n        };\n    }\n    asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        const range = this.asRange(edit.range);\n        return {\n            range,\n            text: edit.newText\n        };\n    }\n    asTextEdits(items) {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n    asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        const range = this.asRange(item.range);\n        let result = { range };\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        if (item.data !== void 0 && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    asCodeLensList(items) {\n        if (!items) {\n            return undefined;\n        }\n        return {\n            lenses: items.map((codeLens) => this.asCodeLens(codeLens)),\n            dispose: () => { }\n        };\n    }\n    asCodeActionList(actions) {\n        return {\n            actions: actions.map(action => this.asCodeAction(action)),\n            dispose: () => { }\n        };\n    }\n    asCodeAction(item) {\n        if (services_1.CodeAction.is(item)) {\n            return {\n                title: item.title,\n                command: this.asCommand(item.command),\n                edit: this.asWorkspaceEdit(item.edit),\n                diagnostics: this.asDiagnostics(item.diagnostics),\n                kind: item.kind\n            };\n        }\n        return {\n            command: {\n                id: item.command,\n                title: item.title,\n                arguments: item.arguments\n            },\n            title: item.title\n        };\n    }\n    asCommand(command) {\n        if (!command) {\n            return undefined;\n        }\n        return {\n            id: command.command,\n            title: command.title,\n            arguments: command.arguments\n        };\n    }\n    asDocumentSymbol(value) {\n        const children = value.children && value.children.map(c => this.asDocumentSymbol(c));\n        return {\n            name: value.name,\n            detail: value.detail || \"\",\n            kind: this.asSymbolKind(value.kind),\n            tags: [],\n            range: this.asRange(value.range),\n            selectionRange: this.asRange(value.selectionRange),\n            children\n        };\n    }\n    asDocumentSymbols(values) {\n        if (services_1.DocumentSymbol.is(values[0])) {\n            return values.map(s => this.asDocumentSymbol(s));\n        }\n        return this.asSymbolInformations(values);\n    }\n    asSymbolInformations(values, uri) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(information => this.asSymbolInformation(information, uri));\n    }\n    asSymbolInformation(item, uri) {\n        const location = this.asLocation(uri ? Object.assign(Object.assign({}, item.location), { uri: uri.toString() }) : item.location);\n        return {\n            name: item.name,\n            detail: '',\n            containerName: item.containerName,\n            kind: this.asSymbolKind(item.kind),\n            tags: [],\n            range: location.range,\n            selectionRange: location.range\n        };\n    }\n    asSymbolKind(item) {\n        if (item <= services_1.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return monaco.languages.SymbolKind.Property;\n    }\n    asDocumentHighlights(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(item => this.asDocumentHighlight(item));\n    }\n    asDocumentHighlight(item) {\n        const range = this.asRange(item.range);\n        const kind = Is.number(item.kind) ? this.asDocumentHighlightKind(item.kind) : undefined;\n        return { range, kind };\n    }\n    asDocumentHighlightKind(item) {\n        switch (item) {\n            case services_1.DocumentHighlightKind.Text:\n                return monaco.languages.DocumentHighlightKind.Text;\n            case services_1.DocumentHighlightKind.Read:\n                return monaco.languages.DocumentHighlightKind.Read;\n            case services_1.DocumentHighlightKind.Write:\n                return monaco.languages.DocumentHighlightKind.Write;\n        }\n        return monaco.languages.DocumentHighlightKind.Text;\n    }\n    asReferences(values) {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(location => this.asLocation(location));\n    }\n    asDefinitionResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length == 0) {\n                return undefined;\n            }\n            else if (services_1.LocationLink.is(item[0])) {\n                let links = item;\n                return links.map((location) => this.asLocationLink(location));\n            }\n            else {\n                let locations = item;\n                return locations.map((location) => this.asLocation(location));\n            }\n        }\n        else {\n            return this.asLocation(item);\n        }\n    }\n    asLocation(item) {\n        if (!item) {\n            return undefined;\n        }\n        const uri = monaco.Uri.parse(item.uri);\n        const range = this.asRange(item.range);\n        return {\n            uri, range\n        };\n    }\n    asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {\n            uri: monaco.Uri.parse(item.targetUri),\n            range: this.asRange(item.targetSelectionRange),\n            originSelectionRange: this.asRange(item.originSelectionRange),\n            targetSelectionRange: this.asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    asSignatureHelpResult(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {};\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = this.asSignatureInformations(item.signatures);\n        }\n        else {\n            result.signatures = [];\n        }\n        return {\n            value: result,\n            dispose: () => { }\n        };\n    }\n    asSignatureInformations(items) {\n        return items.map(item => this.asSignatureInformation(item));\n    }\n    asSignatureInformation(item) {\n        let result = { label: item.label };\n        if (item.documentation) {\n            result.documentation = this.asDocumentation(item.documentation);\n        }\n        if (item.parameters) {\n            result.parameters = this.asParameterInformations(item.parameters);\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    asParameterInformations(item) {\n        return item.map(item => this.asParameterInformation(item));\n    }\n    asParameterInformation(item) {\n        let result = { label: item.label };\n        if (item.documentation) {\n            result.documentation = this.asDocumentation(item.documentation);\n        }\n        ;\n        return result;\n    }\n    asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return {\n            contents: this.asHoverContent(hover.contents),\n            range: this.asRange(hover.range)\n        };\n    }\n    asHoverContent(contents) {\n        if (Array.isArray(contents)) {\n            return contents.map(content => this.asMarkdownString(content));\n        }\n        return [this.asMarkdownString(contents)];\n    }\n    asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        if (value.kind === services_1.MarkupKind.PlainText) {\n            return value.value;\n        }\n        return this.asMarkdownString(value);\n    }\n    asMarkdownString(content) {\n        if (services_1.MarkupContent.is(content)) {\n            return {\n                value: content.value\n            };\n        }\n        if (Is.string(content)) {\n            return { value: content };\n        }\n        const { language, value } = content;\n        return {\n            value: '```' + language + '\\n' + value + '\\n```'\n        };\n    }\n    asSeverity(severity) {\n        if (severity === 1) {\n            return monaco.MarkerSeverity.Error;\n        }\n        if (severity === 2) {\n            return monaco.MarkerSeverity.Warning;\n        }\n        if (severity === 3) {\n            return monaco.MarkerSeverity.Info;\n        }\n        return monaco.MarkerSeverity.Hint;\n    }\n    asDiagnostics(diagnostics) {\n        if (!diagnostics) {\n            return undefined;\n        }\n        return diagnostics.map(diagnostic => this.asDiagnostic(diagnostic));\n    }\n    asDiagnostic(diagnostic) {\n        return {\n            code: typeof diagnostic.code === \"number\" ? diagnostic.code.toString() : diagnostic.code,\n            severity: this.asSeverity(diagnostic.severity),\n            message: diagnostic.message,\n            source: diagnostic.source,\n            startLineNumber: diagnostic.range.start.line + 1,\n            startColumn: diagnostic.range.start.character + 1,\n            endLineNumber: diagnostic.range.end.line + 1,\n            endColumn: diagnostic.range.end.character + 1,\n            relatedInformation: this.asRelatedInformations(diagnostic.relatedInformation)\n        };\n    }\n    asRelatedInformations(relatedInformation) {\n        if (!relatedInformation) {\n            return undefined;\n        }\n        return relatedInformation.map(item => this.asRelatedInformation(item));\n    }\n    asRelatedInformation(relatedInformation) {\n        return {\n            resource: monaco.Uri.parse(relatedInformation.location.uri),\n            startLineNumber: relatedInformation.location.range.start.line + 1,\n            startColumn: relatedInformation.location.range.start.character + 1,\n            endLineNumber: relatedInformation.location.range.end.line + 1,\n            endColumn: relatedInformation.location.range.end.character + 1,\n            message: relatedInformation.message\n        };\n    }\n    asCompletionResult(result, defaultRange) {\n        if (!result) {\n            return {\n                incomplete: false,\n                suggestions: []\n            };\n        }\n        if (Array.isArray(result)) {\n            const suggestions = result.map(item => this.asCompletionItem(item, defaultRange));\n            return {\n                incomplete: false,\n                suggestions\n            };\n        }\n        return {\n            incomplete: result.isIncomplete,\n            suggestions: result.items.map(item => this.asCompletionItem(item, defaultRange))\n        };\n    }\n    asCompletionItem(item, defaultRange) {\n        const result = { label: item.label };\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = this.asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? undefined : item.documentation.kind;\n        }\n        ;\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        const insertText = this.asCompletionInsertText(item, defaultRange);\n        result.insertText = insertText.insertText;\n        result.range = insertText.range;\n        result.fromEdit = insertText.fromEdit;\n        if (insertText.isSnippet) {\n            result.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = this.asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits);\n        }\n        if (Is.stringArray(item.commitCharacters)) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = this.asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        if (item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n        }\n        return result;\n    }\n    asCompletionItemKind(value) {\n        if (services_1.CompletionItemKind.Text <= value && value <= services_1.CompletionItemKind.TypeParameter) {\n            switch (value) {\n                case services_1.CompletionItemKind.Text: return [monaco.languages.CompletionItemKind.Text, undefined];\n                case services_1.CompletionItemKind.Method: return [monaco.languages.CompletionItemKind.Method, undefined];\n                case services_1.CompletionItemKind.Function: return [monaco.languages.CompletionItemKind.Function, undefined];\n                case services_1.CompletionItemKind.Constructor: return [monaco.languages.CompletionItemKind.Constructor, undefined];\n                case services_1.CompletionItemKind.Field: return [monaco.languages.CompletionItemKind.Field, undefined];\n                case services_1.CompletionItemKind.Variable: return [monaco.languages.CompletionItemKind.Variable, undefined];\n                case services_1.CompletionItemKind.Class: return [monaco.languages.CompletionItemKind.Class, undefined];\n                case services_1.CompletionItemKind.Interface: return [monaco.languages.CompletionItemKind.Interface, undefined];\n                case services_1.CompletionItemKind.Module: return [monaco.languages.CompletionItemKind.Module, undefined];\n                case services_1.CompletionItemKind.Property: return [monaco.languages.CompletionItemKind.Property, undefined];\n                case services_1.CompletionItemKind.Unit: return [monaco.languages.CompletionItemKind.Unit, undefined];\n                case services_1.CompletionItemKind.Value: return [monaco.languages.CompletionItemKind.Value, undefined];\n                case services_1.CompletionItemKind.Enum: return [monaco.languages.CompletionItemKind.Enum, undefined];\n                case services_1.CompletionItemKind.Keyword: return [monaco.languages.CompletionItemKind.Keyword, undefined];\n                case services_1.CompletionItemKind.Snippet: return [monaco.languages.CompletionItemKind.Snippet, undefined];\n                case services_1.CompletionItemKind.Color: return [monaco.languages.CompletionItemKind.Color, undefined];\n                case services_1.CompletionItemKind.File: return [monaco.languages.CompletionItemKind.File, undefined];\n                case services_1.CompletionItemKind.Reference: return [monaco.languages.CompletionItemKind.Reference, undefined];\n                case services_1.CompletionItemKind.Folder: return [monaco.languages.CompletionItemKind.Folder, undefined];\n                case services_1.CompletionItemKind.EnumMember: return [monaco.languages.CompletionItemKind.EnumMember, undefined];\n                case services_1.CompletionItemKind.Constant: return [monaco.languages.CompletionItemKind.Constant, undefined];\n                case services_1.CompletionItemKind.Struct: return [monaco.languages.CompletionItemKind.Struct, undefined];\n                case services_1.CompletionItemKind.Event: return [monaco.languages.CompletionItemKind.Event, undefined];\n                case services_1.CompletionItemKind.Operator: return [monaco.languages.CompletionItemKind.Operator, undefined];\n                case services_1.CompletionItemKind.TypeParameter: return [monaco.languages.CompletionItemKind.TypeParameter, undefined];\n                default: return [value - 1, undefined];\n            }\n        }\n        ;\n        return [services_1.CompletionItemKind.Text, value];\n    }\n    asCompletionInsertText(item, defaultRange) {\n        const isSnippet = item.insertTextFormat === services_1.InsertTextFormat.Snippet;\n        if (item.textEdit) {\n            const range = this.asRange(item.textEdit.range);\n            const value = item.textEdit.newText;\n            return { isSnippet, insertText: value, range, fromEdit: true, };\n        }\n        if (item.insertText) {\n            return { isSnippet, insertText: item.insertText, fromEdit: false, range: defaultRange };\n        }\n        return { insertText: item.label, range: defaultRange, fromEdit: false, isSnippet: false };\n    }\n    asDocumentLinks(documentLinks) {\n        const links = documentLinks.map(link => this.asDocumentLink(link));\n        return { links };\n    }\n    asDocumentLink(documentLink) {\n        return {\n            range: this.asRange(documentLink.range),\n            url: documentLink.target,\n            data: documentLink.data\n        };\n    }\n    asRange(range) {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        const start = this.asPosition(range.start);\n        const end = this.asPosition(range.end);\n        if (start instanceof monaco.Position && end instanceof monaco.Position) {\n            return new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column);\n        }\n        const startLineNumber = !start || start.lineNumber === undefined ? undefined : start.lineNumber;\n        const startColumn = !start || start.column === undefined ? undefined : start.column;\n        const endLineNumber = !end || end.lineNumber === undefined ? undefined : end.lineNumber;\n        const endColumn = !end || end.column === undefined ? undefined : end.column;\n        return { startLineNumber, startColumn, endLineNumber, endColumn };\n    }\n    asPosition(position) {\n        if (position === undefined) {\n            return undefined;\n        }\n        if (position === null) {\n            return null;\n        }\n        const { line, character } = position;\n        const lineNumber = line === undefined ? undefined : line + 1;\n        const column = character === undefined ? undefined : character + 1;\n        if (lineNumber !== undefined && column !== undefined) {\n            return new monaco.Position(lineNumber, column);\n        }\n        return { lineNumber, column };\n    }\n    asColorInformations(items) {\n        return items.map(item => this.asColorInformation(item));\n    }\n    asColorInformation(item) {\n        return {\n            range: this.asRange(item.range),\n            color: item.color\n        };\n    }\n    asColorPresentations(items) {\n        return items.map(item => this.asColorPresentation(item));\n    }\n    asColorPresentation(item) {\n        return {\n            label: item.label,\n            textEdit: this.asTextEdit(item.textEdit),\n            additionalTextEdits: this.asTextEdits(item.additionalTextEdits)\n        };\n    }\n    asFoldingRanges(items) {\n        if (!items) {\n            return items;\n        }\n        return items.map(item => this.asFoldingRange(item));\n    }\n    asFoldingRange(item) {\n        return {\n            start: item.startLine + 1,\n            end: item.endLine + 1,\n            kind: this.asFoldingRangeKind(item.kind)\n        };\n    }\n    asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case services_1.FoldingRangeKind.Comment:\n                    return monaco.languages.FoldingRangeKind.Comment;\n                case services_1.FoldingRangeKind.Imports:\n                    return monaco.languages.FoldingRangeKind.Imports;\n                case services_1.FoldingRangeKind.Region:\n                    return monaco.languages.FoldingRangeKind.Region;\n            }\n            ;\n        }\n        return undefined;\n    }\n}\nexports.ProtocolToMonacoConverter = ProtocolToMonacoConverter;\n//# sourceMappingURL=monaco-converter.js.map","export * from 'monaco-languageclient';\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst main_1 = require(\"vscode-languageserver-protocol/lib/main\");\nconst Is = require(\"vscode-languageserver-protocol/lib/utils/is\");\nfunction createConnection(connection, errorHandler, closeHandler) {\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    return {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\n        trace: (value, tracer, sendNotification = false) => connection.trace(value, tracer, sendNotification),\n        initialize: (params) => connection.sendRequest(main_1.InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(main_1.ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(main_1.ExitNotification.type),\n        onLogMessage: (handler) => connection.onNotification(main_1.LogMessageNotification.type, handler),\n        onShowMessage: (handler) => connection.onNotification(main_1.ShowMessageNotification.type, handler),\n        onTelemetry: (handler) => connection.onNotification(main_1.TelemetryEventNotification.type, handler),\n        didChangeConfiguration: (params) => connection.sendNotification(main_1.DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params) => connection.sendNotification(main_1.DidChangeWatchedFilesNotification.type, params),\n        didOpenTextDocument: (params) => connection.sendNotification(main_1.DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params) => connection.sendNotification(main_1.DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params) => connection.sendNotification(main_1.DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params) => connection.sendNotification(main_1.DidSaveTextDocumentNotification.type, params),\n        onDiagnostics: (handler) => connection.onNotification(main_1.PublishDiagnosticsNotification.type, handler),\n        dispose: () => connection.dispose()\n    };\n}\nexports.createConnection = createConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst client_1 = require(\"vscode-languageclient/lib/client\");\nconst typeDefinition_1 = require(\"vscode-languageclient/lib/typeDefinition\");\nconst configuration_1 = require(\"vscode-languageclient/lib/configuration\");\nconst implementation_1 = require(\"vscode-languageclient/lib/implementation\");\nconst colorProvider_1 = require(\"vscode-languageclient/lib/colorProvider\");\nconst workspaceFolders_1 = require(\"vscode-languageclient/lib/workspaceFolders\");\nconst foldingRange_1 = require(\"vscode-languageclient/lib/foldingRange\");\nconst declaration_1 = require(\"vscode-languageclient/lib/declaration\");\n__export(require(\"vscode-languageclient/lib/client\"));\nclass MonacoLanguageClient extends client_1.BaseLanguageClient {\n    constructor({ id, name, clientOptions, connectionProvider }) {\n        super(id || name.toLowerCase(), name, clientOptions);\n        this.connectionProvider = connectionProvider;\n        this.createConnection = this.doCreateConnection.bind(this);\n        // bypass LSP <=> VS Code conversion\n        const self = this;\n        self._p2c = new Proxy(self._p2c, {\n            get: (target, prop) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n        self._c2p = new Proxy(self._c2p, {\n            get: (target, prop) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                if (prop === 'asCompletionParams') {\n                    return (textDocument, position, context) => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(textDocument),\n                            position,\n                            context\n                        };\n                    };\n                }\n                if (prop === 'asWillSaveTextDocumentParams') {\n                    return (event) => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(event.document),\n                            reason: event.reason\n                        };\n                    };\n                }\n                if (prop.endsWith('Params')) {\n                    return target[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n    }\n    doCreateConnection() {\n        const errorHandler = this.handleConnectionError.bind(this);\n        const closeHandler = this.handleConnectionClosed.bind(this);\n        return this.connectionProvider.get(errorHandler, closeHandler, this.outputChannel);\n    }\n    createMessageTransports(encoding) {\n        throw new Error('Unsupported');\n    }\n    registerBuiltinFeatures() {\n        super.registerBuiltinFeatures();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\n        const foldingRangeFeature = new foldingRange_1.FoldingRangeFeature(this);\n        foldingRangeFeature['asFoldingRanges'] = MonacoLanguageClient.bypassConversion;\n        this.registerFeature(foldingRangeFeature);\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        const features = this['_features'];\n        for (const feature of features) {\n            if (feature instanceof colorProvider_1.ColorProviderFeature) {\n                feature['asColor'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorInformations'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorPresentations'] = MonacoLanguageClient.bypassConversion;\n            }\n        }\n    }\n}\nexports.MonacoLanguageClient = MonacoLanguageClient;\nMonacoLanguageClient.bypassConversion = (result) => result || undefined;\n//# sourceMappingURL=monaco-language-client.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode = require(\"vscode\");\nconst vscode_uri_1 = require(\"vscode-uri\");\nconst disposable_1 = require(\"./disposable\");\nconst services_1 = require(\"./services\");\nconst ServicesModule = require(\"./services\");\nfunction createVSCodeApi(servicesProvider) {\n    const unsupported = () => { throw new Error('unsupported'); };\n    const Uri = vscode_uri_1.URI;\n    class CompletionItem {\n        constructor(label, kind) {\n            this.label = label;\n            this.kind = kind;\n        }\n    }\n    class CodeLens {\n        constructor(range, command) {\n            this.range = range;\n            this.command = command;\n        }\n        get isResolved() {\n            return !!this.command;\n        }\n    }\n    class DocumentLink {\n        constructor(range, target) {\n            this.range = range;\n            this.target = target;\n        }\n    }\n    class CodeActionKind {\n        constructor(value) {\n            this.value = value;\n            this.contains = unsupported;\n            this.intersects = unsupported;\n        }\n        append(parts) {\n            return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n        }\n    }\n    CodeActionKind.sep = '.';\n    CodeActionKind.Empty = new CodeActionKind('');\n    CodeActionKind.QuickFix = new CodeActionKind('quickfix');\n    CodeActionKind.Refactor = new CodeActionKind('refactor');\n    CodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\n    CodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\n    CodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    CodeActionKind.Source = new CodeActionKind('source');\n    CodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    CodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\n    class EmptyFileSystem {\n        stat(uri) {\n            throw new Error(\"Method not implemented.\");\n        }\n        readDirectory(uri) {\n            return Promise.resolve([]);\n        }\n        createDirectory(uri) {\n            return Promise.resolve();\n        }\n        readFile(uri) {\n            return Promise.resolve(new Uint8Array(0));\n        }\n        writeFile(uri, content) {\n            return Promise.resolve();\n        }\n        delete(uri, options) {\n            return Promise.resolve();\n        }\n        rename(source, target, options) {\n            return Promise.resolve();\n        }\n        copy(source, target, options) {\n            return Promise.resolve();\n        }\n    }\n    const workspace = {\n        fs: new EmptyFileSystem(),\n        workspaceFile: undefined,\n        createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents) {\n            const services = servicesProvider();\n            if (typeof globPattern !== 'string') {\n                throw new Error('unsupported');\n            }\n            if (services.workspace.createFileSystemWatcher) {\n                const watcher = services.workspace.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n                return Object.assign(watcher, {\n                    ignoreCreateEvents: !!ignoreCreateEvents,\n                    ignoreChangeEvents: !!ignoreChangeEvents,\n                    ignoreDeleteEvents: !!ignoreDeleteEvents,\n                });\n            }\n            return {\n                ignoreCreateEvents: !!ignoreCreateEvents,\n                ignoreChangeEvents: !!ignoreChangeEvents,\n                ignoreDeleteEvents: !!ignoreDeleteEvents,\n                onDidCreate: services_1.Event.None,\n                onDidChange: services_1.Event.None,\n                onDidDelete: services_1.Event.None,\n                dispose: () => { }\n            };\n        },\n        applyEdit: (edit) => __awaiter(this, void 0, void 0, function* () {\n            const services = servicesProvider();\n            if (services_1.WorkspaceEdit.is(edit)) {\n                return services.workspace.applyEdit(edit);\n            }\n            throw new Error('unsupported');\n        }),\n        getConfiguration(section, resource) {\n            const { workspace } = servicesProvider();\n            const configuration = workspace.configurations ?\n                workspace.configurations.getConfiguration(section, resource ? resource.toString() : undefined) :\n                undefined;\n            const result = {\n                get: (section, defaultValue) => {\n                    return configuration ? configuration.get(section, defaultValue) : defaultValue;\n                },\n                has: (section) => {\n                    return configuration ? configuration.has(section) : false;\n                },\n                inspect: unsupported,\n                update: unsupported\n            };\n            return Object.assign(result, {\n                toJSON: () => configuration ? configuration.toJSON() : undefined\n            });\n        },\n        get onDidChangeConfiguration() {\n            const services = servicesProvider();\n            if (services.workspace.configurations) {\n                return services.workspace.configurations.onDidChangeConfiguration;\n            }\n            return services_1.Event.None;\n        },\n        get workspaceFolders() {\n            const services = servicesProvider();\n            if ('workspaceFolders' in services.workspace) {\n                return services.workspace.workspaceFolders;\n            }\n            const rootUri = services.workspace.rootUri;\n            if (!rootUri) {\n                return undefined;\n            }\n            const uri = Uri.parse(rootUri);\n            return [{\n                    uri,\n                    index: 0,\n                    name: uri.toString()\n                }];\n        },\n        get onDidChangeWorkspaceFolders() {\n            const services = servicesProvider();\n            return services.workspace.onDidChangeWorkspaceFolders || services_1.Event.None;\n        },\n        get textDocuments() {\n            const services = servicesProvider();\n            return services.workspace.textDocuments;\n        },\n        get onDidOpenTextDocument() {\n            const services = servicesProvider();\n            return services.workspace.onDidOpenTextDocument;\n        },\n        get onDidCloseTextDocument() {\n            const services = servicesProvider();\n            return services.workspace.onDidCloseTextDocument;\n        },\n        get onDidChangeTextDocument() {\n            const services = servicesProvider();\n            return (listener, thisArgs, disposables) => {\n                return services.workspace.onDidChangeTextDocument(({ textDocument, contentChanges }) => {\n                    const l = listener.bind(thisArgs);\n                    l({\n                        document: textDocument,\n                        contentChanges: contentChanges\n                    });\n                }, undefined, disposables);\n            };\n        },\n        get onWillSaveTextDocument() {\n            const services = servicesProvider();\n            const onWillSaveTextDocument = services.workspace.onWillSaveTextDocument;\n            if (!onWillSaveTextDocument) {\n                return services_1.Event.None;\n            }\n            return (listener, thisArgs, disposables) => {\n                return onWillSaveTextDocument(({ textDocument, reason, waitUntil }) => {\n                    const l = listener.bind(thisArgs);\n                    l({\n                        document: textDocument,\n                        reason: reason,\n                        waitUntil: (edits) => {\n                            if (waitUntil) {\n                                waitUntil(edits);\n                            }\n                        }\n                    });\n                }, undefined, disposables);\n            };\n        },\n        get onDidSaveTextDocument() {\n            const services = servicesProvider();\n            return services.workspace.onDidSaveTextDocument || services_1.Event.None;\n        },\n        get onWillCreateFiles() {\n            return services_1.Event.None;\n        },\n        get onDidCreateFiles() {\n            return services_1.Event.None;\n        },\n        get onWillDeleteFiles() {\n            return services_1.Event.None;\n        },\n        get onDidDeleteFiles() {\n            return services_1.Event.None;\n        },\n        get onWillRenameFiles() {\n            return services_1.Event.None;\n        },\n        get onDidRenameFiles() {\n            return services_1.Event.None;\n        },\n        getWorkspaceFolder: unsupported,\n        asRelativePath: unsupported,\n        updateWorkspaceFolders: unsupported,\n        findFiles: unsupported,\n        saveAll: unsupported,\n        openTextDocument: unsupported,\n        registerTextDocumentContentProvider: unsupported,\n        registerTaskProvider: unsupported,\n        registerFileSystemProvider: unsupported,\n        rootPath: undefined,\n        name: undefined\n    };\n    function isVsCodeUri(v) {\n        return (v instanceof vscode_uri_1.URI) !== undefined;\n    }\n    class ApiDiagnosticCollection {\n        constructor(name) {\n            this.name = name || 'default',\n                this.services = servicesProvider();\n            this.collection = this.services.languages.createDiagnosticCollection\n                ? this.services.languages.createDiagnosticCollection(name)\n                : undefined;\n        }\n        entries() {\n        }\n        set(arg0, arg1) {\n            function toInternalSeverity(severity) {\n                // there is a typing mismatch, trying to use the proper switch\n                // mixes error with warnings etc...\n                // just cast for now, this as the correct behaviour\n                return severity;\n                // we don't want to rely on the runtime vscode module here, so we use our version\n                // of the enum\n                /*\n                switch ((severity as unknown) as VsCodeDiagnosticSeverity)\n                {\n                    case VsCodeDiagnosticSeverity.Warning:\n                        return DiagnosticSeverity.Warning;\n                    case VsCodeDiagnosticSeverity.Information:\n                        return DiagnosticSeverity.Information;\n                    case VsCodeDiagnosticSeverity.Hint:\n                        return DiagnosticSeverity.Hint;\n                    case VsCodeDiagnosticSeverity.Error:\n                        return DiagnosticSeverity.Error;\n                }\n                return DiagnosticSeverity.Error;\n                // */\n            }\n            if (isVsCodeUri(arg0)) {\n                if (this.collection) {\n                    if (arg1) {\n                        this.collection.set(arg0.toString(), arg1.map(diag => {\n                            return {\n                                range: diag.range,\n                                code: diag.code,\n                                source: diag.source,\n                                message: diag.message,\n                                tags: diag.tags,\n                                relatedInformation: undefined,\n                                severity: toInternalSeverity(diag.severity)\n                            };\n                        }));\n                    }\n                    else {\n                        this.collection.set(arg0.toString(), []);\n                    }\n                }\n            }\n            else {\n                arg0.forEach(element => {\n                    this.set(element[0], element[1]);\n                });\n            }\n        }\n        dispose() {\n            if (this.collection) {\n                this.collection.dispose();\n            }\n        }\n        delete(uri) { }\n        clear() { }\n        forEach(callback, thisArg) { }\n        get(uri) { return undefined; }\n        has(uri) { return false; }\n    }\n    const languages = {\n        match(selector, document) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            if (!services_1.DocumentIdentifier.is(document)) {\n                throw new Error('unexpected document: ' + JSON.stringify(document));\n            }\n            const services = servicesProvider();\n            const result = services.languages.match(selector, document);\n            return result ? 1 : 0;\n        },\n        registerCallHierarchyProvider(selector, provider) {\n            /* empty stub for now */\n            return {\n                dispose() {\n                }\n            };\n        },\n        createDiagnosticCollection(name) {\n            return new ApiDiagnosticCollection(name);\n        },\n        registerCompletionItemProvider(selector, provider, ...triggerCharacters) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCompletionItemProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            const resolveCompletionItem = provider.resolveCompletionItem;\n            return languages.registerCompletionItemProvider(selector, {\n                provideCompletionItems({ textDocument, position, context }, token) {\n                    return provider.provideCompletionItems(textDocument, position, token, context || {\n                        triggerKind: services_1.CompletionTriggerKind.Invoked\n                    });\n                },\n                resolveCompletionItem: resolveCompletionItem ? (item, token) => {\n                    return resolveCompletionItem(item, token);\n                } : undefined\n            }, ...triggerCharacters);\n        },\n        registerCodeActionsProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCodeActionsProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerCodeActionsProvider(selector, {\n                provideCodeActions({ textDocument, range, context }, token) {\n                    return provider.provideCodeActions(textDocument, range, context, token);\n                }\n            });\n        },\n        registerCodeLensProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCodeLensProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            const resolveCodeLens = provider.resolveCodeLens;\n            return languages.registerCodeLensProvider(selector, {\n                provideCodeLenses({ textDocument }, token) {\n                    return provider.provideCodeLenses(textDocument, token);\n                },\n                resolveCodeLens: resolveCodeLens ? (codeLens, token) => {\n                    return resolveCodeLens(codeLens, token);\n                } : undefined\n            });\n        },\n        registerDefinitionProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDefinitionProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDefinitionProvider(selector, {\n                provideDefinition({ textDocument, position }, token) {\n                    return provider.provideDefinition(textDocument, position, token);\n                }\n            });\n        },\n        registerImplementationProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerImplementationProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerImplementationProvider(selector, {\n                provideImplementation({ textDocument, position }, token) {\n                    return provider.provideImplementation(textDocument, position, token);\n                }\n            });\n        },\n        registerTypeDefinitionProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerTypeDefinitionProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerTypeDefinitionProvider(selector, {\n                provideTypeDefinition({ textDocument, position }, token) {\n                    return provider.provideTypeDefinition(textDocument, position, token);\n                }\n            });\n        },\n        registerDeclarationProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDeclarationProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDeclarationProvider(selector, {\n                provideDeclaration({ textDocument, position }, token) {\n                    return provider.provideDeclaration(textDocument, position, token);\n                }\n            });\n        },\n        registerHoverProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (languages.registerHoverProvider) {\n                return languages.registerHoverProvider(selector, {\n                    provideHover({ textDocument, position }, token) {\n                        return provider.provideHover(textDocument, position, token);\n                    }\n                });\n            }\n            return disposable_1.Disposable.create(() => { });\n        },\n        registerDocumentHighlightProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentHighlightProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDocumentHighlightProvider(selector, {\n                provideDocumentHighlights({ textDocument, position }, token) {\n                    return provider.provideDocumentHighlights(textDocument, position, token);\n                }\n            });\n        },\n        registerDocumentSymbolProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentSymbolProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDocumentSymbolProvider(selector, {\n                provideDocumentSymbols({ textDocument }, token) {\n                    return provider.provideDocumentSymbols(textDocument, token);\n                }\n            });\n        },\n        registerWorkspaceSymbolProvider(provider) {\n            const { languages } = servicesProvider();\n            if (!languages.registerWorkspaceSymbolProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerWorkspaceSymbolProvider({\n                provideWorkspaceSymbols({ query }, token) {\n                    return provider.provideWorkspaceSymbols(query, token);\n                }\n            });\n        },\n        registerReferenceProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerReferenceProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerReferenceProvider(selector, {\n                provideReferences({ textDocument, position, context }, token) {\n                    return provider.provideReferences(textDocument, position, context, token);\n                }\n            });\n        },\n        registerRenameProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerRenameProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerRenameProvider(selector, {\n                provideRenameEdits({ textDocument, position, newName }, token) {\n                    return provider.provideRenameEdits(textDocument, position, newName, token);\n                }\n            });\n        },\n        registerDocumentFormattingEditProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentFormattingEditProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDocumentFormattingEditProvider(selector, {\n                provideDocumentFormattingEdits({ textDocument, options }, token) {\n                    return provider.provideDocumentFormattingEdits(textDocument, options, token);\n                }\n            });\n        },\n        registerDocumentRangeFormattingEditProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentRangeFormattingEditProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerDocumentRangeFormattingEditProvider(selector, {\n                provideDocumentRangeFormattingEdits({ textDocument, range, options }, token) {\n                    return provider.provideDocumentRangeFormattingEdits(textDocument, range, options, token);\n                }\n            });\n        },\n        registerOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerOnTypeFormattingEditProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerOnTypeFormattingEditProvider(selector, {\n                provideOnTypeFormattingEdits({ textDocument, position, ch, options }, token) {\n                    return provider.provideOnTypeFormattingEdits(textDocument, position, ch, options, token);\n                }\n            }, firstTriggerCharacter, ...moreTriggerCharacter);\n        },\n        registerSignatureHelpProvider(selector, provider, firstItem, ...remaining) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerSignatureHelpProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            let triggerCharacters;\n            let retriggerCharacters;\n            if (typeof firstItem === 'string') {\n                triggerCharacters = [firstItem, ...remaining];\n            }\n            else if (firstItem) {\n                triggerCharacters = firstItem.triggerCharacters;\n                retriggerCharacters = firstItem.retriggerCharacters;\n            }\n            return languages.registerSignatureHelpProvider(selector, {\n                triggerCharacters,\n                retriggerCharacters,\n                provideSignatureHelp({ textDocument, position }, token, context) {\n                    return provider.provideSignatureHelp(textDocument, position, token, context);\n                }\n            });\n        },\n        registerDocumentLinkProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentLinkProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            const resolveDocumentLink = provider.resolveDocumentLink;\n            return languages.registerDocumentLinkProvider(selector, {\n                provideDocumentLinks({ textDocument }, token) {\n                    return provider.provideDocumentLinks(textDocument, token);\n                },\n                resolveDocumentLink: resolveDocumentLink ? (link, token) => {\n                    return resolveDocumentLink(link, token);\n                } : undefined\n            });\n        },\n        registerColorProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerColorProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerColorProvider(selector, {\n                provideDocumentColors({ textDocument }, token) {\n                    return provider.provideDocumentColors(textDocument, token);\n                },\n                provideColorPresentations({ textDocument, color, range }, token) {\n                    return provider.provideColorPresentations(color, {\n                        document: textDocument,\n                        range: range\n                    }, token);\n                }\n            });\n        },\n        registerFoldingRangeProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerFoldingRangeProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerFoldingRangeProvider(selector, {\n                provideFoldingRanges({ textDocument }, token) {\n                    return provider.provideFoldingRanges(textDocument, {}, token);\n                }\n            });\n        },\n        registerSelectionRangeProvider(selector, provider) {\n            if (!services_1.isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerSelectionRangeProvider) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return languages.registerSelectionRangeProvider(selector, {\n                provideSelectionRanges({ textDocument, positions }, token) {\n                    return provider.provideSelectionRanges(textDocument, positions, token);\n                }\n            });\n        },\n        getLanguages: unsupported,\n        setTextDocumentLanguage: unsupported,\n        getDiagnostics: unsupported,\n        setLanguageConfiguration: unsupported,\n        onDidChangeDiagnostics: unsupported\n    };\n    function showMessage(type, arg0, ...arg1) {\n        if (typeof arg0 !== \"string\") {\n            throw new Error('unexpected message: ' + JSON.stringify(arg0));\n        }\n        const message = arg0;\n        if (arg1 !== undefined && !Array.isArray(arg1)) {\n            throw new Error('unexpected actions: ' + JSON.stringify(arg1));\n        }\n        const actions = arg1 || [];\n        const { window } = servicesProvider();\n        if (!window) {\n            return Promise.resolve(undefined);\n        }\n        return window.showMessage(type, message, ...actions);\n    }\n    const window = {\n        showInformationMessage: showMessage.bind(undefined, services_1.MessageType.Info),\n        showWarningMessage: showMessage.bind(undefined, services_1.MessageType.Warning),\n        showErrorMessage: showMessage.bind(undefined, services_1.MessageType.Error),\n        createOutputChannel(name) {\n            const { window } = servicesProvider();\n            const createOutputChannel = window ? window.createOutputChannel : undefined;\n            const channel = createOutputChannel ? createOutputChannel.bind(window)(name) : undefined;\n            return {\n                name,\n                append: channel ? channel.append.bind(channel) : () => { },\n                appendLine: channel ? channel.appendLine.bind(channel) : () => { },\n                clear: unsupported,\n                show: (arg) => {\n                    if (arg !== undefined && typeof arg !== 'boolean') {\n                        throw new Error('unexpected preserveFocus argument: ' + JSON.stringify(arg, undefined, 4));\n                    }\n                    return channel ? channel.show(arg) : () => { };\n                },\n                hide: unsupported,\n                dispose: channel ? channel.dispose.bind(channel) : () => { }\n            };\n        },\n        withProgress: (options, task) => {\n            const { window } = servicesProvider();\n            if (window && window.withProgress) {\n                return window.withProgress(options, task);\n            }\n            return task({ report: () => { } }, new vscode.CancellationTokenSource().token);\n        },\n        showTextDocument: unsupported,\n        createTextEditorDecorationType: unsupported,\n        showQuickPick: unsupported,\n        showWorkspaceFolderPick: unsupported,\n        showOpenDialog: unsupported,\n        showSaveDialog: unsupported,\n        showInputBox: unsupported,\n        createWebviewPanel: unsupported,\n        setStatusBarMessage: unsupported,\n        withScmProgress: unsupported,\n        createStatusBarItem: unsupported,\n        createTerminal: unsupported,\n        registerTreeDataProvider: unsupported,\n        createTreeView: unsupported,\n        registerWebviewPanelSerializer: unsupported,\n        get activeTextEditor() {\n            return unsupported();\n        },\n        get visibleTextEditors() {\n            return unsupported();\n        },\n        onDidChangeActiveTextEditor: unsupported,\n        onDidChangeVisibleTextEditors: unsupported,\n        onDidChangeTextEditorSelection: unsupported,\n        onDidChangeTextEditorVisibleRanges: unsupported,\n        onDidChangeTextEditorOptions: unsupported,\n        onDidChangeTextEditorViewColumn: unsupported,\n        get terminals() {\n            return unsupported();\n        },\n        get activeTerminal() {\n            return unsupported();\n        },\n        onDidChangeActiveTerminal: unsupported,\n        onDidOpenTerminal: unsupported,\n        onDidCloseTerminal: unsupported,\n        get state() {\n            return unsupported();\n        },\n        onDidChangeWindowState: unsupported,\n        createQuickPick: unsupported,\n        createInputBox: unsupported,\n        registerUriHandler: unsupported\n    };\n    const commands = {\n        registerCommand(command, callback, thisArg) {\n            const { commands } = servicesProvider();\n            if (!commands) {\n                return disposable_1.Disposable.create(() => { });\n            }\n            return commands.registerCommand(command, callback, thisArg);\n        },\n        registerTextEditorCommand: unsupported,\n        executeCommand: unsupported,\n        getCommands: unsupported\n    };\n    class CodeDisposable {\n        constructor(callOnDispose) {\n            this.callOnDispose = callOnDispose;\n        }\n        dispose() {\n            this.callOnDispose();\n        }\n    }\n    return {\n        workspace,\n        languages,\n        window,\n        commands,\n        Uri,\n        CompletionItem,\n        CodeLens,\n        DocumentLink,\n        CodeActionKind,\n        Disposable: CodeDisposable,\n        SignatureHelpTriggerKind: services_1.SignatureHelpTriggerKind,\n        DiagnosticSeverity: ServicesModule.DiagnosticSeverity\n    };\n}\nexports.createVSCodeApi = createVSCodeApi;\n//# sourceMappingURL=vscode-api.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asCompletionTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asSignatureHelpTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.SignatureHelpTriggerKind.Invoke:\r\n                return proto.SignatureHelpTriggerKind.Invoked;\r\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\r\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\r\n            case code.SignatureHelpTriggerKind.ContentChange:\r\n                return proto.SignatureHelpTriggerKind.ContentChange;\r\n        }\r\n    }\r\n    function asParameterInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label\r\n        };\r\n    }\r\n    function asParameterInformations(values) {\r\n        return values.map(asParameterInformation);\r\n    }\r\n    function asSignatureInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label,\r\n            parameters: asParameterInformations(value.parameters)\r\n        };\r\n    }\r\n    function asSignatureInformations(values) {\r\n        return values.map(asSignatureInformation);\r\n    }\r\n    function asSignatureHelp(value) {\r\n        if (value === undefined) {\r\n            return value;\r\n        }\r\n        return {\r\n            signatures: asSignatureInformations(value.signatures),\r\n            activeSignature: value.activeSignature,\r\n            activeParameter: value.activeParameter\r\n        };\r\n    }\r\n    function asSignatureHelpParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                isRetrigger: context.isRetrigger,\r\n                triggerCharacter: context.triggerCharacter,\r\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\r\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function isInsertReplace(value) {\r\n        const candidate = value;\r\n        return candidate && !!candidate.inserting && !!candidate.replacing;\r\n    }\r\n    function asRange(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        // The LSP has no support yet for insert replace. So this can never happen.\r\n        if (isInsertReplace(value)) {\r\n            throw new Error(`Receving unknown insert replace range.`);\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asLocation(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asRelatedInformation(item) {\r\n        return {\r\n            message: item.message,\r\n            location: asLocation(item.location)\r\n        };\r\n    }\r\n    function asRelatedInformations(items) {\r\n        return items.map(asRelatedInformation);\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        if (item.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === undefined || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case code.CompletionItemTag.Deprecated:\r\n                return proto.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined) {\r\n            return tags;\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== undefined) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        const tags = asCompletionItemTags(item.tags);\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== undefined) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\r\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\r\n                    if (index !== -1) {\r\n                        tags.splice(index, 1);\r\n                    }\r\n                }\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        if (tags !== undefined && tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text = undefined;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text !== undefined && range !== undefined) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === undefined || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= code.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return (item + 1);\r\n        }\r\n        return proto.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(item) {\r\n        return item;\r\n    }\r\n    function asSymbolTags(items) {\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === undefined || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        if (item.tooltip !== undefined) {\r\n            result.tooltip = item.tooltip;\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asSignatureHelpParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asLocation,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asRanges(value) {\r\n        return value.map(value => asRange(value));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === undefined || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case ls.CompletionItemTag.Deprecated:\r\n                return code.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined || tags === null) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let tags = asCompletionItemTags(item.tags);\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n            if (item.deprecated === true) {\r\n                tags.push(code.CompletionItemTag.Deprecated);\r\n            }\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== undefined) {\r\n            result.data = item.data;\r\n        }\r\n        if (tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(value) {\r\n        return value;\r\n    }\r\n    function asSymbolTags(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === undefined || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== undefined && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== undefined) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.isPreferred !== undefined) {\r\n            result.isPreferred = item.isPreferred;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.tooltip !== undefined) {\r\n            link.tooltip = item.tooltip;\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asRanges,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'end':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        });\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideTypeDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideImplementation: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideImplementation = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideColorPresentations: (color, context, token) => {\r\n                const client = this._client;\r\n                const provideColorPresentations = (color, context, token) => {\r\n                    const requestParams = {\r\n                        color,\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                        range: client.code2ProtocolConverter.asRange(context.range)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentColors = (document, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nfunction arrayDiff(left, right) {\r\n    return left.filter(element => right.indexOf(element) < 0);\r\n}\r\nexports.arrayDiff = arrayDiff;\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        this.initializeWithFolders(folders);\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    initializeWithFolders(currentWorkspaceFolders) {\r\n        this._initialFolders = currentWorkspaceFolders;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    sendInitialEvent(currentWorkspaceFolders) {\r\n        if (this._initialFolders && currentWorkspaceFolders) {\r\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\r\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\r\n            if (added.length > 0 || removed.length > 0) {\r\n                this.doSendEvent(added, removed);\r\n            }\r\n        }\r\n        else if (this._initialFolders) {\r\n            this.doSendEvent([], this._initialFolders);\r\n        }\r\n        else if (currentWorkspaceFolders) {\r\n            this.doSendEvent(currentWorkspaceFolders, []);\r\n        }\r\n    }\r\n    doSendEvent(addedFolders, removedFolders) {\r\n        let params = {\r\n            event: {\r\n                added: addedFolders.map(folder => this.asProtocol(folder)),\r\n                removed: removedFolders.map(folder => this.asProtocol(folder))\r\n            }\r\n        };\r\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                this.doSendEvent(event.added, event.removed);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideFoldingRanges: (document, context, token) => {\r\n                const client = this._client;\r\n                const provideFoldingRanges = (document, _, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDeclaration: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDeclaration = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","module.exports = function (glob, opts) {\n  if (typeof glob !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  var str = String(glob);\n\n  // The regexp we are building, as a string.\n  var reStr = \"\";\n\n  // Whether we are matching so called \"extended\" globs (like bash) and should\n  // support single character matching, matching ranges of characters, group\n  // matching, etc.\n  var extended = opts ? !!opts.extended : false;\n\n  // When globstar is _false_ (default), '/foo/*' is translated a regexp like\n  // '^\\/foo\\/.*$' which will match any string beginning with '/foo/'\n  // When globstar is _true_, '/foo/*' is translated to regexp like\n  // '^\\/foo\\/[^/]*$' which will match any string beginning with '/foo/' BUT\n  // which does not have a '/' to the right of it.\n  // E.g. with '/foo/*' these will match: '/foo/bar', '/foo/bar.txt' but\n  // these will not '/foo/bar/baz', '/foo/bar/baz.txt'\n  // Lastely, when globstar is _true_, '/foo/**' is equivelant to '/foo/*' when\n  // globstar is _false_\n  var globstar = opts ? !!opts.globstar : false;\n\n  // If we are doing extended matching, this boolean is true when we are inside\n  // a group (eg {*.html,*.js}), and false otherwise.\n  var inGroup = false;\n\n  // RegExp flags (eg \"i\" ) to pass in to RegExp constructor.\n  var flags = opts && typeof( opts.flags ) === \"string\" ? opts.flags : \"\";\n\n  var c;\n  for (var i = 0, len = str.length; i < len; i++) {\n    c = str[i];\n\n    switch (c) {\n    case \"\\\\\":\n    case \"/\":\n    case \"$\":\n    case \"^\":\n    case \"+\":\n    case \".\":\n    case \"(\":\n    case \")\":\n    case \"=\":\n    case \"!\":\n    case \"|\":\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"?\":\n      if (extended) {\n        reStr += \".\";\n\t    break;\n      }\n\n    case \"[\":\n    case \"]\":\n      if (extended) {\n        reStr += c;\n\t    break;\n      }\n\n    case \"{\":\n      if (extended) {\n        inGroup = true;\n\t    reStr += \"(\";\n\t    break;\n      }\n\n    case \"}\":\n      if (extended) {\n        inGroup = false;\n\t    reStr += \")\";\n\t    break;\n      }\n\n    case \",\":\n      if (inGroup) {\n        reStr += \"|\";\n\t    break;\n      }\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"*\":\n      // Move over all consecutive \"*\"'s.\n      // Also store the previous and next characters\n      var prevChar = str[i - 1];\n      var starCount = 1;\n      while(str[i + 1] === \"*\") {\n        starCount++;\n        i++;\n      }\n      var nextChar = str[i + 1];\n\n      if (!globstar) {\n        // globstar is disabled, so treat any number of \"*\" as one\n        reStr += \".*\";\n      } else {\n        // globstar is enabled, so determine if this is a globstar segment\n        var isGlobstar = starCount > 1                      // multiple \"*\"'s\n          && (prevChar === \"/\" || prevChar === undefined)   // from the start of the segment\n          && (nextChar === \"/\" || nextChar === undefined)   // to the end of the segment\n\n        if (isGlobstar) {\n          // it's a globstar, so match zero or more path segments\n          reStr += \"(?:[^/]*(?:\\/|$))*\";\n          i++; // move over the \"/\"\n        } else {\n          // it's not a globstar, so only match one path segment\n          reStr += \"[^/]*\";\n        }\n      }\n      break;\n\n    default:\n      reStr += c;\n    }\n  }\n\n  // When regexp 'g' flag is specified don't\n  // constrain the regular expression with ^ & $\n  if (!flags || !~flags.indexOf('g')) {\n    reStr = \"^\" + reStr + \"$\";\n  }\n\n  return new RegExp(reStr, flags);\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst disposable_1 = require(\"./disposable\");\nclass MonacoDiagnosticCollection {\n    constructor(name, p2m) {\n        this.name = name;\n        this.p2m = p2m;\n        this.diagnostics = new Map();\n        this.toDispose = new disposable_1.DisposableCollection();\n    }\n    dispose() {\n        this.toDispose.dispose();\n    }\n    get(uri) {\n        const diagnostics = this.diagnostics.get(uri);\n        return !!diagnostics ? diagnostics.diagnostics : [];\n    }\n    set(uri, diagnostics) {\n        const existing = this.diagnostics.get(uri);\n        if (existing) {\n            existing.diagnostics = diagnostics;\n        }\n        else {\n            const modelDiagnostics = new MonacoModelDiagnostics(uri, diagnostics, this.name, this.p2m);\n            this.diagnostics.set(uri, modelDiagnostics);\n            this.toDispose.push(disposable_1.Disposable.create(() => {\n                this.diagnostics.delete(uri);\n                modelDiagnostics.dispose();\n            }));\n        }\n    }\n}\nexports.MonacoDiagnosticCollection = MonacoDiagnosticCollection;\nclass MonacoModelDiagnostics {\n    constructor(uri, diagnostics, owner, p2m) {\n        this.owner = owner;\n        this.p2m = p2m;\n        this._markers = [];\n        this._diagnostics = [];\n        this.uri = monaco.Uri.parse(uri);\n        this.diagnostics = diagnostics;\n        monaco.editor.onDidCreateModel(model => this.doUpdateModelMarkers(model));\n    }\n    set diagnostics(diagnostics) {\n        this._diagnostics = diagnostics;\n        this._markers = this.p2m.asDiagnostics(diagnostics);\n        this.updateModelMarkers();\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    get markers() {\n        return this._markers;\n    }\n    dispose() {\n        this._markers = [];\n        this.updateModelMarkers();\n    }\n    updateModelMarkers() {\n        const model = monaco.editor.getModel(this.uri);\n        this.doUpdateModelMarkers(model ? model : undefined);\n    }\n    doUpdateModelMarkers(model) {\n        if (model && this.uri.toString() === model.uri.toString()) {\n            monaco.editor.setModelMarkers(model, this.owner, this._markers);\n        }\n    }\n}\nexports.MonacoModelDiagnostics = MonacoModelDiagnostics;\n//# sourceMappingURL=monaco-diagnostic-collection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst monaco_converter_1 = require(\"./monaco-converter\");\nconst monaco_commands_1 = require(\"./monaco-commands\");\nconst monaco_languages_1 = require(\"./monaco-languages\");\nconst monaco_workspace_1 = require(\"./monaco-workspace\");\nconst console_window_1 = require(\"./console-window\");\nconst services_1 = require(\"./services\");\nvar MonacoServices;\n(function (MonacoServices) {\n    function create(editor, options = {}) {\n        const m2p = new monaco_converter_1.MonacoToProtocolConverter();\n        const p2m = new monaco_converter_1.ProtocolToMonacoConverter();\n        return {\n            commands: new monaco_commands_1.MonacoCommands(editor),\n            languages: new monaco_languages_1.MonacoLanguages(p2m, m2p),\n            workspace: new monaco_workspace_1.MonacoWorkspace(p2m, m2p, options.rootUri),\n            window: new console_window_1.ConsoleWindow()\n        };\n    }\n    MonacoServices.create = create;\n    function install(editor, options = {}) {\n        const services = create(editor, options);\n        services_1.Services.install(services);\n        return services;\n    }\n    MonacoServices.install = install;\n    function get() {\n        return services_1.Services.get();\n    }\n    MonacoServices.get = get;\n})(MonacoServices = exports.MonacoServices || (exports.MonacoServices = {}));\n//# sourceMappingURL=monaco-services.js.map"],"sourceRoot":""}