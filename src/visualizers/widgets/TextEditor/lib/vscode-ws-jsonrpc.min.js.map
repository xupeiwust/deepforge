{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/vscode-jsonrpc/lib/main.js","webpack:///./node_modules/vscode-jsonrpc/lib/is.js","webpack:///./node_modules/vscode-jsonrpc/lib/events.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///./node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/vscode-jsonrpc/lib/messages.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///./node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///./node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///./node_modules/path-browserify/index.js","webpack:///./node_modules/os-browserify/browser.js","webpack:///./node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/index.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/socket/index.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/socket/reader.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/socket/writer.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/logger.js","webpack:///./src/visualizers/widgets/MonacoEditor/monaco-languageclientbrowser/src/vscode-ws-jsonrpc.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/disposable.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/socket/connection.js","webpack:///./node_modules/vscode-ws-jsonrpc/lib/connection.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__export","Is","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","events_1","Disposable","Event","Emitter","cancellation_1","CancellationTokenSource","CancellationToken","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","type","ProgressType","NullLogger","freeze","error","warn","info","log","fromString","string","Off","toLowerCase","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","code","message","super","this","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","timer","tracer","starRequestHandler","undefined","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","Map","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","queue","isRequestMessage","set","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","shift","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","data","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","length","push","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","onProgress","_type","has","dispose","sendProgress","onUnhandledProgress","event","sendRequest","throwIfNotListening","is","last","slice","map","Promise","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","onUnhandledNotification","onDispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","console","verbose","ConnectionStrategy","candidate","createMessageConnection","input","output","read","end","isMessageWriter","Array","isArray","Number","stringArray","every","elem","_disposable","None","CallbackList","context","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","args","ret","callbacks","contexts","apply","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","arguments","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","CR","Buffer","from","LF","MessageBuffer","encoding","index","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","Math","ceil","current","split","header","indexOf","substr","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","fireError","fireClose","append","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","parse","firePartialMessage","waitingTime","eventEmitter","socket","AbstractMessageWriter","count","writable","errorCount","join","sending","doWriteMessage","send","destroy","handleError","g","Function","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","TypeError","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","isEncoding","actual","obj","isBuffer","checked","val","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","start","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","x","y","list","pos","swap16","swap32","swap64","equals","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","replace","stringtrim","base64clean","src","dst","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","_","self","Timeout","clearFn","_id","_clearFn","scope","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","handle","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","createElement","documentElement","script","onreadystatechange","removeChild","appendChild","random","addEventListener","attachEvent","task","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","LN2","isCancellationRequested","Cancelled","shortcutEvent","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","clear","touch","next","previous","addItemLast","addItemFirst","removeItem","callbackfn","thisArg","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","platform","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","onConnected","createServerPipeTransport","createConnection","normalizeArray","allowAboveRoot","up","unshift","filter","xs","f","resolvedPath","resolvedAbsolute","path","charAt","normalize","isAbsolute","trailingSlash","paths","relative","to","fromParts","toParts","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","matchedSlash","basename","extname","startDot","startPart","preDotState","endianness","hostname","location","loadavg","uptime","freemem","MAX_VALUE","totalmem","cpus","release","navigator","appVersion","networkInterfaces","getNetworkInterfaces","arch","tmpDir","EOL","homedir","createClientSocketTransport","port","createServerSocketTransport","WebSocketMessageReader","events","onMessage","readMessage","reason","pop","WebSocketMessageWriter","content","ConsoleLogger","debug","DisposableCollection","disposable","vscode_jsonrpc_1","reader_1","writer_1","createWebSocketConnection","socket_1","logger_1","toSocket","webSocket","cb","onerror","onclose","options","onConnection","onopen"],"mappings":"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","file":"vscode-ws-jsonrpc.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 44);\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n__export(require(\"vscode-jsonrpc\"));\n__export(require(\"vscode-jsonrpc/lib/messages\"));\n__export(require(\"./disposable\"));\n__export(require(\"./socket\"));\n__export(require(\"./logger\"));\n__export(require(\"./connection\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./reader\"));\n__export(require(\"./writer\"));\n__export(require(\"./connection\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messageReader_1 = require(\"vscode-jsonrpc/lib/messageReader\");\nclass WebSocketMessageReader extends messageReader_1.AbstractMessageReader {\n    constructor(socket) {\n        super();\n        this.socket = socket;\n        this.state = 'initial';\n        this.events = [];\n        this.socket.onMessage(message => this.readMessage(message));\n        this.socket.onError(error => this.fireError(error));\n        this.socket.onClose((code, reason) => {\n            if (code !== 1000) {\n                const error = {\n                    name: '' + code,\n                    message: `Error during socket reconnect: code = ${code}, reason = ${reason}`\n                };\n                this.fireError(error);\n            }\n            this.fireClose();\n        });\n    }\n    listen(callback) {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop();\n                if (event.message) {\n                    this.readMessage(event.message);\n                }\n                else if (event.error) {\n                    this.fireError(event.error);\n                }\n                else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n    readMessage(message) {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        }\n        else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback(data);\n        }\n    }\n    fireError(error) {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        }\n        else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n    fireClose() {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        }\n        else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\nexports.WebSocketMessageReader = WebSocketMessageReader;\n//# sourceMappingURL=reader.js.map","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst messageWriter_1 = require(\"vscode-jsonrpc/lib/messageWriter\");\nclass WebSocketMessageWriter extends messageWriter_1.AbstractMessageWriter {\n    constructor(socket) {\n        super();\n        this.socket = socket;\n        this.errorCount = 0;\n    }\n    write(msg) {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        }\n        catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n}\nexports.WebSocketMessageWriter = WebSocketMessageWriter;\n//# sourceMappingURL=writer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ConsoleLogger {\n    error(message) {\n        console.error(message);\n    }\n    warn(message) {\n        console.warn(message);\n    }\n    info(message) {\n        console.info(message);\n    }\n    log(message) {\n        console.log(message);\n    }\n    debug(message) {\n        console.debug(message);\n    }\n}\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logger.js.map","export * from 'vscode-ws-jsonrpc';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst events_1 = require(\"vscode-jsonrpc/lib/events\");\nexports.Disposable = events_1.Disposable;\nclass DisposableCollection {\n    constructor() {\n        this.disposables = [];\n    }\n    dispose() {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop().dispose();\n        }\n    }\n    push(disposable) {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose() {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    }\n}\nexports.DisposableCollection = DisposableCollection;\n//# sourceMappingURL=disposable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst reader_1 = require(\"./reader\");\nconst writer_1 = require(\"./writer\");\nfunction createWebSocketConnection(socket, logger) {\n    const messageReader = new reader_1.WebSocketMessageReader(socket);\n    const messageWriter = new writer_1.WebSocketMessageWriter(socket);\n    const connection = vscode_jsonrpc_1.createMessageConnection(messageReader, messageWriter, logger);\n    connection.onClose(() => connection.dispose());\n    return connection;\n}\nexports.createWebSocketConnection = createWebSocketConnection;\n//# sourceMappingURL=connection.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst socket_1 = require(\"./socket\");\nconst logger_1 = require(\"./logger\");\nfunction listen(options) {\n    const { webSocket, onConnection } = options;\n    const logger = options.logger || new logger_1.ConsoleLogger();\n    webSocket.onopen = () => {\n        const socket = toSocket(webSocket);\n        const connection = socket_1.createWebSocketConnection(socket, logger);\n        onConnection(connection);\n    };\n}\nexports.listen = listen;\nfunction toSocket(webSocket) {\n    return {\n        send: content => webSocket.send(content),\n        onMessage: cb => webSocket.onmessage = event => cb(event.data),\n        onError: cb => webSocket.onerror = event => {\n            if ('message' in event) {\n                cb(event.message);\n            }\n        },\n        onClose: cb => webSocket.onclose = event => cb(event.code, event.reason),\n        dispose: () => webSocket.close()\n    };\n}\nexports.toSocket = toSocket;\n//# sourceMappingURL=connection.js.map"],"sourceRoot":""}